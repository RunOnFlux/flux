"use strict";(globalThis["webpackChunkflux"]=globalThis["webpackChunkflux"]||[]).push([[6961],{45873:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var a=function(){var e=this,t=e._self._c;return t("div",[t("b-card",{attrs:{title:"FluxOS - Node Details"}},[t("list-entry",{attrs:{title:"Flux owner ZelID",data:e.userconfig.zelid}}),t("list-entry",{attrs:{title:"Status",data:e.getNodeStatusResponse.nodeStatus,variant:e.getNodeStatusResponse.class}}),t("list-entry",{attrs:{title:"Static Ip ISP/Org",data:e.staticIp?"Yes":"No"}}),""!==e.getInfoResponse.message?t("list-entry",{attrs:{title:"Daemon Version",data:e.getInfoResponse.message.version.toString()}}):e._e(),""!==e.getInfoResponse.message?t("list-entry",{attrs:{title:"Protocol Version",data:e.getInfoResponse.message.protocolversion.toString()}}):e._e(),""!==e.getInfoResponse.message?t("list-entry",{attrs:{title:"Current Blockchain Height",data:e.getInfoResponse.message.blocks.toString()}}):e._e(),e.getInfoResponse.status.length>0&&""!==e.getInfoResponse.message.errors?t("list-entry",{attrs:{title:"Error",data:e.getInfoResponse.message.errors,variant:"danger"}}):e._e()],1),"none"===e.privilege?t("b-card",[t("b-card-title",[e._v("Log In")]),t("dl",{staticClass:"row"},[t("dd",{staticClass:"col-sm-4"},[t("b-card-text",{staticClass:"text-center"},[e._v(" Please log in using ")]),t("div",{staticClass:"loginRow"},[t("a",{attrs:{href:`zel:?action=sign&message=${e.loginPhrase}&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2FzelID.svg&callback=${e.callbackValue}`},on:{click:e.initiateLoginWS}},[t("img",{staticClass:"zelidLogin",attrs:{src:s(94452),alt:"Zel ID",height:"100%",width:"100%"}})]),t("a",{on:{click:e.initSSP}},[t("img",{staticClass:"sspLogin",attrs:{src:"dark"===e.skin?s(56070):s(58962),alt:"SSP",height:"100%",width:"100%"}})])]),t("div",{staticClass:"loginRow"},[t("a",{on:{click:e.initWalletConnect}},[t("img",{staticClass:"walletconnectLogin",attrs:{src:s(47622),alt:"WalletConnect",height:"100%",width:"100%"}})]),t("a",{on:{click:e.initMetamask}},[t("img",{staticClass:"metamaskLogin",attrs:{src:s(28125),alt:"Metamask",height:"100%",width:"100%"}})])])],1),t("dd",{staticClass:"col-sm-8"},[t("b-card-text",{staticClass:"text-center"},[e._v(" or sign the following message with any ZelID / SSP Wallet ID / Bitcoin / Ethereum address ")]),t("br"),t("br"),t("b-form",{staticClass:"mx-5",on:{submit:function(e){e.preventDefault()}}},[t("b-row",[t("b-col",{attrs:{cols:"12"}},[t("b-form-group",{attrs:{label:"Message","label-for":"h-message","label-cols-md":"3"}},[t("b-form-input",{attrs:{id:"h-message",placeholder:"Insert Login Phrase"},model:{value:e.loginForm.loginPhrase,callback:function(t){e.$set(e.loginForm,"loginPhrase",t)},expression:"loginForm.loginPhrase"}})],1)],1),t("b-col",{attrs:{cols:"12"}},[t("b-form-group",{attrs:{label:"Address","label-for":"h-address","label-cols-md":"3"}},[t("b-form-input",{attrs:{id:"h-address",placeholder:"Insert ZelID or Bitcoin address"},model:{value:e.loginForm.zelid,callback:function(t){e.$set(e.loginForm,"zelid",t)},expression:"loginForm.zelid"}})],1)],1),t("b-col",{attrs:{cols:"12"}},[t("b-form-group",{attrs:{label:"Signature","label-for":"h-signature","label-cols-md":"3"}},[t("b-form-input",{attrs:{id:"h-signature",placeholder:"Insert Signature"},model:{value:e.loginForm.signature,callback:function(t){e.$set(e.loginForm,"signature",t)},expression:"loginForm.signature"}})],1)],1),t("b-col",{attrs:{"offset-md":"5"}},[t("b-button",{staticClass:"mr-1",attrs:{type:"submit",variant:"primary"},on:{click:e.login}},[e._v(" Login ")])],1)],1)],1)],1)])],1):e._e()],1)},o=[],r=s(86855),n=s(64206),i=s(49379),l=s(15193),c=s(54909),u=s(50725),d=s(26253),g=s(22183),h=s(46709),p=s(20629),f=s(38511),m=s(62693),x=s(94145),w=s(34547),b=s(51748),y=s(37307),v=s(27616),P=s(34369),S=s(39055),I=s(48764)["lW"];const Z="df787edc6839c7de49d527bba9199eaa",k={projectId:Z,metadata:{name:"Flux Cloud",description:"Flux, Your Gateway to a Decentralized World",url:"https://home.runonflux.io",icons:["https://home.runonflux.io/img/logo.png"]}},R=new m.u(k),z={enableDebug:!0},O=new x.MetaMaskSDK(z);let F;const j=s(80129),C=s(58971),T={components:{BCard:r._,BCardText:n.j,BCardTitle:i._,BButton:l.T,BForm:c.e,BCol:u.l,BRow:d.T,BFormInput:g.e,BFormGroup:h.x,ListEntry:b.Z,ToastificationContent:w.Z},data(){return{getInfoResponse:{status:"",message:""},getNodeStatusResponse:{class:"text-success",status:"",data:"",nodeStatus:"Checking status..."},websocket:null,errorMessage:"",loginPhrase:"",loginForm:{zelid:"",signature:"",loginPhrase:""},staticIp:!1,signClient:null}},computed:{...(0,p.rn)("flux",["userconfig","config","privilege"]),skin(){return(0,y.Z)().skin.value},callbackValue(){const e=this.backendURL(),t=`${e}/id/verifylogin`;return encodeURI(t)}},mounted(){this.daemonGetInfo(),this.daemonWelcomeGetFluxNodeStatus(),this.getZelIdLoginPhrase(),this.getOwnerZelid(),this.getStaticIpInfo(),this.initMMSDK()},methods:{async initMMSDK(){try{await O.init(),F=O.getProvider()}catch(e){console.log(e)}},backendURL(){const{protocol:e,hostname:t,port:s}=window.location;let a="";a+=e,a+="//";const o=/[A-Za-z]/g;if(t.match(o)){const e=t.split(".");e[0]="api",a+=e.join(".")}else{if("string"===typeof t&&this.$store.commit("flux/setUserIp",t),+s>16100){const e=+s+1;this.$store.commit("flux/setFluxPort",e)}a+=t,a+=":",a+=this.config.apiPort}return C.get("backendURL")||a},async getOwnerZelid(){const e=await S.Z.getZelid(),t=e.data.data;"success"===e.data.status&&"string"===typeof t&&this.$store.commit("flux/setUserZelid",t)},async getStaticIpInfo(){const e=await S.Z.getStaticIpInfo();console.log(e),"success"===e.data.status&&(this.staticIp=e.data.data)},async daemonGetInfo(){const e=await v.Z.getInfo();this.getInfoResponse.status=e.data.status,this.getInfoResponse.message=e.data.data},async daemonWelcomeGetFluxNodeStatus(){const e=await v.Z.getFluxNodeStatus();this.getNodeStatusResponse.status=e.data.status,this.getNodeStatusResponse.data=e.data.data,this.getNodeStatusResponse.data&&("CONFIRMED"===this.getNodeStatusResponse.data.status||"CONFIRMED"===this.getNodeStatusResponse.data.location?(this.getNodeStatusResponse.nodeStatus="Flux is working correctly",this.getNodeStatusResponse.class="success"):"STARTED"===this.getNodeStatusResponse.data.status||"STARTED"===this.getNodeStatusResponse.data.location?(this.getNodeStatusResponse.nodeStatus="Flux has just been started. Flux is running with limited capabilities.",this.getNodeStatusResponse.class="warning"):(this.getNodeStatusResponse.nodeStatus="Flux is not confirmed. Flux is running with limited capabilities.",this.getNodeStatusResponse.class="danger"))},initiateLoginWS(){const e=this;let t=this.backendURL();t=t.replace("https://","wss://"),t=t.replace("http://","ws://");const s=`${t}/ws/id/${this.loginPhrase}`,a=new WebSocket(s);this.websocket=a,a.onopen=t=>{e.onOpen(t)},a.onclose=t=>{e.onClose(t)},a.onmessage=t=>{e.onMessage(t)},a.onerror=t=>{e.onError(t)}},onError(e){console.log(e)},onMessage(e){const t=j.parse(e.data);if(console.log(t),"success"===t.status&&t.data){const e={zelid:t.data.zelid,signature:t.data.signature,loginPhrase:t.data.loginPhrase};this.$store.commit("flux/setPrivilege",t.data.privilage),this.$store.commit("flux/setZelid",e.zelid),localStorage.setItem("zelidauth",j.stringify(e)),this.showToast("success",t.data.message)}console.log(t),console.log(e)},onClose(e){console.log(e)},onOpen(e){console.log(e)},showToast(e,t){this.$toast({component:w.Z,props:{title:t,icon:"BellIcon",variant:e}})},getZelIdLoginPhrase(){P.Z.loginPhrase().then((e=>{console.log(e),"error"===e.data.status?this.getEmergencyLoginPhrase():(this.loginPhrase=e.data.data,this.loginForm.loginPhrase=e.data.data)})).catch((e=>{console.log(e),this.showToast("danger",e)}))},getEmergencyLoginPhrase(){P.Z.emergencyLoginPhrase().then((e=>{console.log(e),"error"===e.data.status?this.showToast("danger",e.data.data.message):(this.loginPhrase=e.data.data,this.loginForm.loginPhrase=e.data.data)})).catch((e=>{console.log(e),this.showToast("danger",e)}))},getVariant(e){return"error"===e?"danger":"message"===e?"info":e},login(){console.log(this.loginForm),P.Z.verifyLogin(this.loginForm).then((e=>{if(console.log(e),"success"===e.data.status){const t={zelid:this.loginForm.zelid,signature:this.loginForm.signature,loginPhrase:this.loginForm.loginPhrase};this.$store.commit("flux/setPrivilege",e.data.data.privilage),this.$store.commit("flux/setZelid",t.zelid),localStorage.setItem("zelidauth",j.stringify(t)),this.showToast("success",e.data.data.message)}else this.showToast(this.getVariant(e.data.status),e.data.data.message||e.data.data)})).catch((e=>{console.log(e),this.showToast("danger",e.toString())}))},async onSessionConnect(e){console.log(e);const t=await this.signClient.request({topic:e.topic,chainId:"eip155:1",request:{method:"personal_sign",params:[this.loginPhrase,e.namespaces.eip155.accounts[0].split(":")[2]]}});console.log(t);const s={zelid:e.namespaces.eip155.accounts[0].split(":")[2],signature:t,loginPhrase:this.loginPhrase},a=await P.Z.verifyLogin(s);if(console.log(a),"success"===a.data.status){const e=s;this.$store.commit("flux/setPrivilege",a.data.data.privilage),this.$store.commit("flux/setZelid",e.zelid),localStorage.setItem("zelidauth",j.stringify(e)),this.showToast("success",a.data.data.message)}else this.showToast(this.getVariant(a.data.status),a.data.data.message||a.data.data)},onSessionUpdate(e){console.log(e)},async initWalletConnect(){const e=this;try{const t=await f.ZP.init(k);this.signClient=t,t.on("session_event",(({event:e})=>{console.log(e)})),t.on("session_update",(({topic:s,params:a})=>{const{namespaces:o}=a,r=t.session.get(s),n={...r,namespaces:o};e.onSessionUpdate(n)})),t.on("session_delete",(()=>{}));const{uri:s,approval:a}=await t.connect({requiredNamespaces:{eip155:{methods:["personal_sign"],chains:["eip155:1"],events:["chainChanged","accountsChanged"]}}});if(s){R.openModal({uri:s});const e=await a();this.onSessionConnect(e),R.closeModal()}}catch(t){console.error(t),this.showToast("danger",t.message)}},async siwe(e,t){try{const s=`0x${I.from(e,"utf8").toString("hex")}`,a=await F.request({method:"personal_sign",params:[s,t]});console.log(a);const o={zelid:t,signature:a,loginPhrase:this.loginPhrase},r=await P.Z.verifyLogin(o);if(console.log(r),"success"===r.data.status){const e=o;this.$store.commit("flux/setPrivilege",r.data.data.privilage),this.$store.commit("flux/setZelid",e.zelid),localStorage.setItem("zelidauth",j.stringify(e)),this.showToast("success",r.data.data.message)}else this.showToast(this.getVariant(r.data.status),r.data.data.message||r.data.data)}catch(s){console.error(s),this.showToast("danger",s.message)}},async initMetamask(){try{if(!F)return void this.showToast("danger","Metamask not detected");let e;if(F&&!F.selectedAddress){const t=await F.request({method:"eth_requestAccounts",params:[]});console.log(t),e=t[0]}else e=F.selectedAddress;this.siwe(this.loginPhrase,e)}catch(e){this.showToast("danger",e.message)}},async initSSP(){try{if(!window.ssp)return void this.showToast("danger","SSP Wallet not installed");const e=await window.ssp.request("sspwid_sign_message",{message:this.loginPhrase});if("ERROR"===e.status)throw new Error(e.data||e.result);const t={zelid:e.address,signature:e.signature,loginPhrase:this.loginPhrase},s=await P.Z.verifyLogin(t);if(console.log(s),"success"===s.data.status){const e=t;this.$store.commit("flux/setPrivilege",s.data.data.privilage),this.$store.commit("flux/setZelid",e.zelid),localStorage.setItem("zelidauth",j.stringify(e)),this.showToast("success",s.data.data.message)}else this.showToast(this.getVariant(s.data.status),s.data.data.message||s.data.data)}catch(e){this.showToast("danger",e.message)}}}},$=T;var E=s(1001),M=(0,E.Z)($,a,o,!1,null,null,null);const D=M.exports},39055:(e,t,s)=>{s.d(t,{Z:()=>o});var a=s(80914);const o={softUpdateFlux(e){return(0,a.Z)().get("/flux/softupdateflux",{headers:{zelidauth:e}})},softUpdateInstallFlux(e){return(0,a.Z)().get("/flux/softupdatefluxinstall",{headers:{zelidauth:e}})},updateFlux(e){return(0,a.Z)().get("/flux/updateflux",{headers:{zelidauth:e}})},hardUpdateFlux(e){return(0,a.Z)().get("/flux/hardupdateflux",{headers:{zelidauth:e}})},rebuildHome(e){return(0,a.Z)().get("/flux/rebuildhome",{headers:{zelidauth:e}})},updateDaemon(e){return(0,a.Z)().get("/flux/updatedaemon",{headers:{zelidauth:e}})},reindexDaemon(e){return(0,a.Z)().get("/flux/reindexdaemon",{headers:{zelidauth:e}})},updateBenchmark(e){return(0,a.Z)().get("/flux/updatebenchmark",{headers:{zelidauth:e}})},getFluxVersion(){return(0,a.Z)().get("/flux/version")},broadcastMessage(e,t){const s=t,o={headers:{zelidauth:e}};return(0,a.Z)().post("/flux/broadcastmessage",JSON.stringify(s),o)},connectedPeers(){return(0,a.Z)().get(`/flux/connectedpeers?timestamp=${(new Date).getTime()}`)},connectedPeersInfo(){return(0,a.Z)().get(`/flux/connectedpeersinfo?timestamp=${(new Date).getTime()}`)},incomingConnections(){return(0,a.Z)().get(`/flux/incomingconnections?timestamp=${(new Date).getTime()}`)},incomingConnectionsInfo(){return(0,a.Z)().get(`/flux/incomingconnectionsinfo?timestamp=${(new Date).getTime()}`)},addPeer(e,t){return(0,a.Z)().get(`/flux/addpeer/${t}`,{headers:{zelidauth:e}})},removePeer(e,t){return(0,a.Z)().get(`/flux/removepeer/${t}`,{headers:{zelidauth:e}})},removeIncomingPeer(e,t){return(0,a.Z)().get(`/flux/removeincomingpeer/${t}`,{headers:{zelidauth:e}})},adjustCruxID(e,t){return(0,a.Z)().get(`/flux/adjustcruxid/${t}`,{headers:{zelidauth:e}})},adjustKadena(e,t,s){return(0,a.Z)().get(`/flux/adjustkadena/${t}/${s}`,{headers:{zelidauth:e}})},adjustRouterIP(e,t){return(0,a.Z)().get(`/flux/adjustrouterip/${t}`,{headers:{zelidauth:e}})},adjustBlockedPorts(e,t){const s={blockedPorts:t},o={headers:{zelidauth:e}};return(0,a.Z)().post("/flux/adjustblockedports",JSON.stringify(s),o)},adjustAPIPort(e,t){return(0,a.Z)().get(`/flux/adjustapiport/${t}`,{headers:{zelidauth:e}})},adjustBlockedRepositories(e,t){const s={blockedRepositories:t},o={headers:{zelidauth:e}};return(0,a.Z)().post("/flux/adjustblockedrepositories",JSON.stringify(s),o)},getCruxID(){const e={headers:{"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/cruxid",e)},getKadenaAccount(){const e={headers:{"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/kadena",e)},getRouterIP(){const e={headers:{"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/routerip",e)},getBlockedPorts(){const e={headers:{"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/blockedports",e)},getAPIPort(){const e={headers:{"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/apiport",e)},getBlockedRepositories(){const e={headers:{"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/blockedrepositories",e)},getMarketPlaceURL(){return(0,a.Z)().get("/flux/marketplaceurl")},getZelid(){const e={headers:{"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/zelid",e)},getStaticIpInfo(){return(0,a.Z)().get("/flux/staticip")},restartFluxOS(e){const t={headers:{zelidauth:e,"x-apicache-bypass":!0}};return(0,a.Z)().get("/flux/restart",t)},tailFluxLog(e,t){return(0,a.Z)().get(`/flux/tail${e}log`,{headers:{zelidauth:t}})},justAPI(){return(0,a.Z)()},cancelToken(){return a.S}}},84328:(e,t,s)=>{var a=s(65290),o=s(27578),r=s(6310),n=function(e){return function(t,s,n){var i,l=a(t),c=r(l),u=o(n,c);if(e&&s!==s){while(c>u)if(i=l[u++],i!==i)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===s)return e||u||0;return!e&&-1}};e.exports={includes:n(!0),indexOf:n(!1)}},5649:(e,t,s)=>{var a=s(67697),o=s(92297),r=TypeError,n=Object.getOwnPropertyDescriptor,i=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=i?function(e,t){if(o(e)&&!n(e,"length").writable)throw new r("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},8758:(e,t,s)=>{var a=s(36812),o=s(19152),r=s(82474),n=s(72560);e.exports=function(e,t,s){for(var i=o(t),l=n.f,c=r.f,u=0;u<i.length;u++){var d=i[u];a(e,d)||s&&a(s,d)||l(e,d,c(t,d))}}},55565:e=>{var t=TypeError,s=9007199254740991;e.exports=function(e){if(e>s)throw t("Maximum allowed index exceeded");return e}},72739:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},79989:(e,t,s)=>{var a=s(19037),o=s(82474).f,r=s(75773),n=s(11880),i=s(95014),l=s(8758),c=s(35266);e.exports=function(e,t){var s,u,d,g,h,p,f=e.target,m=e.global,x=e.stat;if(u=m?a:x?a[f]||i(f,{}):(a[f]||{}).prototype,u)for(d in t){if(h=t[d],e.dontCallGetSet?(p=o(u,d),g=p&&p.value):g=u[d],s=c(m?d:f+(x?".":"#")+d,e.forced),!s&&void 0!==g){if(typeof h==typeof g)continue;l(h,g)}(e.sham||g&&g.sham)&&r(h,"sham",!0),n(u,d,h,e)}}},94413:(e,t,s)=>{var a=s(68844),o=s(3689),r=s(6648),n=Object,i=a("".split);e.exports=o((function(){return!n("z").propertyIsEnumerable(0)}))?function(e){return"String"===r(e)?i(e,""):n(e)}:n},92297:(e,t,s)=>{var a=s(6648);e.exports=Array.isArray||function(e){return"Array"===a(e)}},35266:(e,t,s)=>{var a=s(3689),o=s(69985),r=/#|\.prototype\./,n=function(e,t){var s=l[i(e)];return s===u||s!==c&&(o(t)?a(t):!!t)},i=n.normalize=function(e){return String(e).replace(r,".").toLowerCase()},l=n.data={},c=n.NATIVE="N",u=n.POLYFILL="P";e.exports=n},6310:(e,t,s)=>{var a=s(43126);e.exports=function(e){return a(e.length)}},58828:e=>{var t=Math.ceil,s=Math.floor;e.exports=Math.trunc||function(e){var a=+e;return(a>0?s:t)(a)}},82474:(e,t,s)=>{var a=s(67697),o=s(22615),r=s(49556),n=s(75684),i=s(65290),l=s(18360),c=s(36812),u=s(68506),d=Object.getOwnPropertyDescriptor;t.f=a?d:function(e,t){if(e=i(e),t=l(t),u)try{return d(e,t)}catch(s){}if(c(e,t))return n(!o(r.f,e,t),e[t])}},72741:(e,t,s)=>{var a=s(54948),o=s(72739),r=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,r)}},7518:(e,t)=>{t.f=Object.getOwnPropertySymbols},54948:(e,t,s)=>{var a=s(68844),o=s(36812),r=s(65290),n=s(84328).indexOf,i=s(57248),l=a([].push);e.exports=function(e,t){var s,a=r(e),c=0,u=[];for(s in a)!o(i,s)&&o(a,s)&&l(u,s);while(t.length>c)o(a,s=t[c++])&&(~n(u,s)||l(u,s));return u}},49556:(e,t)=>{var s={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!s.call({1:2},1);t.f=o?function(e){var t=a(this,e);return!!t&&t.enumerable}:s},19152:(e,t,s)=>{var a=s(76058),o=s(68844),r=s(72741),n=s(7518),i=s(85027),l=o([].concat);e.exports=a("Reflect","ownKeys")||function(e){var t=r.f(i(e)),s=n.f;return s?l(t,s(e)):t}},27578:(e,t,s)=>{var a=s(68700),o=Math.max,r=Math.min;e.exports=function(e,t){var s=a(e);return s<0?o(s+t,0):r(s,t)}},65290:(e,t,s)=>{var a=s(94413),o=s(74684);e.exports=function(e){return a(o(e))}},68700:(e,t,s)=>{var a=s(58828);e.exports=function(e){var t=+e;return t!==t||0===t?0:a(t)}},43126:(e,t,s)=>{var a=s(68700),o=Math.min;e.exports=function(e){return e>0?o(a(e),9007199254740991):0}},70560:(e,t,s)=>{var a=s(79989),o=s(90690),r=s(6310),n=s(5649),i=s(55565),l=s(3689),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},d=c||!u();a({target:"Array",proto:!0,arity:1,forced:d},{push:function(e){var t=o(this),s=r(t),a=arguments.length;i(s+a);for(var l=0;l<a;l++)t[s]=arguments[l],s++;return n(t,s),s}})},17832:(e,t,s)=>{s.d(t,{sj:()=>p,CO:()=>m,Ld:()=>f});Symbol();const a=Symbol();const o=Object.getPrototypeOf,r=new WeakMap,n=e=>e&&(r.has(e)?r.get(e):o(e)===Object.prototype||o(e)===Array.prototype),i=e=>n(e)&&e[a]||null,l=(e,t=!0)=>{r.set(e,t)},c=e=>"object"===typeof e&&null!==e,u=new WeakMap,d=new WeakSet,g=(e=Object.is,t=((e,t)=>new Proxy(e,t)),s=(e=>c(e)&&!d.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)),a=(e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}}),o=new WeakMap,r=((e,t,s=a)=>{const n=o.get(e);if((null==n?void 0:n[0])===t)return n[1];const i=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return l(i,!0),o.set(e,[t,i]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(i,t))return;const a=Reflect.get(e,t),o={value:a,enumerable:!0,configurable:!0};if(d.has(a))l(a,!1);else if(a instanceof Promise)delete o.value,o.get=()=>s(a);else if(u.has(a)){const[e,t]=u.get(a);o.value=r(e,t(),s)}Object.defineProperty(i,t,o)})),Object.preventExtensions(i)}),n=new WeakMap,g=[1,1],h=(a=>{if(!c(a))throw new Error("object required");const o=n.get(a);if(o)return o;let l=g[0];const p=new Set,f=(e,t=++g[0])=>{l!==t&&(l=t,p.forEach((s=>s(e,t))))};let m=g[1];const x=(e=++g[1])=>(m===e||p.size||(m=e,b.forEach((([t])=>{const s=t[1](e);s>l&&(l=s)}))),l),w=e=>(t,s)=>{const a=[...t];a[1]=[e,...a[1]],f(a,s)},b=new Map,y=(e,t)=>{if(b.has(e))throw new Error("prop listener already exists");if(p.size){const s=t[3](w(e));b.set(e,[t,s])}else b.set(e,[t])},v=e=>{var t;const s=b.get(e);s&&(b.delete(e),null==(t=s[1])||t.call(s))},P=e=>{p.add(e),1===p.size&&b.forEach((([e,t],s)=>{if(t)throw new Error("remove already exists");const a=e[3](w(s));b.set(s,[e,a])}));const t=()=>{p.delete(e),0===p.size&&b.forEach((([e,t],s)=>{t&&(t(),b.set(s,[e]))}))};return t},S=Array.isArray(a)?[]:Object.create(Object.getPrototypeOf(a)),I={deleteProperty(e,t){const s=Reflect.get(e,t);v(t);const a=Reflect.deleteProperty(e,t);return a&&f(["delete",[t],s]),a},set(t,a,o,r){const l=Reflect.has(t,a),g=Reflect.get(t,a,r);if(l&&(e(g,o)||n.has(o)&&e(g,n.get(o))))return!0;v(a),c(o)&&(o=i(o)||o);let p=o;if(o instanceof Promise)o.then((e=>{o.status="fulfilled",o.value=e,f(["resolve",[a],e])})).catch((e=>{o.status="rejected",o.reason=e,f(["reject",[a],e])}));else{!u.has(o)&&s(o)&&(p=h(o));const e=!d.has(p)&&u.get(p);e&&y(a,e)}return Reflect.set(t,a,p,r),f(["set",[a],o,g]),!0}},Z=t(S,I);n.set(a,Z);const k=[S,x,r,P];return u.set(Z,k),Reflect.ownKeys(a).forEach((e=>{const t=Object.getOwnPropertyDescriptor(a,e);"value"in t&&(Z[e]=a[e],delete t.value,delete t.writable),Object.defineProperty(S,e,t)})),Z}))=>[h,u,d,e,t,s,a,o,r,n,g],[h]=g();function p(e={}){return h(e)}function f(e,t,s){const a=u.get(e);let o;a||console.warn("Please use proxy object");const r=[],n=a[3];let i=!1;const l=e=>{r.push(e),s?t(r.splice(0)):o||(o=Promise.resolve().then((()=>{o=void 0,i&&t(r.splice(0))})))},c=n(l);return i=!0,()=>{i=!1,c()}}function m(e,t){const s=u.get(e);s||console.warn("Please use proxy object");const[a,o,r]=s;return r(a,o(),t)}}}]);