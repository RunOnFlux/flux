(globalThis["webpackChunkflux"]=globalThis["webpackChunkflux"]||[]).push([[2176],{82176:(t,e,a)=>{"use strict";a.d(e,{Z:()=>kt});var s=function(){var t=this,e=t._self._c;return e("div",[e("b-modal",{attrs:{"hide-footer":"",centered:"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",size:"lg","header-bg-variant":"primary",title:t.operationTitle,"title-tag":"h5"},model:{value:t.progressVisable,callback:function(e){t.progressVisable=e},expression:"progressVisable"}},[e("div",{staticClass:"d-flex flex-column justify-content-center align-items-center",staticStyle:{height:"100%"}},[e("div",{staticClass:"d-flex align-items-center mb-2"},[e("b-spinner",{attrs:{label:"Loading..."}}),e("div",{staticClass:"ml-1"},[t._v(" Waiting for the operation to be completed... ")])],1)])]),e("div",[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-2",attrs:{variant:"outline-primary",pill:""},on:{click:t.goBackToApps}},[e("v-icon",{attrs:{name:"chevron-left"}}),t._v(" Back ")],1),t._v(" "+t._s(t.applicationManagementAndStatus)+" ")],1),e("b-tabs",{staticClass:"mt-2",staticStyle:{"flex-wrap":"nowrap"},attrs:{pills:"",vertical:t.windowWidth>860,lazy:""},on:{input:e=>t.updateManagementTab(e)}},[t.windowWidth>860?e("b-tab",{attrs:{title:"Local App Management",disabled:""}}):t._e(),e("b-tab",{attrs:{active:"",title:"Specifications"}},[e("div",[e("b-card",[e("h3",[e("b-icon",{attrs:{icon:"hdd-network-fill"}}),t._v(" Â Backend Selection")],1),e("b-input-group",{staticClass:"my-1",staticStyle:{width:"350px"}},[e("b-input-group-prepend",[e("b-input-group-text",[e("b-icon",{attrs:{icon:"laptop"}})],1)],1),e("b-form-select",{attrs:{options:null},on:{change:t.selectedIpChanged},model:{value:t.selectedIp,callback:function(e){t.selectedIp=e},expression:"selectedIp"}},t._l(t.instances.data,(function(a){return e("b-form-select-option",{key:a.ip,attrs:{value:a.ip}},[t._v(" "+t._s(a.ip)+" ")])})),1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Refresh",expression:"'Refresh'",modifiers:{hover:!0,top:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.12)",expression:"'rgba(255, 255, 255, 0.12)'",modifiers:{400:!0}}],ref:"BackendRefresh",staticClass:"ml-1 bb",staticStyle:{outline:"none !important","box-shadow":"none !important"},attrs:{variant:"outline-success",size:"sm"},on:{click:t.refreshInfo}},[e("b-icon",{attrs:{scale:"1.2",icon:"arrow-clockwise"}})],1)],1)],1)],1),e("div",[e("b-card",[t.callBResponse.data&&t.callResponse.data?e("div",[t.callBResponse.data.hash!==t.callResponse.data.hash?e("div",[e("h1",[t._v("Locally running application does not match global specifications! Update needed")]),e("br"),e("br")]):e("div",[t._v(" Application is synced with Global network "),e("br"),e("br")])]):t._e(),e("h2",[t._v("Installed Specifications")]),t.callResponse.data?e("div",{staticStyle:{"text-align":"left"}},[e("b-card",{},[e("list-entry",{attrs:{title:"Name",data:t.callResponse.data.name}}),e("list-entry",{attrs:{title:"Description",data:t.callResponse.data.description}}),e("list-entry",{attrs:{title:"Owner",data:t.callResponse.data.owner}}),e("list-entry",{attrs:{title:"Hash",data:t.callResponse.data.hash}}),t.callResponse.data.version>=5?e("div",[t.callResponse.data.geolocation.length?e("div",t._l(t.callResponse.data.geolocation,(function(a){return e("div",{key:a},[e("list-entry",{attrs:{title:"Geolocation",data:t.getGeolocation(a)}})],1)})),0):e("div",[e("list-entry",{attrs:{title:"Continent",data:"All"}}),e("list-entry",{attrs:{title:"Country",data:"All"}}),e("list-entry",{attrs:{title:"Region",data:"All"}})],1)]):t._e(),t.callResponse.data.instances?e("list-entry",{attrs:{title:"Instances",data:t.callResponse.data.instances.toString()}}):t._e(),e("list-entry",{attrs:{title:"Specifications version",number:t.callResponse.data.version}}),e("list-entry",{attrs:{title:"Registered on Blockheight",number:t.callResponse.data.height}}),t.callResponse.data.hash&&64===t.callResponse.data.hash.length?e("list-entry",{attrs:{title:"Expires on Blockheight",number:t.callResponse.data.height+(t.callResponse.data.expire||22e3)}}):t._e(),e("list-entry",{attrs:{title:"Expires in",data:t.getNewExpireLabel}}),e("list-entry",{attrs:{title:"Enterprise Nodes",data:t.callResponse.data.nodes?t.callResponse.data.nodes.toString():"Not scoped"}}),e("list-entry",{attrs:{title:"Static IP",data:t.callResponse.data.staticip?"Yes, Running only on Static IP nodes":"No, Running on all nodes"}}),e("h4",[t._v("Composition")]),t.callResponse.data.version<=3?e("div",[e("b-card",[e("list-entry",{attrs:{title:"Repository",data:t.callResponse.data.repotag}}),e("list-entry",{attrs:{title:"Custom Domains",data:t.callResponse.data.domains.toString()||"none"}}),e("list-entry",{attrs:{title:"Automatic Domains",data:t.constructAutomaticDomains(t.callResponse.data.ports,t.callResponse.data.name).toString()||"none"}}),e("list-entry",{attrs:{title:"Ports",data:t.callResponse.data.ports.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Ports",data:t.callResponse.data.containerPorts.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Data",data:t.callResponse.data.containerData.toString()||"none"}}),e("list-entry",{attrs:{title:"Environment Parameters",data:t.callResponse.data.enviromentParameters.length>0?t.callResponse.data.enviromentParameters.toString():"none"}}),e("list-entry",{attrs:{title:"Commands",data:t.callResponse.data.commands.length>0?t.callResponse.data.commands.toString():"none"}}),t.callResponse.data.tiered?e("div",[e("list-entry",{attrs:{title:"CPU Cumulus",data:`${t.callResponse.data.cpubasic} vCore`}}),e("list-entry",{attrs:{title:"CPU Nimbus",data:`${t.callResponse.data.cpusuper} vCore`}}),e("list-entry",{attrs:{title:"CPU Stratus",data:`${t.callResponse.data.cpubamf} vCore`}}),e("list-entry",{attrs:{title:"RAM Cumulus",data:`${t.callResponse.data.rambasic} MB`}}),e("list-entry",{attrs:{title:"RAM Nimbus",data:`${t.callResponse.data.ramsuper} MB`}}),e("list-entry",{attrs:{title:"RAM Stratus",data:`${t.callResponse.data.rambamf} MB`}}),e("list-entry",{attrs:{title:"SSD Cumulus",data:`${t.callResponse.data.hddbasic} GB`}}),e("list-entry",{attrs:{title:"SSD Nimbus",data:`${t.callResponse.data.hddsuper} GB`}}),e("list-entry",{attrs:{title:"SSD Stratus",data:`${t.callResponse.data.hddbamf} GB`}})],1):e("div",[e("list-entry",{attrs:{title:"CPU",data:`${t.callResponse.data.cpu} vCore`}}),e("list-entry",{attrs:{title:"RAM",data:`${t.callResponse.data.ram} MB`}}),e("list-entry",{attrs:{title:"SSD",data:`${t.callResponse.data.hdd} GB`}})],1)],1)],1):e("div",t._l(t.callResponse.data.compose,(function(a,s){return e("b-card",{key:s},[e("b-card-title",[t._v(" Component "+t._s(a.name)+" ")]),e("list-entry",{attrs:{title:"Name",data:a.name}}),e("list-entry",{attrs:{title:"Description",data:a.description}}),e("list-entry",{attrs:{title:"Repository",data:a.repotag}}),e("list-entry",{attrs:{title:"Repository Authentication",data:a.repoauth?"Content Encrypted":"Public"}}),e("list-entry",{attrs:{title:"Custom Domains",data:a.domains.toString()||"none"}}),e("list-entry",{attrs:{title:"Automatic Domains",data:t.constructAutomaticDomains(a.ports,t.callResponse.data.name,s).toString()||"none"}}),e("list-entry",{attrs:{title:"Ports",data:a.ports.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Ports",data:a.containerPorts.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Data",data:a.containerData}}),e("list-entry",{attrs:{title:"Environment Parameters",data:a.environmentParameters.length>0?a.environmentParameters.toString():"none"}}),e("list-entry",{attrs:{title:"Commands",data:a.commands.length>0?a.commands.toString():"none"}}),e("list-entry",{attrs:{title:"Secret Environment Parameters",data:a.secrets?"Content Encrypted":"none"}}),a.tiered?e("div",[e("list-entry",{attrs:{title:"CPU Cumulus",data:`${a.cpubasic} vCore`}}),e("list-entry",{attrs:{title:"CPU Nimbus",data:`${a.cpusuper} vCore`}}),e("list-entry",{attrs:{title:"CPU Stratus",data:`${a.cpubamf} vCore`}}),e("list-entry",{attrs:{title:"RAM Cumulus",data:`${a.rambasic} MB`}}),e("list-entry",{attrs:{title:"RAM Nimbus",data:`${a.ramsuper} MB`}}),e("list-entry",{attrs:{title:"RAM Stratus",data:`${a.rambamf} MB`}}),e("list-entry",{attrs:{title:"SSD Cumulus",data:`${a.hddbasic} GB`}}),e("list-entry",{attrs:{title:"SSD Nimbus",data:`${a.hddsuper} GB`}}),e("list-entry",{attrs:{title:"SSD Stratus",data:`${a.hddbamf} GB`}})],1):e("div",[e("list-entry",{attrs:{title:"CPU",data:`${a.cpu} vCore`}}),e("list-entry",{attrs:{title:"RAM",data:`${a.ram} MB`}}),e("list-entry",{attrs:{title:"SSD",data:`${a.hdd} GB`}})],1)],1)})),1)],1)],1):e("div",[t._v(" Local Specifications loading... ")]),e("h2",{staticClass:"mt-2"},[t._v(" Global Specifications ")]),t.callBResponse.data?e("div",{staticStyle:{"text-align":"left"}},[e("b-card",{},[e("list-entry",{attrs:{title:"Name",data:t.callBResponse.data.name}}),e("list-entry",{attrs:{title:"Description",data:t.callBResponse.data.description}}),e("list-entry",{attrs:{title:"Owner",data:t.callBResponse.data.owner}}),e("list-entry",{attrs:{title:"Hash",data:t.callBResponse.data.hash}}),t.callBResponse.data.version>=5?e("div",[t.callBResponse.data.geolocation.length?e("div",t._l(t.callBResponse.data.geolocation,(function(a){return e("div",{key:a},[e("list-entry",{attrs:{title:"Geolocation",data:t.getGeolocation(a)}})],1)})),0):e("div",[e("list-entry",{attrs:{title:"Continent",data:"All"}}),e("list-entry",{attrs:{title:"Country",data:"All"}}),e("list-entry",{attrs:{title:"Region",data:"All"}})],1)]):t._e(),t.callBResponse.data.instances?e("list-entry",{attrs:{title:"Instances",data:t.callBResponse.data.instances.toString()}}):t._e(),e("list-entry",{attrs:{title:"Specifications version",number:t.callBResponse.data.version}}),e("list-entry",{attrs:{title:"Registered on Blockheight",number:t.callBResponse.data.height}}),t.callBResponse.data.hash&&64===t.callBResponse.data.hash.length?e("list-entry",{attrs:{title:"Expires on Blockheight",number:t.callBResponse.data.height+(t.callBResponse.data.expire||22e3)}}):t._e(),e("list-entry",{attrs:{title:"Expires in",data:t.getNewExpireLabel}}),e("list-entry",{attrs:{title:"Enterprise Nodes",data:t.callBResponse.data.nodes?t.callBResponse.data.nodes.toString():"Not scoped"}}),e("list-entry",{attrs:{title:"Static IP",data:t.callBResponse.data.staticip?"Yes, Running only on Static IP nodes":"No, Running on all nodes"}}),e("h4",[t._v("Composition")]),t.callBResponse.data.version<=3?e("div",[e("b-card",[e("list-entry",{attrs:{title:"Repository",data:t.callBResponse.data.repotag}}),e("list-entry",{attrs:{title:"Custom Domains",data:t.callBResponse.data.domains.toString()||"none"}}),e("list-entry",{attrs:{title:"Automatic Domains",data:t.constructAutomaticDomainsGlobal.toString()||"none"}}),e("list-entry",{attrs:{title:"Ports",data:t.callBResponse.data.ports.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Ports",data:t.callBResponse.data.containerPorts.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Data",data:t.callBResponse.data.containerData}}),e("list-entry",{attrs:{title:"Environment Parameters",data:t.callBResponse.data.enviromentParameters.length>0?t.callBResponse.data.enviromentParameters.toString():"none"}}),e("list-entry",{attrs:{title:"Commands",data:t.callBResponse.data.commands.length>0?t.callBResponse.data.commands.toString():"none"}}),t.callBResponse.data.tiered?e("div",[e("list-entry",{attrs:{title:"CPU Cumulus",data:`${t.callBResponse.data.cpubasic} vCore`}}),e("list-entry",{attrs:{title:"CPU Nimbus",data:`${t.callBResponse.data.cpusuper} vCore`}}),e("list-entry",{attrs:{title:"CPU Stratus",data:`${t.callBResponse.data.cpubamf} vCore`}}),e("list-entry",{attrs:{title:"RAM Cumulus",data:`${t.callBResponse.data.rambasic} MB`}}),e("list-entry",{attrs:{title:"RAM Nimbus",data:`${t.callBResponse.data.ramsuper} MB`}}),e("list-entry",{attrs:{title:"RAM Stratus",data:`${t.callBResponse.data.rambamf} MB`}}),e("list-entry",{attrs:{title:"SSD Cumulus",data:`${t.callBResponse.data.hddbasic} GB`}}),e("list-entry",{attrs:{title:"SSD Nimbus",data:`${t.callBResponse.data.hddsuper} GB`}}),e("list-entry",{attrs:{title:"SSD Stratus",data:`${t.callBResponse.data.hddbamf} GB`}})],1):e("div",[e("list-entry",{attrs:{title:"CPU",data:`${t.callBResponse.data.cpu} vCore`}}),e("list-entry",{attrs:{title:"RAM",data:`${t.callBResponse.data.ram} MB`}}),e("list-entry",{attrs:{title:"SSD",data:`${t.callBResponse.data.hdd} GB`}})],1)],1)],1):e("div",t._l(t.callBResponse.data.compose,(function(a,s){return e("b-card",{key:s},[e("b-card-title",[t._v(" Component "+t._s(a.name)+" ")]),e("list-entry",{attrs:{title:"Name",data:a.name}}),e("list-entry",{attrs:{title:"Description",data:a.description}}),e("list-entry",{attrs:{title:"Repository",data:a.repotag}}),e("list-entry",{attrs:{title:"Repository Authentication",data:a.repoauth?"Content Encrypted":"Public"}}),e("list-entry",{attrs:{title:"Custom Domains",data:a.domains.toString()||"none"}}),e("list-entry",{attrs:{title:"Automatic Domains",data:t.constructAutomaticDomains(a.ports,t.callBResponse.data.name,s).toString()||"none"}}),e("list-entry",{attrs:{title:"Ports",data:a.ports.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Ports",data:a.containerPorts.toString()||"none"}}),e("list-entry",{attrs:{title:"Container Data",data:a.containerData}}),e("list-entry",{attrs:{title:"Environment Parameters",data:a.environmentParameters.length>0?a.environmentParameters.toString():"none"}}),e("list-entry",{attrs:{title:"Commands",data:a.commands.length>0?a.commands.toString():"none"}}),e("list-entry",{attrs:{title:"Secret Environment Parameters",data:a.secrets?"Content Encrypted":"none"}}),a.tiered?e("div",[e("list-entry",{attrs:{title:"CPU Cumulus",data:`${a.cpubasic} vCore`}}),e("list-entry",{attrs:{title:"CPU Nimbus",data:`${a.cpusuper} vCore`}}),e("list-entry",{attrs:{title:"CPU Stratus",data:`${a.cpubamf} vCore`}}),e("list-entry",{attrs:{title:"RAM Cumulus",data:`${a.rambasic} MB`}}),e("list-entry",{attrs:{title:"RAM Nimbus",data:`${a.ramsuper} MB`}}),e("list-entry",{attrs:{title:"RAM Stratus",data:`${a.rambamf} MB`}}),e("list-entry",{attrs:{title:"SSD Cumulus",data:`${a.hddbasic} GB`}}),e("list-entry",{attrs:{title:"SSD Nimbus",data:`${a.hddsuper} GB`}}),e("list-entry",{attrs:{title:"SSD Stratus",data:`${a.hddbamf} GB`}})],1):e("div",[e("list-entry",{attrs:{title:"CPU",data:`${a.cpu} vCore`}}),e("list-entry",{attrs:{title:"RAM",data:`${a.ram} MB`}}),e("list-entry",{attrs:{title:"SSD",data:`${a.hdd} GB`}})],1)],1)})),1)],1)],1):"error"===t.callBResponse.status?e("div",[t._v(" Global specifications not found! ")]):e("div",[t._v(" Global Specifications loading... ")])])],1)]),e("b-tab",{attrs:{title:"Information"}},[e("h3",[e("b-icon",{attrs:{icon:"app-indicator"}}),t._v(" "+t._s(t.appSpecification.name))],1),t.appSpecification.version>=4?e("div",t._l(t.callResponse.data,(function(a,s){return e("div",{key:s},[e("h4",[t._v("Component: "+t._s(a.name))]),a.callData?e("div",[e("json-viewer",{attrs:{value:a.callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])})),0):e("div",[t.callResponse.data&&t.callResponse.data[0]?e("div",[e("json-viewer",{attrs:{value:t.callResponse.data[0].callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])]),e("b-tab",{attrs:{title:"Resources"}},[e("h3",[e("b-icon",{attrs:{icon:"app-indicator"}}),t._v(" "+t._s(t.appSpecification.name))],1),t.commandExecuting?e("div",[e("v-icon",{staticClass:"spin-icon",attrs:{name:"spinner"}})],1):t._e(),t.appSpecification.version>=4?e("div",t._l(t.callResponse.data,(function(a,s){return e("div",{key:s},[e("h4",[t._v("Component: "+t._s(a.name))]),a.callData?e("div",[e("json-viewer",{attrs:{value:a.callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])})),0):e("div",[t.callResponse.data&&t.callResponse.data[0]?e("div",[e("json-viewer",{attrs:{value:t.callResponse.data[0].callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])]),e("b-tab",{attrs:{title:"Monitoring"}},[e("h3",[t._v("History Statistics 1 hour")]),t.appSpecification.version>=4?e("div",t._l(t.callResponse.data,(function(a,s){return e("div",{key:s},[e("h4",[t._v("Component: "+t._s(a.name))]),a.callData?e("b-table",{staticClass:"stats-table",attrs:{items:t.generateStatsTableItems(a.callData.lastHour,t.appSpecification.compose.find((t=>t.name===a.name))),fields:t.statsFields}}):e("div",[t._v(" Loading... ")])],1)})),0):e("div",[t.callResponse.data&&t.callResponse.data[0]?e("b-table",{staticClass:"stats-table",attrs:{items:t.generateStatsTableItems(t.callResponse.data[0].callData.lastHour,t.appSpecification),fields:t.statsFields}}):e("div",[t._v(" Loading... ")])],1),e("br"),e("br"),e("h3",[t._v("History Statistics 24 hours")]),t.appSpecification.version>=4?e("div",t._l(t.callResponse.data,(function(a,s){return e("div",{key:s},[e("h4",[t._v("Component: "+t._s(a.name))]),a.callData?e("b-table",{staticClass:"stats-table",attrs:{items:t.generateStatsTableItems(a.callData.lastDay,t.appSpecification.compose.find((t=>t.name===a.name))),fields:t.statsFields}}):e("div",[t._v(" Loading... ")])],1)})),0):e("div",[t.callResponse.data&&t.callResponse.data[0]?e("b-table",{staticClass:"stats-table",attrs:{items:t.generateStatsTableItems(t.callResponse.data[0].callData.lastDay,t.appSpecification),fields:t.statsFields}}):e("div",[t._v(" Loading... ")])],1)]),e("b-tab",{attrs:{title:"File Changes"}},[e("h3",[e("b-icon",{attrs:{icon:"app-indicator"}}),t._v(" "+t._s(t.appSpecification.name))],1),t.commandExecuting?e("div",[e("v-icon",{staticClass:"spin-icon",attrs:{name:"spinner"}})],1):t._e(),t.appSpecification.version>=4?e("div",t._l(t.callResponse.data,(function(a,s){return e("div",{key:s},[e("h4",[t._v("Component: "+t._s(a.name))]),a.callData?e("div",[e("kbd",{staticClass:"bg-primary mr-1"},[t._v("Kind: 0 = Modified")]),e("kbd",{staticClass:"bg-success mr-1"},[t._v("Kind: 1 = Added ")]),e("kbd",{staticClass:"bg-danger"},[t._v("Kind: 2 = Deleted")]),e("json-viewer",{staticClass:"mt-1",attrs:{value:a.callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])})),0):e("div",[t.callResponse.data&&t.callResponse.data[0]?e("div",[e("kbd",{staticClass:"bg-primary mr-1"},[t._v("Kind: 0 = Modified")]),e("kbd",{staticClass:"bg-success mr-1"},[t._v("Kind: 1 = Added ")]),e("kbd",{staticClass:"bg-danger"},[t._v("Kind: 2 = Deleted")]),e("json-viewer",{staticClass:"mt-1",attrs:{value:t.callResponse.data[0].callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])]),e("b-tab",{attrs:{title:"Processes"}},[e("h3",[e("b-icon",{attrs:{icon:"app-indicator"}}),t._v(" "+t._s(t.appSpecification.name))],1),t.commandExecuting?e("div",[e("v-icon",{staticClass:"spin-icon",attrs:{name:"spinner"}})],1):t._e(),t.appSpecification.version>=4?e("div",t._l(t.callResponse.data,(function(a,s){return e("div",{key:s},[e("h4",[t._v("Component: "+t._s(a.name))]),a.callData?e("div",[e("json-viewer",{attrs:{value:a.callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])})),0):e("div",[t.callResponse.data&&t.callResponse.data[0]?e("div",[e("json-viewer",{attrs:{value:t.callResponse.data[0].callData,"expand-depth":5,copyable:"",boxed:"",theme:"jv-dark"}})],1):t._e()])]),e("b-tab",{attrs:{title:"Log File"}},[e("h3",[e("b-icon",{attrs:{icon:"app-indicator"}}),t._v(" "+t._s(t.appSpecification.name))],1),e("h6",{staticClass:"mb-2"},[t._v(" Click the 'Download' button to download the Log file from your Application debug file. This may take a few minutes depending on file size. ")]),t.appSpecification.version>=4?e("div",t._l(t.callResponse.data,(function(a,s){return e("div",{key:s},[e("h4",[t._v("Component: "+t._s(a.name))]),e("div",[e("div",[e("div",{staticClass:"d-flex align-items-center"},[e("h5",{staticClass:"mt-1"},[e("kbd",{staticClass:"bg-primary"},[t._v("Last 100 lines of the log file")])])]),a.callData?e("b-form-textarea",{staticClass:"mt-1 mb-1",staticStyle:{"background-color":"black",color:"white",padding:"20px","font-family":"monospace","margin-bottom":"25px"},attrs:{plaintext:"","no-resize":"",rows:"15",value:t.decodeAsciiResponse(a.callData)}}):t._e(),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"w-100 mb-2",attrs:{id:`start-download-log-${a.name}_${t.appSpecification.name}`,variant:"outline-primary",size:"md"}},[t._v(" Download ")]),e("confirm-dialog",{attrs:{target:`start-download-log-${a.name}_${t.appSpecification.name}`,"confirm-button":"Download Log"},on:{confirm:function(e){return t.downloadApplicationLog(`${a.name}_${t.appSpecification.name}`)}}})],1)])])})),0):e("div",[e("div",[e("div",[e("h6",{staticClass:"mb-1 mt-1"},[e("kbd",{staticClass:"bg-primary"},[t._v("Last 100 lines of the log file")])]),t.callResponse.data&&t.callResponse.data[0]?e("b-form-textarea",{staticClass:"mt-1 mb-1",staticStyle:{"background-color":"black",color:"white",padding:"20px","font-family":"monospace","margin-bottom":"25px"},attrs:{plaintext:"","no-resize":"",rows:"15",value:t.decodeAsciiResponse(t.callResponse.data[0].callData)}}):t._e(),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"w-100 mb-2",attrs:{id:"start-download-log",variant:"outline-primary",size:"md"}},[t._v(" Download Debug File ")]),e("confirm-dialog",{attrs:{target:"start-download-log","confirm-button":"Download Log"},on:{confirm:function(e){return t.downloadApplicationLog(t.appSpecification.name)}}})],1)])])]),e("b-tab",{attrs:{title:"Control"}},[e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Control"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" General options to control running status of App. ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"start-app",variant:"success","aria-label":"Start App"}},[t._v(" Start App ")]),e("confirm-dialog",{attrs:{target:"start-app","confirm-button":"Start App"},on:{confirm:function(e){return t.startApp(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"stop-app",variant:"success","aria-label":"Stop App"}},[t._v(" Stop App ")]),e("confirm-dialog",{attrs:{target:"stop-app","confirm-button":"Stop App"},on:{confirm:function(e){return t.stopApp(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"restart-app",variant:"success","aria-label":"Restart App"}},[t._v(" Restart App ")]),e("confirm-dialog",{attrs:{target:"restart-app","confirm-button":"Restart App"},on:{confirm:function(e){return t.restartApp(t.appName)}}})],1)],1)],1),e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Pause"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" The Pause command suspends all processes in the specified App. ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"pause-app",variant:"success","aria-label":"Pause App"}},[t._v(" Pause App ")]),e("confirm-dialog",{attrs:{target:"pause-app","confirm-button":"Pause App"},on:{confirm:function(e){return t.pauseApp(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"unpause-app",variant:"success","aria-label":"Unpause App"}},[t._v(" Unpause App ")]),e("confirm-dialog",{attrs:{target:"unpause-app","confirm-button":"Unpause App"},on:{confirm:function(e){return t.unpauseApp(t.appName)}}})],1)],1)],1),e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Monitoring"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" Controls Application Monitoring ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"start-monitoring",variant:"success","aria-label":"Start Monitoring"}},[t._v(" Start Monitoring ")]),e("confirm-dialog",{attrs:{target:"start-monitoring","confirm-button":"Start Monitoring"},on:{confirm:function(e){return t.startMonitoring(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"stop-monitoring",variant:"success","aria-label":"Stop Monitoring"}},[t._v(" Stop Monitoring ")]),e("confirm-dialog",{attrs:{target:"stop-monitoring","confirm-button":"Stop Monitoring"},on:{confirm:function(e){return t.stopMonitoring(t.appName,!1)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"stop-monitoring-delete",variant:"success","aria-label":"Stop Monitoring and Delete Monitored Data"}},[t._v(" Stop Monitoring and Delete Monitored Data ")]),e("confirm-dialog",{attrs:{target:"stop-monitoring-delete","confirm-button":"Stop Monitoring"},on:{confirm:function(e){return t.stopMonitoring(t.appName,!0)}}})],1)],1)],1)],1),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Redeploy"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" Redeployes your application. Hard redeploy removes persistant data storage. ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"redeploy-app-soft",variant:"success","aria-label":"Soft Redeploy App"}},[t._v(" Soft Redeploy App ")]),e("confirm-dialog",{attrs:{target:"redeploy-app-soft","confirm-button":"Redeploy"},on:{confirm:function(e){return t.redeployAppSoft(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"redeploy-app-hard",variant:"success","aria-label":"Hard Redeploy App"}},[t._v(" Hard Redeploy App ")]),e("confirm-dialog",{attrs:{target:"redeploy-app-hard","confirm-button":"Redeploy"},on:{confirm:function(e){return t.redeployAppHard(t.appName)}}})],1)],1)],1),e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Remove"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" Stops, uninstalls and removes all App data from this Flux node. ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"remove-app",variant:"success","aria-label":"Remove App"}},[t._v(" Remove App ")]),e("confirm-dialog",{attrs:{target:"remove-app","confirm-button":"Remove App"},on:{confirm:function(e){return t.removeApp(t.appName)}}})],1)],1)],1)],1)],1),t.windowWidth>860?e("b-tab",{attrs:{title:"Component Control",disabled:!t.isApplicationInstalledLocally||t.appSpecification.version<=3}},t._l(t.appSpecification.compose,(function(a,s){return e("b-card",{key:s},[e("h4",[t._v(t._s(a.name)+" Component")]),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Control"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" General options to control running status of Component. ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`start-app-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Start Component"}},[t._v(" Start Component ")]),e("confirm-dialog",{attrs:{target:`start-app-${a.name}_${t.appSpecification.name}`,"confirm-button":"Start Component"},on:{confirm:function(e){return t.startApp(`${a.name}_${t.appSpecification.name}`)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`stop-app-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Stop Component"}},[t._v(" Stop Component ")]),e("confirm-dialog",{attrs:{target:`stop-app-${a.name}_${t.appSpecification.name}`,"confirm-button":"Stop App"},on:{confirm:function(e){return t.stopApp(`${a.name}_${t.appSpecification.name}`)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`restart-app-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Restart Component"}},[t._v(" Restart Component ")]),e("confirm-dialog",{attrs:{target:`restart-app-${a.name}_${t.appSpecification.name}`,"confirm-button":"Restart Component"},on:{confirm:function(e){return t.restartApp(`${a.name}_${t.appSpecification.name}`)}}})],1)],1)],1),e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Pause"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" The Pause command suspends all processes in the specified Component. ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`pause-app-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Pause Component"}},[t._v(" Pause Component ")]),e("confirm-dialog",{attrs:{target:`pause-app-${a.name}_${t.appSpecification.name}`,"confirm-button":"Pause Component"},on:{confirm:function(e){return t.pauseApp(`${a.name}_${t.appSpecification.name}`)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`unpause-app-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Unpause Component"}},[t._v(" Unpause Component ")]),e("confirm-dialog",{attrs:{target:`unpause-app-${a.name}_${t.appSpecification.name}`,"confirm-button":"Unpause Component"},on:{confirm:function(e){return t.unpauseApp(`${a.name}_${t.appSpecification.name}`)}}})],1)],1)],1),e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Monitoring"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" Controls Component Monitoring ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`start-monitoring-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Start Monitoring"}},[t._v(" Start Monitoring ")]),e("confirm-dialog",{attrs:{target:`start-monitoring-${a.name}_${t.appSpecification.name}`,"confirm-button":"Start Monitoring"},on:{confirm:function(e){return t.startMonitoring(`${a.name}_${t.appSpecification.name}`)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`stop-monitoring-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Stop Monitoring"}},[t._v(" Stop Monitoring ")]),e("confirm-dialog",{attrs:{target:`stop-monitoring-${a.name}_${t.appSpecification.name}`,"confirm-button":"Stop Monitoring"},on:{confirm:function(e){return t.stopMonitoring(`${a.name}_${t.appSpecification.name}`,!1)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:`stop-monitoring-delete-${a.name}_${t.appSpecification.name}`,variant:"success","aria-label":"Stop Monitoring and Delete Monitored Data"}},[t._v(" Stop Monitoring and Delete Monitored Data ")]),e("confirm-dialog",{attrs:{target:`stop-monitoring-delete-${a.name}_${t.appSpecification.name}`,"confirm-button":"Stop Monitoring"},on:{confirm:function(e){return t.stopMonitoring(`${a.name}_${t.appSpecification.name}`,!0)}}})],1)],1)],1)],1)],1)})),1):t._e(),e("b-tab",{attrs:{title:"Backup/Restore",disabled:!t.appSpecification?.compose}},[e("div",[e("b-card",{attrs:{"no-body":""}},[e("b-tabs",{attrs:{pills:"",card:""}},[e("b-tab",{staticStyle:{margin:"0","padding-top":"0px"},attrs:{title:"Backup"}},[e("div",{staticClass:"mb-2",staticStyle:{border:"1px solid #ccc","border-radius":"8px",height:"45px",padding:"12px","line-height":"0px"}},[e("h5",[e("b-icon",{staticClass:"mr-1",attrs:{icon:"back"}}),t._v(" Manual Backup Container Data ")],1)]),e("div",{staticClass:"mb-2"},[e("b-form-group",[e("b-form-tags",{attrs:{id:"tags-component-select",size:"lg","add-on-change":"","no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function({tags:a,inputAttrs:s,inputHandlers:i,disabled:o,removeTag:n}){return[a.length>0?e("ul",{staticClass:"list-inline d-inline-block mb-2"},t._l(a,(function(a){return e("li",{key:a,staticClass:"list-inline-item"},[e("b-form-tag",{attrs:{title:a,disabled:o,variant:"primary"},on:{remove:function(t){return n(a)}}},[t._v(" "+t._s(a)+" ")])],1)})),0):t._e(),e("b-form-select",t._g(t._b({attrs:{disabled:o||0===t.componentAvailableOptions?.length||1===t.components?.length,options:t.componentAvailableOptions},scopedSlots:t._u([{key:"first",fn:function(){return[e("option",{attrs:{disabled:"",value:""}},[t._v(" Select the application component(s) you would like to backup ")])]},proxy:!0}],null,!0)},"b-form-select",s,!1),i))]}}]),model:{value:t.selectedBackupComponents,callback:function(e){t.selectedBackupComponents=e},expression:"selectedBackupComponents"}})],1)],1),t.components?.length>1?e("b-button",{staticClass:"mr-1",attrs:{variant:"outline-primary"},on:{click:t.addAllTags}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.9",icon:"check2-square"}}),t._v(" Select all ")],1):t._e(),e("b-button",{staticStyle:{"white-space":"nowrap"},attrs:{disabled:0===t.selectedBackupComponents.length||!0===t.backupProgress,variant:"outline-primary"},on:{click:function(e){return t.createBackup(t.appName,t.selectedBackupComponents)}}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.9",icon:"back"}}),t._v(" Create backup ")],1),e("br"),e("div",{staticClass:"mt-1"},[!0===t.backupProgress?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","text-align":"center"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[!0===t.backupProgress?e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" "+t._s(t.tarProgress)+" ")],1):t._e()]),t._l(t.computedFileProgress,(function(a,s){return a.progress>0?e("b-progress",{key:s,staticClass:"mt-1",staticStyle:{height:"16px"},attrs:{max:100}},[e("b-progress-bar",{staticStyle:{"font-size":"14px"},attrs:{value:a.progress,label:`${a.fileName} - ${a.progress.toFixed(2)}%`}})],1):t._e()}))],2):t._e()]),t.backupList?.length>0&&!1===t.backupProgress?e("div",[e("div",{staticClass:"mb-1 text-right"},[e("b-dropdown",{staticClass:"mr-1",staticStyle:{"max-height":"38px","min-width":"100px","white-space":"nowrap"},attrs:{text:"Select",variant:"outline-primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.9",icon:"check2-square"}}),t._v(" Select ")]},proxy:!0}],null,!1,1960591975)},[e("b-dropdown-item",{attrs:{disabled:t.backupToUpload?.length===t.backupList?.length},on:{click:t.selectAllRows}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.9",icon:"check2-circle"}}),t._v(" Select all ")],1),e("b-dropdown-item",{attrs:{disabled:0===t.backupToUpload?.length},on:{click:t.clearSelected}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.7",icon:"square"}}),t._v(" Select none ")],1)],1),e("b-dropdown",{staticClass:"mr-1",staticStyle:{"max-height":"38px","min-width":"100px","white-space":"nowrap"},attrs:{text:"Download",variant:"outline-primary"},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.9",icon:"download"}}),t._v(" Download ")]},proxy:!0}],null,!1,2545655511)},[e("b-dropdown-item",{attrs:{disabled:0===t.backupToUpload?.length},on:{click:function(e){return t.downloadAllBackupFiles(t.backupToUpload)}}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.7",icon:"download"}}),t._v(" Download selected ")],1),e("b-dropdown-item",{on:{click:function(e){return t.downloadAllBackupFiles(t.backupList)}}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.7",icon:"download"}}),t._v(" Download all ")],1)],1),e("b-button",{staticStyle:{"max-height":"38px","min-width":"100px","white-space":"nowrap"},attrs:{variant:"outline-danger"},on:{click:function(e){return t.deleteLocalBackup(null,t.backupList)}}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"0.9",icon:"trash"}}),t._v(" Remove all ")],1)],1),t.backupList?.length>0?e("b-table",{ref:"selectableTable",staticClass:"mb-0",attrs:{items:t.backupList,fields:[...t.localBackupTableFields,{key:"actions",label:"Actions",thStyle:{width:"5%"},class:"text-center"}],stacked:"md","show-empty":"",bordered:"","select-mode":"multi",selectable:"","selected-variant":"outline-dark",hover:"",small:""},on:{"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"thead-top",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-center",attrs:{colspan:"6"}},[e("b",[t._v(" List of available backups on the local machine (backups are automatically deleted 24 hours after creation) ")])])],1)]},proxy:!0},{key:"cell(create)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.create))+" ")]}},{key:"cell(expire)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.create,!0))+" ")]}},{key:"cell(isActive)",fn:function({rowSelected:a}){return[a?[e("span",{staticStyle:{color:"green"},attrs:{"aria-hidden":"true"}},[e("b-icon",{attrs:{icon:"check-square-fill",scale:"1",variant:"success"}})],1),e("span",{staticClass:"sr-only"},[t._v("Selected")])]:[e("span",{staticStyle:{color:"white"},attrs:{"aria-hidden":"true"}},[e("b-icon",{attrs:{icon:"square",scale:"1",variant:"secondary"}})],1),e("span",{staticClass:"sr-only"},[t._v("Not selected")])]]}},{key:"cell(file_size)",fn:function(e){return[t._v(" "+t._s(t.addAndConvertFileSizes(e.item.file_size))+" ")]}},{key:"cell(actions)",fn:function(a){return[e("div",{staticClass:"d-flex justify-content-center align-items-center"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Remove file",expression:"'Remove file'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center mr-1 custom-button",attrs:{id:`delete-local-backup-${a.item.component}_${t.backupList[a.index].create}`,variant:"outline-danger"}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"0.9",icon:"trash"}})],1),e("confirm-dialog",{attrs:{target:`delete-local-backup-${a.item.component}_${t.backupList[a.index].create}`,"confirm-button":"Remove File"},on:{confirm:function(e){return t.deleteLocalBackup(a.item.component,t.backupList,t.backupList[a.index].file)}}}),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Download file",expression:"'Download file'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center custom-button",attrs:{variant:"outline-primary"},on:{click:function(e){return t.downloadAllBackupFiles([{component:a.item.component,file:t.backupList[a.index].file}])}}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"1",icon:"cloud-arrow-down"}})],1)],1)]}}],null,!1,1174065662)}):t._e(),e("span",{staticStyle:{"font-size":"0.9rem"}},[t._v("Select application component(s) you would like to upload")]),t.showProgressBar?e("b-card-text",[e("div",{staticClass:"mt-1"},[t.fileProgress.length>0?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","text-align":"center"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[t.allDownloadsCompleted()?e("span",[t._v(" Download Completed ")]):e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" Downloading... ")],1)]),t._l(t.computedFileProgress,(function(a,s){return a.progress>0?e("b-progress",{key:s,staticClass:"mt-1",staticStyle:{height:"16px"},attrs:{max:100}},[e("b-progress-bar",{staticStyle:{"font-size":"14px"},attrs:{value:a.progress,label:`${a.fileName} - ${a.progress.toFixed(2)}%`}})],1):t._e()}))],2):t._e()])]):t._e(),t.backupList?.length>0?e("div",{staticClass:"mt-2"},[e("div",{staticClass:"mb-2 mt-3",staticStyle:{border:"1px solid #ccc","border-radius":"8px",height:"45px",padding:"12px","line-height":"0px"}},[e("h5",[e("b-icon",{attrs:{icon:"gear-fill"}}),t._v(" Choose your storage method")],1)]),e("b-form-radio-group",{attrs:{id:"btn-radios-2",options:t.storageMethod,"button-variant":"outline-primary",name:"radio-btn-outline",disable:t.storageMethod,buttons:""},model:{value:t.selectedStorageMethod,callback:function(e){t.selectedStorageMethod=e},expression:"selectedStorageMethod"}}),"flux"===t.selectedStorageMethod?e("div",[!0===t.sigInPrivilage?e("div",{staticClass:"mb-2"},[e("ul",{staticClass:"mt-2",staticStyle:{"font-size":"0.9rem"}},[e("li",[t._v("Free FluxDrive backups! Up to 10GB total to use per user")]),e("li",[t._v("FluxDrive backups can be downloaded on Restore page")])]),e("b-button",{staticClass:"mt-2",attrs:{disabled:!0===t.uploadProgress||0===t.backupToUpload.length,block:"",variant:"outline-primary"},on:{click:function(e){return t.uploadToFluxDrive()}}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.2",icon:"cloud-arrow-up"}}),t._v(" Upload Selected Components To FluxDrive ")],1)],1):t._e(),!1===t.sigInPrivilage?e("b-button",{staticClass:"mt-1 w-100",attrs:{variant:"outline-primary"},on:{click:t.removeAllBackup}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.5",icon:"cloud-arrow-up"}}),t._v(" Export ")],1):t._e()],1):t._e(),"google"===t.selectedStorageMethod?e("div",[e("b-button",{staticClass:"mt-1 w-100",attrs:{variant:"outline-primary"},on:{click:t.removeAllBackup}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.5",icon:"cloud-arrow-up"}}),t._v(" Export ")],1)],1):t._e(),t.showUploadProgressBar?e("b-card-text",[e("div",{staticClass:"mt-1"},[t.fileProgress.length>0?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","text-align":"center"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" "+t._s(t.uploadStatus)+" ")],1)]),t._l(t.computedFileProgress,(function(a,s){return a.progress>0?e("b-progress",{key:s,staticClass:"mt-1",staticStyle:{height:"16px"},attrs:{max:100}},[e("b-progress-bar",{staticStyle:{"font-size":"14px"},attrs:{value:a.progress,label:`${a.fileName} - ${a.progress.toFixed(2)}%`}})],1):t._e()}))],2):t._e()])]):t._e(),t.showFluxDriveProgressBar?e("b-card-text",[e("div",{staticClass:"mt-1"},[t.fileProgressFD.length>0?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","text-align":"center"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" "+t._s(t.fluxDriveUploadStatus)+" ")],1)]),t._l(t.computedFileProgressFD,(function(a,s){return a.progress>0?e("b-progress",{key:s,staticClass:"mt-1",staticStyle:{height:"16px"},attrs:{max:100}},[e("b-progress-bar",{staticStyle:{"font-size":"14px"},attrs:{value:a.progress,label:`${a.fileName} - ${a.progress.toFixed(2)}%`}})],1):t._e()}))],2):t._e()])]):t._e()],1):t._e()],1):t._e()],1),e("b-tab",{staticStyle:{margin:"0","padding-top":"0px"},attrs:{title:"Restore"},on:{click:t.handleRadioClick}},[e("div",{staticClass:"mb-2",staticStyle:{border:"1px solid #ccc","border-radius":"8px",height:"45px",padding:"12px","line-height":"0px"}},[e("h5",[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.4",icon:"cloud-download"}}),t._v(" Select restore method ")],1)]),e("b-form-group",{staticClass:"mb-2"},[e("b-row",[e("b-col",{staticClass:"d-flex align-items-center",staticStyle:{height:"38px"}},[e("b-form-radio-group",{staticStyle:{"max-height":"38px","min-width":"100px","white-space":"nowrap"},attrs:{id:"btn-radios-2",options:t.restoreOptions,disable:t.restoreOptions,"button-variant":"outline-primary",name:"radio-btn-outline",buttons:""},on:{change:t.handleRadioClick},model:{value:t.selectedRestoreOption,callback:function(e){t.selectedRestoreOption=e},expression:"selectedRestoreOption"}})],1),e("b-col",{staticClass:"text-right",staticStyle:{height:"38px"}},["FluxDrive"===t.selectedRestoreOption?e("b-button",{staticStyle:{"max-height":"38px","min-width":"100px","white-space":"nowrap"},attrs:{variant:"outline-success"},on:{click:t.getFluxDriveBackupList}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.2",icon:"arrow-repeat"}}),t._v("Refresh ")],1):t._e()],1)],1)],1),"FluxDrive"===t.selectedRestoreOption?e("div",[!0===t.sigInPrivilage?e("div",[e("div",[e("b-input-group",{staticClass:"mb-2"},[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("b-icon",{attrs:{icon:"funnel-fill"}})],1),e("b-form-select",{attrs:{options:t.restoreComponents},model:{value:t.nestedTableFilter,callback:function(e){t.nestedTableFilter=e},expression:"nestedTableFilter"}})],1)],1),e("b-table",{key:t.tableBackup,attrs:{items:t.checkpoints,fields:t.backupTableFields,stacked:"md","show-empty":"",bordered:"",small:"","empty-text":"No records available. Please export your backup to FluxDrive.","sort-by":t.sortbackupTableKey,"sort-desc":t.sortbackupTableDesc,"tbody-tr-class":t.rowClassFluxDriveBackups},on:{"update:sortBy":function(e){t.sortbackupTableKey=e},"update:sort-by":function(e){t.sortbackupTableKey=e},"update:sortDesc":function(e){t.sortbackupTableDesc=e},"update:sort-desc":function(e){t.sortbackupTableDesc=e},filtered:t.onFilteredBackup},scopedSlots:t._u([{key:"thead-top",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-center",attrs:{colspan:"6",variant:"dark"}},[e("b-icon",{staticClass:"mr-2",attrs:{scale:"1.2",icon:"back"}}),e("b",[t._v("Backups Inventory")])],1)],1)]},proxy:!0},{key:"cell(actions)",fn:function(a){return[e("div",{staticClass:"d-flex justify-content-center align-items-center"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Remove Backup(s)",expression:"'Remove Backup(s)'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center mr-1",staticStyle:{width:"15px",height:"25px"},attrs:{id:`remove-checkpoint-${a.item.timestamp}`,variant:"outline-danger"}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"0.9",icon:"trash"}})],1),e("confirm-dialog",{attrs:{target:`remove-checkpoint-${a.item.timestamp}`,"confirm-button":"Remove Backup(s)"},on:{confirm:function(e){return t.deleteRestoreBackup(a.item.component,t.checkpoints,a.item.timestamp)}}}),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Add all to Restore List",expression:"'Add all to Restore List'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center",staticStyle:{width:"15px",height:"25px"},attrs:{variant:"outline-primary"},on:{click:function(e){return t.addAllBackupComponents(a.item.timestamp)}}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"0.9",icon:"save"}})],1)],1)]}},{key:"cell(timestamp)",fn:function(a){return[e("kbd",{staticClass:"alert-info no-wrap"},[e("b-icon",{attrs:{scale:"1.2",icon:"hdd"}}),t._v("Â Â backup_"+t._s(a.item.timestamp))],1)]}},{key:"cell(time)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.timestamp))+" ")]}},{key:"row-details",fn:function(a){return[e("b-table",{key:t.tableBackup,staticClass:"backups-table",attrs:{stacked:"md","show-empty":"",bordered:"",hover:"",small:"",items:a.item.components.filter((e=>Object.values(e).some((e=>String(e).toLowerCase().includes(t.nestedTableFilter.toLowerCase()))))),fields:t.componentsTable1},scopedSlots:t._u([{key:"cell(file_url)",fn:function(a){return[e("div",{staticClass:"ellipsis-wrapper"},[e("b-link",{attrs:{href:a.item.file_url,target:"_blank",rel:"noopener noreferrer"}},[t._v(" "+t._s(a.item.file_url)+" ")])],1)]}},{key:"cell(file_size)",fn:function(e){return[t._v(" "+t._s(t.addAndConvertFileSizes(e.item.file_size))+" ")]}},{key:"cell(actions)",fn:function(s){return[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Add to Restore List",expression:"'Add to Restore List'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center",staticStyle:{margin:"auto",width:"95px",height:"25px",display:"flex"},attrs:{variant:"outline-primary"},on:{click:function(e){return t.addComponent(s.item,a.item.timestamp)}}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"0.7",icon:"plus-lg"}})],1)]}}],null,!0)})]}}],null,!1,1747254148)}),t.newComponents.length>0?e("b-table",{staticClass:"mt-1 backups-table",attrs:{items:t.newComponents,fields:[...t.newComponentsTableFields,{key:"actions",label:"Actions",thStyle:{width:"20%"},class:"text-center"}],stacked:"md","show-empty":"",bordered:"",small:""},scopedSlots:t._u([{key:"thead-top",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-center",attrs:{colspan:"6",variant:"dark"}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.2",icon:"life-preserver"}}),e("b",[t._v("Restore Overview")])],1)],1)]},proxy:!0},{key:"cell(timestamp)",fn:function(e){return[t._v(" "+t._s(t.formatDateTime(e.item.timestamp))+" ")]}},{key:"cell(file_url)",fn:function(a){return[e("div",{staticClass:"ellipsis-wrapper"},[e("b-link",{attrs:{href:a.item.file_url,target:"_blank",rel:"noopener noreferrer"}},[t._v(" "+t._s(a.item.file_url)+" ")])],1)]}},{key:"cell(file_size)",fn:function(e){return[t._v(" "+t._s(t.addAndConvertFileSizes(e.item.file_size))+" ")]}},{key:"cell(actions)",fn:function(a){return[e("div",{staticClass:"d-flex justify-content-center align-items-center"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Remove restore job",expression:"'Remove restore job'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center",staticStyle:{width:"95px",height:"25px"},attrs:{variant:"outline-danger"},on:{click:function(e){return t.deleteItem(a.index,t.newComponents)}}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"0.9",icon:"trash"}})],1)],1)]}},{key:"custom-foot",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-right",attrs:{colspan:"3",variant:"dark"}}),e("b-td",{staticStyle:{"text-align":"center","vertical-align":"middle"},attrs:{colspan:"2",variant:"dark"}},[e("b-icon",{staticClass:"mr-2",attrs:{icon:"hdd",scale:"1.4"}}),t._v(" "+t._s(t.addAndConvertFileSizes(t.totalArchiveFileSize(t.newComponents)))+" ")],1)],1)]},proxy:!0}],null,!1,3243908673)}):t._e(),e("b-alert",{staticClass:"mt-1 rounded-0 d-flex align-items-center justify-content-center",staticStyle:{"z-index":"1000"},attrs:{variant:t.alertVariant,solid:"true",dismissible:""},model:{value:t.showTopFluxDrive,callback:function(e){t.showTopFluxDrive=e},expression:"showTopFluxDrive"}},[e("h5",{staticClass:"mt-1 mb-1"},[t._v(" "+t._s(t.alertMessage)+" ")])]),t.newComponents?.length>0&&!t.restoringFromFluxDrive?e("b-button",{staticClass:"mt-2",attrs:{block:"",variant:"outline-primary"},on:{click:function(e){return t.restoreFromFluxDrive(t.newComponents)}}},[e("b-icon",{staticClass:"mr-1",attrs:{icon:"arrow-clockwise",scale:"1.2"}}),t._v("Restore ")],1):t._e(),!0===t.restoringFromFluxDrive?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","text-align":"center"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[!0===t.restoringFromFluxDrive?e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" "+t._s(t.restoreFromFluxDriveStatus)+" ")],1):t._e()])]):t._e()],1):t._e()]):t._e(),"Upload File"===t.selectedRestoreOption?e("div",[e("div",[e("b-input-group",{staticClass:"mb-0"},[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("b-icon",{attrs:{icon:"folder-plus"}})],1),e("b-form-select",{staticStyle:{"border-radius":"0"},attrs:{options:t.components,disabled:t.remoteFileComponents},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v(" - Select component - ")])]},proxy:!0}],null,!1,2230972607),model:{value:t.restoreRemoteFile,callback:function(e){t.restoreRemoteFile=e},expression:"restoreRemoteFile"}}),e("b-input-group-append",[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Choose file to upload",expression:"'Choose file to upload'",modifiers:{hover:!0,top:!0}}],attrs:{disabled:null===t.restoreRemoteFile,text:"Button",size:"sm",variant:"outline-primary"},on:{click:t.addRemoteFile}},[e("b-icon",{attrs:{icon:"cloud-arrow-up",scale:"1.5"}})],1)],1)],1)],1),e("div",[e("input",{ref:"fileselector",staticClass:"flux-share-upload-input",staticStyle:{display:"none"},attrs:{id:"file-selector",type:"file"},on:{input:t.handleFiles}})]),e("b-alert",{staticClass:"mt-1 rounded-0 d-flex align-items-center justify-content-center",staticStyle:{"z-index":"1000"},attrs:{variant:t.alertVariant,solid:"true",dismissible:""},model:{value:t.showTopUpload,callback:function(e){t.showTopUpload=e},expression:"showTopUpload"}},[e("h5",{staticClass:"mt-1 mb-1"},[t._v(" "+t._s(t.alertMessage)+" ")])]),t.files?.length>0?e("div",{staticClass:"d-flex justify-content-between mt-2"},[e("b-table",{staticClass:"b-table",attrs:{small:"",bordered:"",size:"sm",items:t.files,fields:t.computedRestoreUploadFileFields},scopedSlots:t._u([{key:"thead-top",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-center",attrs:{colspan:"6",variant:"dark"}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.2",icon:"life-preserver"}}),e("b",[t._v("Restore Overview")])],1)],1)]},proxy:!0},{key:"cell(file)",fn:function(a){return[e("div",{staticClass:"table-cell"},[t._v(" "+t._s(a.value)+" ")])]}},{key:"cell(file_size)",fn:function(a){return[e("div",{staticClass:"table-cell no-wrap"},[t._v(" "+t._s(t.addAndConvertFileSizes(a.value))+" ")])]}},{key:"cell(actions)",fn:function(a){return[e("div",{staticClass:"d-flex justify-content-center align-items-center"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Remove restore job",expression:"'Remove restore job'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center",staticStyle:{width:"15px",height:"25px"},attrs:{variant:"outline-danger"},on:{click:function(e){return t.deleteItem(a.index,t.files,a.item.file,"upload")}}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"0.9",icon:"trash"}})],1)],1)]}},{key:"custom-foot",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-right",attrs:{colspan:"2",variant:"dark"}}),e("b-td",{staticStyle:{"text-align":"center","vertical-align":"middle"},attrs:{colspan:"2",variant:"dark"}},[e("b-icon",{staticClass:"mr-1",attrs:{icon:"hdd",scale:"1.4"}}),t._v(t._s(t.addAndConvertFileSizes(t.files))+" ")],1)],1)]},proxy:!0}],null,!1,1264712967)})],1):t._e(),e("div",{staticClass:"mt-2"},[t.restoreFromUpload?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px","text-align":"center"}},[t.restoreFromUpload?e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" "+t._s(t.restoreFromUploadStatus)+" ")],1):t._e()]),t._l(t.files,(function(a){return a.uploading?e("div",{key:a.file_name,staticClass:"upload-item mb-1"},[e("div",{class:a.uploading?"":"hidden"},[t._v(" "+t._s(a.file_name)+" ")]),e("b-progress",{attrs:{max:"100",height:"15px"}},[e("b-progress-bar",{class:a.uploading?"":"hidden",attrs:{value:a.progress,label:`${a.progress.toFixed(2)}%`}})],1)],1):t._e()}))],2):t._e()]),t.files?.length>0&&""===t.restoreFromUploadStatus?e("b-button",{staticClass:"mt-2",attrs:{block:"",variant:"outline-primary"},on:{click:function(e){return t.startUpload()}}},[e("b-icon",{staticClass:"mr-1",attrs:{icon:"arrow-clockwise",scale:"1.1"}}),t._v("Restore ")],1):t._e()],1):t._e(),"Remote URL"===t.selectedRestoreOption?e("div",[e("div",[e("b-input-group",{staticClass:"mb-0"},[e("b-input-group-prepend",{attrs:{"is-text":""}},[e("b-icon",{attrs:{icon:"globe"}})],1),e("b-form-input",{attrs:{state:t.urlValidationState,type:"url",placeholder:"Enter the URL for your remote backup archive",required:""},model:{value:t.restoreRemoteUrl,callback:function(e){t.restoreRemoteUrl=e},expression:"restoreRemoteUrl"}}),e("b-input-group-append",[e("b-form-select",{staticStyle:{"border-radius":"0"},attrs:{options:t.components,disabled:t.remoteUrlComponents},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:null,disabled:""}},[t._v(" - Select component - ")])]},proxy:!0}],null,!1,2230972607),model:{value:t.restoreRemoteUrlComponent,callback:function(e){t.restoreRemoteUrlComponent=e},expression:"restoreRemoteUrlComponent"}})],1),e("b-input-group-append",[e("b-button",{attrs:{disabled:null===t.restoreRemoteUrlComponent,size:"sm",variant:"outline-primary"},on:{click:function(e){return t.addRemoteUrlItem(t.appName,t.restoreRemoteUrlComponent)}}},[e("b-icon",{attrs:{scale:"0.8",icon:"plus-lg"}})],1)],1)],1),e("b-form-invalid-feedback",{staticClass:"mb-2",attrs:{state:t.urlValidationState}},[t._v(" "+t._s(t.urlValidationMessage)+" ")])],1),e("b-alert",{staticClass:"mt-1 rounded-0 d-flex align-items-center justify-content-center",staticStyle:{"z-index":"1000"},attrs:{variant:t.alertVariant,solid:"true",dismissible:""},model:{value:t.showTopRemote,callback:function(e){t.showTopRemote=e},expression:"showTopRemote"}},[e("h5",{staticClass:"mt-1 mb-1"},[t._v(" "+t._s(t.alertMessage)+" ")])]),t.restoreRemoteUrlItems?.length>0?e("div",{staticClass:"d-flex justify-content-between mt-2"},[e("b-table",{staticClass:"b-table",attrs:{small:"",bordered:"",size:"sm",items:t.restoreRemoteUrlItems,fields:t.computedRestoreRemoteURLFields},scopedSlots:t._u([{key:"thead-top",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-center",attrs:{colspan:"6",variant:"dark"}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.2",icon:"life-preserver"}}),e("b",[t._v("Restore Overview")])],1)],1)]},proxy:!0},{key:"cell(url)",fn:function(a){return[e("div",{staticClass:"table-cell no"},[t._v(" "+t._s(a.value)+" ")])]}},{key:"cell(component)",fn:function(a){return[e("div",{staticClass:"table-cell"},[t._v(" "+t._s(a.value)+" ")])]}},{key:"cell(file_size)",fn:function(a){return[e("div",{staticClass:"table-cell no-wrap"},[t._v(" "+t._s(t.addAndConvertFileSizes(a.value))+" ")])]}},{key:"cell(actions)",fn:function(a){return[e("div",{staticClass:"d-flex justify-content-center align-items-center"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Remove restore job",expression:"'Remove restore job'",modifiers:{hover:!0,top:!0}}],staticClass:"d-flex justify-content-center align-items-center",staticStyle:{width:"15px",height:"25px"},attrs:{variant:"outline-danger"},on:{click:function(e){return t.deleteItem(a.index,t.restoreRemoteUrlItems)}}},[e("b-icon",{staticClass:"d-flex justify-content-center align-items-center",attrs:{scale:"0.9",icon:"trash"}})],1)],1)]}},{key:"custom-foot",fn:function(){return[e("b-tr",[e("b-td",{staticClass:"text-right",attrs:{colspan:"2",variant:"dark"}}),e("b-td",{staticStyle:{"text-align":"center","vertical-align":"middle"},attrs:{colspan:"2",variant:"dark"}},[e("b-icon",{staticClass:"mr-1",attrs:{icon:"hdd",scale:"1.4"}}),t._v(t._s(t.addAndConvertFileSizes(t.restoreRemoteUrlItems))+" ")],1)],1)]},proxy:!0}],null,!1,2584524300)})],1):t._e(),e("div",{staticClass:"mt-2"},[!0===t.downloadingFromUrl?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","text-align":"center"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[!0===t.downloadingFromUrl?e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" "+t._s(t.restoreFromRemoteURLStatus)+" ")],1):t._e()])]):t._e()]),t.restoreRemoteUrlItems?.length>0&&""===t.restoreFromRemoteURLStatus?e("b-button",{staticClass:"mt-2",attrs:{block:"",variant:"outline-primary"},on:{click:function(e){return t.restoreFromRemoteFile(t.appName)}}},[e("b-icon",{staticClass:"mr-1",attrs:{icon:"arrow-clockwise",scale:"1.1"}}),t._v("Restore ")],1):t._e()],1):t._e()],1)],1)],1)],1)]),e("b-tab",{attrs:{title:"Interactive Terminal"}},[e("div",{staticClass:"text-center"},[e("div",[e("b-card-group",{attrs:{deck:""}},[e("b-card",{attrs:{"header-tag":"header"}},[e("div",{staticClass:"mb-2",staticStyle:{border:"1px solid #ccc","border-radius":"8px",height:"45px",padding:"12px","text-align":"left","line-height":"0px"}},[e("h5",[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.2",icon:"terminal"}}),t._v(" Browser-based Interactive Terminal ")],1)]),e("div",{staticClass:"d-flex align-items-center"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.appSpecification?.compose,expression:"appSpecification?.compose"}],staticClass:"mr-4"},[e("b-form-select",{attrs:{options:null,disabled:!!t.isVisible||t.isComposeSingle},model:{value:t.selectedApp,callback:function(e){t.selectedApp=e},expression:"selectedApp"}},[e("b-form-select-option",{attrs:{value:"null",disabled:""}},[t._v(" -- Please select component -- ")]),t._l(t.appSpecification?.compose,(function(a){return e("b-form-select-option",{key:a.name,attrs:{value:a.name}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1),e("div",{staticClass:"mr-4"},[e("b-form-select",{attrs:{options:t.options,disabled:!!t.isVisible},on:{input:t.onSelectChangeCmd},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{option:null,value:null,disabled:""}},[t._v(" -- Please select command -- ")])]},proxy:!0}]),model:{value:t.selectedCmd,callback:function(e){t.selectedCmd=e},expression:"selectedCmd"}})],1),t.isVisible||t.isConnecting?t._e():e("b-button",{staticClass:"col-2",attrs:{href:"#",variant:"outline-primary"},on:{click:function(e){return t.connectTerminal(t.selectedApp?`${t.selectedApp}_${t.appSpecification.name}`:t.appSpecification.name)}}},[t._v(" Connect ")]),t.isVisible?e("b-button",{staticClass:"col-2",attrs:{variant:"outline-danger"},on:{click:t.disconnectTerminal}},[t._v(" Disconnect ")]):t._e(),t.isConnecting?e("b-button",{staticClass:"col-2 align-items-center justify-content-center",attrs:{variant:"outline-primary",disabled:""}},[e("div",{staticClass:"d-flex align-items-center justify-content-center"},[e("b-spinner",{staticClass:"mr-1",attrs:{small:""}}),t._v(" Connecting... ")],1)]):t._e(),e("div",{staticClass:"ml-auto mt-1"},[e("div",{staticClass:"ml-auto d-flex"},[e("b-form-checkbox",{staticClass:"ml-4 mr-1 d-flex align-items-center justify-content-center",attrs:{switch:"",disabled:!!t.isVisible},on:{input:t.onSelectChangeUser},model:{value:t.enableUser,callback:function(e){t.enableUser=e},expression:"enableUser"}},[e("div",{staticClass:"d-flex",staticStyle:{"font-size":"14px"}},[t._v(" User ")])]),e("b-form-checkbox",{staticClass:"ml-2 d-flex align-items-center justify-content-center",attrs:{switch:"",disabled:!!t.isVisible},on:{input:t.onSelectChangeEnv},model:{value:t.enableEnvironment,callback:function(e){t.enableEnvironment=e},expression:"enableEnvironment"}},[e("div",{staticClass:"d-flex",staticStyle:{"font-size":"14px"}},[t._v(" Environment ")])])],1)])],1),"Custom"!==t.selectedCmd||t.isVisible?t._e():e("div",{staticClass:"d-flex mt-1"},[e("b-form-input",{style:{width:"100%"},attrs:{placeholder:"Enter custom command (string)"},model:{value:t.customValue,callback:function(e){t.customValue=e},expression:"customValue"}})],1),t.enableUser&&!t.isVisible?e("div",{staticClass:"d-flex mt-1"},[e("b-form-input",{style:{width:"100%"},attrs:{placeholder:"Enter user. Format is one of: user, user:group, uid, or uid:gid."},model:{value:t.userInputValue,callback:function(e){t.userInputValue=e},expression:"userInputValue"}})],1):t._e(),t.enableEnvironment&&!t.isVisible?e("div",{staticClass:"d-flex mt-1"},[e("b-form-input",{style:{width:"100%"},attrs:{placeholder:"Enter environment parameters (string)"},model:{value:t.envInputValue,callback:function(e){t.envInputValue=e},expression:"envInputValue"}})],1):t._e(),e("div",{staticClass:"d-flex align-items-center mb-1"},[t.isVisible?e("div",{staticClass:"mt-2"},["Custom"!==t.selectedCmd?[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("Exec into container")]),e("span",{style:t.selectedOptionTextStyle},[t._v(t._s(t.selectedApp||t.appSpecification.name))]),e("span",{staticStyle:{"font-weight":"bold"}},[t._v("using command")]),e("span",{style:t.selectedOptionTextStyle},[t._v(t._s(t.selectedOptionText))]),e("span",{staticStyle:{"font-weight":"bold"}},[t._v("as")]),e("span",{style:t.selectedOptionTextStyle},[t._v(t._s(t.userInputValue?t.userInputValue:"default user"))])]:[e("span",{staticStyle:{"font-weight":"bold"}},[t._v("Exec into container")]),e("span",{style:t.selectedOptionTextStyle},[t._v(t._s(t.selectedApp||t.appSpecification.name))]),e("span",{staticStyle:{"font-weight":"bold"}},[t._v("using custom command")]),e("span",{style:t.selectedOptionTextStyle},[t._v(t._s(t.customValue))]),e("span",{staticStyle:{"font-weight":"bold"}},[t._v("as")]),e("span",{style:t.selectedOptionTextStyle},[t._v(t._s(t.userInputValue?t.userInputValue:"default user"))])]],2):t._e()])])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],ref:"terminalElement",staticStyle:{"text-align":"left"}})],1)]),e("div",[e("b-card",{staticClass:"mt-1"},[e("div",{staticClass:"mb-2",staticStyle:{display:"flex","justify-content":"space-between",border:"1px solid #ccc","border-radius":"8px",height:"45px",padding:"12px","text-align":"left","line-height":"0px"}},[e("h5",[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.2",icon:"server"}}),t._v(" Volume browser ")],1),t.selectedAppVolume||!t.appSpecification?.compose?e("h6",{staticClass:"progress-label"},[e("b-icon",{staticClass:"mr-1",style:t.getIconColorStyle(t.storage.used,t.storage.total),attrs:{icon:t.getIconName(t.storage.used,t.storage.total),scale:"1.4"}}),t._v(" "+t._s(`${t.storage.used.toFixed(2)} / ${t.storage.total.toFixed(2)}`)+" GB ")],1):t._e()]),e("div",{staticClass:"mr-4 d-flex",class:{"mb-2":t.appSpecification&&t.appSpecification.compose},staticStyle:{"max-width":"250px"}},[e("b-form-select",{directives:[{name:"show",rawName:"v-show",value:t.appSpecification?.compose,expression:"appSpecification?.compose"}],attrs:{options:null,disabled:t.isComposeSingle},on:{change:t.refreshFolderSwitch},model:{value:t.selectedAppVolume,callback:function(e){t.selectedAppVolume=e},expression:"selectedAppVolume"}},[e("b-form-select-option",{attrs:{value:"null",disabled:""}},[t._v(" -- Please select component -- ")]),t._l(t.appSpecification.compose,(function(a){return e("b-form-select-option",{key:a.name,attrs:{value:a.name}},[t._v(" "+t._s(a.name)+" ")])}))],2)],1),t.fileProgressVolume.length>0?e("div",{staticClass:"mb-2 mt-2 w-100",staticStyle:{margin:"0 auto",padding:"12px",border:"1px solid #eaeaea","border-radius":"8px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.1)","text-align":"center"}},[e("h5",{staticStyle:{"font-size":"16px","margin-bottom":"5px"}},[t.allDownloadsCompletedVolume()?e("span",[t._v(" Download Completed ")]):e("span",[e("b-spinner",{attrs:{small:""}}),t._v(" Downloading... ")],1)]),t._l(t.computedFileProgressVolume,(function(a,s){return a.progress>0?e("b-progress",{key:s,staticClass:"mt-1",staticStyle:{height:"16px"},attrs:{max:100}},[e("b-progress-bar",{staticStyle:{"font-size":"14px"},attrs:{value:a.progress,label:`${a.fileName} - ${a.progress.toFixed(2)}%`}})],1):t._e()}))],2):t._e(),e("div",[t.selectedAppVolume||!t.appSpecification?.compose?e("b-button-toolbar",{staticClass:"mb-1 w-100",attrs:{justify:""}},[e("div",{staticClass:"d-flex flex-row w-100"},[e("b-input-group",{staticClass:"w-100 mr-2"},[e("b-input-group-prepend",[e("b-input-group-text",[e("b-icon",{attrs:{icon:"house-fill"}})],1)],1),e("b-form-input",{staticClass:"text-secondary",staticStyle:{"font-weight":"bold","font-size":"1.0em"},model:{value:t.inputPathValue,callback:function(e){t.inputPathValue=e},expression:"inputPathValue"}})],1),e("b-button-group",{attrs:{size:"sm"}}),e("b-button-group",{staticClass:"ml-auto",attrs:{size:"sm"}},[e("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.refreshFolder()}}},[e("v-icon",{attrs:{name:"redo-alt"}})],1),e("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){t.uploadFilesDialog=!0}}},[e("v-icon",{attrs:{name:"cloud-upload-alt"}})],1),e("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){t.createDirectoryDialogVisible=!0}}},[e("v-icon",{attrs:{name:"folder-plus"}})],1),e("b-modal",{attrs:{title:"Create Folder",size:"lg",centered:"","ok-only":"","ok-title":"Create Folder","header-bg-variant":"primary"},on:{ok:function(e){return t.createFolder(t.newDirName)}},model:{value:t.createDirectoryDialogVisible,callback:function(e){t.createDirectoryDialogVisible=e},expression:"createDirectoryDialogVisible"}},[e("b-form-group",{attrs:{label:"Folder Name","label-for":"folderNameInput"}},[e("b-form-input",{attrs:{id:"folderNameInput",size:"lg",placeholder:"New Folder Name"},model:{value:t.newDirName,callback:function(e){t.newDirName=e},expression:"newDirName"}})],1)],1),e("b-modal",{attrs:{title:"Upload Files",size:"lg","header-bg-variant":"primary",centered:"","hide-footer":""},on:{close:function(e){return t.refreshFolder()}},model:{value:t.uploadFilesDialog,callback:function(e){t.uploadFilesDialog=e},expression:"uploadFilesDialog"}},[e("file-upload",{attrs:{"upload-folder":t.getUploadFolder(),headers:t.zelidHeader},on:{complete:t.refreshFolder}})],1)],1)],1)]):t._e(),t.selectedAppVolume||!t.appSpecification?.compose?e("b-table",{staticClass:"fluxshare-table",attrs:{hover:"",responsive:"",small:"",outlined:"",size:"sm",items:t.folderContentFilter,fields:t.fields,busy:t.loadingFolder,"sort-compare":t.sort,"sort-by":"name","show-empty":"","empty-text":"Directory is empty."},scopedSlots:t._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle mx-2"}),e("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"head(name)",fn:function(e){return[t._v(" "+t._s(e.label.toUpperCase())+" ")]}},{key:"cell(name)",fn:function(a){return[a.item.symLink?e("div",[e("b-link",{on:{click:function(e){return t.changeFolder(a.item.name)}}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.4",icon:"folder-symlink"}}),t._v(" "+t._s(a.item.name)+" ")],1)],1):t._e(),a.item.isDirectory?e("div",[e("b-link",{on:{click:function(e){return t.changeFolder(a.item.name)}}},[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.4",icon:"folder"}}),t._v(" "+t._s(a.item.name)+" ")],1)],1):e("div",[a.item.symLink?t._e():e("div",[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.4",icon:"file-earmark"}}),t._v(" "+t._s(a.item.name)+" ")],1)])]}},{key:"cell(modifiedAt)",fn:function(a){return[a.item.isUpButton?t._e():e("div",{staticClass:"no-wrap"},[t._v(" "+t._s(new Date(a.item.modifiedAt).toLocaleString("en-GB",t.timeoptions))+" ")])]}},{key:"cell(type)",fn:function(a){return[a.item.isUpButton?t._e():e("div",[a.item.isDirectory?e("div",[t._v(" Folder ")]):a.item.isFile||a.item.isSymbolicLink?e("div",[t._v(" File ")]):e("div",[t._v(" Other ")])])]}},{key:"cell(size)",fn:function(a){return[a.item.size>0&&!a.item.isUpButton?e("div",{staticClass:"no-wrap"},[t._v(" "+t._s(t.addAndConvertFileSizes(a.item.size))+" ")]):t._e()]}},{key:"cell(actions)",fn:function(a){return[a.item.isUpButton?t._e():e("b-button-group",{attrs:{size:"sm"}},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:a.item.isFile?"Download":"Download zip of folder",expression:"data.item.isFile ? 'Download' : 'Download zip of folder'",modifiers:{hover:!0,bottom:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{id:`download-${a.item.name}`,variant:"outline-secondary"}},[e("v-icon",{attrs:{name:a.item.isFile?"file-download":"file-archive"}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Rename",expression:"'Rename'",modifiers:{hover:!0,bottom:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{id:`rename-${a.item.name}`,variant:"outline-secondary"},on:{click:function(e){return t.rename(a.item.name)}}},[e("v-icon",{attrs:{name:"edit"}})],1),e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Delete",expression:"'Delete'",modifiers:{hover:!0,bottom:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{id:`delete-${a.item.name}`,variant:"outline-secondary"}},[e("v-icon",{attrs:{name:"trash-alt"}})],1),e("confirm-dialog",{attrs:{target:`delete-${a.item.name}`,"confirm-button":a.item.isFile?"Delete File":"Delete Folder"},on:{confirm:function(e){return t.deleteFile(a.item.name)}}})],1),e("confirm-dialog",{attrs:{target:`download-${a.item.name}`,"confirm-button":a.item.isFile?"Download File":"Download Folder"},on:{confirm:function(e){a.item.isFile?t.download(a.item.name):t.download(a.item.name,!0,a.item.size)}}}),e("b-modal",{attrs:{title:"Rename",size:"lg",centered:"","ok-only":"","ok-title":"Rename"},on:{ok:function(e){return t.confirmRename()}},model:{value:t.renameDialogVisible,callback:function(e){t.renameDialogVisible=e},expression:"renameDialogVisible"}},[e("b-form-group",{attrs:{label:"Name","label-for":"nameInput"}},[e("b-form-input",{attrs:{id:"nameInput",size:"lg",placeholder:"Name"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1)],1)]}}],null,!1,3040013154)}):t._e()],1)])],1)]),t.windowWidth>860?e("b-tab",{attrs:{title:"Global App Management",disabled:""}}):t._e(),e("b-tab",{attrs:{title:"Global Control"}},[t.globalZelidAuthorized?e("div",[e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Control"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" "+t._s(t.isAppOwner?"General options to control all instances of your application":"General options to control instances of selected application running on all nodes that you own")+" ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"start-app-global",variant:"success","aria-label":"Start App"}},[t._v(" Start App ")]),e("confirm-dialog",{attrs:{target:"start-app-global","confirm-button":"Start App"},on:{confirm:function(e){return t.startAppGlobally(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"stop-app-global",variant:"success","aria-label":"Stop App"}},[t._v(" Stop App ")]),e("confirm-dialog",{attrs:{target:"stop-app-global","confirm-button":"Stop App"},on:{confirm:function(e){return t.stopAppGlobally(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"restart-app-global",variant:"success","aria-label":"Restart App"}},[t._v(" Restart App ")]),e("confirm-dialog",{attrs:{target:"restart-app-global","confirm-button":"Restart App"},on:{confirm:function(e){return t.restartAppGlobally(t.appName)}}})],1)],1)],1),e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Pause"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" "+t._s(t.isAppOwner?"The Pause command suspends all processes of all instances of your app":"The Pause command suspends all processes of selected application on all of nodes that you own")+" ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"pause-app-global",variant:"success","aria-label":"Pause App"}},[t._v(" Pause App ")]),e("confirm-dialog",{attrs:{target:"pause-app-global","confirm-button":"Pause App"},on:{confirm:function(e){return t.pauseAppGlobally(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"unpause-app-global",variant:"success","aria-label":"Unpause App"}},[t._v(" Unpause App ")]),e("confirm-dialog",{attrs:{target:"unpause-app-global","confirm-button":"Unpause App"},on:{confirm:function(e){return t.unpauseAppGlobally(t.appName)}}})],1)],1)],1)],1),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Redeploy"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" "+t._s(t.isAppOwner?"Redeployes all instances of your application.Hard redeploy removes persistant data storage. If app uses syncthing it can takes up to 30 to be up and running.":"Redeployes instances of selected application running on all of your nodes. Hard redeploy removes persistant data storage.")+" ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"redeploy-app-soft-global",variant:"success","aria-label":"Soft Redeploy App"}},[t._v(" Soft Redeploy App ")]),e("confirm-dialog",{attrs:{target:"redeploy-app-soft-global","confirm-button":"Redeploy"},on:{confirm:function(e){return t.redeployAppSoftGlobally(t.appName)}}}),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"redeploy-app-hard-global",variant:"success","aria-label":"Hard Redeploy App"}},[t._v(" Hard Redeploy App ")]),e("confirm-dialog",{attrs:{target:"redeploy-app-hard-global","confirm-button":"Redeploy"},on:{confirm:function(e){return t.redeployAppHardGlobally(t.appName)}}})],1)],1)],1),e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Reinstall"}},[e("b-card-text",{staticClass:"mb-2"},[t._v(" "+t._s(t.isAppOwner?"Removes all instances of your App forcing an installation on different nodes.":"Removes all instances of selected App on all of your nodes forcing installation on different nodes.")+" ")]),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mx-1 my-1",attrs:{id:"remove-app-global",variant:"success","aria-label":"Reinstall App"}},[t._v(" Reinstall App ")]),e("confirm-dialog",{attrs:{target:"remove-app-global","confirm-button":"Reinstall App"},on:{confirm:function(e){return t.removeAppGlobally(t.appName)}}})],1)],1)],1)],1)],1):e("div",[t._v(" Global management session expired. Please log out and back into FluxOS. ")])]),e("b-tab",{attrs:{title:"Running Instances"}},[t.masterSlaveApp?e("div",[e("b-card",{attrs:{title:"Primary/Standby App Information"}},[e("list-entry",{attrs:{title:"Current IP selected as Primary running your application",data:t.masterIP}})],1)],1):t._e(),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"4",sm:"4"}},[e("b-form-group",{staticClass:"mb-0"},[e("label",{staticClass:"d-inline-block text-left mr-50"},[t._v("Per page")]),e("b-form-select",{staticClass:"w-50",attrs:{id:"perPageSelect",size:"sm",options:t.instances.pageOptions},model:{value:t.instances.perPage,callback:function(e){t.$set(t.instances,"perPage",e)},expression:"instances.perPage"}})],1)],1),e("b-col",{staticClass:"my-1",attrs:{md:"8"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"1","label-align-sm":"right","label-for":"filterInput"}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{id:"filterInput",type:"search",placeholder:"Type to Search"},model:{value:t.instances.filter,callback:function(e){t.$set(t.instances,"filter",e)},expression:"instances.filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.instances.filter},on:{click:function(e){t.instances.filter=""}}},[t._v(" Clear ")])],1)],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-table",{key:t.tableKey,staticClass:"app-instances-table",attrs:{striped:"",hover:"",outlined:"",responsive:"",busy:t.isBusy,"per-page":t.instances.perPage,"current-page":t.instances.currentPage,items:t.instances.data,fields:t.instances.fields,"sort-by":t.instances.sortBy,"sort-desc":t.instances.sortDesc,"sort-direction":t.instances.sortDirection,filter:t.instances.filter,"show-empty":"","empty-text":`No instances of ${t.appName}`},on:{"update:sortBy":function(e){return t.$set(t.instances,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.instances,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.instances,"sortDesc",e)},"update:sort-desc":function(e){return t.$set(t.instances,"sortDesc",e)}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[e("div",{staticClass:"text-center text-danger my-2"},[e("b-spinner",{staticClass:"align-middle mr-1"}),e("strong",[t._v("Loading geolocation...")])],1)]},proxy:!0},{key:"cell(show_details)",fn:function(a){return[e("a",{on:{click:a.toggleDetails}},[a.detailsShowing?t._e():e("v-icon",{staticClass:"ml-2",attrs:{name:"chevron-down"}}),a.detailsShowing?e("v-icon",{staticClass:"ml-2",attrs:{name:"chevron-up"}}):t._e()],1)]}},{key:"row-details",fn:function(a){return[e("b-card",{},[a.item.broadcastedAt?e("list-entry",{attrs:{title:"Broadcast",data:new Date(a.item.broadcastedAt).toLocaleString("en-GB",t.timeoptions.shortDate)}}):t._e(),a.item.expireAt?e("list-entry",{attrs:{title:"Expires",data:new Date(a.item.expireAt).toLocaleString("en-GB",t.timeoptions.shortDate)}}):t._e()],1)]}},{key:"cell(visit)",fn:function(a){return[e("div",{staticClass:"button-cell"},[e("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-secondary"},on:{click:function(e){t.openApp(a.item.name,a.item.ip.split(":")[0],t.getProperPort())}}},[t._v(" App ")]),e("b-button",{staticClass:"mr-0",attrs:{size:"sm",variant:"outline-primary"},on:{click:function(e){t.openNodeFluxOS(a.item.ip.split(":")[0],a.item.ip.split(":")[1]?+a.item.ip.split(":")[1]-1:16126)}}},[t._v(" FluxNode ")])],1)]}}])})],1),e("b-col",{attrs:{cols:"12"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.instances.totalRows,"per-page":t.instances.perPage,align:"center",size:"sm"},model:{value:t.instances.currentPage,callback:function(e){t.$set(t.instances,"currentPage",e)},expression:"instances.currentPage"}})],1)],1)],1),e("b-tab",{attrs:{title:"Update/Renew",disabled:!t.isAppOwner}},[t.fluxCommunication?t._e():e("div",{staticClass:"text-danger"},[t._v(" Warning: Connected Flux is not communicating properly with Flux network ")]),e("div",{staticStyle:{border:"1px solid #ccc","border-radius":"8px",height:"45px",padding:"12px","line-height":"0px"}},[e("h5",[e("b-icon",{staticClass:"mr-1",attrs:{icon:"ui-checks-grid"}}),t._v(" Update Application Specifications / Extend subscription ")],1)]),e("div",{staticClass:"form-row form-group"},[e("b-input-group",{staticClass:"mt-2"},[e("b-input-group-prepend",[e("b-input-group-text",[e("b-icon",{staticClass:"mr-1",attrs:{icon:"plus-square"}}),t._v(" Update Specifications "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Select if you want to change your application specifications",expression:"'Select if you want to change your application specifications'",modifiers:{hover:!0,top:!0}}],staticClass:"ml-1",attrs:{name:"info-circle"}})],1)],1),e("b-input-group-append",{attrs:{"is-text":""}},[e("b-form-checkbox",{staticClass:"custom-control-primary",attrs:{id:"updateSpecifications",switch:""},model:{value:t.updateSpecifications,callback:function(e){t.updateSpecifications=e},expression:"updateSpecifications"}})],1)],1)],1),t.updateSpecifications?e("div",[t.appUpdateSpecification.version>=4?e("div",[e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6"}},[e("b-card",{attrs:{title:"Details"}},[e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"Version","label-for":"version"}},[e("b-form-input",{attrs:{id:"version",placeholder:t.appUpdateSpecification.version.toString(),readonly:""},model:{value:t.appUpdateSpecification.version,callback:function(e){t.$set(t.appUpdateSpecification,"version",e)},expression:"appUpdateSpecification.version"}})],1),e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"Name","label-for":"name"}},[e("b-form-input",{attrs:{id:"name",placeholder:"Application Name",readonly:""},model:{value:t.appUpdateSpecification.name,callback:function(e){t.$set(t.appUpdateSpecification,"name",e)},expression:"appUpdateSpecification.name"}})],1),e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"Desc.","label-for":"desc"}},[e("b-form-textarea",{attrs:{id:"desc",placeholder:"Description",rows:"3"},model:{value:t.appUpdateSpecification.description,callback:function(e){t.$set(t.appUpdateSpecification,"description",e)},expression:"appUpdateSpecification.description"}})],1),e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"Owner","label-for":"owner"}},[e("b-form-input",{attrs:{id:"owner",placeholder:"Flux ID of Application Owner"},model:{value:t.appUpdateSpecification.owner,callback:function(e){t.$set(t.appUpdateSpecification,"owner",e)},expression:"appUpdateSpecification.owner"}})],1),t.appUpdateSpecification.version>=5&&!t.isPrivateApp?e("div",[e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-1 col-form-label"},[t._v(" Contacts "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of emails Contacts to get notifications ex. app about to expire, app spawns. Contacts are also PUBLIC information.",expression:"'Array of strings of emails Contacts to get notifications ex. app about to expire, app spawns. Contacts are also PUBLIC information.'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:"contacs"},model:{value:t.appUpdateSpecification.contacts,callback:function(e){t.$set(t.appUpdateSpecification,"contacts",e)},expression:"appUpdateSpecification.contacts"}})],1),e("div",{staticClass:"col-0"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Uploads Contacts to Flux Storage. Contacts will be replaced with a link to Flux Storage instead. This increases maximum allowed contacts while adding enhanced privacy - nobody except FluxOS Team maintaining notifications system has access to contacts.",expression:"\n                          'Uploads Contacts to Flux Storage. Contacts will be replaced with a link to Flux Storage instead. This increases maximum allowed contacts while adding enhanced privacy - nobody except FluxOS Team maintaining notifications system has access to contacts.'\n                        ",modifiers:{hover:!0,top:!0}}],attrs:{id:"upload-contacts",variant:"outline-primary"}},[e("v-icon",{attrs:{name:"cloud-upload-alt"}})],1),e("confirm-dialog",{attrs:{target:"upload-contacts","confirm-button":"Upload Contacts",width:600},on:{confirm:function(e){return t.uploadContactsToFluxStorage()}}})],1)])]):t._e(),t.appUpdateSpecification.version>=5&&!t.isPrivateApp?e("div",[e("h4",[t._v("Allowed Geolocation")]),t._l(t.numberOfGeolocations,(function(a){return e("div",{key:`${a}pos`},[e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"1",label:`Continent - ${a}`,"label-for":"Continent"}},[e("b-form-select",{attrs:{id:"Continent",options:t.continentsOptions(!1)},on:{change:function(e){return t.adjustMaxInstancesPossible()}},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:void 0,disabled:""}},[t._v(" -- Select to restrict Continent -- ")])]},proxy:!0}],null,!0),model:{value:t.allowedGeolocations[`selectedContinent${a}`],callback:function(e){t.$set(t.allowedGeolocations,`selectedContinent${a}`,e)},expression:"allowedGeolocations[`selectedContinent${n}`]"}})],1),t.allowedGeolocations[`selectedContinent${a}`]&&"ALL"!==t.allowedGeolocations[`selectedContinent${a}`]?e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"1",label:`Country - ${a}`,"label-for":"Country"}},[e("b-form-select",{attrs:{id:"country",options:t.countriesOptions(t.allowedGeolocations[`selectedContinent${a}`],!1)},on:{change:function(e){return t.adjustMaxInstancesPossible()}},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:void 0,disabled:""}},[t._v(" -- Select to restrict Country -- ")])]},proxy:!0}],null,!0),model:{value:t.allowedGeolocations[`selectedCountry${a}`],callback:function(e){t.$set(t.allowedGeolocations,`selectedCountry${a}`,e)},expression:"allowedGeolocations[`selectedCountry${n}`]"}})],1):t._e(),t.allowedGeolocations[`selectedContinent${a}`]&&"ALL"!==t.allowedGeolocations[`selectedContinent${a}`]&&t.allowedGeolocations[`selectedCountry${a}`]&&"ALL"!==t.allowedGeolocations[`selectedCountry${a}`]?e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"1",label:`Region - ${a}`,"label-for":"Region"}},[e("b-form-select",{attrs:{id:"Region",options:t.regionsOptions(t.allowedGeolocations[`selectedContinent${a}`],t.allowedGeolocations[`selectedCountry${a}`],!1)},on:{change:function(e){return t.adjustMaxInstancesPossible()}},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:void 0,disabled:""}},[t._v(" -- Select to restrict Region -- ")])]},proxy:!0}],null,!0),model:{value:t.allowedGeolocations[`selectedRegion${a}`],callback:function(e){t.$set(t.allowedGeolocations,`selectedRegion${a}`,e)},expression:"allowedGeolocations[`selectedRegion${n}`]"}})],1):t._e()],1)})),e("div",{staticClass:"text-center"},[t.numberOfGeolocations>1?e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Remove Allowed Geolocation Restriction",expression:"'Remove Allowed Geolocation Restriction'",modifiers:{hover:!0,bottom:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"m-1",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){t.numberOfGeolocations=t.numberOfGeolocations-1,t.adjustMaxInstancesPossible()}}},[e("v-icon",{attrs:{name:"minus"}})],1):t._e(),t.numberOfGeolocations<5?e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Add Allowed Geolocation Restriction",expression:"'Add Allowed Geolocation Restriction'",modifiers:{hover:!0,bottom:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"m-1",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){t.numberOfGeolocations=t.numberOfGeolocations+1,t.adjustMaxInstancesPossible()}}},[e("v-icon",{attrs:{name:"plus"}})],1):t._e()],1)],2):t._e(),e("br"),e("br"),t.appUpdateSpecification.version>=5?e("div",[e("h4",[t._v("Forbidden Geolocation")]),t._l(t.numberOfNegativeGeolocations,(function(a){return e("div",{key:`${a}posB`},[e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"1",label:`Continent - ${a}`,"label-for":"Continent"}},[e("b-form-select",{attrs:{id:"Continent",options:t.continentsOptions(!0)},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:void 0,disabled:""}},[t._v(" -- Select to ban Continent -- ")])]},proxy:!0}],null,!0),model:{value:t.forbiddenGeolocations[`selectedContinent${a}`],callback:function(e){t.$set(t.forbiddenGeolocations,`selectedContinent${a}`,e)},expression:"forbiddenGeolocations[`selectedContinent${n}`]"}})],1),t.forbiddenGeolocations[`selectedContinent${a}`]&&"NONE"!==t.forbiddenGeolocations[`selectedContinent${a}`]?e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"1",label:`Country - ${a}`,"label-for":"Country"}},[e("b-form-select",{attrs:{id:"country",options:t.countriesOptions(t.forbiddenGeolocations[`selectedContinent${a}`],!0)},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:void 0,disabled:""}},[t._v(" -- Select to ban Country -- ")])]},proxy:!0}],null,!0),model:{value:t.forbiddenGeolocations[`selectedCountry${a}`],callback:function(e){t.$set(t.forbiddenGeolocations,`selectedCountry${a}`,e)},expression:"forbiddenGeolocations[`selectedCountry${n}`]"}})],1):t._e(),t.forbiddenGeolocations[`selectedContinent${a}`]&&"NONE"!==t.forbiddenGeolocations[`selectedContinent${a}`]&&t.forbiddenGeolocations[`selectedCountry${a}`]&&"ALL"!==t.forbiddenGeolocations[`selectedCountry${a}`]?e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"1",label:`Region - ${a}`,"label-for":"Region"}},[e("b-form-select",{attrs:{id:"Region",options:t.regionsOptions(t.forbiddenGeolocations[`selectedContinent${a}`],t.forbiddenGeolocations[`selectedCountry${a}`],!0)},scopedSlots:t._u([{key:"first",fn:function(){return[e("b-form-select-option",{attrs:{value:void 0,disabled:""}},[t._v(" -- Select to ban Region -- ")])]},proxy:!0}],null,!0),model:{value:t.forbiddenGeolocations[`selectedRegion${a}`],callback:function(e){t.$set(t.forbiddenGeolocations,`selectedRegion${a}`,e)},expression:"forbiddenGeolocations[`selectedRegion${n}`]"}})],1):t._e()],1)})),e("div",{staticClass:"text-center"},[t.numberOfNegativeGeolocations>1?e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Remove Forbidden Geolocation Restriction",expression:"'Remove Forbidden Geolocation Restriction'",modifiers:{hover:!0,bottom:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"m-1",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){t.numberOfNegativeGeolocations=t.numberOfNegativeGeolocations-1}}},[e("v-icon",{attrs:{name:"minus"}})],1):t._e(),t.numberOfNegativeGeolocations<5?e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.bottom",value:"Add Forbidden Geolocation Restriction",expression:"'Add Forbidden Geolocation Restriction'",modifiers:{hover:!0,bottom:!0}},{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"m-1",attrs:{variant:"outline-secondary",size:"sm"},on:{click:function(e){t.numberOfNegativeGeolocations=t.numberOfNegativeGeolocations+1}}},[e("v-icon",{attrs:{name:"plus"}})],1):t._e()],1)],2):t._e(),e("br"),t.appUpdateSpecification.version>=3?e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"Instances","label-for":"instances"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(t.appUpdateSpecification.instances)+" ")]),e("b-form-input",{attrs:{id:"instances",placeholder:"Minimum number of application instances to be spawned",type:"range",min:"3",max:t.maxInstances,step:"1"},model:{value:t.appUpdateSpecification.instances,callback:function(e){t.$set(t.appUpdateSpecification,"instances",e)},expression:"appUpdateSpecification.instances"}})],1):t._e(),t.appUpdateSpecification.version>=7?e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-form-label"},[t._v(" Static IP "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Select if your application strictly requires static IP address",expression:"'Select if your application strictly requires static IP address'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-checkbox",{staticClass:"custom-control-primary inline",attrs:{id:"staticip",switch:""},model:{value:t.appUpdateSpecification.staticip,callback:function(e){t.$set(t.appUpdateSpecification,"staticip",e)},expression:"appUpdateSpecification.staticip"}})],1)]):t._e(),e("br"),t.appUpdateSpecification.version>=7?e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-form-label"},[t._v(" Enterprise Application "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Select if your application requires private image, secrets or if you want to target specific nodes on which application can run. Geolocation targetting is not possible in this case.",expression:"'Select if your application requires private image, secrets or if you want to target specific nodes on which application can run. Geolocation targetting is not possible in this case.'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-checkbox",{staticClass:"custom-control-primary inline",attrs:{id:"enterpriseapp",switch:""},model:{value:t.isPrivateApp,callback:function(e){t.isPrivateApp=e},expression:"isPrivateApp"}})],1)]):t._e()],1)],1)],1),t._l(t.appUpdateSpecification.compose,(function(a,s){return e("b-card",{key:s},[e("b-card-title",[t._v(" Component "+t._s(a.name)+" ")]),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"12",xl:"6"}},[e("b-card",[e("b-card-title",[t._v(" General ")]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Name "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Name of Application Component",expression:"'Name of Application Component'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`repo-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"Component name",readonly:""},model:{value:a.name,callback:function(e){t.$set(a,"name",e)},expression:"component.name"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Description "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Description of Application Component",expression:"'Description of Application Component'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`repo-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"Component description"},model:{value:a.description,callback:function(e){t.$set(a,"description",e)},expression:"component.description"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Repository "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Docker image namespace/repository:tag for component",expression:"'Docker image namespace/repository:tag for component'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`repo-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"Docker image namespace/repository:tag"},model:{value:a.repotag,callback:function(e){t.$set(a,"repotag",e)},expression:"component.repotag"}})],1)]),t.appUpdateSpecification.version>=7&&t.isPrivateApp?e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Repository Authentication "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Docker image authentication for private images in the format of username:apikey. This field will be encrypted and accessible to selected enterprise nodes only.",expression:"'Docker image authentication for private images in the format of username:apikey. This field will be encrypted and accessible to selected enterprise nodes only.'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`repoauth-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"Docker authentication username:apikey"},model:{value:a.repoauth,callback:function(e){t.$set(a,"repoauth",e)},expression:"component.repoauth"}})],1)]):t._e(),e("br"),e("b-card-title",[t._v(" Connectivity ")]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Ports "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of Ports on which application will be available",expression:"'Array of Ports on which application will be available'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`ports-${a.name}_${t.appUpdateSpecification.name}`},model:{value:a.ports,callback:function(e){t.$set(a,"ports",e)},expression:"component.ports"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Domains "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of Domains managed by Flux Domain Manager (FDM). Length must correspond to available ports. Use empty strings for no domains",expression:"'Array of strings of Domains managed by Flux Domain Manager (FDM). Length must correspond to available ports. Use empty strings for no domains'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`domains-${a.name}_${t.appUpdateSpecification.name}`},model:{value:a.domains,callback:function(e){t.$set(a,"domains",e)},expression:"component.domains"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Cont. Ports "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Container Ports - Array of ports which your container has",expression:"'Container Ports - Array of ports which your container has'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`containerPorts-${a.name}_${t.appUpdateSpecification.name}`},model:{value:a.containerPorts,callback:function(e){t.$set(a,"containerPorts",e)},expression:"component.containerPorts"}})],1)])],1)],1),e("b-col",{attrs:{xs:"12",xl:"6"}},[e("b-card",[e("b-card-title",[t._v(" Environment ")]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Environment "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of Environmental Parameters",expression:"'Array of strings of Environmental Parameters'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`environmentParameters-${a.name}_${t.appUpdateSpecification.name}`},model:{value:a.environmentParameters,callback:function(e){t.$set(a,"environmentParameters",e)},expression:"component.environmentParameters"}})],1),e("div",{staticClass:"col-0"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Uploads Enviornment to Flux Storage. Environment parameters will be replaced with a link to Flux Storage instead. This increases maximum allowed size of Env. parameters while adding basic privacy - instead of parameters, link to Flux Storage will be visible.",expression:"\n                          'Uploads Enviornment to Flux Storage. Environment parameters will be replaced with a link to Flux Storage instead. This increases maximum allowed size of Env. parameters while adding basic privacy - instead of parameters, link to Flux Storage will be visible.'\n                        ",modifiers:{hover:!0,top:!0}}],attrs:{id:"upload-env",variant:"outline-primary"}},[e("v-icon",{attrs:{name:"cloud-upload-alt"}})],1),e("confirm-dialog",{attrs:{target:"upload-env","confirm-button":"Upload Environment Parameters",width:600},on:{confirm:function(e){return t.uploadEnvToFluxStorage(s)}}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Commands "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of Commands",expression:"'Array of strings of Commands'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`commands-${a.name}_${t.appUpdateSpecification.name}`},model:{value:a.commands,callback:function(e){t.$set(a,"commands",e)},expression:"component.commands"}})],1),e("div",{staticClass:"col-0"},[e("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Uploads Commands to Flux Storage. Commands will be replaced with a link to Flux Storage instead. This increases maximum allowed size of Commands while adding basic privacy - instead of commands, link to Flux Storage will be visible.",expression:"'Uploads Commands to Flux Storage. Commands will be replaced with a link to Flux Storage instead. This increases maximum allowed size of Commands while adding basic privacy - instead of commands, link to Flux Storage will be visible.'",modifiers:{hover:!0,top:!0}}],attrs:{id:"upload-cmd",variant:"outline-primary"}},[e("v-icon",{attrs:{name:"cloud-upload-alt"}})],1),e("confirm-dialog",{attrs:{target:"upload-cmd","confirm-button":"Upload Commands",width:600},on:{confirm:function(e){return t.uploadCmdToFluxStorage(s)}}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Cont. Data "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Data folder that is shared by application to App volume. Prepend with r: for synced data between instances. Ex. r:/data. Prepend with g: for synced data and primary/standby solution. Ex. g:/data",expression:"'Data folder that is shared by application to App volume. Prepend with r: for synced data between instances. Ex. r:/data. Prepend with g: for synced data and primary/standby solution. Ex. g:/data'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`containerData-${a.name}_${t.appUpdateSpecification.name}`},model:{value:a.containerData,callback:function(e){t.$set(a,"containerData",e)},expression:"component.containerData"}})],1)]),t.appUpdateSpecification.version>=7&&t.isPrivateApp?e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Secrets "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of Secret Environmental Parameters. This will be encrypted and accessible to selected Enterprise Nodes only",expression:"'Array of strings of Secret Environmental Parameters. This will be encrypted and accessible to selected Enterprise Nodes only'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:`secrets-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"[]"},model:{value:a.secrets,callback:function(e){t.$set(a,"secrets",e)},expression:"component.secrets"}})],1)]):t._e(),e("br"),e("b-card-title",[t._v(" Resources Â Â Â "),e("h6",{staticClass:"inline text-small"},[t._v(" Tiered: "),e("b-form-checkbox",{staticClass:"custom-control-primary inline",attrs:{id:"tiered",switch:""},model:{value:a.tiered,callback:function(e){t.$set(a,"tiered",e)},expression:"component.tiered"}})],1)]),a.tiered?t._e():e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"2",label:"CPU","label-for":"cpu"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(a.cpu)+" ")]),e("b-form-input",{attrs:{id:`cpu-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"CPU cores to use by default",type:"range",min:"0.1",max:"15",step:"0.1"},model:{value:a.cpu,callback:function(e){t.$set(a,"cpu",e)},expression:"component.cpu"}})],1),a.tiered?t._e():e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"2",label:"RAM","label-for":"ram"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(a.ram)+" ")]),e("b-form-input",{attrs:{id:`ram-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"RAM in MB value to use by default",type:"range",min:"100",max:"59000",step:"100"},model:{value:a.ram,callback:function(e){t.$set(a,"ram",e)},expression:"component.ram"}})],1),a.tiered?t._e():e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"2",label:"SSD","label-for":"ssd"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(a.hdd)+" ")]),e("b-form-input",{attrs:{id:`ssd-${a.name}_${t.appUpdateSpecification.name}`,placeholder:"SSD in GB value to use by default",type:"range",min:"1",max:"820",step:"1"},model:{value:a.hdd,callback:function(e){t.$set(a,"hdd",e)},expression:"component.hdd"}})],1)],1)],1)],1),a.tiered?e("b-row",[e("b-col",{attrs:{xs:"12",md:"6",lg:"4"}},[e("b-card",{attrs:{title:"Cumulus"}},[e("div",[t._v(" CPU: "+t._s(a.cpubasic)+" ")]),e("b-form-input",{attrs:{type:"range",min:"0.1",max:"3",step:"0.1"},model:{value:a.cpubasic,callback:function(e){t.$set(a,"cpubasic",e)},expression:"component.cpubasic"}}),e("div",[t._v(" RAM: "+t._s(a.rambasic)+" ")]),e("b-form-input",{attrs:{type:"range",min:"100",max:"5000",step:"100"},model:{value:a.rambasic,callback:function(e){t.$set(a,"rambasic",e)},expression:"component.rambasic"}}),e("div",[t._v(" SSD: "+t._s(a.hddbasic)+" ")]),e("b-form-input",{attrs:{type:"range",min:"1",max:"180",step:"1"},model:{value:a.hddbasic,callback:function(e){t.$set(a,"hddbasic",e)},expression:"component.hddbasic"}})],1)],1),e("b-col",{attrs:{xs:"12",md:"6",lg:"4"}},[e("b-card",{attrs:{title:"Nimbus"}},[e("div",[t._v(" CPU: "+t._s(a.cpusuper)+" ")]),e("b-form-input",{attrs:{type:"range",min:"0.1",max:"7",step:"0.1"},model:{value:a.cpusuper,callback:function(e){t.$set(a,"cpusuper",e)},expression:"component.cpusuper"}}),e("div",[t._v(" RAM: "+t._s(a.ramsuper)+" ")]),e("b-form-input",{attrs:{type:"range",min:"100",max:"28000",step:"100"},model:{value:a.ramsuper,callback:function(e){t.$set(a,"ramsuper",e)},expression:"component.ramsuper"}}),e("div",[t._v(" SSD: "+t._s(a.hddsuper)+" ")]),e("b-form-input",{attrs:{type:"range",min:"1",max:"400",step:"1"},model:{value:a.hddsuper,callback:function(e){t.$set(a,"hddsuper",e)},expression:"component.hddsuper"}})],1)],1),e("b-col",{attrs:{xs:"12",lg:"4"}},[e("b-card",{attrs:{title:"Stratus"}},[e("div",[t._v(" CPU: "+t._s(a.cpubamf)+" ")]),e("b-form-input",{attrs:{type:"range",min:"0.1",max:"15",step:"0.1"},model:{value:a.cpubamf,callback:function(e){t.$set(a,"cpubamf",e)},expression:"component.cpubamf"}}),e("div",[t._v(" RAM: "+t._s(a.rambamf)+" ")]),e("b-form-input",{attrs:{type:"range",min:"100",max:"59000",step:"100"},model:{value:a.rambamf,callback:function(e){t.$set(a,"rambamf",e)},expression:"component.rambamf"}}),e("div",[t._v(" SSD: "+t._s(a.hddbamf)+" ")]),e("b-form-input",{attrs:{type:"range",min:"1",max:"820",step:"1"},model:{value:a.hddbamf,callback:function(e){t.$set(a,"hddbamf",e)},expression:"component.hddbamf"}})],1)],1)],1):t._e()],1)})),t.appUpdateSpecification.version>=7&&t.isPrivateApp?e("b-card",{attrs:{title:"Enterprise Nodes"}},[t._v(" Only these selected enterprise nodes will be able to run your application and are used for encryption. Only these nodes are able to access your private image and secrets."),e("br"),t._v(" Changing the node list after the message is computed and encrypted will result in a failure to run. Secrets and Repository Authentication would need to be adjusted again."),e("br"),t._v(" The score determines how reputable a node and node operator are. The higher the score, the higher the reputation on the network."),e("br"),t._v(" Secrets and Repository Authentication need to be set again if this node list changes."),e("br"),t._v(" The more nodes can run your application, the more stable it is. On the other hand, more nodes will have access to your private data!"),e("br"),e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"4",sm:"4"}},[e("b-form-group",{staticClass:"mb-0"},[e("label",{staticClass:"d-inline-block text-left mr-50"},[t._v("Per page")]),e("b-form-select",{staticClass:"w-50",attrs:{id:"perPageSelect",size:"sm",options:t.entNodesTable.pageOptions},model:{value:t.entNodesTable.perPage,callback:function(e){t.$set(t.entNodesTable,"perPage",e)},expression:"entNodesTable.perPage"}})],1)],1),e("b-col",{staticClass:"my-1",attrs:{md:"8"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"1","label-align-sm":"right","label-for":"filterInput"}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{id:"filterInput",type:"search",placeholder:"Type to Search"},model:{value:t.entNodesTable.filter,callback:function(e){t.$set(t.entNodesTable,"filter",e)},expression:"entNodesTable.filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.entNodesTable.filter},on:{click:function(e){t.entNodesTable.filter=""}}},[t._v(" Clear ")])],1)],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-table",{staticClass:"app-enterprise-nodes-table",attrs:{striped:"",hover:"",responsive:"","per-page":t.entNodesTable.perPage,"current-page":t.entNodesTable.currentPage,items:t.selectedEnterpriseNodes,fields:t.entNodesTable.fields,"sort-by":t.entNodesTable.sortBy,"sort-desc":t.entNodesTable.sortDesc,"sort-direction":t.entNodesTable.sortDirection,filter:t.entNodesTable.filter,"filter-included-fields":t.entNodesTable.filterOn,"show-empty":"","empty-text":"No Enterprise Nodes selected"},on:{"update:sortBy":function(e){return t.$set(t.entNodesTable,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.entNodesTable,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.entNodesTable,"sortDesc",e)},"update:sort-desc":function(e){return t.$set(t.entNodesTable,"sortDesc",e)}},scopedSlots:t._u([{key:"cell(show_details)",fn:function(a){return[e("a",{on:{click:a.toggleDetails}},[a.detailsShowing?t._e():e("v-icon",{attrs:{name:"chevron-down"}}),a.detailsShowing?e("v-icon",{attrs:{name:"chevron-up"}}):t._e()],1)]}},{key:"row-details",fn:function(a){return[e("b-card",{},[a.item.ip?e("list-entry",{attrs:{title:"IP Address",data:a.item.ip}}):t._e(),e("list-entry",{attrs:{title:"Public Key",data:a.item.pubkey}}),e("list-entry",{attrs:{title:"Node Address",data:a.item.payment_address}}),e("list-entry",{attrs:{title:"Collateral",data:`${a.item.txhash}:${a.item.outidx}`}}),e("list-entry",{attrs:{title:"Tier",data:a.item.tier}}),e("list-entry",{attrs:{title:"Overall Score",data:a.item.score.toString()}}),e("list-entry",{attrs:{title:"Collateral Score",data:a.item.collateralPoints.toString()}}),e("list-entry",{attrs:{title:"Maturity Score",data:a.item.maturityPoints.toString()}}),e("list-entry",{attrs:{title:"Public Key Score",data:a.item.pubKeyPoints.toString()}}),e("list-entry",{attrs:{title:"Enterprise Apps Assigned",data:a.item.enterpriseApps.toString()}}),e("div",[e("b-button",{staticClass:"mr-0",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.openNodeFluxOS(a.item.ip.split(":")[0],a.item.ip.split(":")[1]?+a.item.ip.split(":")[1]-1:16126)}}},[t._v(" Visit FluxNode ")])],1)],1)]}},{key:"cell(ip)",fn:function(e){return[t._v(" "+t._s(e.item.ip)+" ")]}},{key:"cell(payment_address)",fn:function(e){return[t._v(" "+t._s(e.item.payment_address.slice(0,8))+"..."+t._s(e.item.payment_address.slice(e.item.payment_address.length-8,e.item.payment_address.length))+" ")]}},{key:"cell(tier)",fn:function(e){return[t._v(" "+t._s(e.item.tier)+" ")]}},{key:"cell(score)",fn:function(e){return[t._v(" "+t._s(e.item.score)+" ")]}},{key:"cell(actions)",fn:function(a){return[e("b-button",{staticClass:"mr-1 mb-1",attrs:{id:`remove-${a.item.ip}`,size:"sm",variant:"danger"}},[t._v(" Remove ")]),e("confirm-dialog",{attrs:{target:`remove-${a.item.ip}`,"confirm-button":"Remove FluxNode"},on:{confirm:function(e){return t.removeFluxNode(a.item.ip)}}}),e("b-button",{staticClass:"mr-1 mb-1",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.openNodeFluxOS(a.item.ip.split(":")[0],a.item.ip.split(":")[1]?+a.item.ip.split(":")[1]-1:16126)}}},[t._v(" Visit ")])]}}],null,!1,2861207668)})],1),e("b-col",{attrs:{cols:"12"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.selectedEnterpriseNodes.length,"per-page":t.entNodesTable.perPage,align:"center",size:"sm"},model:{value:t.entNodesTable.currentPage,callback:function(e){t.$set(t.entNodesTable,"currentPage",e)},expression:"entNodesTable.currentPage"}}),e("span",{staticClass:"table-total"},[t._v("Total: "+t._s(t.selectedEnterpriseNodes.length))])],1)],1),e("br"),e("br"),e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-2 mr-2",attrs:{variant:"primary","aria-label":"Auto Select Enterprise Nodes"},on:{click:t.autoSelectNodes}},[t._v(" Auto Select Enterprise Nodes ")]),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-2 mr-2",attrs:{variant:"primary","aria-label":"Choose Enterprise Nodes"},on:{click:function(e){t.chooseEnterpriseDialog=!0}}},[t._v(" Choose Enterprise Nodes ")])],1)],1):t._e()],2):e("div",[e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"12",xl:"6"}},[e("b-card",{attrs:{title:"Details"}},[e("b-form-group",{attrs:{"label-cols":"2",label:"Version","label-for":"version"}},[e("b-form-input",{attrs:{id:"version",placeholder:t.appUpdateSpecification.version.toString(),readonly:""},model:{value:t.appUpdateSpecification.version,callback:function(e){t.$set(t.appUpdateSpecification,"version",e)},expression:"appUpdateSpecification.version"}})],1),e("b-form-group",{attrs:{"label-cols":"2",label:"Name","label-for":"name"}},[e("b-form-input",{attrs:{id:"name",placeholder:"App Name",readonly:""},model:{value:t.appUpdateSpecification.name,callback:function(e){t.$set(t.appUpdateSpecification,"name",e)},expression:"appUpdateSpecification.name"}})],1),e("b-form-group",{attrs:{"label-cols":"2",label:"Desc.","label-for":"desc"}},[e("b-form-textarea",{attrs:{id:"desc",placeholder:"Description",rows:"3"},model:{value:t.appUpdateSpecification.description,callback:function(e){t.$set(t.appUpdateSpecification,"description",e)},expression:"appUpdateSpecification.description"}})],1),e("b-form-group",{attrs:{"label-cols":"2",label:"Repo","label-for":"repo"}},[e("b-form-input",{attrs:{id:"repo",placeholder:"Docker image namespace/repository:tag",readonly:""},model:{value:t.appUpdateSpecification.repotag,callback:function(e){t.$set(t.appUpdateSpecification,"repotag",e)},expression:"appUpdateSpecification.repotag"}})],1),e("b-form-group",{attrs:{"label-cols":"2",label:"Owner","label-for":"owner"}},[e("b-form-input",{attrs:{id:"owner",placeholder:"Flux ID of Application Owner"},model:{value:t.appUpdateSpecification.owner,callback:function(e){t.$set(t.appUpdateSpecification,"owner",e)},expression:"appUpdateSpecification.owner"}})],1),e("br"),t.appUpdateSpecification.version>=3?e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"Instances","label-for":"instances"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(t.appUpdateSpecification.instances)+" ")]),e("b-form-input",{attrs:{id:"instances",placeholder:"Minimum number of application instances to be spawned",type:"range",min:"3",max:t.maxInstances,step:"1"},model:{value:t.appUpdateSpecification.instances,callback:function(e){t.$set(t.appUpdateSpecification,"instances",e)},expression:"appUpdateSpecification.instances"}})],1):t._e(),e("br"),t.appUpdateSpecification.version>=6?e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"Period","label-for":"period"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(t.getExpireLabel||(t.appUpdateSpecification.expire?`${t.appUpdateSpecification.expire} blocks`:"1 month"))+" ")]),e("b-form-input",{attrs:{id:"period",placeholder:"How long an application will live on Flux network",type:"range",min:0,max:5,step:1},model:{value:t.expirePosition,callback:function(e){t.expirePosition=e},expression:"expirePosition"}})],1):t._e()],1)],1),e("b-col",{attrs:{xs:"12",xl:"6"}},[e("b-card",{attrs:{title:"Environment"}},[e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Ports "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of Ports on which application will be available",expression:"'Array of Ports on which application will be available'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:"ports"},model:{value:t.appUpdateSpecification.ports,callback:function(e){t.$set(t.appUpdateSpecification,"ports",e)},expression:"appUpdateSpecification.ports"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Domains "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of Domains managed by Flux Domain Manager (FDM). Length must correspond to available ports. Use empty strings for no domains",expression:"'Array of strings of Domains managed by Flux Domain Manager (FDM). Length must correspond to available ports. Use empty strings for no domains'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:"domains"},model:{value:t.appUpdateSpecification.domains,callback:function(e){t.$set(t.appUpdateSpecification,"domains",e)},expression:"appUpdateSpecification.domains"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Environment "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of Environmental Parameters",expression:"'Array of strings of Environmental Parameters'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:"environmentParameters"},model:{value:t.appUpdateSpecification.enviromentParameters,callback:function(e){t.$set(t.appUpdateSpecification,"enviromentParameters",e)},expression:"appUpdateSpecification.enviromentParameters"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Commands "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Array of strings of Commands",expression:"'Array of strings of Commands'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:"commands"},model:{value:t.appUpdateSpecification.commands,callback:function(e){t.$set(t.appUpdateSpecification,"commands",e)},expression:"appUpdateSpecification.commands"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Cont. Ports "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Container Ports - Array of ports which your container has",expression:"'Container Ports - Array of ports which your container has'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:"containerPorts"},model:{value:t.appUpdateSpecification.containerPorts,callback:function(e){t.$set(t.appUpdateSpecification,"containerPorts",e)},expression:"appUpdateSpecification.containerPorts"}})],1)]),e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-3 col-form-label"},[t._v(" Cont. Data "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Data folder that is shared by application to App volume. Prepend with r: for synced data between instances. Ex. r:/data. Prepend with g: for synced data and primary/standby solution. Ex. g:/data",expression:"'Data folder that is shared by application to App volume. Prepend with r: for synced data between instances. Ex. r:/data. Prepend with g: for synced data and primary/standby solution. Ex. g:/data'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",attrs:{name:"info-circle"}})],1),e("div",{staticClass:"col"},[e("b-form-input",{attrs:{id:"containerData"},model:{value:t.appUpdateSpecification.containerData,callback:function(e){t.$set(t.appUpdateSpecification,"containerData",e)},expression:"appUpdateSpecification.containerData"}})],1)])])],1)],1),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"12"}},[e("b-card",[e("b-card-title",[t._v(" Resources Â Â Â "),e("h6",{staticClass:"inline etext-small"},[t._v(" Tiered: "),e("b-form-checkbox",{staticClass:"custom-control-primary inline",attrs:{id:"tiered",switch:""},model:{value:t.appUpdateSpecification.tiered,callback:function(e){t.$set(t.appUpdateSpecification,"tiered",e)},expression:"appUpdateSpecification.tiered"}})],1)]),t.appUpdateSpecification.tiered?t._e():e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"CPU","label-for":"cpu"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(t.appUpdateSpecification.cpu)+" ")]),e("b-form-input",{attrs:{id:"cpu",placeholder:"CPU cores to use by default",type:"range",min:"0.1",max:"15",step:"0.1"},model:{value:t.appUpdateSpecification.cpu,callback:function(e){t.$set(t.appUpdateSpecification,"cpu",e)},expression:"appUpdateSpecification.cpu"}})],1),t.appUpdateSpecification.tiered?t._e():e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"RAM","label-for":"ram"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(t.appUpdateSpecification.ram)+" ")]),e("b-form-input",{attrs:{id:"ram",placeholder:"RAM in MB value to use by default",type:"range",min:"100",max:"59000",step:"100"},model:{value:t.appUpdateSpecification.ram,callback:function(e){t.$set(t.appUpdateSpecification,"ram",e)},expression:"appUpdateSpecification.ram"}})],1),t.appUpdateSpecification.tiered?t._e():e("b-form-group",{attrs:{"label-cols":"2","label-cols-lg":"1",label:"SSD","label-for":"ssd"}},[e("div",{staticClass:"mx-1"},[t._v(" "+t._s(t.appUpdateSpecification.hdd)+" ")]),e("b-form-input",{attrs:{id:"ssd",placeholder:"SSD in GB value to use by default",type:"range",min:"1",max:"820",step:"1"},model:{value:t.appUpdateSpecification.hdd,callback:function(e){t.$set(t.appUpdateSpecification,"hdd",e)},expression:"appUpdateSpecification.hdd"}})],1)],1)],1)],1),t.appUpdateSpecification.tiered?e("b-row",[e("b-col",{attrs:{xs:"12",md:"6",lg:"4"}},[e("b-card",{attrs:{title:"Cumulus"}},[e("div",[t._v(" CPU: "+t._s(t.appUpdateSpecification.cpubasic)+" ")]),e("b-form-input",{attrs:{type:"range",min:"0.1",max:"3",step:"0.1"},model:{value:t.appUpdateSpecification.cpubasic,callback:function(e){t.$set(t.appUpdateSpecification,"cpubasic",e)},expression:"appUpdateSpecification.cpubasic"}}),e("div",[t._v(" RAM: "+t._s(t.appUpdateSpecification.rambasic)+" ")]),e("b-form-input",{attrs:{type:"range",min:"100",max:"5000",step:"100"},model:{value:t.appUpdateSpecification.rambasic,callback:function(e){t.$set(t.appUpdateSpecification,"rambasic",e)},expression:"appUpdateSpecification.rambasic"}}),e("div",[t._v(" SSD: "+t._s(t.appUpdateSpecification.hddbasic)+" ")]),e("b-form-input",{attrs:{type:"range",min:"1",max:"180",step:"1"},model:{value:t.appUpdateSpecification.hddbasic,callback:function(e){t.$set(t.appUpdateSpecification,"hddbasic",e)},expression:"appUpdateSpecification.hddbasic"}})],1)],1),e("b-col",{attrs:{xs:"12",md:"6",lg:"4"}},[e("b-card",{attrs:{title:"Nimbus"}},[e("div",[t._v(" CPU: "+t._s(t.appUpdateSpecification.cpusuper)+" ")]),e("b-form-input",{attrs:{type:"range",min:"0.1",max:"7",step:"0.1"},model:{value:t.appUpdateSpecification.cpusuper,callback:function(e){t.$set(t.appUpdateSpecification,"cpusuper",e)},expression:"appUpdateSpecification.cpusuper"}}),e("div",[t._v(" RAM: "+t._s(t.appUpdateSpecification.ramsuper)+" ")]),e("b-form-input",{attrs:{type:"range",min:"100",max:"28000",step:"100"},model:{value:t.appUpdateSpecification.ramsuper,callback:function(e){t.$set(t.appUpdateSpecification,"ramsuper",e)},expression:"appUpdateSpecification.ramsuper"}}),e("div",[t._v(" SSD: "+t._s(t.appUpdateSpecification.hddsuper)+" ")]),e("b-form-input",{attrs:{type:"range",min:"1",max:"400",step:"1"},model:{value:t.appUpdateSpecification.hddsuper,callback:function(e){t.$set(t.appUpdateSpecification,"hddsuper",e)},expression:"appUpdateSpecification.hddsuper"}})],1)],1),e("b-col",{attrs:{xs:"12",lg:"4"}},[e("b-card",{attrs:{title:"Stratus"}},[e("div",[t._v(" CPU: "+t._s(t.appUpdateSpecification.cpubamf)+" ")]),e("b-form-input",{attrs:{type:"range",min:"0.1",max:"15",step:"0.1"},model:{value:t.appUpdateSpecification.cpubamf,callback:function(e){t.$set(t.appUpdateSpecification,"cpubamf",e)},expression:"appUpdateSpecification.cpubamf"}}),e("div",[t._v(" RAM: "+t._s(t.appUpdateSpecification.rambamf)+" ")]),e("b-form-input",{attrs:{type:"range",min:"100",max:"59000",step:"100"},model:{value:t.appUpdateSpecification.rambamf,callback:function(e){t.$set(t.appUpdateSpecification,"rambamf",e)},expression:"appUpdateSpecification.rambamf"}}),e("div",[t._v(" SSD: "+t._s(t.appUpdateSpecification.hddbamf)+" ")]),e("b-form-input",{attrs:{type:"range",min:"1",max:"820",step:"1"},model:{value:t.appUpdateSpecification.hddbamf,callback:function(e){t.$set(t.appUpdateSpecification,"hddbamf",e)},expression:"appUpdateSpecification.hddbamf"}})],1)],1)],1):t._e()],1)]):t._e(),t.appUpdateSpecification.version>=6?e("div",{staticClass:"form-row form-group d-flex align-items-center"},[e("b-input-group",[e("b-input-group-prepend",[e("b-input-group-text",[e("b-icon",{staticClass:"mr-1",attrs:{icon:"clock-history"}}),t._v(" Extend Subscription "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Select if you want to extend or change your subscription period",expression:"'Select if you want to extend or change your subscription period'",modifiers:{hover:!0,top:!0}}],staticClass:"ml-1",attrs:{name:"info-circle"}}),t._v("Â  Â  ")],1)],1),e("b-input-group-append",{attrs:{"is-text":""}},[e("b-form-checkbox",{staticClass:"custom-control-primary",attrs:{id:"extendSubscription",switch:""},model:{value:t.extendSubscription,callback:function(e){t.extendSubscription=e},expression:"extendSubscription"}})],1)],1)],1):t._e(),t.extendSubscription&&t.appUpdateSpecification.version>=6?e("div",{staticClass:"form-row form-group"},[e("label",{staticClass:"col-form-label"},[t._v(" Period "),e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Time your application will be subscribed for from today",expression:"'Time your application will be subscribed for from today'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-2",attrs:{name:"info-circle"}}),e("kbd",{staticClass:"bg-primary mr-1"},[e("b",[t._v(t._s(t.getExpireLabel||(t.appUpdateSpecification.expire?`${t.appUpdateSpecification.expire} blocks`:"1 month")))])])],1),e("div",{staticClass:"w-100",staticStyle:{flex:"1",padding:"10px"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.expirePosition,expression:"expirePosition"}],staticClass:"form-control-range",staticStyle:{width:"100%",outline:"none"},attrs:{id:"period",type:"range",min:0,max:5,step:1},domProps:{value:t.expirePosition},on:{__r:function(e){t.expirePosition=e.target.value}}})])]):t._e(),e("div",[t._v(" Currently your application is subscribed until "),e("b",[t._v(t._s(new Date(t.appRunningTill.current).toLocaleString("en-GB",t.timeoptions.shortDate)))]),t._v(". "),t.extendSubscription?e("span",[e("br"),t._v(" Your new adjusted subscription end on "),e("b",[t._v(t._s(new Date(t.appRunningTill.new).toLocaleString("en-GB",t.timeoptions.shortDate)))]),t._v(". ")]):t._e(),t.appRunningTill.new<t.appRunningTill.current?e("span",{staticStyle:{color:"red"}},[e("br"),e("b",[t._v("WARNING: Your selected subscription period will decrease the current subscription time!")])]):t._e()]),e("br"),e("div",{staticClass:"flex"},[e("b-form-checkbox",{staticClass:"custom-control-primary inline",attrs:{id:"tos",switch:""},model:{value:t.tosAgreed,callback:function(e){t.tosAgreed=e},expression:"tosAgreed"}}),t._v(" I agree with "),e("a",{attrs:{href:"https://cdn.runonflux.io/Flux_Terms_of_Service.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Â "),e("b",[t._v("Terms of Service")])]),e("br"),e("br")],1),e("div",[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-2 w-100",attrs:{variant:"outline-success","aria-label":"Compute Update Message",disabled:!1===t.tosAgreed},on:{click:t.checkFluxUpdateSpecificationsAndFormatMessage}},[t._v(" Compute Update Message ")])],1),t.dataToSign?e("div",[e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"2",label:"Update Message","label-for":"updatemessage"}},[e("div",{staticClass:"text-wrap"},[e("b-form-textarea",{attrs:{id:"updatemessage",rows:"6",readonly:""},model:{value:t.dataToSign,callback:function(e){t.dataToSign=e},expression:"dataToSign"}}),e("b-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:t.tooltipText,expression:"tooltipText"}],ref:"copyButtonRef",staticClass:"clipboard icon",attrs:{scale:"1.5",icon:"clipboard"},on:{click:t.copyMessageToSign}})],1)]),e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"2",label:"Signature","label-for":"updatesignature"}},[e("b-form-input",{attrs:{id:"updatesignature"},model:{value:t.signature,callback:function(e){t.signature=e},expression:"signature"}})],1),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6",lg:"8"}},[e("b-card",[e("br"),e("div",{staticClass:"text-center"},[e("h4",[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.4",icon:"chat-right"}}),t._v(" Data has to be signed by the last application owner ")],1)]),t.freeUpdate?t._e():e("b-card-text",[e("br"),e("div",{staticClass:"text-center my-3"},[e("h4",[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.4",icon:"cash-coin"}}),e("b",[t._v(t._s(t.appPricePerSpecsUSD)+" USD + VAT")])],1)])]),e("br"),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"w-100",attrs:{disabled:0===t.signature.length,variant:"outline-success","aria-label":"Update Flux App"},on:{click:t.update}},[t._v(" Update Application ")])],1)],1),e("b-col",{attrs:{xs:"6",lg:"4"}},[e("b-card",{staticClass:"text-center",attrs:{title:"Sign with"}},[e("div",{staticClass:"loginRow"},[e("a",{attrs:{href:`zel:?action=sign&message=${t.dataToSign}&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2FzelID.svg&callback=${t.callbackValue}`},on:{click:t.initiateSignWSUpdate}},[e("img",{staticClass:"walletIcon",attrs:{src:a(96358),alt:"Flux ID",height:"100%",width:"100%"}})]),e("a",{on:{click:t.initSSP}},[e("img",{staticClass:"walletIcon",attrs:{src:"dark"===t.skin?a(56070):a(58962),alt:"SSP",height:"100%",width:"100%"}})])]),e("div",{staticClass:"loginRow"},[e("a",{on:{click:t.initWalletConnect}},[e("img",{staticClass:"walletIcon",attrs:{src:a(47622),alt:"WalletConnect",height:"100%",width:"100%"}})]),e("a",{on:{click:t.initMetamask}},[e("img",{staticClass:"walletIcon",attrs:{src:a(28125),alt:"Metamask",height:"100%",width:"100%"}})])]),e("div",{staticClass:"loginRow"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"my-1",staticStyle:{width:"250px"},attrs:{variant:"primary","aria-label":"Flux Single Sign On"},on:{click:t.initSignFluxSSO}},[t._v(" Flux Single Sign On (SSO) ")])],1)])],1)],1),t.updateHash&&t.updateSpecifications?e("div",[e("b-row",[e("b-card",{attrs:{title:"Test Application Installation"}},[e("b-card-text",[t._v(" It's now time to test your application install/launch. If you have update app specifications other than hardware specs it's very important to test the app install/launch to make sure your new application specifications work. You will get the application install/launch log at the bottom of this page once it's completed, if the app starts you can proceed with the payment, if not, you need to fix/change the specifications and try again before pay for the app update. ")]),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"my-1",attrs:{variant:"success","aria-label":"Test Launch"},on:{click:function(e){return t.testAppInstall(t.updateHash)}}},[t._v(" Test Installation ")])],1)],1)],1):t._e(),t.updateHash&&!t.freeUpdate?e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6",lg:"8"}},[e("b-card",[e("b-card-text",[e("b",[t._v("Everything is ready, your payment option links, both for fiat and flux, are valid for the next 30 minutes.")])]),e("br"),t._v(" The application will be subscribed until "),e("b",[t._v(t._s(new Date(t.subscribedTill).toLocaleString("en-GB",t.timeoptions.shortDate)))]),e("br"),t._v(" To finish the application update/renew, pay your application with your prefered payment method or check below how to pay with Flux crypto currency. ")],1)],1),e("b-col",{attrs:{xs:"6",lg:"4"}},[e("b-card",{staticClass:"text-center",attrs:{title:"Pay with Stripe/PayPal"}},[e("div",{staticClass:"loginRow"},[t.stripeEnabled?e("a",{on:{click:function(e){return t.initStripePay(t.updateHash,t.appUpdateSpecification.name,t.appPricePerSpecsUSD,t.appUpdateSpecification.description)}}},[e("img",{staticClass:"stripePay",attrs:{src:a(20134),alt:"Stripe",height:"100%",width:"100%"}})]):t._e(),t.paypalEnabled?e("a",{on:{click:function(e){return t.initPaypalPay(t.updateHash,t.appUpdateSpecification.name,t.appPricePerSpecsUSD,t.appUpdateSpecification.description)}}},[e("img",{staticClass:"paypalPay",attrs:{src:a(36547),alt:"PayPal",height:"100%",width:"100%"}})]):t._e(),t.paypalEnabled||t.stripeEnabled?t._e():e("span",[t._v("Fiat Gateways Unavailable.")])]),t.checkoutLoading?e("div",{attrs:{className:"loginRow"}},[e("b-spinner",{attrs:{variant:"primary"}}),e("div",{staticClass:"text-center"},[t._v(" Checkout Loading ... ")])],1):t._e(),t.fiatCheckoutURL?e("div",{attrs:{className:"loginRow"}},[e("a",{attrs:{href:t.fiatCheckoutURL,target:"_blank",rel:"noopener noreferrer"}},[t._v(" Click here for checkout if not redirected ")])]):t._e()])],1)],1):t._e(),!t.updateHash||t.applicationPriceFluxError||t.freeUpdate?t._e():e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6",lg:"8"}},[e("b-card",[e("b-card-text",[t._v(" To pay in FLUX, please make a transaction of "),e("b",[t._v(t._s(t.appPricePerSpecs)+" FLUX")]),t._v(" to address "),e("b",[t._v("'"+t._s(t.deploymentAddress)+"'")]),t._v(" with the following message: "),e("b",[t._v("'"+t._s(t.updateHash)+"'")])])],1)],1),e("b-col",{attrs:{xs:"6",lg:"4"}},[e("b-card",[t.applicationPriceFluxDiscount>0?e("h4",[e("kbd",{staticClass:"d-flex justify-content-center bg-primary mb-2"},[t._v("Discount - "+t._s(t.applicationPriceFluxDiscount)+"%")])]):t._e(),e("h4",{staticClass:"text-center mb-2"},[t._v(" Pay with Zelcore/SSP ")]),e("div",{staticClass:"loginRow"},[e("a",{attrs:{href:`zel:?action=pay&coin=zelcash&address=${t.deploymentAddress}&amount=${t.appPricePerSpecs}&message=${t.updateHash}&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2Fflux_banner.png`}},[e("img",{staticClass:"walletIcon",attrs:{src:a(96358),alt:"Flux ID",height:"100%",width:"100%"}})]),e("a",{on:{click:t.initSSPpay}},[e("img",{staticClass:"walletIcon",attrs:{src:"dark"===t.skin?a(56070):a(58962),alt:"SSP",height:"100%",width:"100%"}})])])])],1)],1),t.updateHash&&t.freeUpdate?e("b-row",{staticClass:"match-height"},[e("b-card",[e("b-card-text",[t._v(" Everything is ready, your application update should be effective automatically in less than 30 minutes. ")])],1)],1):t._e()],1):t._e()]),e("b-tab",{attrs:{title:"Cancel Subscription",disabled:!t.isAppOwner||t.appUpdateSpecification.version<6}},[t.fluxCommunication?t._e():e("div",{staticClass:"text-danger"},[t._v(" Warning: Connected Flux is not communicating properly with Flux network ")]),e("div",{staticStyle:{border:"1px solid #ccc","border-radius":"8px",height:"45px",padding:"12px","line-height":"0px"}},[e("h5",[e("b-icon",{staticClass:"mr-1",attrs:{icon:"ui-checks-grid"}}),t._v(" Cancel Application subscription ")],1)]),e("br"),e("div",[t._v(" Currently your application is subscribed until "),e("b",[t._v(t._s(new Date(t.appRunningTill.current).toLocaleString("en-GB",t.timeoptions.shortDate)))]),t._v(". "),e("br"),e("b",[t._v("WARNING: By cancelling your application subscription, your application will be removed from the network and all data will be lost.")])]),e("br"),e("div",[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mb-2 w-100",attrs:{variant:"outline-success","aria-label":"Compute Cancel Message"},on:{click:t.checkFluxCancelSubscriptionAndFormatMessage}},[t._v(" Compute Cancel Message ")])],1),t.dataToSign?e("div",[e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"2",label:"Update Message","label-for":"updatemessage"}},[e("div",{staticClass:"text-wrap"},[e("b-form-textarea",{attrs:{id:"updatemessage",rows:"6",readonly:""},model:{value:t.dataToSign,callback:function(e){t.dataToSign=e},expression:"dataToSign"}}),e("b-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip",value:t.tooltipText,expression:"tooltipText"}],ref:"copyButtonRef",staticClass:"clipboard icon",attrs:{scale:"1.5",icon:"clipboard"},on:{click:t.copyMessageToSign}})],1)]),e("b-form-group",{attrs:{"label-cols":"3","label-cols-lg":"2",label:"Signature","label-for":"updatesignature"}},[e("b-form-input",{attrs:{id:"updatesignature"},model:{value:t.signature,callback:function(e){t.signature=e},expression:"signature"}})],1),e("b-row",{staticClass:"match-height"},[e("b-col",{attrs:{xs:"6",lg:"8"}},[e("b-card",[e("br"),e("div",{staticClass:"text-center"},[e("h4",[e("b-icon",{staticClass:"mr-1",attrs:{scale:"1.4",icon:"chat-right"}}),t._v(" Data has to be signed by the last application owner ")],1)]),e("br"),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"w-100",attrs:{variant:"outline-success","aria-label":"Update Flux App"},on:{click:t.update}},[t._v(" Cancel Application ")])],1)],1),e("b-col",{attrs:{xs:"6",lg:"4"}},[e("b-card",{staticClass:"text-center",attrs:{title:"Sign with"}},[e("div",{staticClass:"loginRow"},[e("a",{attrs:{href:`zel:?action=sign&message=${t.dataToSign}&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2FzelID.svg&callback=${t.callbackValue}`},on:{click:t.initiateSignWSUpdate}},[e("img",{staticClass:"walletIcon",attrs:{src:a(96358),alt:"Flux ID",height:"100%",width:"100%"}})]),e("a",{on:{click:t.initSSP}},[e("img",{staticClass:"walletIcon",attrs:{src:"dark"===t.skin?a(56070):a(58962),alt:"SSP",height:"100%",width:"100%"}})])]),e("div",{staticClass:"loginRow"},[e("a",{on:{click:t.initWalletConnect}},[e("img",{staticClass:"walletIcon",attrs:{src:a(47622),alt:"WalletConnect",height:"100%",width:"100%"}})]),e("a",{on:{click:t.initMetamask}},[e("img",{staticClass:"walletIcon",attrs:{src:a(28125),alt:"Metamask",height:"100%",width:"100%"}})])]),e("div",{staticClass:"loginRow"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"my-1",staticStyle:{width:"250px"},attrs:{variant:"primary","aria-label":"Flux Single Sign On"},on:{click:t.initSignFluxSSO}},[t._v(" Flux Single Sign On (SSO) ")])],1)])],1)],1),t.updateHash?e("b-row",{staticClass:"match-height"},[e("b-card",[e("b-card-text",[t._v(" Everything is ready, your application cancelattion should be effective automatically in less than 30 minutes and removed from the network in the next ~3hours. ")])],1)],1):t._e()],1):t._e()])],1),t.output.length>0?e("div",{staticClass:"actionCenter"},[e("br"),e("b-row",[e("b-col",{attrs:{cols:"9"}},[e("b-form-textarea",{staticClass:"mt-1",attrs:{plaintext:"","no-resize":"",rows:t.output.length+1,value:t.stringOutput()}})],1),t.downloadOutputReturned?e("b-col",{attrs:{cols:"3"}},[e("h3",[t._v("Downloads")]),t._l(t.downloadOutput,(function(a){return e("div",{key:a.id},[e("h4",[t._v(" "+t._s(a.id))]),e("b-progress",{attrs:{value:a.detail.current/a.detail.total*100,max:"100",striped:"",height:"1rem",variant:a.variant}}),e("br")],1)}))],2):t._e()],1)],1):t._e(),t._m(0),e("b-modal",{attrs:{title:"Select Enterprise Nodes",size:"xl",centered:"","button-size":"sm","ok-only":"","ok-title":"Done"},model:{value:t.chooseEnterpriseDialog,callback:function(e){t.chooseEnterpriseDialog=e},expression:"chooseEnterpriseDialog"}},[e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"4",sm:"4"}},[e("b-form-group",{staticClass:"mb-0"},[e("label",{staticClass:"d-inline-block text-left mr-50"},[t._v("Per page")]),e("b-form-select",{staticClass:"w-50",attrs:{id:"perPageSelect",size:"sm",options:t.entNodesSelectTable.pageOptions},model:{value:t.entNodesSelectTable.perPage,callback:function(e){t.$set(t.entNodesSelectTable,"perPage",e)},expression:"entNodesSelectTable.perPage"}})],1)],1),e("b-col",{staticClass:"my-1",attrs:{md:"8"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"1","label-align-sm":"right","label-for":"filterInput"}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{id:"filterInput",type:"search",placeholder:"Type to Search"},model:{value:t.entNodesSelectTable.filter,callback:function(e){t.$set(t.entNodesSelectTable,"filter",e)},expression:"entNodesSelectTable.filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.entNodesSelectTable.filter},on:{click:function(e){t.entNodesSelectTable.filter=""}}},[t._v(" Clear ")])],1)],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-table",{staticClass:"app-enterprise-nodes-table",attrs:{striped:"",hover:"",responsive:"","per-page":t.entNodesSelectTable.perPage,"current-page":t.entNodesSelectTable.currentPage,items:t.enterpriseNodes,fields:t.entNodesSelectTable.fields,"sort-by":t.entNodesSelectTable.sortBy,"sort-desc":t.entNodesSelectTable.sortDesc,"sort-direction":t.entNodesSelectTable.sortDirection,filter:t.entNodesSelectTable.filter,"filter-included-fields":t.entNodesSelectTable.filterOn,"show-empty":"","empty-text":"No Enterprise Nodes For Addition Found"},on:{"update:sortBy":function(e){return t.$set(t.entNodesSelectTable,"sortBy",e)},"update:sort-by":function(e){return t.$set(t.entNodesSelectTable,"sortBy",e)},"update:sortDesc":function(e){return t.$set(t.entNodesSelectTable,"sortDesc",e)},"update:sort-desc":function(e){return t.$set(t.entNodesSelectTable,"sortDesc",e)}},scopedSlots:t._u([{key:"cell(show_details)",fn:function(a){return[e("a",{on:{click:a.toggleDetails}},[a.detailsShowing?t._e():e("v-icon",{attrs:{name:"chevron-down"}}),a.detailsShowing?e("v-icon",{attrs:{name:"chevron-up"}}):t._e()],1)]}},{key:"row-details",fn:function(a){return[e("b-card",{},[e("list-entry",{attrs:{title:"IP Address",data:a.item.ip}}),e("list-entry",{attrs:{title:"Public Key",data:a.item.pubkey}}),e("list-entry",{attrs:{title:"Node Address",data:a.item.payment_address}}),e("list-entry",{attrs:{title:"Collateral",data:`${a.item.txhash}:${a.item.outidx}`}}),e("list-entry",{attrs:{title:"Tier",data:a.item.tier}}),e("list-entry",{attrs:{title:"Overall Score",data:a.item.score.toString()}}),e("list-entry",{attrs:{title:"Collateral Score",data:a.item.collateralPoints.toString()}}),e("list-entry",{attrs:{title:"Maturity Score",data:a.item.maturityPoints.toString()}}),e("list-entry",{attrs:{title:"Public Key Score",data:a.item.pubKeyPoints.toString()}}),e("list-entry",{attrs:{title:"Enterprise Apps Assigned",data:a.item.enterpriseApps.toString()}}),e("div",[e("b-button",{staticClass:"mr-0",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.openNodeFluxOS(t.locationRow.item.ip.split(":")[0],t.locationRow.item.ip.split(":")[1]?+t.locationRow.item.ip.split(":")[1]-1:16126)}}},[t._v(" Visit FluxNode ")])],1)],1)]}},{key:"cell(ip)",fn:function(e){return[t._v(" "+t._s(e.item.ip)+" ")]}},{key:"cell(payment_address)",fn:function(e){return[t._v(" "+t._s(e.item.payment_address.slice(0,8))+"..."+t._s(e.item.payment_address.slice(e.item.payment_address.length-8,e.item.payment_address.length))+" ")]}},{key:"cell(tier)",fn:function(e){return[t._v(" "+t._s(e.item.tier)+" ")]}},{key:"cell(score)",fn:function(e){return[t._v(" "+t._s(e.item.score)+" ")]}},{key:"cell(actions)",fn:function(a){return[e("b-button",{staticClass:"mr-1 mb-1",attrs:{size:"sm",variant:"primary"},on:{click:function(e){t.openNodeFluxOS(a.item.ip.split(":")[0],a.item.ip.split(":")[1]?+a.item.ip.split(":")[1]-1:16126)}}},[t._v(" Visit ")]),t.selectedEnterpriseNodes.find((t=>t.ip===a.item.ip))?t._e():e("b-button",{staticClass:"mr-1 mb-1",attrs:{id:`add-${a.item.ip}`,size:"sm",variant:"success"},on:{click:function(e){return t.addFluxNode(a.item.ip)}}},[t._v(" Add ")]),t.selectedEnterpriseNodes.find((t=>t.ip===a.item.ip))?e("b-button",{staticClass:"mr-1 mb-1",attrs:{id:`add-${a.item.ip}`,size:"sm",variant:"danger"},on:{click:function(e){return t.removeFluxNode(a.item.ip)}}},[t._v(" Remove ")]):t._e()]}}])})],1),e("b-col",{attrs:{cols:"12"}},[e("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.entNodesSelectTable.totalRows,"per-page":t.entNodesSelectTable.perPage,align:"center",size:"sm"},model:{value:t.entNodesSelectTable.currentPage,callback:function(e){t.$set(t.entNodesSelectTable,"currentPage",e)},expression:"entNodesSelectTable.currentPage"}}),e("span",{staticClass:"table-total"},[t._v("Total: "+t._s(t.entNodesSelectTable.totalRows))])],1)],1)],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",[e("br"),t._v(" By managing an application I agree with "),e("a",{attrs:{href:"https://cdn.runonflux.io/Flux_Terms_of_Service.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v(" Terms of Service ")])])}],o=(a(70560),a(98858),a(61318),a(33228),a(73106)),n=a(58887),r=a(51015),l=a(16521),c=a(66456),p=a(92095),d=a(31642),u=a(87379),m=a(51909),h=a(71605),f=a(43022),g=a(4060),b=a(27754),v=a(22418),y=a(50725),w=a(86855),S=a(64206),x=a(49379),C=a(97794),_=a(26253),k=a(15193),$=a(1759),R=a(87167),A=a(333),F=a(46709),T=a(22183),U=a(19692),P=a(8051),N=a(78959),D=a(10962),I=a(45752),L=a(22981),B=a(5870),O=a(67166),E=a.n(O),M=a(20266),z=a(20629),G=a(34547),V=a(87156),j=a(51748),W=a(90699),H=a.n(W),K=a(2272),Z=a(52829),q=a(5449),J=a(65864),X=a(43672),Y=a(27616),Q=a(38511),tt=a(94145),et=a(12320),at=a(12617),st=a(67511),it=a(32993),ot=a(12286),nt=a(53920),rt=a(37307),lt=a(48764)["lW"];const ct="df787edc6839c7de49d527bba9199eaa",pt={projectId:ct,metadata:{name:"Flux Cloud",description:"Flux, Your Gateway to a Decentralized World",url:"https://home.runonflux.io",icons:["https://home.runonflux.io/img/logo.png"]}},dt={enableDebug:!0},ut=new tt.MetaMaskSDK(dt);let mt;const ht=a(9669),ft=a(80129),gt=a(58971),bt=a(79650),vt=a(63005),yt=a(56761),wt=a(57306),St={components:{FileUpload:K.Z,JsonViewer:H(),BAlert:o.F,BTabs:n.M,BTab:r.L,BTable:l.h,BTd:c.S,BTr:p.G,BDropdown:d.R,BDropdownItem:u.E,BFormTag:m.d,BFormTags:h.D,BIcon:f.H,BInputGroup:g.w,BInputGroupPrepend:b.P,BInputGroupAppend:v.B,BCol:y.l,BCard:w._,BCardText:S.j,BCardTitle:x._,BCardGroup:C.o,BRow:_.T,BButton:k.T,BSpinner:$.X,BFormRadioGroup:R.Q,BFormTextarea:A.y,BFormGroup:F.x,BFormInput:T.e,BFormCheckbox:U.l,BFormSelect:P.K,BFormSelectOption:N.c,BPagination:D.c,BProgress:I.D,BProgressBar:L.Q,ConfirmDialog:V.Z,ListEntry:j.Z,ToastificationContent:G.Z,VueApexCharts:E()},directives:{"b-tooltip":B.o,Ripple:M.Z},props:{appName:{type:String,required:!0},global:{type:Boolean,required:!0},installedApps:{type:Array,required:!0}},data(){return{selectedFluxVersion:"5.13.0",progressVisable:!1,operationTitle:"",appInfoObject:[],tooltipText:"Copy to clipboard",tableBackup:0,tableKey:0,isBusy:!1,inputPathValue:"",fields:[{key:"name",label:"Name",sortable:!0},{key:"size",label:"Size",sortable:!0,thStyle:{width:"10%"}},{key:"modifiedAt",label:"Last modification",sortable:!0,thStyle:{width:"15%"}},{key:"actions",label:"Actions",sortable:!1,thStyle:{width:"10%"}}],timeoptions:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},loadingFolder:!1,folderView:[],currentFolder:"",uploadFilesDialog:!1,filterFolder:"",createDirectoryDialogVisible:!1,renameDialogVisible:!1,newName:"",fileRenaming:"",newDirName:"",abortToken:{},downloaded:"",total:"",timeStamp:{},working:!1,storage:{used:0,total:2,available:2},customColors:[{color:"#6f7ad3",percentage:20},{color:"#1989fa",percentage:40},{color:"#5cb87a",percentage:60},{color:"#e6a23c",percentage:80},{color:"#f56c6c",percentage:100}],uploadTotal:"",uploadUploaded:"",uploadTimeStart:"",currentUploadTime:"",uploadFiles:[],fileProgressVolume:[],windowWidth:window.innerWidth,showTopUpload:!1,showTopRemote:!1,showTopFluxDrive:!1,alertMessage:"",alertVariant:"",restoreFromUpload:!1,restoreFromUploadStatus:"",restoreFromRemoteURLStatus:"",restoreFromFluxDriveStatus:"",downloadingFromUrl:!1,restoringFromFluxDrive:!1,files:[],backupProgress:!1,uploadProgress:!1,tarProgress:"",fileProgress:[],fileProgressFD:[],fluxDriveUploadStatus:"",showFluxDriveProgressBar:!1,showProgressBar:!1,showUploadProgressBar:!1,uploadStatus:"",restoreOptions:[{value:"FluxDrive",text:"FluxDrive",disabled:!1},{value:"Remote URL",text:"Remote URL",disabled:!1},{value:"Upload File",text:"Upload File",disabled:!1}],storageMethod:[{value:"flux",disabled:!1,text:"FluxDrive"},{value:"google",disabled:!0,text:"GoogleDrive"},{value:"as3",disabled:!0,text:"AS3Storage"}],components:[],selectedRestoreOption:null,selectedStorageMethod:null,selectedBackupComponents:[],items:[],items1:[],checkpoints:[],sigInPrivilage:!0,backupList:[],backupToUpload:[],restoreRemoteUrl:"",restoreRemoteFile:null,restoreRemoteUrlComponent:null,restoreRemoteUrlItems:[],newComponents:[],itemKey:[],expandedDetails:[],itemValue:[],sortbackupTableKey:"timestamp",sortbackupTableDesc:!0,nestedTableFilter:"",backupTableFields:[{key:"timestamp",label:"Name",thStyle:{width:"65%"}},{key:"time",label:"Time"},{key:"actions",label:"Actions",thStyle:{width:"118px"},class:"text-center"}],restoreComponents:[{value:"",text:"all"},{value:"lime",text:"lime"},{value:"orange",text:"orange"}],localBackupTableFields:[{key:"isActive",label:"",thStyle:{width:"5%"},class:"text-center"},{key:"component",label:"Component Name",thStyle:{width:"40%"}},{key:"create",label:"CreateAt",thStyle:{width:"17%"}},{key:"expire",label:"ExpireAt",thStyle:{width:"17%"}},{key:"file_size",label:"Size",thStyle:{width:"8%"}}],newComponentsTableFields:[{key:"component",label:"Component Name",thStyle:{width:"200px"}},{key:"file_url",label:"URL"},{key:"timestamp",label:"Timestamp",thStyle:{width:"200px"}},{key:"file_size",label:"Size",thStyle:{width:"100px"}},{key:"actions",label:"Actions",thStyle:{width:"117px"},class:"text-center"}],componentsTable(){return[{key:"component",label:"Component Name",thStyle:{width:"20%"}},{key:"file_url",label:"URL",thStyle:{width:"55%"}},{key:"file_size",label:"Size",thStyle:{width:"20%"}},{key:"actions",label:"Actions",thStyle:{width:"5%"},class:"text-center"}]},socket:null,terminal:null,selectedCmd:null,selectedApp:null,selectedAppVolume:null,enableUser:!1,userInputValue:"",customValue:"",envInputValue:"",enableEnvironment:!1,isVisible:!1,isConnecting:!1,options:[{label:"Linux",options:["/bin/bash","/bin/ash","/bin/sh"]},{label:"Other",options:["Custom"]}],output:[],downloadOutput:{},downloadOutputReturned:!1,fluxCommunication:!1,commandExecuting:!1,getAllAppsResponse:{status:"",data:[]},updatetype:"fluxappupdate",version:1,dataForAppUpdate:{},dataToSign:"",timestamp:"",signature:"",updateHash:"",websocket:null,selectedAppOwner:"",appSpecification:{},callResponse:{status:"",data:""},callBResponse:{status:"",data:[]},appExec:{cmd:"",env:""},appUpdateSpecification:{version:3,name:"",description:"",repotag:"",owner:"",ports:"",domains:"",enviromentParameters:"",commands:"",containerPorts:"",containerData:"",instances:3,cpu:null,ram:null,hdd:null,tiered:!1,cpubasic:null,rambasic:null,hddbasic:null,cpusuper:null,ramsuper:null,hddsuper:null,cpubamf:null,rambamf:null,hddbamf:null},instances:{data:[],fields:[{key:"show_details",label:""},{key:"ip",label:"IP Address",sortable:!0},{key:"continent",label:"Continent",sortable:!0},{key:"country",label:"Country",sortable:!0},{key:"region",label:"Region",sortable:!0,thStyle:{width:"20%"}},{key:"visit",label:"Visit",thStyle:{width:"10%"}}],perPage:10,pageOptions:[10,25,50,100],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:"",filterOn:[],totalRows:1,currentPage:1},downloadedSize:"",deploymentAddress:"",appPricePerSpecs:0,appPricePerSpecsUSD:0,applicationPriceFluxDiscount:"",applicationPriceFluxError:!1,maxInstances:100,minInstances:3,globalZelidAuthorized:!1,monitoringStream:{},statsFields:[{key:"timestamp",label:"Date"},{key:"cpu",label:"CPU"},{key:"memory",label:"RAM"},{key:"disk",label:"DISK"},{key:"net",label:"NET I/O"},{key:"block",label:"BLOCK I/O"},{key:"pids",label:"PIDS"}],possibleLocations:[],allowedGeolocations:{},forbiddenGeolocations:{},numberOfGeolocations:1,numberOfNegativeGeolocations:1,minExpire:5e3,maxExpire:264e3,extendSubscription:!0,updateSpecifications:!1,daemonBlockCount:-1,expirePosition:2,minutesRemaining:0,expireOptions:[{value:5e3,label:"1 week",time:6048e5},{value:11e3,label:"2 weeks",time:12096e5},{value:22e3,label:"1 month",time:2592e6},{value:66e3,label:"3 months",time:7776e6},{value:132e3,label:"6 months",time:15552e6},{value:264e3,label:"1 year",time:31536e6}],tosAgreed:!1,marketPlaceApps:[],generalMultiplier:1,enterpriseNodes:[],selectedEnterpriseNodes:[],enterprisePublicKeys:[],maximumEnterpriseNodes:120,entNodesTable:{fields:[{key:"show_details",label:""},{key:"ip",label:"IP Address",sortable:!0},{key:"payment_address",label:"Node Address",sortable:!0},{key:"tier",label:"Tier",sortable:!0},{key:"score",label:"Score",sortable:!0},{key:"actions",label:"Actions"}],perPage:10,pageOptions:[5,10,25,50,100],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:"",filterOn:[],currentPage:1},entNodesSelectTable:{fields:[{key:"show_details",label:""},{key:"ip",label:"IP Address",sortable:!0},{key:"payment_address",label:"Node Address",sortable:!0},{key:"tier",label:"Tier",sortable:!0},{key:"score",label:"Enterprise Score",sortable:!0},{key:"actions",label:"Actions"}],perPage:25,pageOptions:[5,10,25,50,100],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:"",filterOn:[],currentPage:1,totalRows:1},chooseEnterpriseDialog:!1,isPrivateApp:!1,signClient:null,masterIP:"",selectedIp:null,masterSlaveApp:!1,applicationManagementAndStatus:"",fiatCheckoutURL:"",stripeEnabled:!0,paypalEnabled:!0,checkoutLoading:!1,isMarketplaceApp:!1,ipAccess:!1,freeUpdate:!1}},computed:{appRunningTill(){const t=12e4,e=this.callBResponse.data.expire||22e3,a=this.callBResponse.data.height+e-this.daemonBlockCount,s=1e3*Math.ceil(a/1e3);let i=s;this.extendSubscription&&(i=this.expireOptions[this.expirePosition].value);const o=this.timestamp||Date.now();let n=1e6*Math.floor((s*t+o)/1e6);const r=this.expireOptions.find((t=>t.value===s));if(r){const t=1e6*Math.floor((o+r.time)/1e6);n=t}let l=1e6*Math.floor((i*t+o)/1e6);const c=this.expireOptions.find((t=>t.value===i));if(c){const t=1e6*Math.floor((o+c.time)/1e6);l=t}const p={current:n,new:l};return p},skin(){return(0,rt.Z)().skin.value},zelidHeader(){const t=localStorage.getItem("zelidauth"),e={zelidauth:t};return e},ipAddress(){const t=gt.get("backendURL");if(t)return`${gt.get("backendURL").split(":")[0]}:${gt.get("backendURL").split(":")[1]}`;const{hostname:e}=window.location;return`${e}`},filesToUpload(){return this.files.length>0&&this.files.some((t=>!t.uploading&&!t.uploaded&&0===t.progress))},computedFileProgress(){return this.fileProgress},computedFileProgressFD(){return this.fileProgressFD},computedFileProgressVolume(){return this.fileProgressVolume},folderContentFilter(){const t=this.folderView.filter((t=>JSON.stringify(t.name).toLowerCase().includes(this.filterFolder.toLowerCase()))),e=this.currentFolder?{name:"..",symLink:!0,isUpButton:!0}:null,a=[e,...t.filter((t=>".gitkeep"!==t.name))].filter(Boolean);return a},downloadLabel(){this.totalMB=this.backupList.reduce(((t,e)=>t+parseFloat(e.file_size)),2);const t=(this.downloadedSize/1048576).toFixed(2);return t===this.totalMB&&setTimeout((()=>{this.showProgressBar=!1}),5e3),`${t} / ${this.totalMB} MB`},isValidUrl(){const t=/^(http|https):\/\/[^\s]+$/,e=this.restoreRemoteUrl.split("?"),a=e[0];return""===this.restoreRemoteUrl||a.endsWith(".tar.gz")&&t.test(a)},urlValidationState(){return!!this.isValidUrl&&null},urlValidationMessage(){return this.isValidUrl?null:"Please enter a valid URL ending with .tar.gz"},computedRestoreRemoteURLFields(){return this.RestoreTableBuilder("URL")},computedRestoreUploadFileFields(){return this.RestoreTableBuilder("File_name")},checkpointsTable(){return[{key:"name",label:"Name",thStyle:{width:"70%"}},{key:"date",label:"Date",thStyle:{width:"20%"}},{key:"action",label:"Action",thStyle:{width:"5%"}}]},componentsTable1(){return[{key:"component",label:"Component Name",thStyle:{width:"200px"}},{key:"file_url",label:"URL"},{key:"file_size",label:"Size",thStyle:{width:"100px"}},{key:"actions",label:"Actions",thStyle:{width:"117px"},class:"text-center"}]},componentAvailableOptions(){return 1===this.components.length&&(this.selectedBackupComponents=this.components),this.components.filter((t=>-1===this.selectedBackupComponents.indexOf(t)))},remoteFileComponents(){return 1===this.components.length&&(this.restoreRemoteFile=this.components[0],!0)},remoteUrlComponents(){return 1===this.components.length&&(this.restoreRemoteUrlComponent=this.components[0],!0)},isComposeSingle(){return this.appSpecification.version<=3||1===this.appSpecification.compose?.length},selectedOptionText(){const t=this.options.flatMap((t=>t.options)).find((t=>t===this.selectedCmd));return t||""},selectedOptionTextStyle(){return{color:"red",backgroundColor:"rgba(128, 128, 128, 0.1)",fontWeight:"bold",padding:"4px 8px",borderRadius:"4px",marginRight:"10px",marginLeft:"10px"}},...(0,z.rn)("flux",["config","privilege"]),instancesLocked(){try{if(this.appUpdateSpecification.name&&this.marketPlaceApps.length){const t=this.marketPlaceApps.find((t=>this.appUpdateSpecification.name.toLowerCase().startsWith(t.name.toLowerCase())));if(t&&t.lockedValues&&t.lockedValues.includes("instances"))return!0}return!1}catch(t){return console.log(t),!1}},priceMultiplier(){try{if(this.appUpdateSpecification.name&&this.marketPlaceApps.length){const t=this.marketPlaceApps.find((t=>this.appUpdateSpecification.name.toLowerCase().startsWith(t.name.toLowerCase())));if(t&&t.multiplier>1)return t.multiplier*this.generalMultiplier}return this.generalMultiplier}catch(t){return console.log(t),this.generalMultiplier}},callbackValue(){const{protocol:t,hostname:e,port:a}=window.location;let s="";s+=t,s+="//";const i=/[A-Za-z]/g;if(e.split("-")[4]){const t=e.split("-"),a=t[4].split("."),i=+a[0]+1;a[0]=i.toString(),a[2]="api",t[4]="",s+=t.join("-"),s+=a.join(".")}else if(e.match(i)){const t=e.split(".");t[0]="api",s+=t.join(".")}else{if("string"===typeof e&&this.$store.commit("flux/setUserIp",e),+a>16100){const t=+a+1;this.$store.commit("flux/setFluxPort",t)}s+=e,s+=":",s+=this.config.apiPort}const o=gt.get("backendURL")||s,n=`${o}/id/providesign`;return encodeURI(n)},isAppOwner(){const t=localStorage.getItem("zelidauth"),e=ft.parse(t);return!!(t&&e&&e.zelid&&this.selectedAppOwner===e.zelid)},validTill(){const t=this.timestamp+36e5;return t},subscribedTill(){if(this.appUpdateSpecification.expire){const t=this.expireOptions.find((t=>t.value===this.appUpdateSpecification.expire));if(t){const e=1e6*Math.floor((this.timestamp+t.time)/1e6);return e}const e=this.appUpdateSpecification.expire,a=12e4,s=e*a,i=1e6*Math.floor((this.timestamp+s)/1e6);return i}const t=1e6*Math.floor((this.timestamp+2592e6)/1e6);return t},isApplicationInstalledLocally(){if(this.installedApps){const t=this.installedApps.find((t=>t.name===this.appName));return!!t}return!1},constructAutomaticDomainsGlobal(){if(!this.callBResponse.data)return"loading...";if(console.log(this.callBResponse.data),!this.callBResponse.data.name)return"loading...";const t=this.callBResponse.data.name,e=t.toLowerCase();if(!this.callBResponse.data.compose){const t=JSON.parse(JSON.stringify(this.callBResponse.data.ports)),a=[`${e}.app.runonflux.io`];for(let s=0;s<t.length;s+=1){const i=`${e}_${t[s]}.app.runonflux.io`;a.push(i)}return a}const a=[`${e}.app.runonflux.io`];return this.callBResponse.data.compose.forEach((t=>{for(let s=0;s<t.ports.length;s+=1){const i=`${e}_${t.ports[s]}.app.runonflux.io`;a.push(i)}})),a},getExpireLabel(){return this.expireOptions[this.expirePosition]?this.expireOptions[this.expirePosition].label:null},minutesToString(){let t=60*this.minutesRemaining;const e={day:86400,hour:3600,minute:60,second:1},a=[];for(const s in e){const i=Math.floor(t/e[s]);1===i&&a.push(` ${i} ${s}`),i>=2&&a.push(` ${i} ${s}s`),t%=e[s]}return a},getNewExpireLabel(){if(-1===this.daemonBlockCount)return"Not possible to calculate expiration";const t=this.callBResponse.data.expire||22e3,e=this.callBResponse.data.height+t-this.daemonBlockCount;if(e<1)return"Application Expired";this.minutesRemaining=2*e;const a=this.minutesToString;return a.length>2?`${a[0]}, ${a[1]}, ${a[2]}`:a.length>1?`${a[0]}, ${a[1]}`:`${a[0]}`}},watch:{isComposeSingle(t){t&&this.appSpecification.version>=4&&(this.selectedApp=this.appSpecification.compose[0].name,this.selectedAppVolume=this.appSpecification.compose[0].name)},selectedIp:{handler(){this.getFluxVersion()}},appUpdateSpecification:{handler(){this.dataToSign="",this.signature="",this.timestamp=null,this.dataForAppUpdate={},this.updateHash="",this.output=[],null!==this.websocket&&(this.websocket.close(),this.websocket=null)},deep:!0},expirePosition:{handler(){this.dataToSign="",this.signature="",this.timestamp=null,this.dataForAppUpdate={},this.updateHash="",this.output=[],null!==this.websocket&&(this.websocket.close(),this.websocket=null)}},isPrivateApp(t){this.appUpdateSpecification.version>=7&&!1===t&&(this.appUpdateSpecification.nodes=[],this.appUpdateSpecification.compose.forEach((t=>{t.secrets="",t.repoauth=""})),this.selectedEnterpriseNodes=[]),this.allowedGeolocations={},this.forbiddenGeolocations={},this.dataToSign="",this.signature="",this.timestamp=null,this.dataForAppUpdate={},this.updateHash="",this.output=[],null!==this.websocket&&(this.websocket.close(),this.websocket=null)}},created(){this.fluxDriveUploadTask=[],this.fluxDriveEndPoint="https://mws.fluxdrive.runonflux.io"},mounted(){const{hostname:t}=window.location,e=/[A-Za-z]/g;t.match(e)?this.ipAccess=!1:this.ipAccess=!0;const a=this;this.$nextTick((()=>{window.addEventListener("resize",a.onResize)})),this.initMMSDK(),this.callBResponse.data="",this.callBResponse.status="",this.appSpecification={},this.callResponse.data="",this.callResponse.status="",this.monitoringStream={},this.appExec.cmd="",this.appExec.env="",this.checkFluxCommunication(),this.getAppOwner(),this.getGlobalApplicationSpecifics(),this.appsDeploymentInformation(),this.getGeolocationData(),this.getMarketPlace(),this.getMultiplier(),this.getEnterpriseNodes(),this.getDaemonBlockCount()},beforeDestroy(){window.removeEventListener("resize",this.onResize)},methods:{async refreshInfo(){this.$refs.BackendRefresh.blur(),await this.getInstancesForDropDown(),this.selectedIpChanged(),this.getApplicationLocations().catch((()=>{this.isBusy=!1,this.showToast("danger","Error loading application locations")}))},copyMessageToSign(){const{copy:t}=(0,Z.VPI)({source:this.dataToSign,legacy:!0});t(),this.tooltipText="Copied!",setTimeout((()=>{this.$refs.copyButtonRef&&(this.$refs.copyButtonRef.blur(),this.tooltipText="")}),1e3),setTimeout((()=>{this.tooltipText="Copy to clipboard"}),1500)},getIconName(t,e){const a=t/e*100;let s;return s=a<=60?"battery-full":a>60&&a<=80?"battery-half":"battery",s},getIconColorStyle(t,e){const a=t/e*100;let s;return s=a<=60?"green":a>60&&a<=80?"yellow":"red",{color:s}},sortNameFolder(t,e){return(t.isDirectory?`..${t.name}`:t.name).localeCompare(e.isDirectory?`..${e.name}`:e.name)},sortTypeFolder(t,e){return t.isDirectory&&e.isFile?-1:t.isFile&&e.isDirectory?1:0},sort(t,e,a,s){return"name"===a?this.sortNameFolder(t,e,s):"type"===a?this.sortTypeFolder(t,e,s):"modifiedAt"===a?t.modifiedAt>e.modifiedAt?-1:t.modifiedAt<e.modifiedAt?1:0:"size"===a?t.size>e.size?-1:t.size<e.size?1:0:0},async storageStats(){try{this.volumeInfo=await this.executeLocalCommand(`/backup/getvolumedataofcomponent/${this.appName}/${this.selectedAppVolume}/GB/2/used,size`),this.volumePath=this.volumeInfo.data?.data,"success"===this.volumeInfo.data.status?(this.storage.total=this.volumeInfo.data.data.size,this.storage.used=this.volumeInfo.data.data.used):this.showToast("danger",this.volumeInfo.data.data.message||this.volumeInfo.data.data)}catch(t){this.showToast("danger",t.message||t)}},changeFolder(t){if(".."===t){const t=this.currentFolder.split("/");t.pop(),this.currentFolder=t.join("/")}else""===this.currentFolder?this.currentFolder=t:this.currentFolder=`${this.currentFolder}/${t}`;const e=this.currentFolder.split("/").filter((t=>""!==t)),a=e.map((t=>`  ${t}  `)).join("/");this.inputPathValue=`/${a}`,this.loadFolder(this.currentFolder)},async loadFolder(t,e=!1){try{this.filterFolder="",e||(this.folderView=[]),this.loadingFolder=!0;const a=await this.executeLocalCommand(`/apps/getfolderinfo/${this.appName}/${this.selectedAppVolume}/${encodeURIComponent(t)}`);this.loadingFolder=!1,"success"===a.data.status?(this.folderView=a.data.data,console.log(this.folderView)):this.showToast("danger",a.data.data.message||a.data.data)}catch(a){this.loadingFolder=!1,console.log(a.message),this.showToast("danger",a.message||a)}},async createFolder(t){try{let e=t;""!==this.currentFolder&&(e=`${this.currentFolder}/${t}`);const a=await this.executeLocalCommand(`/apps/createfolder/${this.appName}/${this.selectedAppVolume}/${encodeURIComponent(e)}`);"error"===a.data.status?"EEXIST"===a.data.data.code?this.showToast("danger",`Folder ${t} already exists`):this.showToast("danger",a.data.data.message||a.data.data):(this.loadFolder(this.currentFolder,!0),this.createDirectoryDialogVisible=!1)}catch(e){this.loadingFolder=!1,console.log(e.message),this.showToast("danger",e.message||e)}this.newDirName=""},cancelDownload(t){this.abortToken[t].cancel(`Download of ${t} cancelled`),this.downloaded[t]="",this.total[t]=""},async download(t,e=!1){try{const a=this,s=this.currentFolder,i=s?`${s}/${t}`:t,o={headers:this.zelidHeader,responseType:"blob",onDownloadProgress(s){const{loaded:i,total:o}=s,n=i/o*100;console.log(s),e?a.updateFileProgressVolume(`${t}.zip`,n):a.updateFileProgressVolume(t,n)}};let n;if(e?(this.showToast("info","Directory download initiated. Please wait..."),n=await this.executeLocalCommand(`/apps/downloadfolder/${this.appName}/${this.selectedAppVolume}/${encodeURIComponent(i)}`,null,o)):n=await this.executeLocalCommand(`/apps/downloadfile/${this.appName}/${this.selectedAppVolume}/${encodeURIComponent(i)}`,null,o),console.log(n),"error"===n.data.status)this.showToast("danger",n.data.data.message||n.data.data);else{const a=window.URL.createObjectURL(new Blob([n.data])),s=document.createElement("a");s.href=a,e?s.setAttribute("download",`${t}.zip`):s.setAttribute("download",t),document.body.appendChild(s),s.click()}}catch(a){console.log(a.message),a.message?a.message.startsWith("Download")||this.showToast("danger",a.message):this.showToast("danger",a)}},beautifyValue(t){const e=t.split(".");return e[0].length>=4&&(e[0]=e[0].replace(/(\d)(?=(\d{3})+$)/g,"$1,")),e.join(".")},refreshFolder(){const t=this.currentFolder.split("/").filter((t=>""!==t)),e=t.map((t=>`  ${t}  `)).join("/");this.inputPathValue=`/${e}`,this.loadFolder(this.currentFolder,!0),this.storageStats()},refreshFolderSwitch(){this.currentFolder="";const t=this.currentFolder.split("/").filter((t=>""!==t)),e=t.map((t=>`  ${t}  `)).join("/");this.inputPathValue=`/${e}`,this.loadFolder(this.currentFolder,!0),this.storageStats()},async deleteFile(t){try{const e=this.currentFolder,a=e?`${e}/${t}`:t,s=await this.executeLocalCommand(`/apps/removeobject/${this.appName}/${this.selectedAppVolume}/${encodeURIComponent(a)}`);"error"===s.data.status?this.showToast("danger",s.data.data.message||s.data.data):(this.refreshFolder(),this.showToast("success",`${t} deleted`))}catch(e){this.showToast("danger",e.message||e)}},rename(t){this.renameDialogVisible=!0;let e=t;""!==this.currentFolder&&(e=`${this.currentFolder}/${t}`),this.fileRenaming=e,this.newName=t},async confirmRename(){this.renameDialogVisible=!1;try{const t=this.fileRenaming,e=this.newName,a=await this.executeLocalCommand(`/apps/renameobject/${this.appName}/${this.selectedAppVolume}/${encodeURIComponent(t)}/${e}`);console.log(a),"error"===a.data.status?this.showToast("danger",a.data.data.message||a.data.data):(t.includes("/")?this.showToast("success",`${t.split("/").pop()} renamed to ${e}`):this.showToast("success",`${t} renamed to ${e}`),this.loadFolder(this.currentFolder,!0))}catch(t){this.showToast("danger",t.message||t)}},upFolder(){this.changeFolder("..")},onResize(){this.windowWidth=window.innerWidth},handleRadioClick(){"Upload File"===this.selectedRestoreOption&&this.loadBackupList(this.appName,"upload","files"),"FluxDrive"===this.selectedRestoreOption&&this.getFluxDriveBackupList(),console.log("Radio button clicked. Selected option:",this.selectedOption)},getUploadFolder(){if(this.selectedIp){const t=this.selectedIp.split(":")[0],e=this.selectedIp.split(":")[1]||16127;if(this.currentFolder){const a=encodeURIComponent(this.currentFolder);return this.ipAccess?`http://${t}:${e}/ioutils/fileupload/volume/${this.appName}/${this.selectedAppVolume}/${a}`:`https://${t.replace(/\./g,"-")}-${e}.node.api.runonflux.io/ioutils/fileupload/volume/${this.appName}/${this.selectedAppVolume}/${a}`}return this.ipAccess?`http://${t}:${e}/ioutils/fileupload/volume/${this.appName}/${this.selectedAppVolume}`:`https://${t.replace(/\./g,"-")}-${e}.node.api.runonflux.io/ioutils/fileupload/volume/${this.appName}/${this.selectedAppVolume}`}},getUploadFolderBackup(t){const e=this.selectedIp.split(":")[0],a=this.selectedIp.split(":")[1]||16127,s=encodeURIComponent(t);return this.ipAccess?`http://${e}:${a}/ioutils/fileupload/backup/${this.appName}/${this.restoreRemoteFile}/null/${s}`:`https://${e.replace(/\./g,"-")}-${a}.node.api.runonflux.io/ioutils/fileupload/backup/${this.appName}/${this.restoreRemoteFile}/null/${s}`},addAndConvertFileSizes(t,e="auto",a=2){const s={B:1,KB:1024,MB:1048576,GB:1073741824},i=(t,e)=>t/s[e.toUpperCase()],o=(t,e)=>{const s="B"===e?t.toFixed(0):t.toFixed(a);return`${s} ${e}`};let n;if(Array.isArray(t)&&t.length>0)n=+t.reduce(((t,e)=>t+(e.file_size||0)),0);else{if("number"!==typeof+t)return console.error("Invalid sizes parameter"),"N/A";n=+t}if(isNaN(n))return console.error("Total size is not a valid number"),"N/A";if("auto"===e){let t,e=n;return Object.keys(s).forEach((a=>{const s=i(n,a);s>=1&&(void 0===e||s<e)&&(e=s,t=a)})),t=t||"B",o(e,t)}{const t=i(n,e);return o(t,e)}},selectFiles(){this.$refs.fileselector.value="",this.$refs.fileselector.click()},handleFiles(t){if(null===this.restoreRemoteFile)return void this.showToast("warning","Select component");const{files:e}=t.target;e&&this.addFiles([...e])},addFile(t){const e=t.dataTransfer.files;e&&this.addFiles([...e])},async addFiles(t){for(const e of t){this.volumeInfo=await this.executeLocalCommand(`/backup/getvolumedataofcomponent/${this.appName}/${this.restoreRemoteFile}/B/0/mount,available,size`),this.volumePath=this.volumeInfo.data?.data?.mount;const a=this.files.findIndex((e=>e.file_name===t[0].name&&e.component!==this.restoreRemoteFile));if(-1!==a)return this.showToast("warning",`'${e.name}' is already in the upload queue for other component.`),!1;const s=this.files.findIndex((t=>t.component===this.restoreRemoteFile));-1!==s?this.$set(this.files,s,{selected_file:e,uploading:!1,uploaded:!1,progress:0,path:`${this.volumePath}/backup/upload`,component:this.restoreRemoteFile,file_name:`backup_${this.restoreRemoteFile.toLowerCase()}.tar.gz`,file_size:e.size}):this.files.push({selected_file:e,uploading:!1,uploaded:!1,progress:0,path:`${this.volumePath}/backup/upload`,component:this.restoreRemoteFile,file_name:`backup_${this.restoreRemoteFile.toLowerCase()}.tar.gz`,file_size:e.size})}return!0},removeFile(t){this.files=this.files.filter((e=>e.selected_file.name!==t.selected_file.name))},async processChunks(t,e){const a={restore_upload:"restoreFromUploadStatus",restore_remote:"restoreFromRemoteURLStatus",backup:"tarProgress",restore_fluxdrive:"restoreFromFluxDriveStatus"};for(const s of t)if(""!==s){const t=a[e];t&&(this[t]=s,"restore_upload"===e&&s.includes("Error:")?(console.log(s),this.changeAlert("danger",s,"showTopUpload",!0)):"restore_upload"===e&&s.includes("Finalizing")?setTimeout((()=>{this.changeAlert("success","Restore completed successfully","showTopUpload",!0)}),5e3):"restore_remote"===e&&s.includes("Error:")?this.changeAlert("danger",s,"showTopRemote",!0):"restore_remote"===e&&s.includes("Finalizing")?setTimeout((()=>{this.changeAlert("success","Restore completed successfully","showTopRemote",!0),this.restoreRemoteUrlItems=[]}),5e3):"restore_fluxdrive"===e&&s.includes("Error:")?this.changeAlert("danger",s,"showTopFluxDrive",!0):"restore_fluxdrive"===e&&s.includes("Finalizing")&&setTimeout((()=>{this.changeAlert("success","Restore completed successfully","showTopFluxDrive",!0),this.restoreRemoteUrlItems=[]}),5e3))}},changeAlert(t,e,a,s){this.alertVariant=t,this.alertMessage=e,this[a]=s},startUpload(){this.showTopUpload=!1;const t=this;return new Promise((async(e,a)=>{try{this.restoreFromUpload=!0,this.restoreFromUploadStatus="Uploading...";const a=this.files.map((t=>new Promise((async(e,a)=>{if(t.uploaded||t.uploading||!t.selected_file)e();else try{await this.upload(t),e()}catch(s){a(s)}}))));await Promise.all(a),this.files.forEach((t=>{t.uploading=!1,t.uploaded=!1,t.progress=0})),this.restoreFromUploadStatus="Initializing restore jobs...";const s=this.buildPostBody(this.appSpecification,"restore","upload");let i;for(const t of this.files)i=this.updateJobStatus(s,t.component,"restore");const o=localStorage.getItem("zelidauth"),n={zelidauth:o,"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Connection:"keep-alive"},r=this.selectedIp.split(":")[0],l=this.selectedIp.split(":")[1]||16127;let c=`https://${r.replace(/\./g,"-")}-${l}.node.api.runonflux.io/apps/appendrestoretask`;this.ipAccess&&(c=`http://${r}:${l}/apps/appendrestoretask`);const p=await fetch(c,{method:"POST",body:JSON.stringify(i),headers:n}),d=p.body.getReader();await new Promise(((e,a)=>{function s(){d.read().then((async({done:a,value:i})=>{if(a)return void e();const o=new TextDecoder("utf-8").decode(i),n=o.split("\n");await t.processChunks(n,"restore_upload"),s()}))}s()})),this.restoreFromUpload=!1,this.restoreFromUploadStatus="",this.loadBackupList(this.appName,"upload","files"),e()}catch(s){a(s)}}))},async upload(t){return new Promise(((e,a)=>{const s=this;if("undefined"===typeof XMLHttpRequest)return void a("XMLHttpRequest is not supported.");const i=new XMLHttpRequest,o=this.getUploadFolderBackup(t.file_name);i.upload&&(i.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.progress=e.percent});const n=new FormData;n.append(t.selected_file.name,t.selected_file),t.uploading=!0,i.onerror=function(e){s.restoreFromUpload=!1,s.restoreFromUploadStatus="",s.files.forEach((t=>{t.uploading=!1,t.uploaded=!1,t.progress=0})),s.showToast("danger",`An error occurred while uploading ${t.selected_file.name}, try to relogin`),a(e)},i.onload=function(){if(i.status<200||i.status>=300)return console.error(i.status),s.restoreFromUpload=!1,s.restoreFromUploadStatus="",s.files.forEach((t=>{t.uploading=!1,t.uploaded=!1,t.progress=0})),s.showToast("danger",`An error occurred while uploading '${t.selected_file.name}' - Status code: ${i.status}`),void a(i.status);t.uploaded=!0,t.uploading=!1,s.$emit("complete"),e()},i.open("post",o,!0);const r=this.zelidHeader||{},l=Object.keys(r);for(let t=0;t<l.length;t+=1){const e=l[t];Object.prototype.hasOwnProperty.call(r,e)&&null!==r[e]&&i.setRequestHeader(e,r[e])}i.setRequestHeader("Access-Control-Allow-Origin","*"),i.send(n)}))},removeAllBackup(){this.backupList=[],this.backupToUpload=[]},totalArchiveFileSize(t){return t.reduce(((t,e)=>t+parseFloat(e.file_size)),0)},RestoreTableBuilder(t){const e=t.toString(),a=e.split("_")[0];return[{key:"component",label:"Component Name",thStyle:{width:"25%"}},{key:t.toString().toLowerCase(),label:a,thStyle:{width:"70%"}},{key:"file_size",label:"Size",thStyle:{width:"10%"}},{key:"actions",label:"Action",thStyle:{width:"5%"}}]},addAllTags(){this.selectedBackupComponents=[...this.selectedBackupComponents,...this.components]},clearSelected(){this.$refs.selectableTable.clearSelected()},selectAllRows(){this.$refs.selectableTable.selectAllRows()},selectStorageOption(t){this.selectedStorageMethod=t},buildPostBody(t,e,a=""){const s={appname:t.name,..."restore"===e?{type:a}:{},[e]:t.compose.map((t=>({component:t.name,[e]:!1,..."restore"===e&&"remote"===a?{url:""}:{}})))};return s},updateJobStatus(t,e,a,s=[]){const i=t[a].find((t=>t.component===e));if(i){if(i[a]=!0,"restore"===a&&"remote"===t?.type){const t=s.find((t=>t.component===e));t?(i.url=t.url||"",console.log(`${t.url}`)):console.log(`URL info not found for component ${e}.`)}console.log(`Status for ${e} set to true for ${a}.`)}else console.log(`Component ${e} not found in the ${a} array.`);return t},async createBackup(t,e){if(0===this.selectedBackupComponents?.length)return;this.backupProgress=!0,this.tarProgress="Initializing backup jobs...";const a=localStorage.getItem("zelidauth"),s={zelidauth:a,"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Connection:"keep-alive"},i=this.buildPostBody(this.appSpecification,"backup");let o;for(const u of e)o=this.updateJobStatus(i,u,"backup");const n=this.selectedIp.split(":")[0],r=this.selectedIp.split(":")[1]||16127;let l=`https://${n.replace(/\./g,"-")}-${r}.node.api.runonflux.io/apps/appendbackuptask`;this.ipAccess&&(l=`http://${n}:${r}/apps/appendbackuptask`);const c=await fetch(l,{method:"POST",body:JSON.stringify(o),headers:s}),p=this,d=c.body.getReader();await new Promise(((t,e)=>{function a(){d.read().then((async({done:e,value:s})=>{if(e)return void t();const i=new TextDecoder("utf-8").decode(s),o=i.split("\n");await p.processChunks(o,"backup"),a()}))}a()})),setTimeout((()=>{this.backupProgress=!1}),5e3),this.loadBackupList()},onRowSelected(t){this.backupToUpload=t.map((t=>{const e=t.component,a=this.backupList.find((t=>t.component===e));return{component:e,file:a?a.file:null,file_size:a?a.file_size:null,file_name:a?a.file_name:null,create:a?a.create:null}})).filter((t=>null!==t.file))},applyFilter(){this.$nextTick((()=>{this.checkpoints.forEach((t=>{t._showDetails=!0}))})),console.log(this.appSpecification.compose),this.components=this.appSpecification.compose.map((t=>t.name))},onFilteredBackup(t){this.totalRows=t.length,this.currentPage=1},addAllBackupComponents(t){const e=this.checkpoints.find((e=>e.timestamp===t)),a=e.components.map((t=>({component:t.component,file_url:t.file_url,timestamp:e.timestamp,file_size:t.file_size})));this.newComponents=a},addComponent(t,e){const a=this.newComponents.findIndex((e=>e.component===t.component));-1!==a?this.$set(this.newComponents,a,{timestamp:e,component:t.component,file_url:t.file_url,file_size:t.file_size}):this.newComponents.push({component:t.component,timestamp:e,file_url:t.file_url,file_size:t.file_size})},formatName(t){return`backup_${t.timestamp}`},formatDateTime(t,e=!1){const a=t>1e12,s=a?new Date(t):new Date(1e3*t);return e&&s.setHours(s.getHours()+24),s.toLocaleString()},addRemoteFile(){this.selectFiles()},async restoreFromRemoteFile(){const t=localStorage.getItem("zelidauth");this.showTopRemote=!1,this.downloadingFromUrl=!0,this.restoreFromRemoteURLStatus="Initializing restore jobs...";const e={zelidauth:t,"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Connection:"keep-alive"},a=this.buildPostBody(this.appSpecification,"restore","remote");let s;for(const p of this.restoreRemoteUrlItems)s=this.updateJobStatus(a,p.component,"restore",this.restoreRemoteUrlItems);const i=this.selectedIp.split(":")[0],o=this.selectedIp.split(":")[1]||16127;let n=`https://${i.replace(/\./g,"-")}-${o}.node.api.runonflux.io/apps/appendrestoretask`;this.ipAccess&&(n=`http://${i}:${o}/apps/appendrestoretask`);const r=await fetch(n,{method:"POST",body:JSON.stringify(s),headers:e}),l=this,c=r.body.getReader();await new Promise(((t,e)=>{function a(){c.read().then((async({done:e,value:s})=>{if(e)return void t();const i=new TextDecoder("utf-8").decode(s),o=i.split("\n");await l.processChunks(o,"restore_remote"),a()}))}a()})),this.downloadingFromUrl=!1,this.restoreFromRemoteURLStatus=""},async addRemoteUrlItem(t,e,a=!1){if((a||this.isValidUrl)&&""!==this.restoreRemoteUrl.trim()&&null!==this.restoreRemoteUrlComponent){if(this.remoteFileSizeResponse=await this.executeLocalCommand(`/backup/getremotefilesize/${encodeURIComponent(this.restoreRemoteUrl.trim())}/B/0/true/${this.appName}`),"success"!==this.remoteFileSizeResponse.data?.status)return void this.showToast("danger",this.remoteFileSizeResponse.data?.data.message||this.remoteFileSizeResponse.data?.massage);if(this.volumeInfoResponse=await this.executeLocalCommand(`/backup/getvolumedataofcomponent/${t}/${e}/B/0/size,available,mount`),"success"!==this.volumeInfoResponse.data?.status)return void this.showToast("danger",this.volumeInfoResponse.data?.data.message||this.volumeInfoResponse.data?.data);if(this.remoteFileSizeResponse.data.data>this.volumeInfoResponse.data.data.available)return void this.showToast("danger",`File is too large (${this.addAndConvertFileSizes(this.remoteFileSizeResponse.data.data)})...`);const a=this.restoreRemoteUrlItems.findIndex((t=>t.url===this.restoreRemoteUrl));if(-1!==a)return void this.showToast("warning",`'${this.restoreRemoteUrl}' is already in the download queue for other component.`);const s=this.restoreRemoteUrlItems.findIndex((t=>t.component===this.restoreRemoteUrlComponent));if(0===this.remoteFileSizeResponse.data.data||null===this.remoteFileSizeResponse.data.data)return;-1!==s?(this.restoreRemoteUrlItems[s].url=this.restoreRemoteUrl,this.restoreRemoteUrlItems[s].file_size=this.remoteFileSizeResponse.data.data):this.restoreRemoteUrlItems.push({url:this.restoreRemoteUrl,component:this.restoreRemoteUrlComponent,file_size:this.remoteFileSizeResponse.data.data})}},async deleteItem(t,e,a="",s=""){const i=e.findIndex((t=>t.file===a));-1!==i&&(e[i]?.selected_file||"upload"!==s||(console.log(e[i].file),await this.executeLocalCommand(`/backup/removebackupfile/${encodeURIComponent(e[i].file)}/${this.appName}`))),e.splice(t,1)},async loadBackupList(t=this.appName,e="local",a="backupList"){const s=[];for(const i of this.components)this.volumeInfo=await this.executeLocalCommand(`/backup/getvolumedataofcomponent/${t}/${i}/B/0/mount`),this.volumePath=this.volumeInfo.data?.data,this.backupFile=await this.executeLocalCommand(`/backup/getlocalbackuplist/${encodeURIComponent(`${this.volumePath.mount}/backup/${e}`)}/B/0/true/${t}`),this.backupItem=this.backupFile.data?.data,Array.isArray(this.backupItem)&&(this.BackupItem={isActive:!1,component:i,create:+this.backupItem[0].create,file_size:this.backupItem[0].size,file:`${this.volumePath.mount}/backup/${e}/${this.backupItem[0].name}`,file_name:`${this.backupItem[0].name}`},s.push(this.BackupItem));console.log(JSON.stringify(a)),this[a]=s},allDownloadsCompleted(){return this.computedFileProgress.every((t=>100===t.progress))},allDownloadsCompletedVolume(){return this.computedFileProgressVolume.every((t=>100===t.progress))&&setTimeout((()=>{this.fileProgressVolume=this.fileProgressVolume.filter((t=>100!==t.progress))}),5e3),this.computedFileProgressVolume.every((t=>100===t.progress))},updateFileProgress(t,e,a,s,i){this.$nextTick((()=>{const t=this.fileProgress.findIndex((t=>t.fileName===i));-1!==t?this.$set(this.fileProgress,t,{fileName:i,progress:e}):this.fileProgress.push({fileName:i,progress:e})}))},updateFileProgressFD(t,e,a,s,i){this.$nextTick((()=>{const t=this.fileProgressFD.findIndex((t=>t.fileName===i));-1!==t?this.$set(this.fileProgressFD,t,{fileName:i,progress:e}):this.fileProgressFD.push({fileName:i,progress:e})}))},updateFileProgressVolume(t,e){this.$nextTick((()=>{const a=this.fileProgressVolume.findIndex((e=>e.fileName===t));-1!==a?this.$set(this.fileProgressVolume,a,{fileName:t,progress:e}):this.fileProgressVolume.push({fileName:t,progress:e})}))},rowClassFluxDriveBackups(t,e){return t&&"row"===e?"":"table-no-padding"},async deleteRestoreBackup(t,e,a=0){if(0!==a){this.newComponents=this.newComponents.filter((t=>t.timestamp!==a));try{const t=localStorage.getItem("zelidauth"),s={headers:{zelidauth:t}},i={appname:this.appName,timestamp:a},o=await ht.post(`${this.fluxDriveEndPoint}/removeCheckpoint`,i,s);if(console.error(o.data),o&&o.data&&"success"===o.data.status){const t=e.findIndex((t=>t.timestamp===a));return e.splice(t,1),this.showToast("success","Checkpoint backup removed successfully."),!0}return this.showToast("danger",o.data.data.message),!1}catch(s){console.error("Error removing checkpoint",s),this.showToast("Error removing checkpoint")}}return!1},async deleteLocalBackup(t,e,a=0){if(0===a){for(const t of e){const e=t.file;await this.executeLocalCommand(`/backup/removebackupfile/${encodeURIComponent(e)}/${this.appName}`)}this.backupList=[],this.backupToUpload=[]}else{this.status=await this.executeLocalCommand(`/backup/removebackupfile/${encodeURIComponent(a)}/${this.appName}`);const s=e.findIndex((e=>e.component===t));e.splice(s,1)}},async downloadAllBackupFiles(t){try{this.showProgressBar=!0;const e=localStorage.getItem("zelidauth"),a=this,s={headers:{zelidauth:e},responseType:"blob",onDownloadProgress(t){const{loaded:e,total:s,target:i}=t,o=decodeURIComponent(i.responseURL),n=o.lastIndexOf("/"),r=-1!==n?o.slice(0,n):o,l=r.split("/").pop(),c=e/s*100,p=a.backupList.find((t=>t.file.endsWith(l)));a.updateFileProgress(l,c,e,s,p.component)}},i=t.map((async t=>{try{const{file:e}=t,i=e.split("/"),o=i[i.length-1],n=await this.executeLocalCommand(`/backup/downloadlocalfile/${encodeURIComponent(e)}/${a.appName}`,null,s),r=new Blob([n.data]),l=window.URL.createObjectURL(r),c=document.createElement("a");return c.href=l,c.setAttribute("download",o),document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(l),!0}catch(e){return console.error("Error downloading file:",e),!1}})),o=await Promise.all(i);o.every((t=>t))?console.log("All downloads completed successfully"):console.error("Some downloads failed. Check the console for details.")}catch(e){console.error("Error downloading files:",e)}finally{setTimeout((()=>{this.showProgressBar=!1,this.fileProgress=[]}),5e3)}},async checkFluxDriveUploadProgress(){const t=localStorage.getItem("zelidauth"),e={headers:{zelidauth:t}},a=[];let s=!1;for(const o of this.fluxDriveUploadTask)try{const t=await ht.get(`${this.fluxDriveEndPoint}/gettaskstatus?taskId=${o.taskId}`,e);t&&t.data&&"success"===t.data.status?(o.status=t.data.data.status.state,"downloading"===o.status?o.progress=t.data.data.status.progress/2:"uploading"===o.status?o.progress=50+t.data.data.status.progress/2:o.progress=t.data.data.status.progress,o.message=t.data.data.status.message,this.updateFileProgressFD(o.filename,o.progress,0,0,o.component),this.fluxDriveUploadStatus=t.data.data.status.message,"finished"===o.status?this.showToast("success",`${o.component} backup uploaded to FluxDrive successfully.`):"failed"===o.status?this.showToast("danger",`failed to upload ${o.component} backup to FluxDrive.${this.fluxDriveUploadStatus}`):a.push(o)):s=!0}catch(i){s=!0,console.log("error fetching upload status")}s||(this.fluxDriveUploadTask=a),this.fluxDriveUploadTask.length>0?setTimeout((()=>{this.checkFluxDriveUploadProgress()}),2e3):(this.uploadProgress=!1,this.showFluxDriveProgressBar=!1,this.fluxDriveUploadStatus="",this.fileProgressFD=[])},async uploadToFluxDrive(){try{this.uploadProgress=!0;const t=localStorage.getItem("zelidauth"),e=this,a={headers:{zelidauth:t}};let s=0;const i=this.backupToUpload.map((async t=>{try{const{file:i}=t,{component:o}=t,{file_size:n}=t,{file_name:r}=t,{create:l}=t;let c=l;Math.abs(c-s)>36e5?s=c:c=s;const p=this.selectedIp.split(":")[0],d=this.selectedIp.split(":")[1]||16127,u=`https://${p.replace(/\./g,"-")}-${d}.node.api.runonflux.io/backup/downloadlocalfile/${encodeURIComponent(i)}/${e.appName}`,m={appname:e.appName,component:o,filename:r,timestamp:c,host:u,filesize:n},h=await ht.post(`${this.fluxDriveEndPoint}/registerbackupfile`,m,a);return h&&h.data&&"success"===h.data.status?(this.fluxDriveUploadTask.push({taskId:h.data.data.taskId,filename:r,component:o,status:"in queue",progress:0}),!0):(console.error(h.data),this.showToast("danger",h.data.data.message),!1)}catch(i){return console.error("Error registering file:",i),this.showToast("danger","Error registering file(s) for upload."),!1}})),o=await Promise.all(i);o.every((t=>t))?(console.log("All uploads registered successfully"),this.showFluxDriveProgressBar=!0):console.error("Some uploads failed. Check the console for details.")}catch(t){console.error("Error registering files:",t),this.showToast("danger","Error registering file(s) for upload.")}finally{setTimeout((()=>{this.checkFluxDriveUploadProgress()}),2e3)}},async restoreFromFluxDrive(t){const e=[];for(const u of t)e.push({component:u.component,file_size:u.file_size,url:u.file_url});const a=localStorage.getItem("zelidauth");this.showTopFluxDrive=!1,this.restoringFromFluxDrive=!0,this.restoreFromFluxDriveStatus="Initializing restore jobs...";const s={zelidauth:a,"Content-Type":"application/json","Access-Control-Allow-Origin":"*",Connection:"keep-alive"},i=this.buildPostBody(this.appSpecification,"restore","remote");let o;for(const u of e)o=this.updateJobStatus(i,u.component,"restore",e);const n=this.selectedIp.split(":")[0],r=this.selectedIp.split(":")[1]||16127;let l=`https://${n.replace(/\./g,"-")}-${r}.node.api.runonflux.io/apps/appendrestoretask`;this.ipAccess&&(l=`http://${n}:${r}/apps/appendrestoretask`);const c=await fetch(l,{method:"POST",body:JSON.stringify(o),headers:s}),p=this,d=c.body.getReader();await new Promise(((t,e)=>{function a(){d.read().then((async({done:e,value:s})=>{if(e)return void t();const i=new TextDecoder("utf-8").decode(s),o=i.split("\n");await p.processChunks(o,"restore_fluxdrive"),a()}))}a()})),this.restoringFromFluxDrive=!1,this.restoreFromFluxDriveStatus=""},async getFluxDriveBackupList(){try{const t=localStorage.getItem("zelidauth"),e={headers:{zelidauth:t}},a=await ht.get(`${this.fluxDriveEndPoint}/getbackuplist?appname=${this.appName}`,e);if(a.data&&"success"===a.data.status){console.log(JSON.stringify(a.data.checkpoints)),this.tableBackup+=1;const t=a.data.checkpoints.reduce(((t,{components:e})=>(e.forEach((e=>t.add(e.component))),t)),new Set),e=[{value:"",text:"all"}];for(const a of t)e.push({value:a,text:a});this.restoreComponents=e,this.applyFilter(),this.checkpoints=a.data.checkpoints}else a.data&&"error"===a.data.status&&this.showToast("danger",a.data.data.message)}catch(t){console.error("Error receiving FluxDrive backup list",t),this.showToast("danger","Error receiving FluxDrive backup list")}},async initMMSDK(){try{await ut.init(),mt=ut.getProvider()}catch(t){console.log(t)}},connectTerminal(t){if(this.appSpecification.version>=4){const t=Object.values(this.appSpecification.compose),e=t.some((t=>t.name===this.selectedApp));if(!e)return void this.showToast("danger","Please select an container app before connecting.")}let e=0;if(!(this.selectedApp||this.appSpecification.version<=3))return void this.showToast("danger","Please select an container app before connecting.");if(null===this.selectedCmd)return void this.showToast("danger","No command selected.");if("Custom"===this.selectedCmd){if(!this.customValue)return void this.showToast("danger","Please enter a custom command.");console.log(`Custom command: ${this.customValue}`),console.log(`App name: ${t}`)}else console.log(`Selected command: ${this.selectedCmd}`),console.log(`App name: ${t}`);this.isConnecting=!0,this.terminal=new et.Terminal({allowProposedApi:!0,cursorBlink:!0,theme:{foreground:"white",background:"black"}});const a=this.selectedIp.split(":")[0],s=this.selectedIp.split(":")[1]||16127,i=localStorage.getItem("zelidauth"),[o,n]=this.selectedFluxVersion.split("."),r=o>=5&&n>=13?"terminal":"";let l=`https://${a.replace(/\./g,"-")}-${s}.node.api.runonflux.io/${r}`;this.ipAccess&&(l=`http://${a}:${s}/${r}`),this.socket=nt.ZP.connect(l);let c="";this.enableUser&&(c=this.userInputValue),this.customValue?this.socket.emit("exec",i,t,this.customValue,this.envInputValue,c):this.socket.emit("exec",i,t,this.selectedCmd,this.envInputValue,c),this.terminal.open(this.$refs.terminalElement);const p=new at.FitAddon;this.terminal.loadAddon(p);const d=new st.WebLinksAddon;this.terminal.loadAddon(d);const u=new it.Unicode11Addon;this.terminal.loadAddon(u);const m=new ot.SerializeAddon;this.terminal.loadAddon(m),this.terminal._initialized=!0,this.terminal.onResize((t=>{const{cols:e,rows:a}=t;console.log("Resizing to",{cols:e,rows:a}),this.socket.emit("resize",{cols:e,rows:a})})),this.terminal.onTitleChange((t=>{console.log(t)})),window.onresize=()=>{p.fit()},this.terminal.onData((t=>{this.socket.emit("cmd",t)})),this.socket.on("error",(t=>{this.showToast("danger",t),this.disconnectTerminal()})),this.socket.on("show",(t=>{0===e&&(e=1,this.customValue||(this.socket.emit("cmd","export TERM=xterm\n"),"/bin/bash"===this.selectedCmd&&this.socket.emit("cmd",'PS1="\\[\\033[01;31m\\]\\u\\[\\033[01;33m\\]@\\[\\033[01;36m\\]\\h \\[\\033[01;33m\\]\\w \\[\\033[01;35m\\]\\$ \\[\\033[00m\\]"\n'),this.socket.emit("cmd","alias ls='ls --color'\n"),this.socket.emit("cmd","alias ll='ls -alF'\n"),this.socket.emit("cmd","clear\n")),setTimeout((()=>{this.isConnecting=!1,this.isVisible=!0,this.$nextTick((()=>{setTimeout((()=>{this.terminal.focus(),p.fit()}),500)}))}),1400)),this.terminal.write(t)})),this.socket.on("end",(()=>{this.disconnectTerminal()}))},disconnectTerminal(){this.socket&&this.socket.disconnect(),this.terminal&&this.terminal.dispose(),this.isVisible=!1,this.isConnecting=!1},onSelectChangeCmd(){"Custom"!==this.selectedCmd&&(this.customValue="")},onSelectChangeEnv(){this.enableEnvironment||(this.envInputValue="")},onSelectChangeUser(){this.enableUser||(this.userInputValue="")},onFilteredSelection(t){this.entNodesSelectTable.totalRows=t.length,this.entNodesSelectTable.currentPage=1},async getMarketPlace(){try{const t=await ht.get("https://stats.runonflux.io/marketplace/listapps");"success"===t.data.status&&(this.marketPlaceApps=t.data.data)}catch(t){console.log(t)}},async getMultiplier(){try{const t=await ht.get("https://stats.runonflux.io/apps/multiplier");"success"===t.data.status&&"number"===typeof t.data.data&&t.data.data>=1&&(this.generalMultiplier=t.data.data)}catch(t){this.generalMultiplier=10,console.log(t)}},async appsDeploymentInformation(){const t=await X.Z.appsDeploymentInformation(),{data:e}=t.data;"success"===t.data.status?this.deploymentAddress=e.address:this.showToast("danger",t.data.data.message||t.data.data)},async updateManagementTab(t){switch(this.callResponse.data="",this.callResponse.status="",this.appExec.cmd="",this.appExec.env="",this.output=[],this.downloadOutput={},this.downloadOutputReturned=!1,this.backupToUpload=[],11!==t&&this.disconnectTerminal(),this.selectedIp||(await this.getInstancesForDropDown(),await this.getInstalledApplicationSpecifics(),this.getApplicationLocations().catch((()=>{this.isBusy=!1,this.showToast("danger","Error loading application locations")}))),this.getApplicationManagementAndStatus(),t){case 1:this.getInstalledApplicationSpecifics(),this.getGlobalApplicationSpecifics();break;case 2:this.getApplicationInspect();break;case 3:this.getApplicationStats();break;case 4:this.getApplicationMonitoring();break;case 5:this.getApplicationChanges();break;case 6:this.getApplicationProcesses();break;case 7:this.getApplicationLogs();break;case 10:this.applyFilter(),this.loadBackupList();break;case 11:this.appSpecification?.compose&&1!==this.appSpecification?.compose?.length||this.refreshFolder();break;case 15:this.getZelidAuthority(),this.cleanData();break;case 16:this.getZelidAuthority(),this.cleanData();break;default:break}},async appsGetListAllApps(){const t=await this.executeLocalCommand("/apps/listallapps");console.log(t),this.getAllAppsResponse.status=t.data.status,this.getAllAppsResponse.data=t.data.data},goBackToApps(){this.$emit("back")},async initSignFluxSSO(){try{const t=this.dataToSign,e=(0,q.P)();if(!e)return void this.showToast("warning","Not logged in as SSO. Login with SSO or use different signing method.");const a=e.auth.currentUser.accessToken,s={"Content-Type":"application/json",Authorization:`Bearer ${a}`},i=await ht.post("https://service.fluxcore.ai/api/signMessage",{message:t},{headers:s});if("success"!==i.data?.status&&i.data?.signature)return void this.showToast("warning","Failed to sign message, please try again.");this.signature=i.data.signature}catch(t){this.showToast("warning","Failed to sign message, please try again.")}},async initiateSignWSUpdate(){if(this.dataToSign.length>1800){const t=this.dataToSign,e={publicid:Math.floor(999999999999999*Math.random()).toString(),public:t};await ht.post("https://storage.runonflux.io/v1/public",e);const a=`zel:?action=sign&message=FLUX_URL=https://storage.runonflux.io/v1/public/${e.publicid}&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2FzelID.svg&callback=${this.callbackValue}`;window.location.href=a}else window.location.href=`zel:?action=sign&message=${this.dataToSign}&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2FzelID.svg&callback=${this.callbackValue}`;const t=this,{protocol:e,hostname:a,port:s}=window.location;let i="";i+=e,i+="//";const o=/[A-Za-z]/g;if(a.split("-")[4]){const t=a.split("-"),e=t[4].split("."),s=+e[0]+1;e[0]=s.toString(),e[2]="api",t[4]="",i+=t.join("-"),i+=e.join(".")}else if(a.match(o)){const t=a.split(".");t[0]="api",i+=t.join(".")}else{if("string"===typeof a&&this.$store.commit("flux/setUserIp",a),+s>16100){const t=+s+1;this.$store.commit("flux/setFluxPort",t)}i+=a,i+=":",i+=this.config.apiPort}let n=gt.get("backendURL")||i;n=n.replace("https://","wss://"),n=n.replace("http://","ws://");const r=this.appUpdateSpecification.owner+this.timestamp,l=`${n}/ws/sign/${r}`,c=new WebSocket(l);this.websocket=c,c.onopen=e=>{t.onOpen(e)},c.onclose=e=>{t.onClose(e)},c.onmessage=e=>{t.onMessage(e)},c.onerror=e=>{t.onError(e)}},onError(t){console.log(t)},onMessage(t){const e=ft.parse(t.data);"success"===e.status&&e.data&&(this.signature=e.data.signature),console.log(e),console.log(t)},onClose(t){console.log(t)},onOpen(t){console.log(t)},async getInstalledApplicationSpecifics(){const t=await this.executeLocalCommand(`/apps/installedapps/${this.appName}`);console.log(t),t&&("error"!==t.data.status&&t.data.data[0]?(this.callResponse.status=t.data.status,this.callResponse.data=t.data.data[0],this.appSpecification=t.data.data[0]):this.showToast("danger",t.data.data.message||t.data.data))},getExpirePosition(t){const e=this.expireOptions.findIndex((e=>e.value===t));return e||0===e?e:2},async getGlobalApplicationSpecifics(){const t=await X.Z.getAppSpecifics(this.appName);if(console.log(t),"error"===t.data.status)this.showToast("danger",t.data.data.message||t.data.data),this.callBResponse.status=t.data.status;else{this.callBResponse.status=t.data.status,this.callBResponse.data=t.data.data;const a=t.data.data;if(console.log(a),this.appUpdateSpecification=JSON.parse(JSON.stringify(a)),this.appUpdateSpecification.instances=a.instances||3,this.instancesLocked&&(this.maxInstances=this.appUpdateSpecification.instances),this.appUpdateSpecification.version<=3)this.appUpdateSpecification.version=3,this.appUpdateSpecification.ports=a.port||this.ensureString(a.ports),this.appUpdateSpecification.domains=this.ensureString(a.domains),this.appUpdateSpecification.enviromentParameters=this.ensureString(a.enviromentParameters),this.appUpdateSpecification.commands=this.ensureString(a.commands),this.appUpdateSpecification.containerPorts=a.containerPort||this.ensureString(a.containerPorts);else{if(this.appUpdateSpecification.version>3&&this.appUpdateSpecification.compose.find((t=>t.containerData.includes("g:")))&&(this.masterSlaveApp=!0),this.appUpdateSpecification.version<=7&&(this.appUpdateSpecification.version=7),this.appUpdateSpecification.contacts=this.ensureString([]),this.appUpdateSpecification.geolocation=this.ensureString([]),this.appUpdateSpecification.version>=5){this.appUpdateSpecification.contacts=this.ensureString(a.contacts||[]),this.appUpdateSpecification.geolocation=this.ensureString(a.geolocation||[]);try{this.decodeGeolocation(a.geolocation||[])}catch(e){console.log(e),this.appUpdateSpecification.geolocation=this.ensureString([])}}if(this.appUpdateSpecification.compose.forEach((t=>{t.ports=this.ensureString(t.ports),t.domains=this.ensureString(t.domains),t.environmentParameters=this.ensureString(t.environmentParameters),t.commands=this.ensureString(t.commands),t.containerPorts=this.ensureString(t.containerPorts),t.secrets=this.ensureString(t.secrets||""),t.repoauth=this.ensureString(t.repoauth||"")})),this.appUpdateSpecification.version>=6){const t=this.expireOptions.find((t=>t.value>=(a.expire||22e3)));this.appUpdateSpecification.expire=this.ensureNumber(t.value),this.expirePosition=this.getExpirePosition(this.appUpdateSpecification.expire)}this.appUpdateSpecification.version>=7&&(this.appUpdateSpecification.staticip=this.appUpdateSpecification.staticip??!1,this.appUpdateSpecification.nodes=this.appUpdateSpecification.nodes||[],this.appUpdateSpecification.nodes&&this.appUpdateSpecification.nodes.length&&(this.isPrivateApp=!0),this.appUpdateSpecification.nodes.forEach((async t=>{const e=this.enterprisePublicKeys.find((e=>e.nodeip===t));if(!e){const e=await this.fetchEnterpriseKey(t);if(e){const a={nodeip:t.ip,nodekey:e},s=this.enterprisePublicKeys.find((e=>e.nodeip===t));s||this.enterprisePublicKeys.push(a)}}})),this.enterpriseNodes||await this.getEnterpriseNodes(),this.selectedEnterpriseNodes=[],this.appUpdateSpecification.nodes.forEach((t=>{if(this.enterpriseNodes){const e=this.enterpriseNodes.find((e=>e.ip===t||t===`${e.txhash}:${e.outidx}`));e&&this.selectedEnterpriseNodes.push(e)}else this.showToast("danger","Failed to load Enterprise Node List")})))}}},async testAppInstall(t){if(this.downloading)return void this.showToast("danger","Test install/launch was already initiated");const e=this;this.output=[],this.downloadOutput={},this.downloadOutputReturned=!1,this.downloading=!0,this.showToast("warning",`Testing ${t} installation, please wait`);const a=localStorage.getItem("zelidauth"),s={headers:{zelidauth:a},onDownloadProgress(t){console.log(t.target.response),e.output=JSON.parse(`[${t.target.response.replace(/}{/g,"},{")}]`)}};let i;try{if(this.appUpdateSpecification.nodes.length>0){const e=this.appRegistrationSpecification.nodes[Math.floor(Math.random()*this.appUpdateSpecification.nodes.length)],a=e.split(":")[0],o=Number(e.split(":")[1]||16127),n=`https://${a.replace(/\./g,"-")}-${o}.node.api.runonflux.io/apps/testappinstall/${t}`;i=await ht.get(n,s)}else i=await X.Z.justAPI().get(`/apps/testappinstall/${t}`,s);if("error"===i.data.status)this.showToast("danger",i.data.data.message||i.data.data);else{console.log(i),this.output=JSON.parse(`[${i.data.replace(/}{/g,"},{")}]`),console.log(this.output);for(let t=0;t<this.output.length;t+=1)if(this.output[t]&&this.output[t].data&&this.output[t].data.message&&this.output[t].data.message.includes("Error occured")&&this.output[t-1]&&this.output[t-1].data)return void this.showToast("danger","Error on Test, check logs");"error"===this.output[this.output.length-1].status?this.showToast("danger","Error on Test, check logs"):"warning"===this.output[this.output.length-1].status?this.showToast("warning","Warning on Test, check logs"):this.showToast("success","Test passed, you can continue with app payment")}}catch(o){this.showToast("danger",o.message||o)}this.downloading=!1},async update(){const t=localStorage.getItem("zelidauth"),e={type:this.updatetype,version:this.version,appSpecification:this.dataForAppUpdate,timestamp:this.timestamp,signature:this.signature};this.progressVisable=!0,this.operationTitle="Propagating message accross Flux network...";const a=await X.Z.updateApp(t,e).catch((t=>{this.showToast("danger",t.message||t)}));console.log(a),"success"===a.data.status?(this.updateHash=a.data.data,console.log(this.updateHash),this.showToast("success",a.data.data.message||a.data.data)):this.showToast("danger",a.data.data.message||a.data.data);const s=await(0,J.Z)();s&&(this.stripeEnabled=s.stripe,this.paypalEnabled=s.paypal),this.progressVisable=!1},async checkFluxCommunication(){const t=await X.Z.checkCommunication();"success"===t.data.status?this.fluxCommunication=!0:this.showToast("danger",t.data.data.message||t.data.data)},convertExpire(){if(!this.extendSubscription){const t=this.callBResponse.data.expire||22e3,e=this.callBResponse.data.height+t-this.daemonBlockCount;if(e<5e3)throw new Error("Your application will expire in less than one week, you need to extend subscription to be able to update specifications");return 100*Math.ceil(e/100)}return this.expireOptions[this.expirePosition]?this.expireOptions[this.expirePosition].value:22e3},async checkFluxUpdateSpecificationsAndFormatMessage(){try{if(this.appRunningTill.new<this.appRunningTill.current)throw new Error("New subscription period cannot be lower than the current one.");if(!this.tosAgreed)throw new Error("Please agree to Terms of Service");this.operationTitle=" Compute update message...",this.progressVisable=!0;const t=this.appUpdateSpecification;let e=!1;if(t.version>=7&&(this.constructNodes(),this.appUpdateSpecification.compose.forEach((t=>{if((t.repoauth||t.secrets)&&(e=!0,!this.appUpdateSpecification.nodes.length))throw new Error("Private repositories and secrets can only run on Enterprise Nodes")}))),e){this.showToast("info","Encrypting specifications, this will take a while...");const t=[];for(const e of this.appUpdateSpecification.nodes){const a=this.enterprisePublicKeys.find((t=>t.nodeip===e));if(a)t.push(a.nodekey);else{const a=await this.fetchEnterpriseKey(e);if(a){const s={nodeip:e.ip,nodekey:a},i=this.enterprisePublicKeys.find((t=>t.nodeip===e.ip));i||this.enterprisePublicKeys.push(s),t.push(a)}}}for(const e of this.appUpdateSpecification.compose){if(e.environmentParameters=e.environmentParameters.replace("\\â",'\\"'),e.commands=e.commands.replace("\\â",'\\"'),e.domains=e.domains.replace("\\â",'\\"'),e.secrets&&!e.secrets.startsWith("-----BEGIN PGP MESSAGE")){e.secrets=e.secrets.replace("\\â",'\\"');const a=await this.encryptMessage(e.secrets,t);if(!a)return;e.secrets=a}if(e.repoauth&&!e.repoauth.startsWith("-----BEGIN PGP MESSAGE")){const a=await this.encryptMessage(e.repoauth,t);if(!a)return;e.repoauth=a}}}e&&this.appUpdateSpecification.compose.forEach((t=>{if(t.secrets&&!t.secrets.startsWith("-----BEGIN PGP MESSAGE"))throw new Error("Encryption failed");if(t.repoauth&&!t.repoauth.startsWith("-----BEGIN PGP MESSAGE"))throw new Error("Encryption failed")})),t.version>=5&&(t.geolocation=this.generateGeolocations()),t.version>=6&&(await this.getDaemonBlockCount(),t.expire=this.convertExpire());const a=await X.Z.appUpdateVerification(t);if("error"===a.data.status)throw new Error(a.data.data.message||a.data.data);const s=a.data.data;this.appPricePerSpecs=0,this.appPricePerSpecsUSD=0,this.applicationPriceFluxDiscount="",this.applicationPriceFluxError=!1,this.freeUpdate=!1;const i=await X.Z.appPriceUSDandFlux(s);if("error"===i.data.status)throw new Error(i.data.data.message||i.data.data);this.appPricePerSpecsUSD=+i.data.data.usd,console.log(i.data.data),!this.extendSubscription&&this.appPricePerSpecsUSD<=.5?this.freeUpdate=!0:Number.isNaN(+i.data.data.fluxDiscount)?(this.applicationPriceFluxError=!0,this.showToast("danger","Not possible to complete payment with Flux crypto currency")):(this.appPricePerSpecs=+i.data.data.flux,this.applicationPriceFluxDiscount=+i.data.data.fluxDiscount);const o=this.marketPlaceApps.find((t=>this.appUpdateSpecification.name.toLowerCase().startsWith(t.name.toLowerCase())));o&&(this.isMarketplaceApp=!0),this.timestamp=Date.now(),this.dataForAppUpdate=s,this.dataToSign=this.updatetype+this.version+JSON.stringify(s)+this.timestamp,this.progressVisable=!1}catch(t){this.progressVisable=!1,console.log(t.message),console.error(t),this.showToast("danger",t.message||t)}},async checkFluxCancelSubscriptionAndFormatMessage(){try{this.progressVisable=!0,this.operationTitle="Cancelling subscription...";const t=this.appUpdateSpecification;t.geolocation=this.generateGeolocations(),t.expire=100;const e=await X.Z.appUpdateVerification(t);if(this.progressVisable=!1,"error"===e.data.status)throw new Error(e.data.data.message||e.data.data);const a=e.data.data;this.timestamp=Date.now(),this.dataForAppUpdate=a,this.dataToSign=this.updatetype+this.version+JSON.stringify(a)+this.timestamp}catch(t){this.progressVisable=!1,console.log(t.message),console.error(t),this.showToast("danger",t.message||t)}},async appExecute(t=this.appSpecification.name){try{if(!this.appExec.cmd)return void this.showToast("danger","No commands specified");const e=this.appExec.env?this.appExec.env:"[]",{cmd:a}=this.appExec;this.commandExecuting=!0,console.log("here");const s={appname:t,cmd:yt(a),env:JSON.parse(e)},i=await this.executeLocalCommand("/apps/appexec/",s);console.log(i),"error"===i.data.status?this.showToast("danger",i.data.data.message||i.data.data):(this.commandExecuting=!1,this.callResponse.status=i.status,t.includes("_")?(this.callResponse.data&&Array.isArray(this.callResponse.data)||(this.callResponse.data=[]),this.callResponse.data.unshift({name:t,data:i.data})):this.callResponse.data=i.data)}catch(e){this.commandExecuting=!1,console.log(e),this.showToast("danger",e.message||e)}},async downloadApplicationLog(t){const e=this;this.downloaded="",this.total="",this.abortToken=Y.Z.cancelToken();const a=localStorage.getItem("zelidauth"),s={headers:{zelidauth:a},responseType:"blob",onDownloadProgress(t){e.downloaded=t.loaded,e.total=t.total,e.downloaded===e.total&&setTimeout((()=>{e.downloaded="",e.total=""}),5e3)}},i=await Y.Z.justAPI().get(`/apps/applog/${t}`,s),o=window.URL.createObjectURL(new Blob([i.data])),n=document.createElement("a");n.href=o,n.setAttribute("download","app.log"),document.body.appendChild(n),n.click()},getAppIdentifier(t=this.appName){return t&&t.startsWith("zel")||t&&t.startsWith("flux")?t:"KadenaChainWebNode"===t||"FoldingAtHomeB"===t?`zel${t}`:`flux${t}`},getAppDockerNameIdentifier(t){const e=this.getAppIdentifier(t);return e&&e.startsWith("/")?e:`/${e}`},async getApplicationInspect(){const t=[];if(this.commandExecuting=!0,this.appSpecification.version>=4)for(const e of this.appSpecification.compose){const a=await this.executeLocalCommand(`/apps/appinspect/${e.name}_${this.appSpecification.name}`);if("error"===a.data.status)this.showToast("danger",a.data.data.message||a.data.data);else{const s={name:e.name,callData:a.data.data};t.push(s)}}else{const e=await this.executeLocalCommand(`/apps/appinspect/${this.appName}`);if("error"===e.data.status)this.showToast("danger",e.data.data.message||e.data.data);else{const a={name:this.appSpecification.name,callData:e.data.data};t.push(a)}console.log(e)}this.commandExecuting=!1,this.callResponse.status="success",this.callResponse.data=t},async getApplicationStats(){const t=[];if(this.commandExecuting=!0,this.appSpecification.version>=4)for(const e of this.appSpecification.compose){const a=await this.executeLocalCommand(`/apps/appstats/${e.name}_${this.appSpecification.name}`);if("error"===a.data.status)this.showToast("danger",a.data.data.message||a.data.data);else{const s={name:e.name,callData:a.data.data};t.push(s)}}else{const e=await this.executeLocalCommand(`/apps/appstats/${this.appName}`);if("error"===e.data.status)this.showToast("danger",e.data.data.message||e.data.data);else{const a={name:this.appSpecification.name,callData:e.data.data};t.push(a)}console.log(e)}this.commandExecuting=!1,this.callResponse.status="success",this.callResponse.data=t},async getApplicationMonitoring(){const t=[];if(this.appSpecification.version>=4)for(const e of this.appSpecification.compose){const a=await this.executeLocalCommand(`/apps/appmonitor/${e.name}_${this.appSpecification.name}`);if("error"===a.data.status)this.showToast("danger",a.data.data.message||a.data.data);else{const s={name:e.name,callData:a.data.data};t.push(s)}}else{const e=await this.executeLocalCommand(`/apps/appmonitor/${this.appName}`);if("error"===e.data.status)this.showToast("danger",e.data.data.message||e.data.data);else{const a={name:this.appSpecification.name,callData:e.data.data};t.push(a)}console.log(e)}this.callResponse.status="success",this.callResponse.data=t},async getApplicationMonitoringStream(){const t=this,e=localStorage.getItem("zelidauth");if(this.appSpecification.version>=4)for(const a of this.appSpecification.compose){const s={headers:{zelidauth:e},onDownloadProgress(e){t.monitoringStream[`${a.name}_${t.appSpecification.name}`]=JSON.parse(`[${e.target.response.replace(/}{"read/g,'},{"read')}]`)}},i=await X.Z.justAPI().get(`/apps/appmonitorstream/${a.name}_${this.appSpecification.name}`,s);"error"===i.data.status&&this.showToast("danger",i.data.data.message||i.data.data)}else{const a={headers:{zelidauth:e},onDownloadProgress(e){console.log(e.target.response),t.monitoringStream[t.appName]=JSON.parse(`[${e.target.response.replace(/}{/g,"},{")}]`)}},s=await X.Z.justAPI().get(`/apps/appmonitorstream/${this.appName}`,a);"error"===s.data.status&&this.showToast("danger",s.data.data.message||s.data.data)}},async stopMonitoring(t,e=!1){let a;this.output=[],this.showToast("warning",`Stopping Monitoring of ${t}`),a=e?await this.executeLocalCommand(`/apps/stopmonitoring/${t}/true`):await this.executeLocalCommand(`/apps/stopmonitoring/${t}`),"success"===a.data.status?this.showToast("success",a.data.data.message||a.data.data):this.showToast("danger",a.data.data.message||a.data.data),console.log(a)},async startMonitoring(t){this.output=[],this.showToast("warning",`Starting Monitoring of ${t}`);const e=await this.executeLocalCommand(`/apps/startmonitoring/${t}`);"success"===e.data.status?this.showToast("success",e.data.data.message||e.data.data):this.showToast("danger",e.data.data.message||e.data.data),console.log(e)},async getApplicationChanges(){const t=[];if(this.commandExecuting=!0,this.appSpecification.version>=4)for(const e of this.appSpecification.compose){const a=await this.executeLocalCommand(`/apps/appchanges/${e.name}_${this.appSpecification.name}`);if("error"===a.data.status)this.showToast("danger",a.data.data.message||a.data.data);else{const s={name:e.name,callData:a.data.data};t.push(s)}}else{const e=await this.executeLocalCommand(`/apps/appchanges/${this.appName}`);if("error"===e.data.status)this.showToast("danger",e.data.data.message||e.data.data);else{const a={name:this.appSpecification.name,callData:e.data.data};t.push(a)}console.log(e)}this.commandExecuting=!1,this.callResponse.status="success",this.callResponse.data=t},async getApplicationProcesses(){const t=[];if(this.commandExecuting=!0,this.appSpecification.version>=4)for(const e of this.appSpecification.compose){const a=await this.executeLocalCommand(`/apps/apptop/${e.name}_${this.appSpecification.name}`);if("error"===a.data.status)this.showToast("danger",a.data.data.message||a.data.data);else{const s={name:e.name,callData:a.data.data};t.push(s)}}else{const e=await this.executeLocalCommand(`/apps/apptop/${this.appName}`);if("error"===e.data.status)this.showToast("danger",e.data.data.message||e.data.data);else{const a={name:this.appSpecification.name,callData:e.data.data};t.push(a)}console.log(e)}this.commandExecuting=!1,this.callResponse.status="success",this.callResponse.data=t},async getApplicationLogs(){const t=[];if(this.appSpecification.version>=4)for(const e of this.appSpecification.compose){const a=await this.executeLocalCommand(`/apps/applog/${e.name}_${this.appSpecification.name}/100`);if("error"===a.data.status)this.showToast("danger",a.data.data.message||a.data.data);else{const s={name:e.name,callData:a.data.data};t.push(s)}}else{const e=await this.executeLocalCommand(`/apps/applog/${this.appName}/100`);if("error"===e.data.status)this.showToast("danger",e.data.data.message||e.data.data);else{const a={name:this.appSpecification.name,callData:e.data.data};t.push(a)}console.log(e)}this.callResponse.status="success",this.callResponse.data=t},async getInstancesForDropDown(){const t=await X.Z.getAppLocation(this.appName);if(this.selectedIp=null,console.log(t),"error"===t.data.status)this.showToast("danger",t.data.data.message||t.data.data);else{if(this.masterIP=null,this.instances.data=[],this.instances.data=t.data.data,this.masterSlaveApp){const t=`https://${this.appName}.app.runonflux.io/fluxstatistics?scope=${this.appName};json;norefresh`;let e=!1,a=await ht.get(t).catch((t=>{e=!0,console.log(`UImasterSlave: Failed to reach FDM with error: ${t}`),this.masterIP="Failed to Check"}));if(!e){if(a=a.data,a&&a.length>0){console.log("FDM_Data_Received");for(const t of a){const e=t.find((t=>1===t.id&&"Server"===t.objType&&"pxname"===t.field.name&&t.value.value.toLowerCase().startsWith(`${this.appName.toLowerCase()}apprunonfluxio`)));if(e){console.log("FDM_Data_Service_Found");const e=t.find((t=>1===t.id&&"Server"===t.objType&&"svname"===t.field.name));if(e)return console.log("FDM_Data_IP_Found"),this.masterIP=e.value.value.split(":")[0],console.log(this.masterIP),void(this.selectedIp||("16127"===e.value.value.split(":")[1]?this.selectedIp=e.value.value.split(":")[0]:this.selectedIp=e.value.value));break}}}this.masterIP||(this.masterIP="Defining New Primary In Progress"),this.selectedIp||(this.selectedIp=this.instances.data[0].ip)}}else this.selectedIp||(this.selectedIp=this.instances.data[0].ip);if(console.log(this.ipAccess),this.ipAccess){const t=this.ipAddress.replace("http://",""),e=16127===this.config.apiPort?t:`${t}:${this.config.apiPort}`,a=this.instances.data.filter((t=>t.ip===e));a.length>0&&(this.selectedIp=e)}else{const t=/https:\/\/(\d+-\d+-\d+-\d+)-(\d+)/,e=this.ipAddress.match(t);if(e){const t=e[1].replace(/-/g,"."),a=16127===this.config.apiPort?t:`${t}:${this.config.apiPort}`,s=this.instances.data.filter((t=>t.ip===a));s.length>0&&(this.selectedIp=a)}}this.instances.totalRows=this.instances.data.length}},async getApplicationLocations(){this.isBusy=!0;const t=await X.Z.getAppLocation(this.appName);if(console.log(t),"error"===t.data.status)this.showToast("danger",t.data.data.message||t.data.data);else{if(this.masterSlaveApp){const t=`https://${this.appName}.app.runonflux.io/fluxstatistics?scope=${this.appName};json;norefresh`;let e=!1;this.masterIP=null;let a=await ht.get(t).catch((t=>{e=!0,console.log(`UImasterSlave: Failed to reach FDM with error: ${t}`),this.masterIP="Failed to Check"}));if(!e){if(a=a.data,a&&a.length>0){console.log("FDM_Data_Received");for(const t of a){const e=t.find((t=>1===t.id&&"Server"===t.objType&&"pxname"===t.field.name&&t.value.value.toLowerCase().startsWith(`${this.appName.toLowerCase()}apprunonfluxio`)));if(e){console.log("FDM_Data_Service_Found");const e=t.find((t=>1===t.id&&"Server"===t.objType&&"svname"===t.field.name));e?(console.log("FDM_Data_IP_Found"),this.masterIP=e.value.value.split(":")[0],console.log(this.masterIP)):this.masterIP="Defining New Primary In Progress";break}}}this.masterIP||(this.masterIP="Defining New Primary In Progress")}}this.instances.data=[],this.instances.data=t.data.data;const e=this.instances.data;setTimeout((async()=>{for(const t of e){const e=t.ip.split(":")[0],a=t.ip.split(":")[1]||16127;let s=`https://${e.replace(/\./g,"-")}-${a}.node.api.runonflux.io/flux/geolocation`;this.ipAccess&&(s=`http://${e}:${a}/flux/geolocation`);let i=!1;const o=await ht.get(s).catch((s=>{i=!0,console.log(`Error geting geolocation from ${e}:${a} : ${s}`),t.continent="N/A",t.country="N/A",t.region="N/A"}));!i&&"success"===o.data?.status&&o.data.data?.continent?(t.continent=o.data.data.continent,t.country=o.data.data.country,t.region=o.data.data.regionName):(t.continent="N/A",t.country="N/A",t.region="N/A")}}),5),this.instances.totalRows=this.instances.data.length,this.tableKey+=1,this.isBusy=!1}},async getAppOwner(){const t=await X.Z.getAppOwner(this.appName);console.log(t),"error"===t.data.status&&this.showToast("danger",t.data.data.message||t.data.data),this.selectedAppOwner=t.data.data},async stopApp(t){this.output=[],this.progressVisable=!0,this.operationTitle=`Stopping ${t}...`;const e=await this.executeLocalCommand(`/apps/appstop/${t}`);"success"===e.data.status?this.showToast("success",e.data.data.message||e.data.data):this.showToast("danger",e.data.data.message||e.data.data),this.appsGetListAllApps(),console.log(e),this.progressVisable=!1},async startApp(t){this.output=[],this.progressVisable=!0,this.operationTitle=`Starting ${t}...`,setTimeout((async()=>{const e=await this.executeLocalCommand(`/apps/appstart/${t}`);"success"===e.data.status?this.showToast("success",e.data.data.message||e.data.data):this.showToast("danger",e.data.data.message||e.data.data),this.appsGetListAllApps(),console.log(e),this.progressVisable=!1}),3e3)},async restartApp(t){this.output=[],this.progressVisable=!0,this.operationTitle=`Restarting ${t}...`;const e=await this.executeLocalCommand(`/apps/apprestart/${t}`);"success"===e.data.status?this.showToast("success",e.data.data.message||e.data.data):this.showToast("danger",e.data.data.message||e.data.data),this.appsGetListAllApps(),console.log(e),this.progressVisable=!1},async pauseApp(t){this.output=[],this.progressVisable=!0,this.operationTitle=`Pausing ${t}...`,setTimeout((async()=>{const e=await this.executeLocalCommand(`/apps/apppause/${t}`);"success"===e.data.status?this.showToast("success",e.data.data.message||e.data.data):this.showToast("danger",e.data.data.message||e.data.data),this.appsGetListAllApps(),console.log(e),this.progressVisable=!1}),2e3)},async unpauseApp(t){this.output=[],this.progressVisable=!0,this.operationTitle=`Unpausing ${t}...`,setTimeout((async()=>{const e=await this.executeLocalCommand(`/apps/appunpause/${t}`);"success"===e.data.status?this.showToast("success",e.data.data.message||e.data.data):this.showToast("danger",e.data.data.message||e.data.data),this.appsGetListAllApps(),console.log(e),this.progressVisable=!1}),2e3)},redeployAppSoft(t){this.redeployApp(t,!1)},redeployAppHard(t){this.redeployApp(t,!0)},async redeployApp(t,e){const a=this;this.output=[],this.downloadOutput={},this.downloadOutputReturned=!1,this.progressVisable=!0,this.operationTitle=`Redeploying ${t}...`;const s=localStorage.getItem("zelidauth"),i={headers:{zelidauth:s},onDownloadProgress(t){console.log(t.target.response),a.output=JSON.parse(`[${t.target.response.replace(/}{/g,"},{")}]`)}},o=await this.executeLocalCommand(`/apps/redeploy/${t}/${e}`,null,i);this.progressVisable=!1,"error"===o.data.status?this.showToast("danger",o.data.data.message||o.data.data):(this.output=JSON.parse(`[${o.data.replace(/}{/g,"},{")}]`),"error"===this.output[this.output.length-1].status?this.showToast("danger",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data):"warning"===this.output[this.output.length-1].status?this.showToast("warning",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data):this.showToast("success",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data))},async removeApp(t){const e=this;this.output=[],this.progressVisable=!0,this.operationTitle=`Removing ${t}...`;const a=localStorage.getItem("zelidauth"),s={headers:{zelidauth:a},onDownloadProgress(t){console.log(t.target.response),e.output=JSON.parse(`[${t.target.response.replace(/}{/g,"},{")}]`)}},i=await this.executeLocalCommand(`/apps/appremove/${t}`,null,s);this.progressVisable=!1,"error"===i.data.status?this.showToast("danger",i.data.data.message||i.data.data):(this.output=JSON.parse(`[${i.data.replace(/}{/g,"},{")}]`),"error"===this.output[this.output.length-1].status?this.showToast("danger",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data):"warning"===this.output[this.output.length-1].status?this.showToast("warning",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data):this.showToast("success",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data),setTimeout((()=>{e.managedApplication=""}),5e3))},getZelidAuthority(){const t=localStorage.getItem("zelidauth");this.globalZelidAuthorized=!1;const e=ft.parse(t),a=Date.now(),s=54e5,i=e.loginPhrase.substring(0,13);this.globalZelidAuthorized=!(+i<a-s)},async delay(t){return new Promise((e=>{setTimeout(e,t)}))},async executeLocalCommand(t,e,a){try{const s=localStorage.getItem("zelidauth");let i=a;if(i||(i={headers:{zelidauth:s}}),this.getZelidAuthority(),!this.globalZelidAuthorized)throw new Error("Session expired. Please log into FluxOS again");const o=this.selectedIp.split(":")[0],n=this.selectedIp.split(":")[1]||16127;let r=null,l=`https://${o.replace(/\./g,"-")}-${n}.node.api.runonflux.io${t}`;return this.ipAccess&&(l=`http://${o}:${n}${t}`),r=e?await ht.post(l,e,i):await ht.get(l,i),r}catch(s){return this.showToast("danger",s.message||s),null}},async executeCommand(t,e,a,s){try{const i=localStorage.getItem("zelidauth"),o={headers:{zelidauth:i}};if(this.getZelidAuthority(),!this.globalZelidAuthorized)throw new Error("Session expired. Please log into FluxOS again");this.showToast("warning",a);let n=`/apps/${e}/${t}`;s&&(n+=`/${s}`),n+="/true";const r=await X.Z.justAPI().get(n,o);await this.delay(500),"success"===r.data.status?this.showToast("success",r.data.data.message||r.data.data):this.showToast("danger",r.data.data.message||r.data.data)}catch(i){this.showToast("danger",i.message||i)}},async stopAppGlobally(t){this.executeCommand(t,"appstop",`Stopping ${t} globally. This will take a while...`)},async startAppGlobally(t){this.executeCommand(t,"appstart",`Starting ${t} globally. This will take a while...`)},async restartAppGlobally(t){this.executeCommand(t,"apprestart",`Restarting ${t} globally. This will take a while...`)},async pauseAppGlobally(t){this.executeCommand(t,"apppause",`Pausing ${t} globally. This will take a while...`)},async unpauseAppGlobally(t){this.executeCommand(t,"appunpause",`Unpausing ${t} globally. This will take a while...`)},async redeployAppSoftGlobally(t){this.executeCommand(t,"redeploy",`Soft redeploying ${t} globally. This will take a while...`,"false")},async redeployAppHardGlobally(t){this.executeCommand(t,"redeploy",`Hard redeploying ${t} globally. This will take a while...`,"true")},async removeAppGlobally(t){this.executeCommand(t,"appremove",`Reinstalling ${t} globally. This will take a while...`,"true")},openApp(t,e,a){if(console.log(t,e,a),a&&e){const t=e,s=a,i=`http://${t}:${s}`;this.openSite(i)}else this.showToast("danger","Unable to open App :(, App does not have a port.")},getProperPort(t=this.appUpdateSpecification){if(t.port)return t.port;if(t.ports){const e="string"===typeof t.ports?JSON.parse(t.ports):t.ports;return e[0]}for(let e=0;e<t.compose.length;e+=1)for(let a=0;a<t.compose[e].ports.length;a+=1){const s="string"===typeof t.compose[e].ports?JSON.parse(t.compose[e].ports):t.compose[e].ports;if(s[a])return s[a]}return null},openNodeFluxOS(t,e){if(console.log(t,e),e&&t){const a=t,s=e,i=`http://${a}:${s}`;this.openSite(i)}else this.showToast("danger","Unable to open App :(")},openSite(t){const e=window.open(t,"_blank");e.focus()},ensureBoolean(t){let e;return"false"!==t&&0!==t&&"0"!==t&&!1!==t||(e=!1),"true"!==t&&1!==t&&"1"!==t&&!0!==t||(e=!0),e},ensureNumber(t){return"number"===typeof t?t:Number(t)},ensureObject(t){if("object"===typeof t)return t;let e;try{e=JSON.parse(t)}catch(a){e=ft.parse(t)}return e},ensureString(t){return"string"===typeof t?t:JSON.stringify(t)},stringOutput(){let t="";return this.output.forEach((e=>{console.log(e),"success"===e.status?t+=`${e.data.message||e.data}\r\n`:"Downloading"===e.status?(this.downloadOutputReturned=!0,this.downloadOutput[e.id]={id:e.id,detail:e.progressDetail,variant:"danger"}):"Verifying Checksum"===e.status?(this.downloadOutputReturned=!0,this.downloadOutput[e.id]={id:e.id,detail:{current:1,total:1},variant:"warning"}):"Download complete"===e.status?(this.downloadOutputReturned=!0,this.downloadOutput[e.id]={id:e.id,detail:{current:1,total:1},variant:"info"}):"Extracting"===e.status?(this.downloadOutputReturned=!0,this.downloadOutput[e.id]={id:e.id,detail:e.progressDetail,variant:"primary"}):"Pull complete"===e.status?this.downloadOutput[e.id]={id:e.id,detail:{current:1,total:1},variant:"success"}:"error"===e.status?t+=`Error: ${JSON.stringify(e.data)}\r\n`:t+=`${e.status}\r\n`})),t},showToast(t,e,a="InfoIcon"){this.$toast({component:G.Z,props:{title:e,icon:a,variant:t}})},decodeAsciiResponse(t){return"string"===typeof t?t.replace(/[^\x20-\x7E\t\r\n\v\f]/g,""):""},getContinent(t){const e=this.ensureObject(t),a=e.find((t=>t.startsWith("a")));if(a){const t=this.continentsOptions.find((t=>t.value===a.slice(1)));return t?t.text:"All"}return"All"},getCountry(t){const e=this.ensureObject(t),a=e.find((t=>t.startsWith("b")));if(a){const t=this.countriesOptions.find((t=>t.value===a.slice(1)));return t?t.text:"All"}return"All"},continentChanged(){if(this.selectedCountry=null,this.selectedContinent){const t=this.continentsOptions.find((t=>t.value===this.selectedContinent));this.maxInstances=t.maxInstances,this.appUpdateSpecification.instances>this.maxInstances&&(this.appUpdateSpecification.instances=this.maxInstances),this.showToast("warning",`The node type may fluctuate based upon system requirements for your application. For better results in ${t.text}, please consider specifications more suited to ${t.nodeTier} hardware.`)}else this.maxInstances=this.appUpdateSpecificationv5template.maxInstances,this.showToast("info","No geolocation set you can define up to maximum of 100 instances and up to the maximum hardware specs available on Flux network to your app.");this.instancesLocked&&(this.maxInstances=this.appUpdateSpecification.instances)},countryChanged(){if(this.selectedCountry){const t=this.countriesOptions.find((t=>t.value===this.selectedCountry));this.maxInstances=t.maxInstances,this.appUpdateSpecification.instances>this.maxInstances&&(this.appUpdateSpecification.instances=this.maxInstances),this.showToast("warning",`The node type may fluctuate based upon system requirements for your application. For better results in ${t.text}, please consider specifications more suited to ${t.nodeTier} hardware.`)}else{const t=this.continentsOptions.find((t=>t.value===this.selectedContinent));this.maxInstances=t.maxInstances,this.appUpdateSpecification.instances>this.maxInstances&&(this.appUpdateSpecification.instances=this.maxInstances),this.showToast("warning",`The node type may fluctuate based upon system requirements for your application. For better results in ${t.text}, please consider specifications more suited to ${t.nodeTier} hardware.`)}this.instancesLocked&&(this.maxInstances=this.appUpdateSpecification.instances)},generateStatsTableItems(t,e){if(console.log(t),!t||!Array.isArray(t))return[];const a=[];return t.forEach((t=>{const s=t.data.cpu_stats.online_cpus/e.cpu,i=`${((t.data.cpu_stats.cpu_usage.total_usage-t.data.precpu_stats.cpu_usage.total_usage)/(t.data.cpu_stats.system_cpu_usage-t.data.precpu_stats.system_cpu_usage)*100*s).toFixed(2)}%`,o=`${(t.data.memory_stats.usage/1e9).toFixed(2)} / ${(e.ram/1e3).toFixed(2)} GB, ${(t.data.memory_stats.usage/(1e6*e.ram)*100).toFixed(2)}%`;let n="0 / 0 GB";t.data.networks.eth0&&(n=`${(t.data.networks.eth0.rx_bytes/1e9).toFixed(2)} / ${(t.data.networks.eth0.tx_bytes/1e9).toFixed(2)} GB`);let r="0.00 / 0.00 GB";Array.isArray(t.data.blkio_stats.io_service_bytes_recursive)&&0!==t.data.blkio_stats.io_service_bytes_recursive.length&&(r=`${(t.data.blkio_stats.io_service_bytes_recursive.find((t=>"read"===t.op.toLowerCase())).value/1e9).toFixed(2)} / ${(t.data.blkio_stats.io_service_bytes_recursive.find((t=>"write"===t.op.toLowerCase())).value/1e9).toFixed(2)} GB`);let l="0 / 0 GB";t.data.disk_stats&&(l=`${(t.data.disk_stats.used/1e9).toFixed(2)} / ${e.hdd.toFixed(2)} GB, ${(t.data.disk_stats.used/(1e9*e.hdd)*100).toFixed(2)}%`);const c=t.data.pids_stats.current,p={timestamp:new Date(t.timestamp).toLocaleString("en-GB",vt.shortDate),cpu:i,memory:o,net:n,block:r,disk:l,pids:c};a.push(p)})),a},getCpuPercentage(t){console.log(t);const e=[];return t.forEach((t=>{const a=`${(t.data.cpu_stats.cpu_usage.total_usage/t.data.cpu_stats.cpu_usage.system_cpu_usage*100).toFixed(2)}%`;e.push(a)})),e},getTimestamps(t){const e=[];return t.forEach((t=>{e.push(t.timestamp)})),e},chartOptions(t){const e={chart:{height:350,type:"area"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{type:"timestamp",categories:t},tooltip:{x:{format:"dd/MM/yy HH:mm"}}};return e},decodeGeolocation(t){let e=!1;t.forEach((t=>{t.startsWith("b")&&(e=!0),t.startsWith("a")&&t.startsWith("ac")&&t.startsWith("a!c")&&(e=!0)}));let a=t;if(e){const e=t.find((t=>t.startsWith("a")&&t.startsWith("ac")&&t.startsWith("a!c"))),s=t.find((t=>t.startsWith("b")));let i=`ac${e.slice(1)}`;s&&(i+=`_${s.slice(1)}`),a=[i]}const s=a.filter((t=>t.startsWith("ac"))),i=a.filter((t=>t.startsWith("a!c")));for(let o=1;o<s.length+1;o+=1){this.numberOfGeolocations=o;const t=s[o-1].slice(2),e=t.split("_"),a=e[0],i=e[1],n=e[2];this.allowedGeolocations[`selectedContinent${o}`]=a,this.allowedGeolocations[`selectedCountry${o}`]=i||"ALL",this.allowedGeolocations[`selectedRegion${o}`]=n||"ALL"}for(let o=1;o<i.length+1;o+=1){this.numberOfNegativeGeolocations=o;const t=i[o-1].slice(3),e=t.split("_"),a=e[0],s=e[1],n=e[2];this.forbiddenGeolocations[`selectedContinent${o}`]=a,this.forbiddenGeolocations[`selectedCountry${o}`]=s||"NONE",this.forbiddenGeolocations[`selectedRegion${o}`]=n||"NONE"}},async getGeolocationData(){let t=[];try{wt.continents.forEach((e=>{t.push({value:e.code,instances:e.available?100:0})})),wt.countries.forEach((e=>{t.push({value:`${e.continent}_${e.code}`,instances:e.available?100:0})}));const e=await ht.get("https://stats.runonflux.io/fluxinfo?projection=geo");if("success"===e.data.status){const a=e.data.data;a.length>5e3&&(t=[],a.forEach((e=>{if(e.geolocation&&e.geolocation.continentCode&&e.geolocation.regionName&&e.geolocation.countryCode){const a=e.geolocation.continentCode,s=`${a}_${e.geolocation.countryCode}`,i=`${s}_${e.geolocation.regionName}`,o=t.find((t=>t.value===a));o?o.instances+=1:t.push({value:a,instances:1});const n=t.find((t=>t.value===s));n?n.instances+=1:t.push({value:s,instances:1});const r=t.find((t=>t.value===i));r?r.instances+=1:t.push({value:i,instances:1})}})))}else this.showToast("info","Failed to get geolocation data from FluxStats, Using stored locations")}catch(e){console.log(e),this.showToast("info","Failed to get geolocation data from FluxStats, Using stored locations")}this.possibleLocations=t},continentsOptions(t){const e=[{value:t?"NONE":"ALL",text:t?"NONE":"ALL"}];return this.possibleLocations.filter((e=>e.instances>(t?-1:3))).forEach((t=>{if(!t.value.includes("_")){const a=wt.continents.find((e=>e.code===t.value));e.push({value:t.value,text:a?a.name:t.value})}})),e},countriesOptions(t,e){const a=[{value:"ALL",text:"ALL"}];return this.possibleLocations.filter((t=>t.instances>(e?-1:3))).forEach((e=>{if(!e.value.split("_")[2]&&e.value.startsWith(`${t}_`)){const t=wt.countries.find((t=>t.code===e.value.split("_")[1]));a.push({value:e.value.split("_")[1],text:t?t.name:e.value.split("_")[1]})}})),a},regionsOptions(t,e,a){const s=[{value:"ALL",text:"ALL"}];return this.possibleLocations.filter((t=>t.instances>(a?-1:3))).forEach((a=>{a.value.startsWith(`${t}_${e}_`)&&s.push({value:a.value.split("_")[2],text:a.value.split("_")[2]})})),s},generateGeolocations(){const t=[];for(let e=1;e<this.numberOfGeolocations+1;e+=1){const a=this.allowedGeolocations[`selectedContinent${e}`],s=this.allowedGeolocations[`selectedCountry${e}`],i=this.allowedGeolocations[`selectedRegion${e}`];if(a&&"ALL"!==a){let e=`ac${a}`;s&&"ALL"!==s&&(e+=`_${s}`,i&&"ALL"!==i&&(e+=`_${i}`)),t.push(e)}}for(let e=1;e<this.numberOfNegativeGeolocations+1;e+=1){const a=this.forbiddenGeolocations[`selectedContinent${e}`],s=this.forbiddenGeolocations[`selectedCountry${e}`],i=this.forbiddenGeolocations[`selectedRegion${e}`];if(a&&"NONE"!==a){let e=`a!c${a}`;s&&"ALL"!==s&&(e+=`_${s}`,i&&"ALL"!==i&&(e+=`_${i}`)),t.push(e)}}return t},getGeolocation(t){if(t.startsWith("a")&&!t.startsWith("ac")&&!t.startsWith("a!c")){const e=t.slice(1),a=wt.continents.find((t=>t.code===e))||{name:"ALL"};return`Continent: ${a.name||"Unkown"}`}if(t.startsWith("b")){const e=t.slice(1),a=wt.countries.find((t=>t.code===e))||{name:"ALL"};return`Country: ${a.name||"Unkown"}`}if(t.startsWith("ac")){const e=t.slice(2),a=e.split("_"),s=a[0],i=a[1],o=a[2],n=wt.continents.find((t=>t.code===s))||{name:"ALL"},r=wt.countries.find((t=>t.code===i))||{name:"ALL"};let l=`Allowed location: Continent: ${n.name}`;return i&&(l+=`, Country: ${r.name}`),o&&(l+=`, Region: ${o}`),l}if(t.startsWith("a!c")){const e=t.slice(3),a=e.split("_"),s=a[0],i=a[1],o=a[2],n=wt.continents.find((t=>t.code===s))||{name:"ALL"},r=wt.countries.find((t=>t.code===i))||{name:"ALL"};let l=`Forbidden location: Continent: ${n.name}`;return i&&(l+=`, Country: ${r.name}`),o&&(l+=`, Region: ${o}`),l}return"All locations allowed"},adjustMaxInstancesPossible(){const t=this.generateGeolocations(),e=t.filter((t=>t.startsWith("ac")));console.log(t);let a=0;e.forEach((t=>{const e=this.possibleLocations.find((e=>e.value===t.slice(2)));e&&(a+=e.instances),"ALL"===t&&(a+=100)})),e.length||(a+=100),console.log(a),a=a>3?a:3;const s=a>100?100:a;this.maxInstances=s,this.instancesLocked&&(this.maxInstances=this.appUpdateSpecification.instances)},constructAutomaticDomains(t,e,a=0){const s=JSON.parse(JSON.stringify(t)),i=e.toLowerCase();if(0===a){const t=[`${i}.app.runonflux.io`];for(let e=0;e<s.length;e+=1){const a=`${i}_${s[e]}.app.runonflux.io`;t.push(a)}return t}const o=[];for(let n=0;n<s.length;n+=1){const t=`${i}_${s[n]}.app.runonflux.io`;o.push(t)}return o},async uploadEnvToFluxStorage(t){try{const e=Math.floor(999999999999999*Math.random()).toString();if(this.appUpdateSpecification.compose[t].environmentParameters.toString().includes("F_S_ENV="))return void this.showToast("warning","Environment parameters are already in Flux Storage");const a={envid:e,env:JSON.parse(this.appUpdateSpecification.compose[t].environmentParameters)},s=await ht.post("https://storage.runonflux.io/v1/env",a);"error"===s.data.status?this.showToast("danger",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data):(this.showToast("success","Successful upload of Environment to Flux Storage"),this.appUpdateSpecification.compose[t].environmentParameters=`["F_S_ENV=https://storage.runonflux.io/v1/env/${e}"]`)}catch(e){this.showToast("danger",e.message||e)}},async uploadCmdToFluxStorage(t){try{const e=Math.floor(999999999999999*Math.random()).toString();if(this.appUpdateSpecification.compose[t].commands.toString().includes("F_S_CMD="))return void this.showToast("warning","Commands are already in Flux Storage");const a={cmdid:e,cmd:JSON.parse(this.appUpdateSpecification.compose[t].commands)},s=await ht.post("https://storage.runonflux.io/v1/cmd",a);"error"===s.data.status?this.showToast("danger",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data):(this.showToast("success","Successful upload of Commands to Flux Storage"),this.appUpdateSpecification.compose[t].commands=`["F_S_CMD=https://storage.runonflux.io/v1/cmd/${e}"]`)}catch(e){this.showToast("danger",e.message||e)}},async uploadContactsToFluxStorage(){try{const t=Math.floor(999999999999999*Math.random()).toString();if(this.appUpdateSpecification.contacts.toString().includes("F_S_CONTACTS="))return void this.showToast("warning","Contacts are already in Flux Storage");const e={contactsid:t,contacts:JSON.parse(this.appUpdateSpecification.contacts)},a=await ht.post("https://storage.runonflux.io/v1/contacts",e);"error"===a.data.status?this.showToast("danger",this.output[this.output.length-1].data.message||this.output[this.output.length-1].data):(this.showToast("success","Successful upload of Contacts to Flux Storage"),this.appUpdateSpecification.contacts=`["F_S_CONTACTS=https://storage.runonflux.io/v1/contacts/${t}"]`)}catch(t){this.showToast("danger",t.message||t)}},removeFluxNode(t){const e=this.selectedEnterpriseNodes.findIndex((e=>e.ip===t));e>-1&&this.selectedEnterpriseNodes.splice(e,1)},async addFluxNode(t){try{const e=this.selectedEnterpriseNodes.find((e=>e.ip===t));if(console.log(t),!e){const e=this.enterpriseNodes.find((e=>e.ip===t));this.selectedEnterpriseNodes.push(e),console.log(this.selectedEnterpriseNodes);const a=this.enterprisePublicKeys.find((e=>e.nodeip===t));if(!a){const e=await this.fetchEnterpriseKey(t);if(e){const a={nodeip:t,nodekey:e},s=this.enterprisePublicKeys.find((e=>e.nodeip===t));s||this.enterprisePublicKeys.push(a)}}}}catch(e){console.log(e)}},async autoSelectNodes(){const{instances:t}=this.appUpdateSpecification,e=+t+3,a=+t+Math.ceil(Math.max(7,.15*+t)),s=this.enterpriseNodes.filter((t=>!this.selectedEnterpriseNodes.includes(t))),i=[],o=s.filter((t=>t.enterprisePoints>0&&t.score>1e3));for(let n=0;n<o.length;n+=1){const t=this.selectedEnterpriseNodes.filter((t=>t.pubkey===o[n].pubkey)).length,s=i.filter((t=>t.pubkey===o[n].pubkey)).length;if(t+s<e&&i.push(o[n]),i.length+this.selectedEnterpriseNodes.length>=a)break}if(i.length<a)throw new Error("Not enough kyc nodes available to run your enterprise app.");i.forEach((async t=>{const e=this.selectedEnterpriseNodes.find((e=>e.ip===t.ip));if(!e){this.selectedEnterpriseNodes.push(t);const e=this.enterprisePublicKeys.find((e=>e.nodeip===t.ip));if(!e){const e=await this.fetchEnterpriseKey(t.ip);if(e){const a={nodeip:t.ip,nodekey:e},s=this.enterprisePublicKeys.find((e=>e.nodeip===t.ip));s||this.enterprisePublicKeys.push(a)}}}}))},constructNodes(){if(this.appUpdateSpecification.nodes=[],this.selectedEnterpriseNodes.forEach((t=>{this.appUpdateSpecification.nodes.push(t.ip)})),this.appUpdateSpecification.nodes.length>this.maximumEnterpriseNodes)throw new Error("Maximum of 120 Enterprise Nodes allowed")},async getEnterpriseNodes(){const t=sessionStorage.getItem("flux_enterprise_nodes");t&&(this.enterpriseNodes=JSON.parse(t),this.entNodesSelectTable.totalRows=this.enterpriseNodes.length);try{const t=await X.Z.getEnterpriseNodes();"error"===t.data.status?this.showToast("danger",t.data.data.message||t.data.data):(this.enterpriseNodes=t.data.data,this.entNodesSelectTable.totalRows=this.enterpriseNodes.length,sessionStorage.setItem("flux_enterprise_nodes",JSON.stringify(this.enterpriseNodes)))}catch(e){console.log(e)}},async getDaemonBlockCount(){const t=await Y.Z.getBlockCount();"success"===t.data.status&&(this.daemonBlockCount=t.data.data)},async fetchEnterpriseKey(t){try{const e=t.split(":")[0],a=Number(t.split(":")[1]||16127);let s=`https://${e.replace(/\./g,"-")}-${a}.node.api.runonflux.io/flux/pgp`;this.ipAccess&&(s=`http://${e}:${a}/flux/pgp`);const i=await ht.get(s);if("error"!==i.data.status){const t=i.data.data;return t}return this.showToast("danger",i.data.data.message||i.data.data),null}catch(e){return console.log(e),null}},async encryptMessage(t,e){try{const a=await Promise.all(e.map((t=>bt.readKey({armoredKey:t}))));console.log(e),console.log(t);const s=await bt.createMessage({text:t}),i=await bt.encrypt({message:s,encryptionKeys:a});return i}catch(a){return this.showToast("danger","Data encryption failed"),null}},async onSessionConnect(t){console.log(t);const e=await this.signClient.request({topic:t.topic,chainId:"eip155:1",request:{method:"personal_sign",params:[this.dataToSign,t.namespaces.eip155.accounts[0].split(":")[2]]}});console.log(e),this.signature=e},async initWalletConnect(){try{const t=await Q.ZP.init(pt);this.signClient=t;const e=t.session.getAll().length-1,a=t.session.getAll()[e];if(!a)throw new Error("WalletConnect session expired. Please log into FluxOS again");this.onSessionConnect(a)}catch(t){console.error(t),this.showToast("danger",t.message)}},async siwe(t,e){try{const a=`0x${lt.from(t,"utf8").toString("hex")}`,s=await mt.request({method:"personal_sign",params:[a,e]});console.log(s),this.signature=s}catch(a){console.error(a),this.showToast("danger",a.message)}},async initMetamask(){try{if(!mt)return void this.showToast("danger","Metamask not detected");let t;if(mt&&!mt.selectedAddress){const e=await mt.request({method:"eth_requestAccounts",params:[]});console.log(e),t=e[0]}else t=mt.selectedAddress;this.siwe(this.dataToSign,t)}catch(t){this.showToast("danger",t.message)}},async initSSP(){try{if(!window.ssp)return void this.showToast("danger","SSP Wallet not installed");const t=await window.ssp.request("sspwid_sign_message",{message:this.dataToSign});if("ERROR"===t.status)throw new Error(t.data||t.result);this.signature=t.signature}catch(t){this.showToast("danger",t.message)}},async initSSPpay(){try{if(!window.ssp)return void this.showToast("danger","SSP Wallet not installed");const t={message:this.updateHash,amount:(+this.appPricePerSpecs||0).toString(),address:this.deploymentAddress,chain:"flux"},e=await window.ssp.request("pay",t);if("ERROR"===e.status)throw new Error(e.data||e.result);this.showToast("success",`${e.data}: ${e.txid}`)}catch(t){this.showToast("danger",t.message)}},async initStripePay(t,e,a,s){try{this.fiatCheckoutURL="",this.checkoutLoading=!0;const i=localStorage.getItem("zelidauth"),o=ft.parse(i),n={zelid:o.zelid,signature:o.signature,loginPhrase:o.loginPhrase,details:{name:e,description:s,hash:t,price:a,productName:e,success_url:"https://home.runonflux.io/successcheckout",cancel_url:"https://home.runonflux.io",kpi:{origin:"FluxOS",marketplace:this.isMarketplaceApp,registration:!1}}},r=await ht.post(`${J.M}/api/v1/stripe/checkout/create`,n);if("error"===r.data.status)return this.showToast("error","Failed to create stripe checkout"),void(this.checkoutLoading=!1);this.fiatCheckoutURL=r.data.data,this.checkoutLoading=!1,this.openSite(r.data.data)}catch(i){this.showToast("error","Failed to create stripe checkout"),this.checkoutLoading=!1}},async initPaypalPay(t,e,a,s){try{this.fiatCheckoutURL="",this.checkoutLoading=!0;let i=null,o=await ht.get("https://api.ipify.org?format=json").catch((()=>{console.log("Error geting clientIp from api.ipify.org from")}));o&&o.data&&o.data.ip?i=o.data.ip:(o=await ht.get("https://ipinfo.io").catch((()=>{console.log("Error geting clientIp from ipinfo.io from")})),o&&o.data&&o.data.ip&&(i=o.data.ip));const n=localStorage.getItem("zelidauth"),r=ft.parse(n),l={zelid:r.zelid,signature:r.signature,loginPhrase:r.loginPhrase,details:{clientIP:i,name:e,description:s,hash:t,price:a,productName:e,return_url:"home.runonflux.io/successcheckout",cancel_url:"home.runonflux.io",kpi:{origin:"FluxOS",marketplace:this.isMarketplaceApp,registration:!1}}},c=await ht.post(`${J.M}/api/v1/paypal/checkout/create`,l);if("error"===c.data.status)return this.showToast("error","Failed to create PayPal checkout"),void(this.checkoutLoading=!1);this.fiatCheckoutURL=c.data.data,this.checkoutLoading=!1,this.openSite(c.data.data)}catch(i){this.showToast("error","Failed to create PayPal checkout"),this.checkoutLoading=!1}},async getApplicationManagementAndStatus(){if(this.selectedIp){await this.appsGetListAllApps(),console.log(this.getAllAppsResponse);const t=this.getAllAppsResponse.data.find((t=>t.Names[0]===this.getAppDockerNameIdentifier()))||{},e={name:this.appName,state:t.State||"Unknown state",status:t.Status||"Unknown status"};this.appInfoObject.push(e),e.state=e.state.charAt(0).toUpperCase()+e.state.slice(1),e.status=e.status.charAt(0).toUpperCase()+e.status.slice(1);let a=`${e.name} - ${e.state} - ${e.status}`;if(this.appSpecification&&this.appSpecification.version>=4){a=`${this.appSpecification.name}:`;for(const t of this.appSpecification.compose){const e=this.getAllAppsResponse.data.find((e=>e.Names[0]===this.getAppDockerNameIdentifier(`${t.name}_${this.appSpecification.name}`)))||{},s={name:t.name,state:e.State||"Unknown state",status:e.Status||"Unknown status"};this.appInfoObject.push(s),s.state=s.state.charAt(0).toUpperCase()+s.state.slice(1),s.status=s.status.charAt(0).toUpperCase()+s.status.slice(1);const i=` ${s.name} - ${s.state} - ${s.status},`;a+=i}a=a.substring(0,a.length-1),a+=` - ${this.selectedIp}`}this.applicationManagementAndStatus=a}},async getFluxVersion(){const t=await this.executeLocalCommand("/flux/version");this.selectedFluxVersion="success"===t?.data?.status?t.data.data:"5.13.0"},selectedIpChanged(){this.getApplicationManagementAndStatus(),this.getInstalledApplicationSpecifics()},cleanData(){this.dataToSign="",this.timestamp="",this.signature="",this.updateHash="",this.output=[]}}},xt=St;var Ct=a(1001),_t=(0,Ct.Z)(xt,s,i,!1,null,null,null);const kt=_t.exports},2272:(t,e,a)=>{"use strict";a.d(e,{Z:()=>f});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flux-share-upload",style:t.cssProps},[e("b-row",[e("div",{staticClass:"flux-share-upload-drop text-center",attrs:{id:"dropTarget"},on:{drop:function(e){return e.preventDefault(),t.addFile.apply(null,arguments)},dragover:function(t){t.preventDefault()},click:t.selectFiles}},[e("v-icon",{attrs:{name:"cloud-upload-alt"}}),e("p",[t._v("Drop files here or "),e("em",[t._v("click to upload")])]),e("p",{staticClass:"upload-footer"},[t._v(" (File size is limited to 5GB) ")])],1),e("input",{ref:"fileselector",staticClass:"flux-share-upload-input",attrs:{id:"file-selector",type:"file",multiple:""},on:{change:t.handleFiles}}),e("b-col",{staticClass:"upload-column"},t._l(t.files,(function(a){return e("div",{key:a.file.name,staticClass:"upload-item",staticStyle:{"margin-bottom":"3px"}},[t._v(" "+t._s(a.file.name)+" ("+t._s(t.addAndConvertFileSizes(a.file.size))+") "),e("span",{staticClass:"delete text-white",attrs:{"aria-hidden":"true"}},[a.uploading?t._e():e("v-icon",{style:{color:t.determineColor(a.file.name)},attrs:{name:"trash-alt",disabled:a.uploading},on:{mouseenter:function(e){return t.handleHover(a.file.name,!0)},mouseleave:function(e){return t.handleHover(a.file.name,!1)},focusin:function(e){return t.handleHover(a.file.name,!0)},focusout:function(e){return t.handleHover(a.file.name,!1)},click:function(e){return t.removeFile(a)}}})],1),e("b-progress",{class:a.uploading||a.uploaded?"":"hidden",attrs:{value:a.progress,max:"100",striped:"",height:"5px"}})],1)})),0)],1),e("b-row",[e("b-col",{staticClass:"text-center",attrs:{xs:"12"}},[e("b-button",{staticClass:"delete mt-1",attrs:{variant:"primary",disabled:!t.filesToUpload,size:"sm","aria-label":"Close"},on:{click:function(e){return t.startUpload()}}},[t._v(" Upload Files ")])],1)],1)],1)},i=[],o=(a(70560),a(26253)),n=a(50725),r=a(45752),l=a(15193),c=a(68934),p=a(34547);const d={components:{BRow:o.T,BCol:n.l,BProgress:r.D,BButton:l.T,ToastificationContent:p.Z},props:{uploadFolder:{type:String,required:!0},headers:{type:Object,required:!0}},data(){return{isHovered:!1,hoverStates:{},files:[],primaryColor:c.j.primary,secondaryColor:c.j.secondary}},computed:{cssProps(){return{"--primary-color":this.primaryColor,"--secondary-color":this.secondaryColor}},filesToUpload(){return this.files.length>0&&this.files.some((t=>!t.uploading&&!t.uploaded&&0===t.progress))}},methods:{addAndConvertFileSizes(t,e="auto",a=2){const s={B:1,KB:1024,MB:1048576,GB:1073741824},i=(t,e)=>t/s[e.toUpperCase()],o=(t,e)=>{const s="B"===e?t.toFixed(0):t.toFixed(a);return`${s} ${e}`};let n;if(Array.isArray(t)&&t.length>0)n=+t.reduce(((t,e)=>t+(e.file_size||0)),0);else{if("number"!==typeof+t)return console.error("Invalid sizes parameter"),"N/A";n=+t}if(isNaN(n))return console.error("Total size is not a valid number"),"N/A";if("auto"===e){let t,e=n;return Object.keys(s).forEach((a=>{const s=i(n,a);s>=1&&(void 0===e||s<e)&&(e=s,t=a)})),t=t||"B",o(e,t)}{const t=i(n,e);return o(t,e)}},handleHover(t,e){this.$set(this.hoverStates,t,e)},determineColor(t){return this.hoverStates[t]?"red":"white"},selectFiles(){console.log("select files"),this.$refs.fileselector.click()},handleFiles(t){const{files:e}=t.target;e&&(console.log(e),this.addFiles([...e]))},addFile(t){const e=t.dataTransfer.files;e&&this.addFiles([...e])},addFiles(t){t.forEach((t=>{const e=this.files.some((e=>e.file.name===t.name));console.log(e),e?this.showToast("warning",`'${t.name}' is already in the upload queue`):this.files.push({file:t,uploading:!1,uploaded:!1,progress:0})}))},removeFile(t){this.files=this.files.filter((e=>e.file.name!==t.file.name))},startUpload(){console.log(this.uploadFolder),console.log(this.files),this.files.forEach((t=>{console.log(t),t.uploaded||t.uploading||this.upload(t)}))},upload(t){const e=this;if("undefined"===typeof XMLHttpRequest)return;const a=new XMLHttpRequest,s=this.uploadFolder;a.upload&&(a.upload.onprogress=function(e){console.log(e),e.total>0&&(e.percent=e.loaded/e.total*100),t.progress=e.percent});const i=new FormData;i.append(t.file.name,t.file),t.uploading=!0,a.onerror=function(a){console.log(a),e.showToast("danger",`An error occurred while uploading '${t.file.name}' - ${a}`),e.removeFile(t)},a.onload=function(){if(a.status<200||a.status>=300)return console.log("error"),console.log(a.status),e.showToast("danger",`An error occurred while uploading '${t.file.name}' - Status code: ${a.status}`),void e.removeFile(t);t.uploaded=!0,t.uploading=!1,e.$emit("complete"),e.removeFile(t),e.showToast("success",`'${t.file.name}' has been uploaded`)},a.open("post",s,!0);const o=this.headers||{},n=Object.keys(o);for(let r=0;r<n.length;r+=1){const t=n[r];Object.prototype.hasOwnProperty.call(o,t)&&null!==o[t]&&a.setRequestHeader(t,o[t])}a.send(i)},showToast(t,e,a="InfoIcon"){this.$toast({component:p.Z,props:{title:e,icon:a,variant:t}})}}},u=d;var m=a(1001),h=(0,m.Z)(u,s,i,!1,null,"8e3a5248",null);const f=h.exports},56761:t=>{(function(){"use strict";t.exports=function(t,e,a){for(var s=e||/\s/g,i=!1,o=!1,n=[],r=[],l=t.split(""),c=0;c<l.length;++c){var p=l[c],d=p.match(s);"'"!==p||o?'"'!==p||i?i||o||!d?n.push(p):n.length>0?(r.push(n.join("")),n=[]):e&&r.push(p):(!0===a&&n.push(p),o=!o):(!0===a&&n.push(p),i=!i)}return n.length>0?r.push(n.join("")):e&&r.push(""),r}})()},12617:t=>{!function(e,a){t.exports=a()}(self,(()=>(()=>{"use strict";var t={};return(()=>{var e=t;Object.defineProperty(e,"__esModule",{value:!0}),e.FitAddon=void 0,e.FitAddon=class{activate(t){this._terminal=t}dispose(){}fit(){const t=this.proposeDimensions();if(!t||!this._terminal||isNaN(t.cols)||isNaN(t.rows))return;const e=this._terminal._core;this._terminal.rows===t.rows&&this._terminal.cols===t.cols||(e._renderService.clear(),this._terminal.resize(t.cols,t.rows))}proposeDimensions(){if(!this._terminal)return;if(!this._terminal.element||!this._terminal.element.parentElement)return;const t=this._terminal._core,e=t._renderService.dimensions;if(0===e.css.cell.width||0===e.css.cell.height)return;const a=0===this._terminal.options.scrollback?0:t.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(s.getPropertyValue("height")),o=Math.max(0,parseInt(s.getPropertyValue("width"))),n=window.getComputedStyle(this._terminal.element),r=i-(parseInt(n.getPropertyValue("padding-top"))+parseInt(n.getPropertyValue("padding-bottom"))),l=o-(parseInt(n.getPropertyValue("padding-right"))+parseInt(n.getPropertyValue("padding-left")))-a;return{cols:Math.max(2,Math.floor(l/e.css.cell.width)),rows:Math.max(1,Math.floor(r/e.css.cell.height))}}}})(),t})()))},12286:function(t){!function(e,a){t.exports=a()}(0,(()=>(()=>{"use strict";var t={930:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContrastCache=void 0;const s=a(485);e.ColorContrastCache=class{constructor(){this._color=new s.TwoKeyMap,this._css=new s.TwoKeyMap}setCss(t,e,a){this._css.set(t,e,a)}getCss(t,e){return this._css.get(t,e)}setColor(t,e,a){this._color.set(t,e,a)}getColor(t,e){return this._color.get(t,e)}clear(){this._color.clear(),this._css.clear()}}},997:function(t,e,a){var s=this&&this.__decorate||function(t,e,a,s){var i,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,a):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,a,s);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(n=(o<3?i(n):o>3?i(e,a,n):i(e,a))||n);return o>3&&n&&Object.defineProperty(e,a,n),n},i=this&&this.__param||function(t,e){return function(a,s){e(a,s,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=e.DEFAULT_ANSI_COLORS=void 0;const o=a(930),n=a(160),r=a(345),l=a(859),c=a(97),p=n.css.toColor("#ffffff"),d=n.css.toColor("#000000"),u=n.css.toColor("#ffffff"),m=n.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const t=[n.css.toColor("#2e3436"),n.css.toColor("#cc0000"),n.css.toColor("#4e9a06"),n.css.toColor("#c4a000"),n.css.toColor("#3465a4"),n.css.toColor("#75507b"),n.css.toColor("#06989a"),n.css.toColor("#d3d7cf"),n.css.toColor("#555753"),n.css.toColor("#ef2929"),n.css.toColor("#8ae234"),n.css.toColor("#fce94f"),n.css.toColor("#729fcf"),n.css.toColor("#ad7fa8"),n.css.toColor("#34e2e2"),n.css.toColor("#eeeeec")],e=[0,95,135,175,215,255];for(let a=0;a<216;a++){const s=e[a/36%6|0],i=e[a/6%6|0],o=e[a%6];t.push({css:n.channels.toCss(s,i,o),rgba:n.channels.toRgba(s,i,o)})}for(let a=0;a<24;a++){const e=8+10*a;t.push({css:n.channels.toCss(e,e,e),rgba:n.channels.toRgba(e,e,e)})}return t})());let f=e.ThemeService=class extends l.Disposable{get colors(){return this._colors}constructor(t){super(),this._optionsService=t,this._contrastCache=new o.ColorContrastCache,this._halfContrastCache=new o.ColorContrastCache,this._onChangeColors=this.register(new r.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:p,background:d,cursor:u,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:h,selectionBackgroundOpaque:n.color.blend(d,h),selectionInactiveBackgroundTransparent:h,selectionInactiveBackgroundOpaque:n.color.blend(d,h),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(t={}){const a=this._colors;if(a.foreground=g(t.foreground,p),a.background=g(t.background,d),a.cursor=g(t.cursor,u),a.cursorAccent=g(t.cursorAccent,m),a.selectionBackgroundTransparent=g(t.selectionBackground,h),a.selectionBackgroundOpaque=n.color.blend(a.background,a.selectionBackgroundTransparent),a.selectionInactiveBackgroundTransparent=g(t.selectionInactiveBackground,a.selectionBackgroundTransparent),a.selectionInactiveBackgroundOpaque=n.color.blend(a.background,a.selectionInactiveBackgroundTransparent),a.selectionForeground=t.selectionForeground?g(t.selectionForeground,n.NULL_COLOR):void 0,a.selectionForeground===n.NULL_COLOR&&(a.selectionForeground=void 0),n.color.isOpaque(a.selectionBackgroundTransparent)){const t=.3;a.selectionBackgroundTransparent=n.color.opacity(a.selectionBackgroundTransparent,t)}if(n.color.isOpaque(a.selectionInactiveBackgroundTransparent)){const t=.3;a.selectionInactiveBackgroundTransparent=n.color.opacity(a.selectionInactiveBackgroundTransparent,t)}if(a.ansi=e.DEFAULT_ANSI_COLORS.slice(),a.ansi[0]=g(t.black,e.DEFAULT_ANSI_COLORS[0]),a.ansi[1]=g(t.red,e.DEFAULT_ANSI_COLORS[1]),a.ansi[2]=g(t.green,e.DEFAULT_ANSI_COLORS[2]),a.ansi[3]=g(t.yellow,e.DEFAULT_ANSI_COLORS[3]),a.ansi[4]=g(t.blue,e.DEFAULT_ANSI_COLORS[4]),a.ansi[5]=g(t.magenta,e.DEFAULT_ANSI_COLORS[5]),a.ansi[6]=g(t.cyan,e.DEFAULT_ANSI_COLORS[6]),a.ansi[7]=g(t.white,e.DEFAULT_ANSI_COLORS[7]),a.ansi[8]=g(t.brightBlack,e.DEFAULT_ANSI_COLORS[8]),a.ansi[9]=g(t.brightRed,e.DEFAULT_ANSI_COLORS[9]),a.ansi[10]=g(t.brightGreen,e.DEFAULT_ANSI_COLORS[10]),a.ansi[11]=g(t.brightYellow,e.DEFAULT_ANSI_COLORS[11]),a.ansi[12]=g(t.brightBlue,e.DEFAULT_ANSI_COLORS[12]),a.ansi[13]=g(t.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),a.ansi[14]=g(t.brightCyan,e.DEFAULT_ANSI_COLORS[14]),a.ansi[15]=g(t.brightWhite,e.DEFAULT_ANSI_COLORS[15]),t.extendedAnsi){const s=Math.min(a.ansi.length-16,t.extendedAnsi.length);for(let i=0;i<s;i++)a.ansi[i+16]=g(t.extendedAnsi[i],e.DEFAULT_ANSI_COLORS[i+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(t){this._restoreColor(t),this._onChangeColors.fire(this.colors)}_restoreColor(t){if(void 0!==t)switch(t){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[t]=this._restoreColors.ansi[t]}else for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e]}modifyColors(t){t(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function g(t,e){if(void 0!==t)try{return n.css.toColor(t)}catch(t){}return e}e.ThemeService=f=s([i(0,c.IOptionsService)],f)},160:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=e.NULL_COLOR=void 0;const s=a(399);let i=0,o=0,n=0,r=0;var l,c,p,d,u;function m(t){const e=t.toString(16);return e.length<2?"0"+e:e}function h(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}e.NULL_COLOR={css:"#00000000",rgba:0},function(t){t.toCss=function(t,e,a,s){return void 0!==s?`#${m(t)}${m(e)}${m(a)}${m(s)}`:`#${m(t)}${m(e)}${m(a)}`},t.toRgba=function(t,e,a,s=255){return(t<<24|e<<16|a<<8|s)>>>0}}(l||(e.channels=l={})),function(t){function e(t,e){return r=Math.round(255*e),[i,o,n]=u.toChannels(t.rgba),{css:l.toCss(i,o,n,r),rgba:l.toRgba(i,o,n,r)}}t.blend=function(t,e){if(r=(255&e.rgba)/255,1===r)return{css:e.css,rgba:e.rgba};const a=e.rgba>>24&255,s=e.rgba>>16&255,c=e.rgba>>8&255,p=t.rgba>>24&255,d=t.rgba>>16&255,u=t.rgba>>8&255;return i=p+Math.round((a-p)*r),o=d+Math.round((s-d)*r),n=u+Math.round((c-u)*r),{css:l.toCss(i,o,n),rgba:l.toRgba(i,o,n)}},t.isOpaque=function(t){return 255==(255&t.rgba)},t.ensureContrastRatio=function(t,e,a){const s=u.ensureContrastRatio(t.rgba,e.rgba,a);if(s)return u.toColor(s>>24&255,s>>16&255,s>>8&255)},t.opaque=function(t){const e=(255|t.rgba)>>>0;return[i,o,n]=u.toChannels(e),{css:l.toCss(i,o,n),rgba:e}},t.opacity=e,t.multiplyOpacity=function(t,a){return r=255&t.rgba,e(t,r*a/255)},t.toColorRGB=function(t){return[t.rgba>>24&255,t.rgba>>16&255,t.rgba>>8&255]}}(c||(e.color=c={})),function(t){let e,a;if(!s.isNode){const t=document.createElement("canvas");t.width=1,t.height=1;const s=t.getContext("2d",{willReadFrequently:!0});s&&(e=s,e.globalCompositeOperation="copy",a=e.createLinearGradient(0,0,1,1))}t.toColor=function(t){if(t.match(/#[\da-f]{3,8}/i))switch(t.length){case 4:return i=parseInt(t.slice(1,2).repeat(2),16),o=parseInt(t.slice(2,3).repeat(2),16),n=parseInt(t.slice(3,4).repeat(2),16),u.toColor(i,o,n);case 5:return i=parseInt(t.slice(1,2).repeat(2),16),o=parseInt(t.slice(2,3).repeat(2),16),n=parseInt(t.slice(3,4).repeat(2),16),r=parseInt(t.slice(4,5).repeat(2),16),u.toColor(i,o,n,r);case 7:return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0};case 9:return{css:t,rgba:parseInt(t.slice(1),16)>>>0}}const s=t.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return i=parseInt(s[1]),o=parseInt(s[2]),n=parseInt(s[3]),r=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),u.toColor(i,o,n,r);if(!e||!a)throw new Error("css.toColor: Unsupported css format");if(e.fillStyle=a,e.fillStyle=t,"string"!=typeof e.fillStyle)throw new Error("css.toColor: Unsupported css format");if(e.fillRect(0,0,1,1),[i,o,n,r]=e.getImageData(0,0,1,1).data,255!==r)throw new Error("css.toColor: Unsupported css format");return{rgba:l.toRgba(i,o,n,r),css:t}}}(p||(e.css=p={})),function(t){function e(t,e,a){const s=t/255,i=e/255,o=a/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}t.relativeLuminance=function(t){return e(t>>16&255,t>>8&255,255&t)},t.relativeLuminance2=e}(d||(e.rgb=d={})),function(t){function e(t,e,a){const s=t>>24&255,i=t>>16&255,o=t>>8&255;let n=e>>24&255,r=e>>16&255,l=e>>8&255,c=h(d.relativeLuminance2(n,r,l),d.relativeLuminance2(s,i,o));for(;c<a&&(n>0||r>0||l>0);)n-=Math.max(0,Math.ceil(.1*n)),r-=Math.max(0,Math.ceil(.1*r)),l-=Math.max(0,Math.ceil(.1*l)),c=h(d.relativeLuminance2(n,r,l),d.relativeLuminance2(s,i,o));return(n<<24|r<<16|l<<8|255)>>>0}function a(t,e,a){const s=t>>24&255,i=t>>16&255,o=t>>8&255;let n=e>>24&255,r=e>>16&255,l=e>>8&255,c=h(d.relativeLuminance2(n,r,l),d.relativeLuminance2(s,i,o));for(;c<a&&(n<255||r<255||l<255);)n=Math.min(255,n+Math.ceil(.1*(255-n))),r=Math.min(255,r+Math.ceil(.1*(255-r))),l=Math.min(255,l+Math.ceil(.1*(255-l))),c=h(d.relativeLuminance2(n,r,l),d.relativeLuminance2(s,i,o));return(n<<24|r<<16|l<<8|255)>>>0}t.ensureContrastRatio=function(t,s,i){const o=d.relativeLuminance(t>>8),n=d.relativeLuminance(s>>8);if(h(o,n)<i){if(n<o){const n=e(t,s,i),r=h(o,d.relativeLuminance(n>>8));if(r<i){const e=a(t,s,i);return r>h(o,d.relativeLuminance(e>>8))?n:e}return n}const r=a(t,s,i),l=h(o,d.relativeLuminance(r>>8));if(l<i){const a=e(t,s,i);return l>h(o,d.relativeLuminance(a>>8))?r:a}return r}},t.reduceLuminance=e,t.increaseLuminance=a,t.toChannels=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.toColor=function(t,e,a,s){return{css:l.toCss(t,e,a,s),rgba:l.toRgba(t,e,a,s)}}}(u||(e.rgba=u={})),e.toPaddedHex=m,e.contrastRatio=h},345:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=t=>(this._listeners.push(t),{dispose:()=>{if(!this._disposed)for(let e=0;e<this._listeners.length;e++)if(this._listeners[e]===t)return void this._listeners.splice(e,1)}})),this._event}fire(t,e){const a=[];for(let s=0;s<this._listeners.length;s++)a.push(this._listeners[s]);for(let s=0;s<a.length;s++)a[s].call(void 0,t,e)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},e.forwardEvent=function(t,e){return t((t=>e.fire(t)))}},859:(t,e)=>{function a(t){for(const e of t)e.dispose();t.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.MutableDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const t of this._disposables)t.dispose();this._disposables.length=0}register(t){return this._disposables.push(t),t}unregister(t){const e=this._disposables.indexOf(t);-1!==e&&this._disposables.splice(e,1)}},e.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(t){var e;this._isDisposed||t===this._value||(null===(e=this._value)||void 0===e||e.dispose(),this._value=t)}clear(){this.value=void 0}dispose(){var t;this._isDisposed=!0,null===(t=this._value)||void 0===t||t.dispose(),this._value=void 0}},e.toDisposable=function(t){return{dispose:t}},e.disposeArray=a,e.getDisposeArrayDisposable=function(t){return{dispose:()=>a(t)}}},485:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FourKeyMap=e.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(t,e,a){this._data[t]||(this._data[t]={}),this._data[t][e]=a}get(t,e){return this._data[t]?this._data[t][e]:void 0}clear(){this._data={}}}e.TwoKeyMap=a,e.FourKeyMap=class{constructor(){this._data=new a}set(t,e,s,i,o){this._data.get(t,e)||this._data.set(t,e,new a),this._data.get(t,e).set(s,i,o)}get(t,e,a,s){var i;return null===(i=this._data.get(t,e))||void 0===i?void 0:i.get(a,s)}clear(){this._data.clear()}}},399:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isChromeOS=e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.getSafariVersion=e.isSafari=e.isLegacyEdge=e.isFirefox=e.isNode=void 0,e.isNode="undefined"==typeof navigator;const a=e.isNode?"node":navigator.userAgent,s=e.isNode?"node":navigator.platform;e.isFirefox=a.includes("Firefox"),e.isLegacyEdge=a.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(a),e.getSafariVersion=function(){if(!e.isSafari)return 0;const t=a.match(/Version\/(\d+)/);return null===t||t.length<2?0:parseInt(t[1])},e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(s),e.isIpad="iPad"===s,e.isIphone="iPhone"===s,e.isWindows=["Windows","Win16","Win32","WinCE"].includes(s),e.isLinux=s.indexOf("Linux")>=0,e.isChromeOS=/\bCrOS\b/.test(a)},726:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0;const a="di$target",s="di$dependencies";e.serviceRegistry=new Map,e.getServiceDependencies=function(t){return t[s]||[]},e.createDecorator=function(t){if(e.serviceRegistry.has(t))return e.serviceRegistry.get(t);const i=function(t,e,o){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(t,e,i){e[a]===e?e[s].push({id:t,index:i}):(e[s]=[{id:t,index:i}],e[a]=e)}(i,t,o)};return i.toString=()=>t,e.serviceRegistry.set(t,i),i}},97:(t,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IDecorationService=e.IUnicodeService=e.IOscLinkService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;const s=a(726);var i;e.IBufferService=(0,s.createDecorator)("BufferService"),e.ICoreMouseService=(0,s.createDecorator)("CoreMouseService"),e.ICoreService=(0,s.createDecorator)("CoreService"),e.ICharsetService=(0,s.createDecorator)("CharsetService"),e.IInstantiationService=(0,s.createDecorator)("InstantiationService"),function(t){t[t.TRACE=0]="TRACE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.OFF=5]="OFF"}(i||(e.LogLevelEnum=i={})),e.ILogService=(0,s.createDecorator)("LogService"),e.IOptionsService=(0,s.createDecorator)("OptionsService"),e.IOscLinkService=(0,s.createDecorator)("OscLinkService"),e.IUnicodeService=(0,s.createDecorator)("UnicodeService"),e.IDecorationService=(0,s.createDecorator)("DecorationService")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,a),o.exports}var s={};return(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLSerializeHandler=t.SerializeAddon=void 0;const e=a(997);function i(t,e,a){return Math.max(e,Math.min(t,a))}class o{constructor(t){this._buffer=t}serialize(t){const e=this._buffer.getNullCell(),a=this._buffer.getNullCell();let s=e;const i=t.start.x,o=t.end.x,n=t.start.y,r=t.end.y;this._beforeSerialize(o-i,i,o);for(let l=i;l<=o;l++){const i=this._buffer.getLine(l);if(i){const o=l!==t.start.x?0:n,c=l!==t.end.x?i.length:r;for(let t=o;t<c;t++){const o=i.getCell(t,s===e?a:e);o?(this._nextCell(o,s,l,t),s=o):console.warn(`Can't get cell at row=${l}, col=${t}`)}}this._rowEnd(l,l===o)}return this._afterSerialize(),this._serializeString()}_nextCell(t,e,a,s){}_rowEnd(t,e){}_beforeSerialize(t,e,a){}_afterSerialize(){}_serializeString(){return""}}function n(t,e){return t.getFgColorMode()===e.getFgColorMode()&&t.getFgColor()===e.getFgColor()}function r(t,e){return t.getBgColorMode()===e.getBgColorMode()&&t.getBgColor()===e.getBgColor()}function l(t,e){return t.isInverse()===e.isInverse()&&t.isBold()===e.isBold()&&t.isUnderline()===e.isUnderline()&&t.isOverline()===e.isOverline()&&t.isBlink()===e.isBlink()&&t.isInvisible()===e.isInvisible()&&t.isItalic()===e.isItalic()&&t.isDim()===e.isDim()&&t.isStrikethrough()===e.isStrikethrough()}class c extends o{constructor(t,e){super(t),this._terminal=e,this._rowIndex=0,this._allRows=new Array,this._allRowSeparators=new Array,this._currentRow="",this._nullCellCount=0,this._cursorStyle=this._buffer.getNullCell(),this._cursorStyleRow=0,this._cursorStyleCol=0,this._backgroundCell=this._buffer.getNullCell(),this._firstRow=0,this._lastCursorRow=0,this._lastCursorCol=0,this._lastContentCursorRow=0,this._lastContentCursorCol=0,this._thisRowLastChar=this._buffer.getNullCell(),this._thisRowLastSecondChar=this._buffer.getNullCell(),this._nextRowFirstChar=this._buffer.getNullCell()}_beforeSerialize(t,e,a){this._allRows=new Array(t),this._lastContentCursorRow=e,this._lastCursorRow=e,this._firstRow=e}_rowEnd(t,e){var a;this._nullCellCount>0&&!r(this._cursorStyle,this._backgroundCell)&&(this._currentRow+=`[${this._nullCellCount}X`);let s="";if(!e){t-this._firstRow>=this._terminal.rows&&(null===(a=this._buffer.getLine(this._cursorStyleRow))||void 0===a||a.getCell(this._cursorStyleCol,this._backgroundCell));const e=this._buffer.getLine(t),i=this._buffer.getLine(t+1);if(i.isWrapped){s="";const a=e.getCell(e.length-1,this._thisRowLastChar),o=e.getCell(e.length-2,this._thisRowLastSecondChar),n=i.getCell(0,this._nextRowFirstChar),l=n.getWidth()>1;let c=!1;(n.getChars()&&l?this._nullCellCount<=1:this._nullCellCount<=0)&&((a.getChars()||0===a.getWidth())&&r(a,n)&&(c=!0),l&&(o.getChars()||0===o.getWidth())&&r(a,n)&&r(o,n)&&(c=!0)),c||(s="-".repeat(this._nullCellCount+1),s+="[1D[1X",this._nullCellCount>0&&(s+="[A",s+=`[${e.length-this._nullCellCount}C`,s+=`[${this._nullCellCount}X`,s+=`[${e.length-this._nullCellCount}D`,s+="[B"),this._lastContentCursorRow=t+1,this._lastContentCursorCol=0,this._lastCursorRow=t+1,this._lastCursorCol=0)}else s="\r\n",this._lastCursorRow=t+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=s,this._currentRow="",this._nullCellCount=0}_diffStyle(t,e){const a=[],s=!n(t,e),i=!r(t,e),o=!l(t,e);if(s||i||o)if(t.isAttributeDefault())e.isAttributeDefault()||a.push(0);else{if(s){const e=t.getFgColor();t.isFgRGB()?a.push(38,2,e>>>16&255,e>>>8&255,255&e):t.isFgPalette()?e>=16?a.push(38,5,e):a.push(8&e?90+(7&e):30+(7&e)):a.push(39)}if(i){const e=t.getBgColor();t.isBgRGB()?a.push(48,2,e>>>16&255,e>>>8&255,255&e):t.isBgPalette()?e>=16?a.push(48,5,e):a.push(8&e?100+(7&e):40+(7&e)):a.push(49)}o&&(t.isInverse()!==e.isInverse()&&a.push(t.isInverse()?7:27),t.isBold()!==e.isBold()&&a.push(t.isBold()?1:22),t.isUnderline()!==e.isUnderline()&&a.push(t.isUnderline()?4:24),t.isOverline()!==e.isOverline()&&a.push(t.isOverline()?53:55),t.isBlink()!==e.isBlink()&&a.push(t.isBlink()?5:25),t.isInvisible()!==e.isInvisible()&&a.push(t.isInvisible()?8:28),t.isItalic()!==e.isItalic()&&a.push(t.isItalic()?3:23),t.isDim()!==e.isDim()&&a.push(t.isDim()?2:22),t.isStrikethrough()!==e.isStrikethrough()&&a.push(t.isStrikethrough()?9:29))}return a}_nextCell(t,e,a,s){if(0===t.getWidth())return;const i=""===t.getChars(),o=this._diffStyle(t,this._cursorStyle);if(i?!r(this._cursorStyle,t):o.length>0){this._nullCellCount>0&&(r(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`[${this._nullCellCount}X`),this._currentRow+=`[${this._nullCellCount}C`,this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=a,this._lastContentCursorCol=this._lastCursorCol=s,this._currentRow+=`[${o.join(";")}m`;const t=this._buffer.getLine(a);void 0!==t&&(t.getCell(s,this._cursorStyle),this._cursorStyleRow=a,this._cursorStyleCol=s)}i?this._nullCellCount+=t.getWidth():(this._nullCellCount>0&&(r(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`[${this._nullCellCount}X`),this._currentRow+=`[${this._nullCellCount}C`,this._nullCellCount=0),this._currentRow+=t.getChars(),this._lastContentCursorRow=this._lastCursorRow=a,this._lastContentCursorCol=this._lastCursorCol=s+t.getWidth())}_serializeString(){let t=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(t=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);let e="";for(let r=0;r<t;r++)e+=this._allRows[r],r+1<t&&(e+=this._allRowSeparators[r]);const a=this._buffer.baseY+this._buffer.cursorY,s=this._buffer.cursorX;var i;(a!==this._lastCursorRow||s!==this._lastCursorCol)&&((i=a-this._lastCursorRow)>0?e+=`[${i}B`:i<0&&(e+=`[${-i}A`),(t=>{t>0?e+=`[${t}C`:t<0&&(e+=`[${-t}D`)})(s-this._lastCursorCol));const o=this._terminal._core._inputHandler._curAttrData,n=this._diffStyle(o,this._cursorStyle);return n.length>0&&(e+=`[${n.join(";")}m`),e}}t.SerializeAddon=class{activate(t){this._terminal=t}_serializeBuffer(t,e,a){const s=e.length,o=new c(e,t),n=void 0===a?s:i(a+t.rows,0,s);return o.serialize({start:{x:s-n,y:0},end:{x:s-1,y:t.cols}})}_serializeBufferAsHTML(t,e){var a,s;const o=t.buffer.active,n=new p(o,t,e);if(null===(a=e.onlySelection)||void 0===a||!a){const a=o.length,s=e.scrollback,r=void 0===s?a:i(s+t.rows,0,a);return n.serialize({start:{x:a-r,y:0},end:{x:a-1,y:t.cols}})}const r=null===(s=this._terminal)||void 0===s?void 0:s.getSelectionPosition();return void 0!==r?n.serialize({start:{x:r.start.y,y:r.start.x},end:{x:r.end.y,y:r.end.x}}):""}_serializeModes(t){let e="";const a=t.modes;if(a.applicationCursorKeysMode&&(e+="[?1h"),a.applicationKeypadMode&&(e+="[?66h"),a.bracketedPasteMode&&(e+="[?2004h"),a.insertMode&&(e+="[4h"),a.originMode&&(e+="[?6h"),a.reverseWraparoundMode&&(e+="[?45h"),a.sendFocusMode&&(e+="[?1004h"),!1===a.wraparoundMode&&(e+="[?7l"),"none"!==a.mouseTrackingMode)switch(a.mouseTrackingMode){case"x10":e+="[?9h";break;case"vt200":e+="[?1000h";break;case"drag":e+="[?1002h";break;case"any":e+="[?1003h"}return e}serialize(t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let e=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,null==t?void 0:t.scrollback);return(null==t?void 0:t.excludeAltBuffer)||"alternate"!==this._terminal.buffer.active.type||(e+=`[?1049h[H${this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)}`),(null==t?void 0:t.excludeModes)||(e+=this._serializeModes(this._terminal)),e}serializeAsHTML(t){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._serializeBufferAsHTML(this._terminal,t||{})}dispose(){}};class p extends o{constructor(t,a,s){super(t),this._terminal=a,this._options=s,this._currentRow="",this._htmlContent="",a._core._themeService?this._ansiColors=a._core._themeService.colors.ansi:this._ansiColors=e.DEFAULT_ANSI_COLORS}_padStart(t,e,a){return e>>=0,a=null!=a?a:" ",t.length>e?t:((e-=t.length)>a.length&&(a+=a.repeat(e/a.length)),a.slice(0,e)+t)}_beforeSerialize(t,e,a){var s,i,o,n,r;this._htmlContent+="<html><body>\x3c!--StartFragment--\x3e<pre>";let l="#000000",c="#ffffff";null!==(s=this._options.includeGlobalBackground)&&void 0!==s&&s&&(l=null!==(o=null===(i=this._terminal.options.theme)||void 0===i?void 0:i.foreground)&&void 0!==o?o:"#ffffff",c=null!==(r=null===(n=this._terminal.options.theme)||void 0===n?void 0:n.background)&&void 0!==r?r:"#000000");const p=[];p.push("color: "+l+";"),p.push("background-color: "+c+";"),p.push("font-family: "+this._terminal.options.fontFamily+";"),p.push("font-size: "+this._terminal.options.fontSize+"px;"),this._htmlContent+="<div style='"+p.join(" ")+"'>"}_afterSerialize(){this._htmlContent+="</div>",this._htmlContent+="</pre>\x3c!--EndFragment--\x3e</body></html>"}_rowEnd(t,e){this._htmlContent+="<div><span>"+this._currentRow+"</span></div>",this._currentRow=""}_getHexColor(t,e){const a=e?t.getFgColor():t.getBgColor();return(e?t.isFgRGB():t.isBgRGB())?[a>>16&255,a>>8&255,255&a].map((t=>this._padStart(t.toString(16),2,"0"))).join(""):(e?t.isFgPalette():t.isBgPalette())?this._ansiColors[a].css:void 0}_diffStyle(t,e){const a=[],s=!n(t,e),i=!r(t,e),o=!l(t,e);if(s||i||o){const e=this._getHexColor(t,!0);e&&a.push("color: "+e+";");const s=this._getHexColor(t,!1);return s&&a.push("background-color: "+s+";"),t.isInverse()&&a.push("color: #000000; background-color: #BFBFBF;"),t.isBold()&&a.push("font-weight: bold;"),t.isUnderline()&&t.isOverline()?a.push("text-decoration: overline underline;"):t.isUnderline()?a.push("text-decoration: underline;"):t.isOverline()&&a.push("text-decoration: overline;"),t.isBlink()&&a.push("text-decoration: blink;"),t.isInvisible()&&a.push("visibility: hidden;"),t.isItalic()&&a.push("font-style: italic;"),t.isDim()&&a.push("opacity: 0.5;"),t.isStrikethrough()&&a.push("text-decoration: line-through;"),a}}_nextCell(t,e,a,s){if(0===t.getWidth())return;const i=""===t.getChars(),o=this._diffStyle(t,e);o&&(this._currentRow+=0===o.length?"</span><span>":"</span><span style='"+o.join(" ")+"'>"),this._currentRow+=i?" ":t.getChars()}_serializeString(){return this._htmlContent}}t.HTMLSerializeHandler=p})(),s})()))},32993:function(t){!function(e,a){t.exports=a()}(0,(()=>(()=>{"use strict";var t={433:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeV11=void 0;const a=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],s=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],i=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],o=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]];let n;function r(t,e){let a,s=0,i=e.length-1;if(t<e[0][0]||t>e[i][1])return!1;for(;i>=s;)if(a=s+i>>1,t>e[a][1])s=a+1;else{if(!(t<e[a][0]))return!0;i=a-1}return!1}e.UnicodeV11=class{constructor(){if(this.version="11",!n){n=new Uint8Array(65536),n.fill(1),n[0]=0,n.fill(0,1,32),n.fill(0,127,160);for(let t=0;t<a.length;++t)n.fill(0,a[t][0],a[t][1]+1);for(let t=0;t<i.length;++t)n.fill(2,i[t][0],i[t][1]+1)}}wcwidth(t){return t<32?0:t<127?1:t<65536?n[t]:r(t,s)?0:r(t,o)?2:1}}}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,a),o.exports}var s={};return(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.Unicode11Addon=void 0;const e=a(433);t.Unicode11Addon=class{activate(t){t.unicode.register(new e.UnicodeV11)}dispose(){}}})(),s})()))},67511:t=>{!function(e,a){t.exports=a()}(self,(()=>(()=>{"use strict";var t={6:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkComputer=e.WebLinkProvider=void 0,e.WebLinkProvider=class{constructor(t,e,a,s={}){this._terminal=t,this._regex=e,this._handler=a,this._options=s}provideLinks(t,e){const s=a.computeLink(t,this._regex,this._terminal,this._handler);e(this._addCallbacks(s))}_addCallbacks(t){return t.map((t=>(t.leave=this._options.leave,t.hover=(e,a)=>{if(this._options.hover){const{range:s}=t;this._options.hover(e,a,s)}},t)))}};class a{static computeLink(t,e,s,i){const o=new RegExp(e.source,(e.flags||"")+"g"),[n,r]=a._getWindowedLineStrings(t-1,s),l=n.join("");let c;const p=[];for(;c=o.exec(l);){const e=c[0];try{const t=new URL(e),a=decodeURI(t.toString());if(e!==a&&e+"/"!==a)continue}catch(t){continue}const[o,n]=a._mapStrIdx(s,r,0,c.index),[l,d]=a._mapStrIdx(s,o,n,e.length);if(-1===o||-1===n||-1===l||-1===d)continue;const u={start:{x:n+1,y:o+1},end:{x:d,y:l+1}};p.push({range:u,text:e,activate:i})}return p}static _getWindowedLineStrings(t,e){let a,s=t,i=t,o=0,n="";const r=[];if(a=e.buffer.active.getLine(t)){const t=a.translateToString(!0);if(a.isWrapped&&" "!==t[0]){for(o=0;(a=e.buffer.active.getLine(--s))&&o<2048&&(n=a.translateToString(!0),o+=n.length,r.push(n),a.isWrapped&&-1===n.indexOf(" ")););r.reverse()}for(r.push(t),o=0;(a=e.buffer.active.getLine(++i))&&a.isWrapped&&o<2048&&(n=a.translateToString(!0),o+=n.length,r.push(n),-1===n.indexOf(" ")););}return[r,s]}static _mapStrIdx(t,e,a,s){const i=t.buffer.active,o=i.getNullCell();let n=a;for(;s;){const t=i.getLine(e);if(!t)return[-1,-1];for(let a=n;a<t.length;++a){t.getCell(a,o);const n=o.getChars();if(o.getWidth()&&(s-=n.length||1,a===t.length-1&&""===n)){const t=i.getLine(e+1);t&&t.isWrapped&&(t.getCell(0,o),2===o.getWidth()&&(s+=1))}if(s<0)return[e,a]}e++,n=0}return[e,n]}}e.LinkComputer=a}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s](o,o.exports,a),o.exports}var s={};return(()=>{var t=s;Object.defineProperty(t,"__esModule",{value:!0}),t.WebLinksAddon=void 0;const e=a(6),i=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function o(t,e){const a=window.open();if(a){try{a.opener=null}catch(t){}a.location.href=e}else console.warn("Opening link blocked as opener could not be cleared")}t.WebLinksAddon=class{constructor(t=o,e={}){this._handler=t,this._options=e}activate(t){this._terminal=t;const a=this._options,s=a.urlRegex||i;this._linkProvider=this._terminal.registerLinkProvider(new e.WebLinkProvider(this._terminal,s,this._handler,a))}dispose(){var t;null===(t=this._linkProvider)||void 0===t||t.dispose()}}})(),s})()))}}]);