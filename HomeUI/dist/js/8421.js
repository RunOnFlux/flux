"use strict";(globalThis["webpackChunkflux"]=globalThis["webpackChunkflux"]||[]).push([[8421],{6744:(t,e,s)=>{s.r(e),s.d(e,{default:()=>N});var a=function(){var t=this,e=t._self._c;return e("div",[e("b-card",{attrs:{title:"Welcome to Flux - The biggest decentralized computational network"}},[e("list-entry",{attrs:{title:"Dashboard",data:t.dashboard}}),e("list-entry",{attrs:{title:"Applications",data:t.applications}}),e("list-entry",{attrs:{title:"XDAO",data:t.xdao}}),e("list-entry",{attrs:{title:"Administration",data:t.administration}}),e("list-entry",{attrs:{title:"Node Status",data:t.getNodeStatusResponse.nodeStatus,variant:t.getNodeStatusResponse.class}})],1),"none"===t.privilege?e("b-card",[e("b-card-title",[t._v("Log In")]),e("dl",{staticClass:"row"},[e("dd",{staticClass:"col-sm-4"},[e("b-card-text",{staticClass:"text-center"},[t._v(" Please log in using ")]),e("div",{staticClass:"loginRow"},[e("a",{attrs:{href:`zel:?action=sign&message=${t.loginPhrase}&icon=https%3A%2F%2Fraw.githubusercontent.com%2Frunonflux%2Fflux%2Fmaster%2FzelID.svg&callback=${t.callbackValue}`},on:{click:t.initiateLoginWS}},[e("img",{staticClass:"zelidLogin",attrs:{src:s(94452),alt:"Zel ID",height:"100%",width:"100%"}})]),e("a",{on:{click:t.initSSP}},[e("img",{staticClass:"sspLogin",attrs:{src:"dark"===t.skin?s(56070):s(58962),alt:"SSP",height:"100%",width:"100%"}})])]),e("div",{staticClass:"loginRow"},[e("a",{on:{click:t.initWalletConnect}},[e("img",{staticClass:"walletconnectLogin",attrs:{src:s(47622),alt:"WalletConnect",height:"100%",width:"100%"}})]),e("a",{on:{click:t.initMetamask}},[e("img",{staticClass:"metamaskLogin",attrs:{src:s(28125),alt:"Metamask",height:"100%",width:"100%"}})])])],1),e("dd",{staticClass:"col-sm-8"},[e("b-card-text",{staticClass:"text-center"},[t._v(" or sign the following message with any ZelID / SSP Wallet ID / Bitcoin / Ethereum address ")]),e("br"),e("br"),e("b-form",{staticClass:"mx-5",on:{submit:function(t){t.preventDefault()}}},[e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Message","label-for":"h-message","label-cols-md":"3"}},[e("b-form-input",{attrs:{id:"h-message",placeholder:"Insert Login Phrase"},model:{value:t.loginForm.loginPhrase,callback:function(e){t.$set(t.loginForm,"loginPhrase",e)},expression:"loginForm.loginPhrase"}})],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Address","label-for":"h-address","label-cols-md":"3"}},[e("b-form-input",{attrs:{id:"h-address",placeholder:"Insert ZelID or Bitcoin address"},model:{value:t.loginForm.zelid,callback:function(e){t.$set(t.loginForm,"zelid",e)},expression:"loginForm.zelid"}})],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{label:"Signature","label-for":"h-signature","label-cols-md":"3"}},[e("b-form-input",{attrs:{id:"h-signature",placeholder:"Insert Signature"},model:{value:t.loginForm.signature,callback:function(e){t.$set(t.loginForm,"signature",e)},expression:"loginForm.signature"}})],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-form-group",{attrs:{"label-cols-md":"3"}},[e("b-button",{staticClass:"w-100",attrs:{type:"submit",variant:"primary"},on:{click:t.login}},[t._v(" Login ")])],1)],1)],1)],1)],1)])],1):t._e()],1)},o=[],n=s(86855),r=s(64206),i=s(49379),l=s(15193),c=s(54909),d=s(50725),u=s(26253),g=s(22183),h=s(46709),p=s(20629),f=s(38511),m=s(62693),w=s(94145),b=s(34547),y=s(51748),v=s(37307),x=s(34369),P=s(27616),S=s(48764)["lW"];const k="df787edc6839c7de49d527bba9199eaa",C={projectId:k,metadata:{name:"Flux Cloud",description:"Flux, Your Gateway to a Decentralized World",url:"https://home.runonflux.io",icons:["https://home.runonflux.io/img/logo.png"]}},O=new m.u(C),R={enableDebug:!0},F=new w.MetaMaskSDK(R);let T;const j=s(80129),z=s(58971),E={components:{BCard:n._,BCardText:r.j,BCardTitle:i._,BButton:l.T,BForm:c.e,BCol:d.l,BRow:u.T,BFormInput:g.e,BFormGroup:h.x,ListEntry:y.Z,ToastificationContent:b.Z},data(){return{dashboard:"Check Flux network information, resources available or a map with server locations.",xdao:"See the list of changes proposed to Flux network, create new ones and vote.",applications:"Buy on marketplace, register your own app, manage your active apps.",administration:"Tools for the infrastructure administrators, node operators.",websocket:null,errorMessage:"",loginPhrase:"",loginForm:{zelid:"",signature:"",loginPhrase:""},signClient:null,getNodeStatusResponse:{class:"text-success",status:"",data:"",nodeStatus:"Checking status..."}}},computed:{...(0,p.rn)("flux",["userconfig","config","privilege"]),skin(){return(0,v.Z)().skin.value},callbackValue(){const t=this.backendURL(),e=`${t}/id/verifylogin`;return encodeURI(e)}},mounted(){this.daemonWelcomeGetFluxNodeStatus(),this.getZelIdLoginPhrase(),this.initMMSDK()},methods:{async daemonWelcomeGetFluxNodeStatus(){const t=await P.Z.getFluxNodeStatus();this.getNodeStatusResponse.status=t.data.status,this.getNodeStatusResponse.data=t.data.data,this.getNodeStatusResponse.data&&("CONFIRMED"===this.getNodeStatusResponse.data.status||"CONFIRMED"===this.getNodeStatusResponse.data.location?(this.getNodeStatusResponse.nodeStatus="Connected to the network",this.getNodeStatusResponse.class="success"):"STARTED"===this.getNodeStatusResponse.data.status||"STARTED"===this.getNodeStatusResponse.data.location?(this.getNodeStatusResponse.nodeStatus="Connecting to the network. Flux is running with limited capabilities.",this.getNodeStatusResponse.class="warning"):(this.getNodeStatusResponse.nodeStatus="Not connected to the network. Flux is running with limited capabilities.",this.getNodeStatusResponse.class="danger"))},async initMMSDK(){try{await F.init(),T=F.getProvider()}catch(t){console.log(t)}},backendURL(){const{protocol:t,hostname:e,port:s}=window.location;let a="";a+=t,a+="//";const o=/[A-Za-z]/g;if(e.split("-")[4]){const t=e.split("-"),s=t[4].split("."),o=+s[0]+1;s[0]=o.toString(),s[2]="api",t[4]="",a+=t.join("-"),a+=s.join(".")}else if(e.match(o)){const t=e.split(".");t[0]="api",a+=t.join(".")}else{if("string"===typeof e&&this.$store.commit("flux/setUserIp",e),+s>16100){const t=+s+1;this.$store.commit("flux/setFluxPort",t)}a+=e,a+=":",a+=this.config.apiPort}return z.get("backendURL")||a},initiateLoginWS(){const t=this;let e=this.backendURL();e=e.replace("https://","wss://"),e=e.replace("http://","ws://");const s=`${e}/ws/id/${this.loginPhrase}`,a=new WebSocket(s);this.websocket=a,a.onopen=e=>{t.onOpen(e)},a.onclose=e=>{t.onClose(e)},a.onmessage=e=>{t.onMessage(e)},a.onerror=e=>{t.onError(e)}},onError(t){console.log(t)},onMessage(t){const e=j.parse(t.data);if(console.log(e),"success"===e.status&&e.data){const t={zelid:e.data.zelid,signature:e.data.signature,loginPhrase:e.data.loginPhrase};this.$store.commit("flux/setPrivilege",e.data.privilage),this.$store.commit("flux/setZelid",t.zelid),localStorage.setItem("zelidauth",j.stringify(t)),this.showToast("success",e.data.message)}console.log(e),console.log(t)},onClose(t){console.log(t)},onOpen(t){console.log(t)},showToast(t,e){this.$toast({component:b.Z,props:{title:e,icon:"BellIcon",variant:t}})},getZelIdLoginPhrase(){x.Z.loginPhrase().then((t=>{console.log(t),"error"===t.data.status?this.getEmergencyLoginPhrase():(this.loginPhrase=t.data.data,this.loginForm.loginPhrase=t.data.data)})).catch((t=>{console.log(t),this.showToast("danger",t)}))},getEmergencyLoginPhrase(){x.Z.emergencyLoginPhrase().then((t=>{console.log(t),"error"===t.data.status?this.showToast("danger",t.data.data.message):(this.loginPhrase=t.data.data,this.loginForm.loginPhrase=t.data.data)})).catch((t=>{console.log(t),this.showToast("danger",t)}))},getVariant(t){return"error"===t?"danger":"message"===t?"info":t},login(){console.log(this.loginForm),x.Z.verifyLogin(this.loginForm).then((t=>{if(console.log(t),"success"===t.data.status){const e={zelid:this.loginForm.zelid,signature:this.loginForm.signature,loginPhrase:this.loginForm.loginPhrase};this.$store.commit("flux/setPrivilege",t.data.data.privilage),this.$store.commit("flux/setZelid",e.zelid),localStorage.setItem("zelidauth",j.stringify(e)),this.showToast("success",t.data.data.message)}else this.showToast(this.getVariant(t.data.status),t.data.data.message||t.data.data)})).catch((t=>{console.log(t),this.showToast("danger",t.toString())}))},async onSessionConnect(t){console.log(t);const e=await this.signClient.request({topic:t.topic,chainId:"eip155:1",request:{method:"personal_sign",params:[this.loginPhrase,t.namespaces.eip155.accounts[0].split(":")[2]]}});console.log(e);const s={zelid:t.namespaces.eip155.accounts[0].split(":")[2],signature:e,loginPhrase:this.loginPhrase},a=await x.Z.verifyLogin(s);if(console.log(a),"success"===a.data.status){const t=s;this.$store.commit("flux/setPrivilege",a.data.data.privilage),this.$store.commit("flux/setZelid",t.zelid),localStorage.setItem("zelidauth",j.stringify(t)),this.showToast("success",a.data.data.message)}else this.showToast(this.getVariant(a.data.status),a.data.data.message||a.data.data)},onSessionUpdate(t){console.log(t)},async initWalletConnect(){const t=this;try{const e=await f.ZP.init(C);this.signClient=e,e.on("session_event",(({event:t})=>{console.log(t)})),e.on("session_update",(({topic:s,params:a})=>{const{namespaces:o}=a,n=e.session.get(s),r={...n,namespaces:o};t.onSessionUpdate(r)})),e.on("session_delete",(()=>{}));const{uri:s,approval:a}=await e.connect({requiredNamespaces:{eip155:{methods:["personal_sign"],chains:["eip155:1"],events:["chainChanged","accountsChanged"]}}});if(s){O.openModal({uri:s});const t=await a();this.onSessionConnect(t),O.closeModal()}}catch(e){console.error(e),this.showToast("danger",e.message)}},async siwe(t,e){try{const s=`0x${S.from(t,"utf8").toString("hex")}`,a=await T.request({method:"personal_sign",params:[s,e]});console.log(a);const o={zelid:e,signature:a,loginPhrase:this.loginPhrase},n=await x.Z.verifyLogin(o);if(console.log(n),"success"===n.data.status){const t=o;this.$store.commit("flux/setPrivilege",n.data.data.privilage),this.$store.commit("flux/setZelid",t.zelid),localStorage.setItem("zelidauth",j.stringify(t)),this.showToast("success",n.data.data.message)}else this.showToast(this.getVariant(n.data.status),n.data.data.message||n.data.data)}catch(s){console.error(s),this.showToast("danger",s.message)}},async initMetamask(){try{if(!T)return void this.showToast("danger","Metamask not detected");let t;if(T&&!T.selectedAddress){const e=await T.request({method:"eth_requestAccounts",params:[]});console.log(e),t=e[0]}else t=T.selectedAddress;this.siwe(this.loginPhrase,t)}catch(t){this.showToast("danger",t.message)}},async initSSP(){try{if(!window.ssp)return void this.showToast("danger","SSP Wallet not installed");const t=await window.ssp.request("sspwid_sign_message",{message:this.loginPhrase});if("ERROR"===t.status)throw new Error(t.data||t.result);const e={zelid:t.address,signature:t.signature,loginPhrase:this.loginPhrase},s=await x.Z.verifyLogin(e);if(console.log(s),"success"===s.data.status){const t=e;this.$store.commit("flux/setPrivilege",s.data.data.privilage),this.$store.commit("flux/setZelid",t.zelid),localStorage.setItem("zelidauth",j.stringify(t)),this.showToast("success",s.data.data.message)}else this.showToast(this.getVariant(s.data.status),s.data.data.message||s.data.data)}catch(t){this.showToast("danger",t.message)}}}},M=E;var I=s(1001),L=(0,I.Z)(M,a,o,!1,null,null,null);const N=L.exports},84328:(t,e,s)=>{var a=s(65290),o=s(27578),n=s(6310),r=function(t){return function(e,s,r){var i,l=a(e),c=n(l),d=o(r,c);if(t&&s!==s){while(c>d)if(i=l[d++],i!==i)return!0}else for(;c>d;d++)if((t||d in l)&&l[d]===s)return t||d||0;return!t&&-1}};t.exports={includes:r(!0),indexOf:r(!1)}},5649:(t,e,s)=>{var a=s(67697),o=s(92297),n=TypeError,r=Object.getOwnPropertyDescriptor,i=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=i?function(t,e){if(o(t)&&!r(t,"length").writable)throw new n("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},8758:(t,e,s)=>{var a=s(36812),o=s(19152),n=s(82474),r=s(72560);t.exports=function(t,e,s){for(var i=o(e),l=r.f,c=n.f,d=0;d<i.length;d++){var u=i[d];a(t,u)||s&&a(s,u)||l(t,u,c(e,u))}}},55565:t=>{var e=TypeError,s=9007199254740991;t.exports=function(t){if(t>s)throw e("Maximum allowed index exceeded");return t}},72739:t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},79989:(t,e,s)=>{var a=s(19037),o=s(82474).f,n=s(75773),r=s(11880),i=s(95014),l=s(8758),c=s(35266);t.exports=function(t,e){var s,d,u,g,h,p,f=t.target,m=t.global,w=t.stat;if(d=m?a:w?a[f]||i(f,{}):a[f]&&a[f].prototype,d)for(u in e){if(h=e[u],t.dontCallGetSet?(p=o(d,u),g=p&&p.value):g=d[u],s=c(m?u:f+(w?".":"#")+u,t.forced),!s&&void 0!==g){if(typeof h==typeof g)continue;l(h,g)}(t.sham||g&&g.sham)&&n(h,"sham",!0),r(d,u,h,t)}}},94413:(t,e,s)=>{var a=s(68844),o=s(3689),n=s(6648),r=Object,i=a("".split);t.exports=o((function(){return!r("z").propertyIsEnumerable(0)}))?function(t){return"String"===n(t)?i(t,""):r(t)}:r},92297:(t,e,s)=>{var a=s(6648);t.exports=Array.isArray||function(t){return"Array"===a(t)}},35266:(t,e,s)=>{var a=s(3689),o=s(69985),n=/#|\.prototype\./,r=function(t,e){var s=l[i(t)];return s===d||s!==c&&(o(e)?a(e):!!e)},i=r.normalize=function(t){return String(t).replace(n,".").toLowerCase()},l=r.data={},c=r.NATIVE="N",d=r.POLYFILL="P";t.exports=r},6310:(t,e,s)=>{var a=s(43126);t.exports=function(t){return a(t.length)}},58828:t=>{var e=Math.ceil,s=Math.floor;t.exports=Math.trunc||function(t){var a=+t;return(a>0?s:e)(a)}},82474:(t,e,s)=>{var a=s(67697),o=s(22615),n=s(49556),r=s(75684),i=s(65290),l=s(18360),c=s(36812),d=s(68506),u=Object.getOwnPropertyDescriptor;e.f=a?u:function(t,e){if(t=i(t),e=l(e),d)try{return u(t,e)}catch(s){}if(c(t,e))return r(!o(n.f,t,e),t[e])}},72741:(t,e,s)=>{var a=s(54948),o=s(72739),n=o.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return a(t,n)}},7518:(t,e)=>{e.f=Object.getOwnPropertySymbols},54948:(t,e,s)=>{var a=s(68844),o=s(36812),n=s(65290),r=s(84328).indexOf,i=s(57248),l=a([].push);t.exports=function(t,e){var s,a=n(t),c=0,d=[];for(s in a)!o(i,s)&&o(a,s)&&l(d,s);while(e.length>c)o(a,s=e[c++])&&(~r(d,s)||l(d,s));return d}},49556:(t,e)=>{var s={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,o=a&&!s.call({1:2},1);e.f=o?function(t){var e=a(this,t);return!!e&&e.enumerable}:s},19152:(t,e,s)=>{var a=s(76058),o=s(68844),n=s(72741),r=s(7518),i=s(85027),l=o([].concat);t.exports=a("Reflect","ownKeys")||function(t){var e=n.f(i(t)),s=r.f;return s?l(e,s(t)):e}},27578:(t,e,s)=>{var a=s(68700),o=Math.max,n=Math.min;t.exports=function(t,e){var s=a(t);return s<0?o(s+e,0):n(s,e)}},65290:(t,e,s)=>{var a=s(94413),o=s(74684);t.exports=function(t){return a(o(t))}},68700:(t,e,s)=>{var a=s(58828);t.exports=function(t){var e=+t;return e!==e||0===e?0:a(e)}},43126:(t,e,s)=>{var a=s(68700),o=Math.min;t.exports=function(t){var e=a(t);return e>0?o(e,9007199254740991):0}},70560:(t,e,s)=>{var a=s(79989),o=s(90690),n=s(6310),r=s(5649),i=s(55565),l=s(3689),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},u=c||!d();a({target:"Array",proto:!0,arity:1,forced:u},{push:function(t){var e=o(this),s=n(e),a=arguments.length;i(s+a);for(var l=0;l<a;l++)e[s]=arguments[l],s++;return r(e,s),s}})},17832:(t,e,s)=>{s.d(e,{sj:()=>p,CO:()=>m,Ld:()=>f});Symbol();const a=Symbol();const o=Object.getPrototypeOf,n=new WeakMap,r=t=>t&&(n.has(t)?n.get(t):o(t)===Object.prototype||o(t)===Array.prototype),i=t=>r(t)&&t[a]||null,l=(t,e=!0)=>{n.set(t,e)},c=t=>"object"===typeof t&&null!==t,d=new WeakMap,u=new WeakSet,g=(t=Object.is,e=((t,e)=>new Proxy(t,e)),s=(t=>c(t)&&!u.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)),a=(t=>{switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t}}),o=new WeakMap,n=((t,e,s=a)=>{const r=o.get(t);if((null==r?void 0:r[0])===e)return r[1];const i=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return l(i,!0),o.set(t,[e,i]),Reflect.ownKeys(t).forEach((e=>{if(Object.getOwnPropertyDescriptor(i,e))return;const a=Reflect.get(t,e),o={value:a,enumerable:!0,configurable:!0};if(u.has(a))l(a,!1);else if(a instanceof Promise)delete o.value,o.get=()=>s(a);else if(d.has(a)){const[t,e]=d.get(a);o.value=n(t,e(),s)}Object.defineProperty(i,e,o)})),Object.preventExtensions(i)}),r=new WeakMap,g=[1,1],h=(a=>{if(!c(a))throw new Error("object required");const o=r.get(a);if(o)return o;let l=g[0];const p=new Set,f=(t,e=++g[0])=>{l!==e&&(l=e,p.forEach((s=>s(t,e))))};let m=g[1];const w=(t=++g[1])=>(m===t||p.size||(m=t,y.forEach((([e])=>{const s=e[1](t);s>l&&(l=s)}))),l),b=t=>(e,s)=>{const a=[...e];a[1]=[t,...a[1]],f(a,s)},y=new Map,v=(t,e)=>{if(y.has(t))throw new Error("prop listener already exists");if(p.size){const s=e[3](b(t));y.set(t,[e,s])}else y.set(t,[e])},x=t=>{var e;const s=y.get(t);s&&(y.delete(t),null==(e=s[1])||e.call(s))},P=t=>{p.add(t),1===p.size&&y.forEach((([t,e],s)=>{if(e)throw new Error("remove already exists");const a=t[3](b(s));y.set(s,[t,a])}));const e=()=>{p.delete(t),0===p.size&&y.forEach((([t,e],s)=>{e&&(e(),y.set(s,[t]))}))};return e},S=Array.isArray(a)?[]:Object.create(Object.getPrototypeOf(a)),k={deleteProperty(t,e){const s=Reflect.get(t,e);x(e);const a=Reflect.deleteProperty(t,e);return a&&f(["delete",[e],s]),a},set(e,a,o,n){const l=Reflect.has(e,a),g=Reflect.get(e,a,n);if(l&&(t(g,o)||r.has(o)&&t(g,r.get(o))))return!0;x(a),c(o)&&(o=i(o)||o);let p=o;if(o instanceof Promise)o.then((t=>{o.status="fulfilled",o.value=t,f(["resolve",[a],t])})).catch((t=>{o.status="rejected",o.reason=t,f(["reject",[a],t])}));else{!d.has(o)&&s(o)&&(p=h(o));const t=!u.has(p)&&d.get(p);t&&v(a,t)}return Reflect.set(e,a,p,n),f(["set",[a],o,g]),!0}},C=e(S,k);r.set(a,C);const O=[S,w,n,P];return d.set(C,O),Reflect.ownKeys(a).forEach((t=>{const e=Object.getOwnPropertyDescriptor(a,t);"value"in e&&(C[t]=a[t],delete e.value,delete e.writable),Object.defineProperty(S,t,e)})),C}))=>[h,d,u,t,e,s,a,o,n,r,g],[h]=g();function p(t={}){return h(t)}function f(t,e,s){const a=d.get(t);let o;a||console.warn("Please use proxy object");const n=[],r=a[3];let i=!1;const l=t=>{n.push(t),s?e(n.splice(0)):o||(o=Promise.resolve().then((()=>{o=void 0,i&&e(n.splice(0))})))},c=r(l);return i=!0,()=>{i=!1,c()}}function m(t,e){const s=d.get(t);s||console.warn("Please use proxy object");const[a,o,n]=s;return n(a,o(),e)}}}]);