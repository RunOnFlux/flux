"use strict";(globalThis["webpackChunkflux"]=globalThis["webpackChunkflux"]||[]).push([[3078],{13078:(t,e,s)=>{s.r(e),s.d(e,{default:()=>k});s(22489);var o=function(){var t=this,e=t._self._c;return e("b-overlay",{attrs:{show:t.sessionsLoading,variant:"transparent",blur:"5px"}},[e("b-card",[e("b-row",[e("b-col",{staticClass:"my-1",attrs:{md:"4",sm:"4"}},[e("b-form-group",{staticClass:"mb-0"},[e("label",{staticClass:"d-inline-block text-left mr-50"},[t._v("Per page")]),e("b-form-select",{staticClass:"w-50",attrs:{id:"perPageSelect",size:"sm",options:t.pageOptions},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1)],1),e("b-col",{staticClass:"my-1",attrs:{md:"8"}},[e("b-form-group",{staticClass:"mb-0",attrs:{label:"Filter","label-cols-sm":"1","label-align-sm":"right","label-for":"filterInput"}},[e("b-input-group",{attrs:{size:"sm"}},[e("b-form-input",{attrs:{id:"filterInput",type:"search",placeholder:"Type to Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),e("b-input-group-append",[e("b-button",{attrs:{disabled:!t.filter},on:{click:function(e){t.filter=""}}},[t._v(" Clear ")])],1)],1)],1)],1),e("b-col",{attrs:{cols:"12"}},[e("b-table",{attrs:{striped:"",hover:"",responsive:"",small:"",outlined:"","sort-icon-left":"","per-page":t.perPage,"current-page":t.currentPage,items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"sort-direction":t.sortDirection,filter:t.filter,"filter-included-fields":t.filterOn,"show-empty":"","empty-text":"No Sessions"},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(logout)",fn:function(s){return[e("v-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"Currently logged and used session by you",expression:"'Currently logged and used session by you'",modifiers:{hover:!0,top:!0}}],staticClass:"mr-1",class:s.item.loginPhrase===t.currentLoginPhrase?"":"hidden",attrs:{name:"info-circle"}}),e("b-button",{staticClass:"mr-0",attrs:{id:`${s.item.loginPhrase}`,size:"sm",variant:"danger"}},[t._v(" Log Out ")]),e("confirm-dialog",{attrs:{target:`${s.item.loginPhrase}`,"confirm-button":"Log Out!"},on:{confirm:function(e){return t.onLogoutOK(s.item)}}})]}}])})],1),e("b-col",{attrs:{cols:"12"}},[e("b-pagination",{staticClass:"mt-1 mb-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"center",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),e("span",{staticClass:"table-total mt-1"},[t._v("Total: "+t._s(t.totalRows))])],1)],1),e("div",{staticClass:"text-center"},[e("b-button",{staticClass:"mt-1",attrs:{id:"logout-all",size:"sm",variant:"danger"},on:{click:function(e){t.logoutAllPopoverShow=!0}}},[t._v(" Logout all sessions ")]),e("confirm-dialog",{attrs:{target:"logout-all","confirm-button":"Log Out All!"},on:{confirm:function(e){return t.onLogoutAllOK()}}})],1)],1)],1)},a=[],r=(s(61701),s(33052)),i=s(50331),n=s(28028),l=s(99542),c=s(24392),u=s(30968),d=s(28938),g=s(42006),p=s(11442),m=s(16167),h=s(75532),f=s(79406),b=s(58376),v=s(41109),y=s(19075),w=s(47391),C=s(2564);const x=s(55373),P={components:{BCard:r.v,BTable:i.B,BRow:n.L,BCol:l.T,BPagination:c.H,BFormGroup:u.a,BFormSelect:d.J,BInputGroup:g.Y,BFormInput:p.b,BInputGroupAppend:m.G,BButton:h.P,BOverlay:f.n,ConfirmDialog:w.A,ToastificationContent:v.A},directives:{"b-tooltip":b.y,Ripple:y.A},data(){return{perPage:10,pageOptions:[10,25,50,100],sortBy:"",sortDesc:!1,sortDirection:"asc",items:[],filter:"",filterOn:[],fields:[{key:"zelid",label:"Flux ID",sortable:!0},{key:"loginPhrase",label:"Login Phrase",sortable:!0},{key:"logout",label:"",sortable:!1}],totalRows:1,currentPage:1,sessionsLoading:!0}},computed:{sortOptions(){return this.fields.filter(t=>t.sortable).map(t=>({text:t.label,value:t.key}))},currentLoginPhrase(){const t=localStorage.getItem("zelidauth"),e=x.parse(t);return console.log(e),e.loginPhrase}},mounted(){this.loggedSessions()},methods:{async loggedSessions(){this.sessionsLoading=!0;const t=localStorage.getItem("zelidauth"),e=x.parse(t);console.log(e),C.A.loggedSessions(t).then(async t=>{console.log(t),"error"===t.data.status?this.showToast("danger",t.data.data.message||t.data.data):(this.items=t.data.data,this.totalRows=this.items.length,this.currentPage=1),this.sessionsLoading=!1}).catch(t=>{console.log(t),this.showToast("danger",t.toString()),this.sessionsLoading=!1})},onFiltered(t){this.totalRows=t.length,this.currentPage=1},async onLogoutOK(t){const e=localStorage.getItem("zelidauth"),s=x.parse(e);C.A.logoutSpecificSession(e,t.loginPhrase).then(e=>{console.log(e),"error"===e.data.status?this.showToast("danger",e.data.data.message||e.data.data):(this.showToast("success",e.data.data.message||e.data.data),t.loginPhrase===s.loginPhrase?(localStorage.removeItem("zelidauth"),this.$store.commit("flux/setPrivilege","none"),this.$store.commit("flux/setZelid",""),this.$router.replace("/")):this.loggedSessions())}).catch(t=>{console.log(t),this.showToast("danger",t.toString())})},async onLogoutAllOK(){const t=localStorage.getItem("zelidauth");C.A.logoutAllSessions(t).then(t=>{console.log(t),"error"===t.data.status?this.showToast("danger",t.data.data.message||t.data.data):(localStorage.removeItem("zelidauth"),this.$store.commit("flux/setPrivilege","none"),this.$store.commit("flux/setZelid",""),this.$router.replace("/"),this.showToast("success",t.data.data.message||t.data.data))}).catch(t=>{console.log(t),this.showToast("danger",t.toString())})},showToast(t,e,s="InfoIcon"){this.$toast({component:v.A,props:{title:e,icon:s,variant:t}})}}},S=P;var B=s(81656),_=(0,B.A)(S,o,a,!1,null,null,null);const k=_.exports},41109:(t,e,s)=>{s.d(e,{A:()=>u});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"toastification"},[e("div",{staticClass:"d-flex align-items-start"},[e("b-avatar",{staticClass:"mr-75 flex-shrink-0",attrs:{variant:t.variant,size:"1.8rem"}},[e("feather-icon",{attrs:{icon:t.icon,size:"15"}})],1),e("div",{staticClass:"d-flex flex-grow-1"},[e("div",[t.title?e("h5",{staticClass:"mb-0 font-weight-bolder toastification-title",class:`text-${t.variant}`,domProps:{textContent:t._s(t.title)}}):t._e(),t.text?e("small",{staticClass:"d-inline-block text-body",domProps:{textContent:t._s(t.text)}}):t._e()]),e("span",{staticClass:"cursor-pointer toastification-close-icon ml-auto",on:{click:function(e){return t.$emit("close-toast")}}},[t.hideClose?t._e():e("feather-icon",{staticClass:"text-body",attrs:{icon:"XIcon"}})],1)])],1)])},a=[],r=s(53950);const i={components:{BAvatar:r.Cq},props:{variant:{type:String,default:"primary"},icon:{type:String,default:null},title:{type:String,default:null},text:{type:String,default:null},hideClose:{type:Boolean,default:!1}}},n=i;var l=s(81656),c=(0,l.A)(n,o,a,!1,null,"22d964ca",null);const u=c.exports},47391:(t,e,s)=>{s.d(e,{A:()=>g});var o=function(){var t=this,e=t._self._c;return e("b-popover",{ref:"popover",attrs:{target:`${t.target}`,triggers:"click blur",show:t.show,placement:"auto",container:"my-container","custom-class":`confirm-dialog-${t.width}`},on:{"update:show":function(e){t.show=e}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("span",[t._v(t._s(t.title))]),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"close",attrs:{variant:"transparent","aria-label":"Close"},on:{click:function(e){t.show=!1}}},[e("span",{staticClass:"d-inline-block text-white",attrs:{"aria-hidden":"true"}},[t._v("Ã—")])])],1)]},proxy:!0}])},[e("div",{staticClass:"text-center"},[e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"danger"},on:{click:function(e){t.show=!1}}},[t._v(" "+t._s(t.cancelButton)+" ")]),e("b-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(255, 255, 255, 0.15)",expression:"'rgba(255, 255, 255, 0.15)'",modifiers:{400:!0}}],attrs:{size:"sm",variant:"primary"},on:{click:function(e){return t.confirm()}}},[t._v(" "+t._s(t.confirmButton)+" ")])],1)])},a=[],r=s(75532),i=s(66082),n=s(19075);const l={components:{BButton:r.P,BPopover:i.u},directives:{Ripple:n.A},props:{target:{type:String,required:!0},title:{type:String,required:!1,default:"Are You Sure?"},cancelButton:{type:String,required:!1,default:"Cancel"},confirmButton:{type:String,required:!0},width:{type:Number,required:!1,default:300}},data(){return{show:!1}},methods:{confirm(){this.show=!1,this.$emit("confirm")}}},c=l;var u=s(81656),d=(0,u.A)(c,o,a,!1,null,null,null);const g=d.exports}}]);