<div>
  <b-modal
    v-model="progressVisable"
    hide-footer
    centered
    hide-header-close
    no-close-on-backdrop
    no-close-on-esc
    size="lg"
    header-bg-variant="primary"
    title-class="custom-modal-title"
    :title="operationTitle"
    title-tag="h5"
  >
    <div class="d-flex flex-column justify-content-center align-items-center" style="height: 100%;">
      <div class="d-flex align-items-center mb-1">
        <b-spinner label="Loading..." />
        <div class="ml-1">
          {{ infoMessage }}
        </div>
      </div>
      <div
        v-if="operationTask"
        class="mb-1"
      >
        <kbd class="alert-info" style="border-radius: 15px; font-weight: 700 !important; font-size: 14px">
          {{ operationTask }}
        </kbd>
      </div>
    </div>
  </b-modal>
  <div>
    <div class="d-flex justify-content-between align-items-center flex-wrap">
      <div class="app-header d-flex align-items-center">
        <b-button
          v-ripple.400="'rgba(255, 255, 255, 0.15)'"
          class="mr-2"
          variant="outline-primary"
          pill
          @click="goBackToApps"
        >
          <v-icon name="chevron-left" />
          Back
        </b-button>
        <div class="app-list d-flex">
          <div v-for="(app, index) in applicationManagementAndStatus" :key="index">
            <div :id="`app-item-${index}`" class="app-item">
              <smart-icon
                icon="heart-pulse-fill"
                :variant="getIconVariant(app.state, app.status)"
                class="app-icon"
                scale="1.5"
              />
              <div class="app-details">
                <div class="app-name">
                  <kbd class="alert-info" style="border-radius: 15px; font-weight: 700 !important;">{{ app.name }}</kbd>
                </div>
                <div class="app-info">
                  <kbd :class="getAlertClass(app.state, app.status)" style="border-radius: 15px; font-size: 11px;">{{ app.state }}</kbd>
                </div>
              </div>
            </div>
            <b-popover
              :target="`app-item-${index}`"
              triggers="hover"
              placement="top"
              custom-class="app-popover"
            >
              <template #default>
                <p class="mb-0">
                  <b-icon icon="info-circle-fill" variant="secondary" class="hover-icon" />
                  <b>Image:</b> {{ app.image }}
                </p>
                <p class="mb-0">
                  <b-icon icon="clock-fill" variant="secondary" class="hover-icon" />
                  <b>Status:</b> {{ app.status }}
                  <span v-if="app.status === 'created'"> (standby mode)</span>
                </p>
              </template>
            </b-popover>
          </div>
        </div>
      </div>
      <b-input-group class="my-1" size="sm" style="width: 250px">
        <b-input-group-prepend is-text>
          <b-icon
            v-b-tooltip.hover.top="'Select the instance IP address. This dropdown shows the IPs of available instances.'"
            v-ripple.400="'rgba(255, 255, 255, 0.12)'"
            icon="laptop"
          />
        </b-input-group-prepend>
        <b-form-select
          v-model="selectedIp"
          :options="null"
        >
          <b-form-select-option
            v-for="instance in instances.data"
            :key="instance.ip"
            :value="instance.ip"
          >
            {{ instance.ip }}
          </b-form-select-option>
        </b-form-select>
        <b-icon
          icon="arrow-clockwise"
          :class="['ml-1', 'r', { disabled: isDisabled }]"
          @click="refreshInfo"
        />
      </b-input-group>
    </div>
  </div>
  <b-tabs
    ref="managementTabs"
    class="mt-1"
    pills
    style="flex-wrap: nowrap;"
    :vertical="windowWidth > 860 ? true : false"
    lazy
    @input="index => updateManagementTab(index)"
  >
    <b-tab
      :title-item-class="windowWidth > 860 ? '' : 'd-none'"
      title="Local App Management"
      disabled
    />
    <b-tab
      active
      title="Specifications"
    >
      <b-card>
        <div
          class="mb-2"
          style="
          border: 1px solid #ccc;
          border-radius: 8px;
          height: 45px;
          padding: 12px;
          text-align: left;
          line-height: 0px;
        "
        >
          <h5 class="d-flex align-items-center">
            <b-icon
              class="mr-1"
              scale="1.2"
              icon="list-task"
            />
            Application Specifications
          </h5>
        </div>
        <div class="wrap-text-info">
          <div v-if="noInstanceAvailable" class="placeholder-box">
            <p style="color: red; font-size: 16px;">
              ‚ö†Ô∏è <b>No deployed application detected.</b>
            </p>
            <small>üîÑ Try to refresh or üåê switch to another instance.</small>
          </div>
          <div v-if="callResponse.data" style="text-align: left;">
            <div>
              <h3 class="no-wrap align-items-center justify-content-center mb-1">
                <kbd class="alert-info d-flex" style="border-radius: 15px; font-family: monospace; padding-right: 100%">
                  <b-icon scale="1" icon="info-square" class="ml-1" style="margin-top: 2px;" />
                  <div class="no-wrap align-items-center justify-content-center">
                    <span style="margin-left: 10px;">Local Specification</span>
                    <b-icon
                      v-if="callResponse?.data && callBResponse?.data && callBResponse?.data?.hash !== callResponse?.data?.hash"
                      v-b-tooltip.hover.top="'Application does not match global specifications!'"
                      v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                      scale="1"
                      icon="wifi-off"
                      variant="danger"
                      style="margin-top: 2px;margin-left: 4px;"
                    />
                    <b-icon
                      v-if="callResponse?.data && callBResponse?.data && callBResponse?.data?.hash === callResponse?.data?.hash"
                      v-b-tooltip.hover.top="'Application is synced with global network!'"
                      v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                      scale="1"
                      icon="wifi"
                      variant="success"
                      style="margin-top: 2px;margin-left: 4px;"
                    />
                  </div>
                </kbd>
              </h3>
              <div style="margin-left: 20px;">
                <app-info
                  :data="callResponse.data"
                  :get-geolocation="getGeolocation"
                  :get-new-expire-label="getNewExpireLabel"
                  :current-block-height="daemonBlockCount"
                />
                <h3 class="no-wrap align-items-center justify-content-center mb-1">
                  <kbd class="alert-info d-flex" style="border-radius: 15px; font-family: monospace; padding-right: 100%">
                    <smart-icon scale="1" icon="boxes" class="ml-1" style="margin-top: 1px;" />
                    <span style="margin-left: 10px;">Composition</span>
                  </kbd>
                </h3>
                <b-tabs v-model="activeTabLocalIndexSpec" content-class="my-1" class="ml-1" pills>
                  <b-tab
                    v-for="(component, index) in normalizeComponents(callResponse.data)"
                    :key="index"
                  >
                    <template #title>
                      <b-icon icon="box" scale="1" class="mr-1" />
                      {{ component.name }}
                    </template>
                    <transition name="tab-slide" mode="out-in">
                      <div v-if="activeTabLocalIndexSpec === index" :key="index" class="mb-2">
                        <component-details :component="component" :app-name="callResponse.data?.name || ''" :index="index" />
                      </div>
                    </transition>
                  </b-tab>
                </b-tabs>
              </div>
            </div>
          </div>
          <div v-else>
            <div v-if="!noInstanceAvailable" class="d-flex align-items-center justify-content-left mb-2">
              <v-icon class="spin-icon" name="spinner" style="margin-right: 8px;" />
              <h5 class="mb-0">
                Local specification loading...
              </h5>
            </div>
          </div>
          <div
            v-if="callBResponse.data"
            style="text-align: left;"
          >
            <div class="mt-2">
              <h3 class="no-wrap align-items-center justify-content-center mb-2">
                <kbd class="alert-info d-flex" style="border-radius: 15px; font-family: monospace; padding-right: 100%">
                  <b-icon
                    scale="1"
                    icon="info-square"
                    class="ml-1"
                    style="margin-top: 2px;"
                  />
                  <span style="margin-left: 10px;">Global Specification</span>
                </kbd>
              </h3>
              <div
                style="margin-left: 20px;"
              >
                <app-info
                  :data="callBResponse.data"
                  :get-geolocation="getGeolocation"
                  :get-new-expire-label="getNewExpireLabel"
                  :current-block-height="daemonBlockCount"
                />
                <h3 class="no-wrap align-items-center justify-content-center mb-1">
                  <kbd class="alert-info d-flex" style="border-radius: 15px; font-family: monospace; padding-right: 100%">
                    <smart-icon
                      scale="1"
                      icon="boxes"
                      class="ml-1"
                      style="margin-top: 1px;"
                    />
                    <span style="margin-left: 10px;">Composition</span>
                  </kbd>
                </h3>
                <b-tabs v-model="activeTabGlobalIndexSpec" content-class="my-1" class="ml-1" pills>
                  <b-tab
                    v-for="(component, index) in normalizeComponents(callBResponse.data)"
                    :key="index"
                  >
                    <template #title>
                      <b-icon icon="box" scale="1" class="mr-1" />
                      {{ component.name }}
                    </template>
                    <transition name="tab-slide" mode="out-in">
                      <div v-if="activeTabGlobalIndexSpec === index" :key="index" class="mb-2">
                        <component-details :component="component" :app-name="callBResponse.data?.name || ''" :index="index" />
                      </div>
                    </transition>
                  </b-tab>
                </b-tabs>
              </div>
            </div>
          </div>
          <div v-else-if="callBResponse.status === 'error'">
            <div class="d-flex align-items-center justify-content-left my-2">
              <b-icon icon="cone-striped" variant="danger" style="margin-right: 8px;" />
              <h5 class="mb-0">
                Global specification not found!
              </h5>
            </div>
          </div>
          <div v-else>
            <div class="d-flex align-items-center justify-content-left my-2">
              <v-icon class="spin-icon" name="spinner" style="margin-right: 8px;" />
              <h5 class="mb-0">
                Global specification loading...
              </h5>
            </div>
          </div>
        </div>
      </b-card>
    </b-tab>
    <b-tab title="Information" :disabled="noInstanceAvailable">
      <b-card class="h-100 d-flex flex-column">
        <!-- Header -->
        <div
          class="mb-1"
          style="
            border: 1px solid #ccc;
            border-radius: 8px;
            height: 45px;
            padding: 12px;
            text-align: left;
            line-height: 0px;
          "
        >
          <h5 class="d-flex align-items-center">
            <b-icon class="mr-1" scale="1.2" icon="info-square-fill" />
            Information
          </h5>
        </div>
        <!-- Loading State -->
        <div v-if="commandExecutingInspect">
          <div style="display: flex; align-items: center;">
            <v-icon class="spin-icon" name="spinner" style="margin-right: 5px;" />
            <h5 style="margin: 0;">
              Loading...
            </h5>
          </div>
        </div>

        <!-- Separate Tabs for Each Component (Version >= 4) -->
        <b-tabs v-if="appSpecification.version >= 4" v-model="activeTabInfo" pills>
          <b-tab
            v-for="(component, index) in callResponseInspect.data"
            :key="index"
            :title="component.name"
          >
            <template #title>
              <b-icon icon="box" scale="1" class="mr-1" />
              {{ component.name }}
            </template>
            <div v-if="component.callData">
              <json-viewer
                :key="activeTabInfo"
                :value="component.callData"
                :expand-depth="5"
                copyable
                boxed
                theme="jv-dark"
              />
            </div>
          </b-tab>
        </b-tabs>

        <!-- Default JSON Viewer for Older Versions -->
        <div v-else>
          <div v-if="callResponseInspect.data && callResponseInspect.data[0]">
            <b-tabs pills>
              <b-tab
                :title="appSpecification.name"
              >
                <json-viewer
                  :value="callResponseInspect.data[0].callData"
                  :expand-depth="5"
                  copyable
                  boxed
                  theme="jv-dark"
                />
              </b-tab>
            </b-tabs>
          </div>
        </div>
      </b-card>
    </b-tab>
    <b-tab title="Monitoring" :disabled="noInstanceAvailable">
      <div class="container">
        <div
          class="d-flex mb-1 align-items-center justify-content-between"
          style="border: 1px solid #ccc; border-radius: 8px; height: 45px; padding-top: 12px; padding-bottom: 4px;  padding-left: 12px;  padding-right: 12px; text-align: left;"
        >
          <h5>
            <b-icon
              class="mr-1"
              scale="1.2"
              icon="bar-chart-fill"
            /> {{ overviewTitle }}
          </h5>
          <b-form-checkbox v-model="enableHistoryStatistics" switch @change="enableHistoryStatisticsChange">
            History Statistics
          </b-form-checkbox>
        </div>
        <!-- Menu -->
        <div class="d-flex flex-container2">
          <div>
            <b-input-group size="sm" class="mb-1">
              <b-input-group-prepend is-text>
                <b-icon icon="app-indicator" />
              </b-input-group-prepend>
              <b-form-select
                v-if="appSpecification?.compose"
                v-model="selectedContainerMonitoring"
                :options="null"
                :disabled="isComposeSingle"
              >
                <b-form-select-option
                  value="null"
                  disabled
                >
                  -- Please select component --
                </b-form-select-option>
                <b-form-select-option
                  v-for="component in appSpecification?.compose"
                  :key="component.name"
                  :value="component.name"
                >
                  {{ component.name }}
                </b-form-select-option>
              </b-form-select>
              <b-form-input
                v-if="!appSpecification?.compose"
                :placeholder="appSpecification.name"
                disabled
              />
              <b-icon v-if="enableHistoryStatistics" icon="arrow-clockwise" :class="['ml-1', 'r']" @click="fetchStats" />
              <b-icon v-if="!enableHistoryStatistics && buttonStats === true" icon="arrow-clockwise" :class="['ml-1', 'r']" @click="startPollingStats(true)" />
            </b-input-group>
            <b-input-group v-if="!enableHistoryStatistics" size="sm" style="width: 120px;">
              <b-input-group-prepend is-text>
                <b-icon
                  v-b-tooltip.hover.top="'Limit the number of data points displayed on the charts.'"
                  v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                  icon="clipboard-data"
                />
              </b-input-group-prepend>
              <b-form-select
                v-model="selectedPoints"
                :options="pointsOptions"
              />
            </b-input-group>
          </div>
          <div v-if="!enableHistoryStatistics">
            <b-input-group size="sm">
              <b-input-group-prepend is-text>
                <b-icon
                  v-b-tooltip.hover.top="'Choose the interval for refreshing data on the charts.'"
                  v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                  icon="clock"
                />
              </b-input-group-prepend>
              <b-form-select
                v-model="refreshRateMonitoring"
                size="sm"
                :options="refreshOptions"
              />
            </b-input-group>
          </div>
          <div v-if="enableHistoryStatistics">
            <b-input-group size="sm">
              <b-input-group-prepend is-text>
                <b-icon
                  v-b-tooltip.hover.top="'Choose the time period to display historical data.'"
                  v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                  icon="calendar-range"
                />
              </b-input-group-prepend>
              <b-form-select v-model="selectedTimeRange" :options="timeOptions" @change="fetchStats" />
            </b-input-group>
          </div>
        </div>
        <!-- Charts Grid -->
        <div class="charts-grid">
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <b-icon
                icon="bar-chart-line"
                style="width: 30px; height: 30px;"
              />
              <span class="chart-title">CPU usage</span>
              <b-icon
                v-b-tooltip.hover.top="'Displays CPU usage over time. Monitoring CPU usage helps identify high load periods, optimize resource allocation, and troubleshoot performance bottlenecks.'"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="ml-1"
                icon="info-circle"
                style="width: 15px; height: 15px;"
              />
            </div>
            <canvas id="cpuChart" />
          </div>
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <b-icon icon="bar-chart-line" style="width: 30px; height: 30px;" />
              <span class="chart-title ml-2">Memory usage</span>
              <b-icon
                v-b-tooltip.hover.top="'Displays memory usage over time. Monitoring memory usage helps identify potential memory leaks, optimize application performance, and.'"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="ml-1"
                icon="info-circle"
                style="width: 15px; height: 15px;"
              />
            </div>
            <canvas id="memoryChart" />
          </div>
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <b-icon
                icon="bar-chart-line"
                style="width: 30px; height: 30px;"
              />
              <span class="chart-title">Network usage (aggregate)</span>
              <b-icon
                v-b-tooltip.hover.top="'Displays network usage over time (TX: Transmit - outgoing data; RX: Receive - incoming data). Key metrics include bandwidth, throughput, and latency. Monitoring helps identify bottlenecks, optimize performance, and ensure efficient data transfer.'"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="ml-1"
                icon="info-circle"
                style="width: 15px; height: 15px;"
              />
            </div>
            <canvas id="networkChart" />
          </div>
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <b-icon
                icon="bar-chart-line"
                style="width: 30px; height: 30px;"
              />
              <span class="chart-title">I/O usage (aggregate)</span>
              <b-icon
                v-b-tooltip.hover.top="'Displays Input/Output operations over time, measuring data transfer to/from storage devices and peripherals. Monitoring I/O helps identify bottlenecks, optimize performance, and ensure responsive system behavior.'"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="ml-1"
                icon="info-circle"
                style="width: 15px; height: 15px;"
              />
            </div>
            <canvas id="ioChart" />
          </div>
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <b-icon
                icon="bar-chart-line"
                style="width: 30px; height: 30px;"
              />
              <span class="chart-title">Persistent Storage</span>
              <b-icon
                v-b-tooltip.hover.top="'Persistent Storage refers to data that is retained across container restarts and updates. It ensures important information is preserved. Monitoring this helps prevent disk space exhaustion and supports efficient data management.'"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="ml-1"
                icon="info-circle"
                style="width: 15px; height: 15px;"
              />
            </div>
            <canvas id="diskPersistentChart" />
          </div>
          <div class="chart-wrapper">
            <div class="chart-title-container">
              <b-icon
                icon="bar-chart-line"
                style="width: 30px; height: 30px;"
              />
              <span class="chart-title">Root Filesystem (rootfs)</span>
              <b-icon
                v-b-tooltip.hover.top="'Root Filesystem refers to the temporary storage used by the container during its lifetime. This data is not retained after the container is stopped or deleted. Monitoring rootfs usage helps avoid disk space issues within the container‚Äôs filesystem.'"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="ml-1"
                icon="info-circle"
                style="width: 15px; height: 15px;"
              />
            </div>
            <canvas id="diskFileSystemChart" />
          </div>
          <div v-if="!enableHistoryStatistics" class="chart-wrapper">
            <div class="chart-title-container mb-2">
              <b-icon
                icon="list-ul"
                style="width: 30px; height: 30px;"
              />
              <span class="chart-title">Processes</span>
              <b-icon
                v-b-tooltip.hover.top="'List of running process in continer.'"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="ml-1"
                icon="info-circle"
                style="width: 15px; height: 15px;"
              />
            </div>
            <b-form-input
              v-model="search"
              placeholder="Search processes..."
              class="mb-2"
            />
            <div class="table-responsive">
              <b-table class="table-monitoring" small responsive show-empty empty-text="No records available." :items="paginatedProcesses" :fields="titles" bordered hover />
            </div>
            <div class="d-flex align-items-center my-1">
              <div class="flex-grow-1 text-center">
                <b-pagination
                  v-if="filteredProcesses.length"
                  v-model="currentPage"
                  pills
                  size="sm"
                  :total-rows="filteredProcesses.length"
                  :per-page="perPage"
                  @change="scrollToPagination"
                />
              </div>
              <div class="d-flex align-items-center ml-3">
                <label class="mr-2 mb-0" style="white-space: nowrap;">Items per page:</label>
                <b-form-select v-model="perPage" :options="perPageOptions" size="sm" class="ml-2" @change="scrollToPagination" />
              </div>
            </div>
          </div>
        </div>
      </div>
    </b-tab>
    <b-tab title="File Changes" :disabled="noInstanceAvailable">
      <b-card>
        <div
          class="mb-1"
          style="
            border: 1px solid #ccc;
            border-radius: 8px;
            height: 45px;
            padding: 12px;
            text-align: left;
            line-height: 0px;
          "
        >
          <h5 class="d-flex align-items-center no-wrap">
            <b-icon
              class="mr-1"
              scale="1.3"
              icon="file-earmark-diff-fill"
            />
            File Changes
            <div class="ml-auto">
              <kbd class="bg-primary mr-1 ml-1" style="border-radius: 15px; font-family: monospace; font-size: 12px;">Kind: 0 = Modified</kbd>
              <kbd class="bg-success mr-1" style="border-radius: 15px; font-family: monospace; font-size: 12px;">Kind: 1 = Added </kbd>
              <kbd class="bg-danger" style="border-radius: 15px; font-family: monospace; font-size: 12px;">Kind: 2 = Deleted</kbd>
            </div>
          </h5>
        </div>
        <div v-if="commandExecutingChanges">
          <div style="display: flex; align-items: center;">
            <v-icon class="spin-icon" name="spinner" style="margin-right: 5px;" />
            <h5 style="margin: 0;">
              Loading...
            </h5>
          </div>
        </div>
        <div v-if="appSpecification.version >= 4">
          <b-tabs v-if="appSpecification.version >= 4" v-model="activeTabFile" pills>
            <b-tab
              v-for="(component, index) in callResponseChanges.data"
              :key="index"
              :title="component.name"
            >
              <template #title>
                <b-icon icon="box" scale="1" class="mr-1" />
                {{ component.name }}
              </template>
              <div v-if="component.callData">
                <json-viewer
                  :key="activeTabFile"
                  :value="component.callData"
                  :expand-depth="5"
                  class="mt-0"
                  copyable
                  boxed
                  theme="jv-dark"
                />
              </div>
            </b-tab>
          </b-tabs>
        </div>
        <div v-else>
          <div v-if="callResponseChanges.data && callResponseChanges.data[0]">
            <b-tabs pills>
              <b-tab
                :title="appSpecification.name"
              >
                <json-viewer
                  :value="callResponseChanges.data[0].callData"
                  :expand-depth="5"
                  copyable
                  boxed
                  theme="jv-dark"
                />
              </b-tab>
            </b-tabs>
          </div>
        </div>
      </b-card>
    </b-tab>
    <b-tab title="Logs" :disabled="noInstanceAvailable">
      <div>
        <div
          class="mb-2"
          style="
            border: 1px solid #ccc;
            border-radius: 8px;
            height: 45px;
            padding: 12px;
            text-align: left;
            line-height: 0px;
          "
        >
          <h5>
            <b-icon
              class="mr-1"
              scale="1.2"
              icon="search"
            /> Logs Management
          </h5>
        </div>
        <b-form class="ml-2 mr-2">
          <div class="flex-container">
            <b-form-group>
              <b-form-group v-if="!appSpecification?.compose" label="Component">
                <div class="d-flex align-items-center">
                  <b-form-input
                    size="sm"
                    :placeholder="appSpecification.name"
                    disabled
                    class="input_s"
                  />
                  <b-icon icon="arrow-clockwise" :class="['ml-1', 'r', { disabled: isDisabled }]" @click="manualFetchLogs" />
                </div>
              </b-form-group>
              <b-form-group v-if="appSpecification?.compose" label="Component">
                <div class="d-flex align-items-center">
                  <b-form-select
                    v-model="selectedApp"
                    class="input_s"
                    :options="null"
                    :disabled="isComposeSingle"
                    size="sm"
                    @change="handleContainerChange"
                  >
                    <b-form-select-option
                      value="null"
                      disabled
                    >
                      -- Please select component --
                    </b-form-select-option>
                    <b-form-select-option
                      v-for="component in appSpecification?.compose"
                      :key="component.name"
                      :value="component.name"
                    >
                      {{ component.name }}
                    </b-form-select-option>
                  </b-form-select>
                  <b-icon icon="arrow-clockwise" :class="['ml-1', 'r', { disabled: isDisabled }]" @click="manualFetchLogs" />
                </div>
              </b-form-group>
              <b-form-group label="Line Count">
                <b-form-input v-model="lineCount" type="number" size="sm" class="input" :disabled="fetchAllLogs" step="10" min="0" />
              </b-form-group>
              <b-form-group label="Logs Since">
                <div class="d-flex align-items-center">
                  <b-form-input
                    v-model="sinceTimestamp"
                    size="sm"
                    type="datetime-local"
                    placeholder="Logs Since"
                    class="input"
                  />
                  <b-icon v-if="sinceTimestamp" icon="x-square" class="ml-1 x" @click="clearDateFilter" />
                </div>
              </b-form-group>
            </b-form-group>

            <b-form-group label="Filter">
              <b-input-group size="sm" class="search_input">
                <b-input-group-prepend is-text>
                  <b-icon icon="funnel-fill" />
                </b-input-group-prepend>
                <b-form-input
                  v-model="filterKeyword"
                  type="search"
                  placeholder="Enter keywords.."
                />
              </b-input-group>
              <b-form-checkbox
                v-model="pollingEnabled"
                class="mt-2"
                switch
                @change="togglePolling"
              >
                Auto-refresh
                <b-icon
                  v-b-tooltip.hover.title="'Enable or disable automatic refreshing of logs every few seconds.'"
                  icon="info-circle"
                  class="icon-tooltip"
                />
              </b-form-checkbox>

              <b-form-checkbox v-model="fetchAllLogs" switch>
                Fetch All Logs
              </b-form-checkbox>
              <b-form-checkbox v-model="displayTimestamps" switch>
                Display Timestamps
              </b-form-checkbox>
              <b-form-checkbox
                v-model="isLineByLineMode"
                switch
              >
                Line Selection
                <b-icon
                  v-b-tooltip.hover.title="'Switch between normal text selection or selecting individual log lines for copying.'"
                  icon="info-circle"
                  class="icon-tooltip"
                />
              </b-form-checkbox>
              <b-form-checkbox
                v-model="autoScroll"
                class="mb-1"
                switch
              >
                Auto-scroll
                <b-icon
                  v-b-tooltip.hover.title="'Enable or disable automatic scrolling to the latest logs.'"
                  icon="info-circle"
                  class="icon-tooltip"
                />
              </b-form-checkbox>
            </b-form-group>
          </div>
        </b-form>
        <div ref="logsContainer" class="code-container" :class="{ 'line-by-line-mode': isLineByLineMode }">
          <button
            v-if="filteredLogs.length > 0"
            ref="copyButton"
            type="button"
            class="log-copy-button ml-2"
            :disabled="copied"
            @click="copyCode"
          >
            <b-icon :icon="copied ? 'check' : 'back'" />
            {{ copied ? 'Copied!' : 'Copy' }}
          </button>
          <button
            v-if="selectedLog.length > 0 && filteredLogs.length > 0"
            type="button"
            class="log-copy-button ml-2"
            @click="unselectText"
          >
            <b-icon icon="exclude" />
            Unselect
          </button>
          <button
            v-if="filteredLogs.length > 0"
            :disabled="downloadingLog"
            type="button"
            class="download-button"
            @click="downloadApplicationLog(selectedApp ? `${selectedApp}_${appSpecification.name}` : appSpecification.name)"
          >
            <b-icon :icon="downloadingLog ? 'arrow-repeat' : 'download'" :class="{ 'spin-icon-l': downloadingLog }" />
            Download
          </button>
          <div v-if="filteredLogs.length > 0">
            <div
              v-for="(log) in filteredLogs"
              :key="extractTimestamp(log)"
              v-sane-html="formatLog(log)"
              class="log-entry"
              :class="{ selected: selectedLog.includes(extractTimestamp(log)) }"
              @click="isLineByLineMode && toggleLogSelection(log)"
            />
          </div>
          <div v-else-if="filterKeyword.trim() !== ''" class="no-matches">
            No log line matching the '{{ filterKeyword }}' filter.
          </div>
          <div v-else-if="noLogs" class="no-matches">
            No log records found.
          </div>
        </div>
      </div>
    </b-tab>
    <b-tab title="Application Control" :disabled="noInstanceAvailable">
      <div
        class="mb-2"
        style="
          border: 1px solid #ccc;
          border-radius: 8px;
          height: 45px;
          padding: 12px;
          text-align: left;
          line-height: 0px;
        "
      >
        <h5>
          <b-icon
            class="mr-1"
            scale="1.2"
            icon="gear-fill"
          /> Application Control
        </h5>
      </div>
      <b-row class="match-height ">
        <b-col xs="6">
          <b-card title="Control">
            <b-card-text class="mb-2">
              General options to control running status of Application.
            </b-card-text>
            <div class="d-flex flex-column align-items-center">
              <b-button
                id="start-app"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Start App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="play-fill" />
                </span>
                <span class="ml-1">Start Application</span>
              </b-button>
              <confirm-dialog
                target="start-app"
                confirm-button="Start App"
                @confirm="startApp(appName)"
              />
              <b-button
                id="stop-app"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Stop App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="stop-fill" />
                </span>
                <span class="ml-1">Stop Application</span>
              </b-button>
              <confirm-dialog
                target="stop-app"
                confirm-button="Stop App"
                @confirm="stopApp(appName)"
              />
              <b-button
                id="restart-app"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Restart App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="arrow-clockwise" />
                </span>
                <span class="ml-1">Restart Application</span>
              </b-button>
              <confirm-dialog
                target="restart-app"
                confirm-button="Restart App"
                @confirm="restartApp(appName)"
              />
            </div>
          </b-card>
        </b-col>
        <b-col xs="6">
          <b-card title="Pause">
            <b-card-text class="mb-2">
              The Pause command suspends all processes in the specified Application.
            </b-card-text>
            <div class="d-flex flex-column align-items-center">
              <b-button
                id="pause-app"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Pause App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="pause-circle-fill" />
                </span>
                <span class="ml-1">Pause Application</span>
              </b-button>
              <confirm-dialog
                target="pause-app"
                confirm-button="Pause App"
                @confirm="pauseApp(appName)"
              />
              <b-button
                id="unpause-app"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Unpause App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="play-circle" />
                </span>
                <span class="ml-1">Unpause Application</span>
              </b-button>
              <confirm-dialog
                target="unpause-app"
                confirm-button="Unpause App"
                @confirm="unpauseApp(appName)"
              />
            </div>
          </b-card>
        </b-col>
        <b-col xs="6">
          <b-card title="Monitoring">
            <b-card-text class="mb-2">
              Controls Application Monitoring
            </b-card-text>
            <div class="d-flex flex-column align-items-center">
              <b-button
                id="start-monitoring"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Start Monitoring"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="play-circle-fill" />
                </span>
                <span class="ml-1">Start Monitoring</span>
              </b-button>
              <confirm-dialog
                target="start-monitoring"
                confirm-button="Start Monitoring"
                @confirm="startMonitoring(appName)"
              />
              <b-button
                id="stop-monitoring"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Stop Monitoring"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="stop-circle-fill" />
                </span>
                <span class="ml-1">Stop Monitoring</span>
              </b-button>
              <confirm-dialog
                target="stop-monitoring"
                confirm-button="Stop Monitoring"
                @confirm="stopMonitoring(appName, false)"
              />
              <b-button
                id="stop-monitoring-delete"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Stop Monitoring and Delete Monitored Data"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="trash-fill" />
                </span>
                <span class="ml-1">Stop & Delete Data</span>
              </b-button>
              <confirm-dialog
                target="stop-monitoring-delete"
                confirm-button="Stop Monitoring"
                @confirm="stopMonitoring(appName, true)"
              />
            </div>
          </b-card>
        </b-col>
      </b-row>
      <b-row class="match-height ">
        <b-col xs="6">
          <b-card title="Redeploy">
            <b-card-text class="mb-2">
              Reinstall your application from the docker repo. Soft option, keeps data on the instance, Hard option deletes everything and gets installed like a fresh install.
            </b-card-text>
            <div class="text-center">
              <b-button
                id="redeploy-app-soft"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Soft Redeploy App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="arrow-repeat" />
                </span>
                <span class="ml-1">Soft Reinstall</span>
              </b-button>
              <confirm-dialog
                target="redeploy-app-soft"
                confirm-button="Redeploy"
                @confirm="redeployAppSoft(appName)"
              />
              <b-button
                id="redeploy-app-hard"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Hard Redeploy App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="recycle" />
                </span>
                <span class="ml-1">Hard Reinstall</span>
              </b-button>
              <confirm-dialog
                target="redeploy-app-hard"
                confirm-button="Redeploy"
                @confirm="redeployAppHard(appName)"
              />
            </div>
          </b-card>
        </b-col>
        <b-col xs="6">
          <b-card title="Remove">
            <b-card-text class="mb-2">
              Stops, uninstalls and removes all App data from this Flux node.
            </b-card-text>
            <div class="text-center">
              <b-button
                id="remove-app"
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-dark"
                aria-label="Remove App"
                class="mx-1 my-1 align-items-center cb"
              >
                <span class="icon-circle">
                  <b-icon icon="trash-fill" />
                </span>
                <span class="ml-1">Remove Application</span>
              </b-button>
              <confirm-dialog
                target="remove-app"
                confirm-button="Remove App"
                @confirm="removeApp(appName)"
              />
            </div>
          </b-card>
        </b-col>
      </b-row>
    </b-tab>
    <b-tab
      title="Component Control"
      :title-item-class="(appSpecification?.version <= 3 || (appSpecification?.version > 3 && appSpecification?.compose?.length === 1)) ? 'd-none' : ''"
      :disabled="noInstanceAvailable"
    >
      <div
        class="mb-1"
        style="
          border: 1px solid #ccc;
          border-radius: 8px;
          height: 45px;
          padding: 12px;
          text-align: left;
          line-height: 0px;
        "
      >
        <h5>
          <b-icon
            class="mr-1"
            scale="1.2"
            icon="grid"
          /> Component Control
        </h5>
      </div>
      <b-tabs content-class="mt-1" pills>
        <b-tab
          v-for="(component, index) in appSpecification.compose"
          :key="index"
          :title="component.name"
        >
          <template #title>
            <b-icon icon="box" scale="1" class="mr-1" />
            {{ component.name }}
          </template>
          <b-row class="match-height">
            <!-- Control Card -->
            <b-col xs="6">
              <b-card title="Control" class="text-center">
                <b-card-text class="mb-1 text-center limited-width">
                  Control and manage the component running state.
                </b-card-text>
                <div class="d-flex flex-column align-items-center">
                  <b-button
                    :id="`start-app-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Start Component"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="play-fill" />
                    </span>
                    <span class="ml-1">Start Component</span>
                  </b-button>
                  <confirm-dialog
                    :target="`start-app-${component.name}_${appSpecification.name}`"
                    confirm-button="Start Component"
                    @confirm="startApp(`${component.name}_${appSpecification.name}`)"
                  />

                  <b-button
                    :id="`stop-app-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Stop Component"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="stop-fill" />
                    </span>
                    <span class="ml-1">Stop Component</span>
                  </b-button>
                  <confirm-dialog
                    :target="`stop-app-${component.name}_${appSpecification.name}`"
                    confirm-button="Stop Component"
                    @confirm="stopApp(`${component.name}_${appSpecification.name}`)"
                  />

                  <b-button
                    :id="`restart-app-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Restart Component"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="arrow-clockwise" />
                    </span>
                    <span class="ml-1">Restart Component</span>
                  </b-button>
                  <confirm-dialog
                    :target="`restart-app-${component.name}_${appSpecification.name}`"
                    confirm-button="Restart Component"
                    @confirm="restartApp(`${component.name}_${appSpecification.name}`)"
                  />
                </div>
              </b-card>
            </b-col>
            <!-- Pause Card -->
            <b-col xs="6">
              <b-card title="Pause" class="text-center">
                <b-card-text class="mb-1 text-center limited-width">
                  Pauses all processes in the selected component.
                </b-card-text>
                <div class="d-flex flex-column align-items-center">
                  <b-button
                    :id="`pause-app-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Pause Component"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="pause-circle-fill" />
                    </span>
                    <span class="ml-1">Pause Component</span>
                  </b-button>
                  <confirm-dialog
                    :target="`pause-app-${component.name}_${appSpecification.name}`"
                    confirm-button="Pause Component"
                    @confirm="pauseApp(`${component.name}_${appSpecification.name}`)"
                  />

                  <b-button
                    :id="`unpause-app-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Unpause Component"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="play-circle" />
                    </span>
                    <span class="ml-1">Unpause Component</span>
                  </b-button>
                  <confirm-dialog
                    :target="`unpause-app-${component.name}_${appSpecification.name}`"
                    confirm-button="Unpause Component"
                    @confirm="unpauseApp(`${component.name}_${appSpecification.name}`)"
                  />
                </div>
              </b-card>
            </b-col>
            <b-col xs="6">
              <b-card title="Monitoring" class="text-center">
                <b-card-text class="mb-1 text-center limited-width">
                  Monitor component activity and manage its data collection.
                </b-card-text>
                <div class="d-flex flex-column align-items-center">
                  <b-button
                    :id="`start-monitoring-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Start Monitoring"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="play-circle-fill" />
                    </span>
                    <span class="ml-1">Start Monitoring</span>
                  </b-button>
                  <confirm-dialog
                    :target="`start-monitoring-${component.name}_${appSpecification.name}`"
                    confirm-button="Start Monitoring"
                    @confirm="startMonitoring(`${component.name}_${appSpecification.name}`)"
                  />
                  <b-button
                    :id="`stop-monitoring-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Stop Monitoring"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="stop-circle-fill" />
                    </span>
                    <span class="ml-1">Stop Monitoring</span>
                  </b-button>
                  <confirm-dialog
                    :target="`stop-monitoring-${component.name}_${appSpecification.name}`"
                    confirm-button="Stop Monitoring"
                    @confirm="stopMonitoring(`${component.name}_${appSpecification.name}`, false)"
                  />
                  <b-button
                    :id="`stop-monitoring-delete-${component.name}_${appSpecification.name}`"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-dark"
                    aria-label="Stop Monitoring and Delete Data"
                    class="mx-1 my-1 d-flex align-items-center cb"
                  >
                    <span class="icon-circle">
                      <b-icon icon="trash-fill" />
                    </span>
                    <span class="ml-1">Stop & Delete Data</span>
                  </b-button>
                  <confirm-dialog
                    :target="`stop-monitoring-delete-${component.name}_${appSpecification.name}`"
                    confirm-button="Stop Monitoring"
                    @confirm="stopMonitoring(`${component.name}_${appSpecification.name}`, true)"
                  />
                </div>
              </b-card>
            </b-col>
          </b-row>
        </b-tab>
      </b-tabs>
    </b-tab>
    <b-tab
      title="Backup/Restore"
      :disabled="!appSpecification?.compose || noInstanceAvailable"
    >
      <div>
        <b-card no-body>
          <b-tabs
            pills
            card
          >
            <b-tab
              title="Backup"
              style="margin: 0; padding-top: 0px;"
            >
              <div
                class="mb-2"
                style="
                  border: 1px solid #ccc;
                  border-radius: 8px;
                  height: 45px;
                  padding: 12px;
                  line-height: 0px;
                "
              >
                <h5>
                  <b-icon
                    class="mr-1"
                    icon="back"
                  /> Manual Backup Container Data
                </h5>
              </div>
              <div class="mb-2">
                <b-form-group>
                  <b-form-tags
                    id="tags-component-select"
                    v-model="selectedBackupComponents"
                    size="lg"
                    add-on-change
                    no-outer-focus
                  >
                    <template
                      #default="{
                        tags,
                        inputAttrs,
                        inputHandlers,
                        disabled,
                        removeTag,
                      }"
                    >
                      <ul
                        v-if="tags.length > 0"
                        class="list-inline d-inline-block mb-2"
                      >
                        <li
                          v-for="tag in tags"
                          :key="tag"
                          class="list-inline-item"
                        >
                          <b-form-tag
                            :title="tag"
                            :disabled="disabled"
                            variant="primary"
                            @remove="removeTag(tag)"
                          >
                            {{ tag }}
                          </b-form-tag>
                        </li>
                      </ul>
                      <b-form-select
                        v-bind="inputAttrs"
                        :disabled="disabled || componentAvailableOptions?.length === 0 || components?.length === 1"
                        :options="componentAvailableOptions"
                        v-on="inputHandlers"
                      >
                        <template #first>
                          <option
                            disabled
                            value=""
                          >
                            Select the application component(s) you would like to backup
                          </option>
                        </template>
                      </b-form-select>
                    </template>
                  </b-form-tags>
                </b-form-group>
              </div>
              <b-button
                v-if="components?.length > 1"
                class="mr-1"
                variant="outline-primary"
                @click="addAllTags"
              >
                <b-icon
                  scale="0.9"
                  icon="check2-square"
                  class="mr-1"
                />
                Select all
              </b-button>
              <b-button
                :disabled="selectedBackupComponents.length === 0 || backupProgress === true"
                variant="outline-primary"
                style="white-space: nowrap;"
                @click="createBackup(appName, selectedBackupComponents)"
              >
                <b-icon
                  scale="0.9"
                  icon="back"
                  class="mr-1"
                />
                Create backup
              </b-button>

              <br />
              <div class="mt-1">
                <div
                  v-if="backupProgress === true"
                  class="mb-2 mt-2 w-100"
                  style="
                    margin: 0 auto;
                    padding: 12px;
                    border: 1px solid #eaeaea;
                    border-radius: 8px;
                    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    text-align: center;
                  "
                >
                  <h5 style="font-size: 16px; margin-bottom: 5px;">
                    <span v-if="backupProgress === true">
                      <b-spinner small /> {{ tarProgress }}
                    </span>
                  </h5>
                  <b-progress
                    v-for="(item, index) in computedFileProgress"
                    v-if="item.progress > 0"
                    :key="index"
                    class="mt-1"
                    style="height: 16px;"
                    :max="100"
                  >
                    <b-progress-bar
                      :value="item.progress"
                      :label="`${item.fileName} - ${item.progress.toFixed(2)}%`"
                      style="font-size: 14px;"
                    />
                  </b-progress>
                </div>
              </div>

              <div v-if="backupList?.length > 0 && backupProgress === false">
                <div class="mb-1 text-right">
                  <b-dropdown
                    class="mr-1"
                    text="Select"
                    variant="outline-primary"
                    style="max-height: 38px; min-width: 100px; white-space: nowrap;"
                  >
                    <template #button-content>
                      <b-icon
                        scale="0.9"
                        icon="check2-square"
                        class="mr-1"
                      />
                      Select
                    </template>
                    <b-dropdown-item
                      :disabled="backupToUpload?.length === backupList?.length"
                      @click="selectAllRows"
                    >
                      <b-icon
                        scale="0.9"
                        icon="check2-circle"
                        class="mr-1"
                      />
                      Select all
                    </b-dropdown-item>
                    <b-dropdown-item
                      :disabled="backupToUpload?.length === 0"
                      @click="clearSelected"
                    >
                      <b-icon
                        scale="0.7"
                        icon="square"
                        class="mr-1"
                      />
                      Select none
                    </b-dropdown-item>
                  </b-dropdown>
                  <b-dropdown
                    class="mr-1"
                    text="Download"
                    variant="outline-primary"
                    style="max-height: 38px; min-width: 100px; white-space: nowrap;"
                  >
                    <template #button-content>
                      <b-icon
                        scale="0.9"
                        icon="download"
                        class="mr-1"
                      />
                      Download
                    </template>
                    <b-dropdown-item
                      :disabled="backupToUpload?.length === 0"
                      @click="downloadAllBackupFiles(backupToUpload)"
                    >
                      <b-icon
                        scale="0.7"
                        icon="download"
                        class="mr-1"
                      />
                      Download selected
                    </b-dropdown-item>
                    <b-dropdown-item @click="downloadAllBackupFiles(backupList)">
                      <b-icon
                        scale="0.7"
                        icon="download"
                        class="mr-1"
                      />
                      Download all
                    </b-dropdown-item>
                  </b-dropdown>

                  <b-button
                    variant="outline-danger"
                    style="max-height: 38px; min-width: 100px; white-space: nowrap;"
                    @click="deleteLocalBackup(null, backupList)"
                  >
                    <b-icon
                      scale="0.9"
                      icon="trash"
                      class="mr-1"
                    />
                    Remove all
                  </b-button>
                </div>
                <b-table
                  v-if="backupList?.length > 0"
                  ref="selectableTable"
                  class="mb-0"
                  :items="backupList"
                  :fields="[
                    ...localBackupTableFields,
                    {
                      key: 'actions',
                      label: 'Actions',
                      thStyle: { width: '5%' },
                      class: 'text-center',
                    },
                  ]"
                  stacked="md"
                  show-empty
                  bordered
                  select-mode="multi"
                  selectable
                  selected-variant="outline-dark"
                  hover
                  small
                  @row-selected="onRowSelected"
                >
                  <template #thead-top>
                    <b-tr>
                      <b-td
                        colspan="6"
                        class="text-center"
                      >
                        <b>
                          List of available backups on the local machine (backups are automatically deleted 24 hours after creation)
                        </b>
                      </b-td>
                    </b-tr>
                  </template>

                  <template #cell(create)="row">
                    {{ formatDateTime(row.item.create) }}
                  </template>
                  <template #cell(expire)="row">
                    {{ formatDateTime(row.item.create, true) }}
                  </template>
                  <template #cell(isActive)="{ rowSelected }">
                    <template v-if="rowSelected">
                      <span
                        style="color: green"
                        aria-hidden="true"
                      >
                        <b-icon
                          icon="check-square-fill"
                          scale="1"
                          variant="success"
                        /></span>
                      <span class="sr-only">Selected</span>
                    </template>
                    <template v-else>
                      <span
                        style="color: white"
                        aria-hidden="true"
                      >
                        <b-icon
                          icon="square"
                          scale="1"
                          variant="secondary"
                        /></span>
                      <span class="sr-only">Not selected</span>
                    </template>
                  </template>
                  <template #cell(file_size)="row">
                    {{ addAndConvertFileSizes(row.item.file_size) }}
                  </template>
                  <template #cell(actions)="row">
                    <div class="d-flex justify-content-center align-items-center">
                      <b-button
                        :id="`delete-local-backup-${row.item.component}_${backupList[row.index].create}`"
                        v-b-tooltip.hover.top="'Remove file'"
                        variant="outline-danger"
                        class="d-flex justify-content-center align-items-center mr-1 custom-button"
                      >
                        <b-icon
                          class="d-flex justify-content-center align-items-center"
                          scale="0.9"
                          icon="trash"
                        />
                      </b-button>
                      <confirm-dialog
                        :target="`delete-local-backup-${row.item.component}_${backupList[row.index].create}`"
                        confirm-button="Remove File"
                        @confirm="deleteLocalBackup(row.item.component, backupList, backupList[row.index].file)"
                      />
                      <b-button
                        v-b-tooltip.hover.top="'Download file'"
                        variant="outline-primary"
                        class="d-flex justify-content-center align-items-center custom-button"
                        @click="downloadAllBackupFiles([{ component: row.item.component, file: backupList[row.index].file }])"
                      >
                        <b-icon
                          class="d-flex justify-content-center align-items-center"
                          scale="1"
                          icon="cloud-arrow-down"
                        />
                      </b-button>
                    </div>
                  </template>
                </b-table>
                <span style="font-size: 0.9rem;">Select application component(s) you would like to upload</span>
                <b-card-text v-if="showProgressBar">
                  <div class="mt-1">
                    <div
                      v-if="fileProgress.length > 0"
                      class="mb-2 mt-2 w-100"
                      style="
                        margin: 0 auto;
                        padding: 12px;
                        border: 1px solid #eaeaea;
                        border-radius: 8px;
                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                        text-align: center;
                      "
                    >
                      <h5 style="font-size: 16px; margin-bottom: 5px;">
                        <span v-if="!allDownloadsCompleted()">
                          <b-spinner small /> Downloading...
                        </span>
                        <span v-else>
                          Download Completed
                        </span>
                      </h5>
                      <b-progress
                        v-for="(item, index) in computedFileProgress"
                        v-if="item.progress > 0"
                        :key="index"
                        class="mt-1"
                        style="height: 16px;"
                        :max="100"
                      >
                        <b-progress-bar
                          :value="item.progress"
                          :label="`${item.fileName} - ${item.progress.toFixed(2)}%`"
                          style="font-size: 14px;"
                        />
                      </b-progress>
                    </div>
                  </div>
                </b-card-text>
                <div
                  v-if="backupList?.length > 0"
                  class="mt-2"
                >
                  <div
                    class="mb-2 mt-3"
                    style="
                      border: 1px solid #ccc;
                      border-radius: 8px;
                      height: 45px;
                      padding: 12px;
                      line-height: 0px;
                    "
                  >
                    <h5><b-icon icon="gear-fill" /> Choose your storage method</h5>
                  </div>

                  <b-form-radio-group
                    id="btn-radios-2"
                    v-model="selectedStorageMethod"
                    :options="storageMethod"
                    button-variant="outline-primary"
                    name="radio-btn-outline"
                    :disable="storageMethod"
                    buttons
                  />
                  <div v-if="selectedStorageMethod === 'flux'">
                    <div
                      v-if="sigInPrivilage === true"
                      class="mb-2"
                    >
                      <ul class="mt-2" style="font-size: 0.9rem;">
                        <li>Free FluxDrive backups! Up to 10GB total to use per user</li>
                        <li>FluxDrive backups can be downloaded on Restore page</li>
                      </ul>
                      <b-button
                        :disabled="uploadProgress === true || backupToUpload.length === 0"
                        class="mt-2"
                        block
                        variant="outline-primary"
                        @click="uploadToFluxDrive()"
                      >
                        <b-icon
                          scale="1.2"
                          icon="cloud-arrow-up"
                          class="mr-1"
                        />
                        Upload Selected Components To FluxDrive
                      </b-button>
                    </div>
                    <b-button
                      v-if="sigInPrivilage === false"
                      variant="outline-primary"
                      class="mt-1 w-100"
                      @click="removeAllBackup"
                    >
                      <b-icon
                        scale="1.5"
                        icon="cloud-arrow-up"
                        class="mr-1"
                      />
                      Export
                    </b-button>
                  </div>

                  <div v-if="selectedStorageMethod === 'google'">
                    <b-button
                      variant="outline-primary"
                      class="mt-1 w-100"
                      @click="removeAllBackup"
                    >
                      <b-icon
                        scale="1.5"
                        icon="cloud-arrow-up"
                        class="mr-1"
                      />
                      Export
                    </b-button>
                  </div>
                  <b-card-text v-if="showUploadProgressBar">
                    <div class="mt-1">
                      <div
                        v-if="fileProgress.length > 0"
                        class="mb-2 mt-2 w-100"
                        style="
                          margin: 0 auto;
                          padding: 12px;
                          border: 1px solid #eaeaea;
                          border-radius: 8px;
                          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                          text-align: center;
                        "
                      >
                        <h5 style="font-size: 16px; margin-bottom: 5px;">
                          <span>
                            <b-spinner small /> {{ uploadStatus }}
                          </span>
                        </h5>
                        <b-progress
                          v-for="(item, index) in computedFileProgress"
                          v-if="item.progress > 0"
                          :key="index"
                          class="mt-1"
                          style="height: 16px;"
                          :max="100"
                        >
                          <b-progress-bar
                            :value="item.progress"
                            :label="`${item.fileName} - ${item.progress.toFixed(2)}%`"
                            style="font-size: 14px;"
                          />
                        </b-progress>
                      </div>
                    </div>
                  </b-card-text>
                  <b-card-text v-if="showFluxDriveProgressBar">
                    <div class="mt-1">
                      <div
                        v-if="fileProgressFD.length > 0"
                        class="mb-2 mt-2 w-100"
                        style="
                          margin: 0 auto;
                          padding: 12px;
                          border: 1px solid #eaeaea;
                          border-radius: 8px;
                          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                          text-align: center;
                        "
                      >
                        <h5 style="font-size: 16px; margin-bottom: 5px;">
                          <span>
                            <b-spinner small /> {{ fluxDriveUploadStatus }}
                          </span>
                        </h5>
                        <b-progress
                          v-for="(item, index) in computedFileProgressFD"
                          v-if="item.progress > 0"
                          :key="index"
                          class="mt-1"
                          style="height: 16px;"
                          :max="100"
                        >
                          <b-progress-bar
                            :value="item.progress"
                            :label="`${item.fileName} - ${item.progress.toFixed(2)}%`"
                            style="font-size: 14px;"
                          />
                        </b-progress>
                      </div>
                    </div>
                  </b-card-text>
                </div>
              </div>
            </b-tab>
            <b-tab
              title="Restore"
              style="margin: 0; padding-top: 0px;"
              @click="handleRadioClick"
            >
              <div
                class="mb-2"
                style="
                  border: 1px solid #ccc;
                  border-radius: 8px;
                  height: 45px;
                  padding: 12px;
                  line-height: 0px;
                "
              >
                <h5>
                  <b-icon
                    class="mr-1"
                    scale="1.4"
                    icon="cloud-download"
                  /> Select restore method
                </h5>
              </div>
              <b-form-group class="mb-2">
                <b-row>
                  <b-col
                    class="d-flex align-items-center"
                    style="height: 38px;"
                  >
                    <b-form-radio-group
                      id="btn-radios-2"
                      v-model="selectedRestoreOption"
                      :options="restoreOptions"
                      :disable="restoreOptions"
                      button-variant="outline-primary"
                      name="radio-btn-outline"
                      buttons
                      style="max-height: 38px; min-width: 100px; white-space: nowrap;"
                      @change="handleRadioClick"
                    />
                  </b-col>

                  <b-col
                    class="text-right"
                    style="height: 38px;"
                  >
                    <b-button
                      v-if="selectedRestoreOption === 'FluxDrive'"
                      variant="outline-success"
                      style="max-height: 38px; min-width: 100px; white-space: nowrap;"
                      @click="getFluxDriveBackupList"
                    >
                      <b-icon
                        class="mr-1"
                        scale="1.2"
                        icon="arrow-repeat"
                      />Refresh
                    </b-button>
                  </b-col>
                </b-row>
              </b-form-group>
              <div v-if="selectedRestoreOption === 'FluxDrive'">
                <div v-if="sigInPrivilage === true">
                  <div>
                    <b-input-group class="mb-2">
                      <b-input-group-prepend is-text>
                        <b-icon icon="funnel-fill" />
                      </b-input-group-prepend>

                      <b-form-select
                        v-model="nestedTableFilter"
                        :options="restoreComponents"
                      />
                    </b-input-group>
                  </div>
                  <b-table
                    :key="tableBackup"
                    :items="checkpoints"
                    :fields="backupTableFields"
                    stacked="md"
                    show-empty
                    bordered
                    small
                    empty-text="No records available. Please export your backup to FluxDrive."
                    :sort-by.sync="sortbackupTableKey"
                    :sort-desc.sync="sortbackupTableDesc"
                    :tbody-tr-class="rowClassFluxDriveBackups"
                    @filtered="onFilteredBackup"
                  >
                    <template #thead-top>
                      <b-tr>
                        <b-td
                          colspan="6"
                          variant="dark"
                          class="text-center"
                        >
                          <b-icon
                            scale="1.2"
                            icon="back"
                            class="mr-2"
                          /><b>Backups Inventory</b>
                        </b-td>
                      </b-tr>
                    </template>
                    <template #cell(actions)="row">
                      <div class="d-flex justify-content-center align-items-center">
                        <b-button
                          :id="`remove-checkpoint-${row.item.timestamp}`"
                          v-b-tooltip.hover.top="'Remove Backup(s)'"
                          variant="outline-danger"
                          class="d-flex justify-content-center align-items-center mr-1"
                          style="width: 15px; height: 25px"
                        >
                          <b-icon
                            class="d-flex justify-content-center align-items-center"
                            scale="0.9"
                            icon="trash"
                          />
                        </b-button>
                        <confirm-dialog
                          :target="`remove-checkpoint-${row.item.timestamp}`"
                          confirm-button="Remove Backup(s)"
                          @confirm="deleteRestoreBackup(row.item.component, checkpoints, row.item.timestamp)"
                        />
                        <b-button
                          v-b-tooltip.hover.top="'Add all to Restore List'"
                          variant="outline-primary"
                          class="d-flex justify-content-center align-items-center"
                          style="width: 15px; height: 25px"
                          @click="addAllBackupComponents(row.item.timestamp)"
                        >
                          <b-icon
                            class="d-flex justify-content-center align-items-center"
                            scale="0.9"
                            icon="save"
                          />
                        </b-button>
                      </div>
                    </template>
                    <template #cell(timestamp)="row">
                      <kbd class="alert-info no-wrap"><b-icon scale="1.2" icon="hdd" />&nbsp;&nbsp;backup_{{ row.item.timestamp }}</kbd>
                    </template>
                    <template #cell(time)="row">
                      {{ formatDateTime(row.item.timestamp) }}
                    </template>
                    <template #row-details="row">
                      <b-table
                        :key="tableBackup"
                        stacked="md"
                        show-empty
                        bordered
                        hover
                        small
                        class="backups-table"
                        :items="row.item.components.filter(component =>
                          Object.values(component).some(value =>
                            String(value).toLowerCase().includes(nestedTableFilter.toLowerCase()),
                          ),
                        )"
                        :fields="componentsTable1"
                      >
                        <template #cell(file_url)="nestedRow">
                          <div class="ellipsis-wrapper">
                            <b-link
                              :href="nestedRow.item.file_url"
                              target="_blank"
                              rel="noopener noreferrer"
                            >
                              {{ nestedRow.item.file_url }}
                            </b-link>
                          </div>
                        </template>
                        <template #cell(file_size)="nestedRow">
                          {{ addAndConvertFileSizes(nestedRow.item.file_size) }}
                        </template>
                        <template #cell(actions)="nestedRow">
                          <b-button
                            v-b-tooltip.hover.top="'Add to Restore List'"
                            class="d-flex justify-content-center align-items-center"
                            style="
                              margin: auto;
                              width: 95px;
                              height: 25px;
                              display: flex;
                            "
                            variant="outline-primary"
                            @click="addComponent(nestedRow.item, row.item.timestamp)"
                          >
                            <b-icon
                              class="d-flex justify-content-center align-items-center"
                              scale="0.7"
                              icon="plus-lg"
                            />
                          </b-button>
                        </template>
                      </b-table>
                    </template>
                  </b-table>
                  <b-table
                    v-if="newComponents.length > 0"
                    :items="newComponents"
                    :fields="[...newComponentsTableFields, {
                      key: 'actions', label: 'Actions', thStyle: { width: '20%' }, class: 'text-center',
                    }]"
                    stacked="md"
                    show-empty
                    bordered
                    small
                    class="mt-1 backups-table"
                  >
                    <template #thead-top>
                      <b-tr>
                        <b-td
                          colspan="6"
                          variant="dark"
                          class="text-center"
                        >
                          <b-icon
                            scale="1.2"
                            icon="life-preserver"
                            class="mr-1"
                          /><b>Restore Overview</b>
                        </b-td>
                      </b-tr>
                    </template>
                    <template #cell(timestamp)="row">
                      {{ formatDateTime(row.item.timestamp) }}
                    </template>
                    <template #cell(file_url)="row">
                      <div class="ellipsis-wrapper">
                        <b-link
                          :href="row.item.file_url"
                          target="_blank"
                          rel="noopener noreferrer"
                        >
                          {{ row.item.file_url }}
                        </b-link>
                      </div>
                    </template>
                    <template #cell(file_size)="row">
                      {{ addAndConvertFileSizes(row.item.file_size) }}
                    </template>
                    <template #cell(actions)="row">
                      <div class="d-flex justify-content-center align-items-center">
                        <b-button
                          v-b-tooltip.hover.top="'Remove restore job'"
                          variant="outline-danger"
                          class="d-flex justify-content-center align-items-center"
                          style="width: 95px; height: 25px"
                          @click="deleteItem(row.index, newComponents)"
                        >
                          <b-icon
                            class="d-flex justify-content-center align-items-center"
                            scale="0.9"
                            icon="trash"
                          />
                        </b-button>
                      </div>
                    </template>
                    <template #custom-foot>
                      <b-tr>
                        <b-td
                          colspan="3"
                          variant="dark"
                          class="text-right"
                        />
                        <b-td
                          colspan="2"
                          variant="dark"
                          style="text-align: center; vertical-align: middle;"
                        >
                          <b-icon
                            class="mr-2"
                            icon="hdd"
                            scale="1.4"
                          /> {{ addAndConvertFileSizes(totalArchiveFileSize(newComponents)) }}
                        </b-td>
                      </b-tr>
                    </template>
                  </b-table>
                  <b-alert
                    v-model="showTopFluxDrive"
                    class="mt-1 rounded-0 d-flex align-items-center justify-content-center"
                    style="z-index: 1000;"
                    :variant="alertVariant"
                    solid="true"
                    dismissible
                  >
                    <h5 class="mt-1 mb-1">
                      {{ alertMessage }}
                    </h5>
                  </b-alert>
                  <b-button
                    v-if="newComponents?.length > 0 && !restoringFromFluxDrive"
                    class="mt-2"
                    block
                    variant="outline-primary"
                    @click="restoreFromFluxDrive(newComponents)"
                  >
                    <b-icon
                      icon="arrow-clockwise"
                      scale="1.2"
                      class="mr-1"
                    />Restore
                  </b-button>
                  <div
                    v-if="restoringFromFluxDrive === true"
                    class="mb-2 mt-2 w-100"
                    style="
                      margin: 0 auto;
                      padding: 12px;
                      border: 1px solid #eaeaea;
                      border-radius: 8px;
                      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                      text-align: center;
                    "
                  >
                    <h5 style="font-size: 16px; margin-bottom: 5px;">
                      <span v-if="restoringFromFluxDrive === true">
                        <b-spinner small /> {{ restoreFromFluxDriveStatus }}
                      </span>
                    </h5>
                  </div>
                </div>
              </div>

              <div v-if="selectedRestoreOption === 'Upload File'">
                <div>
                  <b-input-group class="mb-0">
                    <b-input-group-prepend is-text>
                      <b-icon icon="folder-plus" />
                    </b-input-group-prepend>

                    <b-form-select
                      v-model="restoreRemoteFile"
                      :options="components"
                      style="border-radius: 0"
                      :disabled="remoteFileComponents"
                    >
                      <template #first>
                        <b-form-select-option
                          :value="null"
                          disabled
                        >
                          - Select component -
                        </b-form-select-option>
                      </template>
                    </b-form-select>

                    <b-input-group-append>
                      <b-button
                        v-b-tooltip.hover.top="'Choose file to upload'"
                        :disabled="restoreRemoteFile === null"
                        text="Button"
                        size="sm"
                        variant="outline-primary"
                        @click="addRemoteFile"
                      >
                        <b-icon
                          icon="cloud-arrow-up"
                          scale="1.5"
                        />
                      </b-button>
                    </b-input-group-append>
                  </b-input-group>
                </div>
                <div>
                  <input
                    id="file-selector"
                    ref="fileselector"
                    class="flux-share-upload-input"
                    type="file"
                    style="display: none;"
                    @input="handleFiles"
                  >
                </div>
                <b-alert
                  v-model="showTopUpload"
                  class="mt-1 rounded-0 d-flex align-items-center justify-content-center"
                  style="z-index: 1000;"
                  :variant="alertVariant"
                  solid="true"
                  dismissible
                >
                  <h5 class="mt-1 mb-1">
                    {{ alertMessage }}
                  </h5>
                </b-alert>
                <div
                  v-if="files?.length > 0"
                  class="d-flex justify-content-between mt-2"
                >
                  <b-table
                    class="b-table"
                    small
                    bordered
                    size="sm"
                    :items="files"
                    :fields="computedRestoreUploadFileFields"
                  >
                    <template #thead-top>
                      <b-tr>
                        <b-td
                          colspan="6"
                          variant="dark"
                          class="text-center"
                        >
                          <b-icon
                            scale="1.2"
                            icon="life-preserver"
                            class="mr-1"
                          /><b>Restore Overview</b>
                        </b-td>
                      </b-tr>
                    </template>
                    <template #cell(file)="data">
                      <div class="table-cell">
                        {{ data.value }}
                      </div>
                    </template>
                    <template #cell(file_size)="data">
                      <div class="table-cell no-wrap">
                        {{ addAndConvertFileSizes(data.value) }}
                      </div>
                    </template>
                    <template #cell(actions)="data">
                      <div class="d-flex justify-content-center align-items-center">
                        <b-button
                          v-b-tooltip.hover.top="'Remove restore job'"
                          variant="outline-danger"
                          class="d-flex justify-content-center align-items-center"
                          style="width: 15px; height: 25px"
                          @click="deleteItem(data.index, files, data.item.file, 'upload')"
                        >
                          <b-icon
                            class="d-flex justify-content-center align-items-center"
                            scale="0.9"
                            icon="trash"
                          />
                        </b-button>
                      </div>
                    </template>
                    <template #custom-foot>
                      <b-tr>
                        <b-td
                          colspan="2"
                          variant="dark"
                          class="text-right"
                        />
                        <b-td
                          colspan="2"
                          variant="dark"
                          style="text-align: center; vertical-align: middle;"
                        >
                          <b-icon
                            class="mr-1"
                            icon="hdd"
                            scale="1.4"
                          />{{ addAndConvertFileSizes(files) }}
                        </b-td>
                      </b-tr>
                    </template>
                  </b-table>
                </div>
                <div class="mt-2">
                  <div
                    v-if="restoreFromUpload"
                    class="mb-2 mt-2 w-100"
                    style="
                      margin: 0 auto;
                      padding: 12px;
                      border: 1px solid #eaeaea;
                      border-radius: 8px;
                      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    "
                  >
                    <h5 style="font-size: 16px; margin-bottom: 5px; text-align: center;">
                      <span v-if="restoreFromUpload">
                        <b-spinner small /> {{ restoreFromUploadStatus }}
                      </span>
                    </h5>
                    <div
                      v-for="file in files"
                      v-if="file.uploading"
                      :key="file.file_name"
                      class="upload-item mb-1"
                    >
                      <div :class="file.uploading ? '' : 'hidden'">
                        {{ file.file_name }}
                      </div>
                      <b-progress
                        max="100"
                        height="15px"
                      >
                        <b-progress-bar
                          :value="file.progress"
                          :label="`${file.progress.toFixed(2)}%`"
                          :class="file.uploading ? '' : 'hidden'"
                        />
                      </b-progress>
                    </div>
                  </div>
                </div>
                <b-button
                  v-if="files?.length > 0 && restoreFromUploadStatus === ''"
                  class="mt-2"
                  block
                  variant="outline-primary"
                  @click="startUpload()"
                >
                  <b-icon
                    icon="arrow-clockwise"
                    scale="1.1"
                    class="mr-1"
                  />Restore
                </b-button>
              </div>
              <div v-if="selectedRestoreOption === 'Remote URL'">
                <div>
                  <b-input-group class="mb-0">
                    <b-input-group-prepend is-text>
                      <b-icon icon="globe" />
                    </b-input-group-prepend>

                    <b-form-input
                      v-model="restoreRemoteUrl"
                      :state="urlValidationState"
                      type="url"
                      placeholder="Enter the URL for your remote backup archive"
                      required
                    />
                    <b-input-group-append>
                      <b-form-select
                        v-model="restoreRemoteUrlComponent"
                        :options="components"
                        :disabled="remoteUrlComponents"
                        style="border-radius: 0"
                      >
                        <template #first>
                          <b-form-select-option
                            :value="null"
                            disabled
                          >
                            - Select component -
                          </b-form-select-option>
                        </template>
                      </b-form-select>
                    </b-input-group-append>
                    <b-input-group-append>
                      <b-button
                        :disabled="restoreRemoteUrlComponent === null"
                        size="sm"
                        variant="outline-primary"
                        @click="addRemoteUrlItem(appName, restoreRemoteUrlComponent)"
                      >
                        <b-icon
                          scale="0.8"
                          icon="plus-lg"
                        />
                      </b-button>
                    </b-input-group-append>
                  </b-input-group>
                  <b-form-invalid-feedback
                    class="mb-2"
                    :state="urlValidationState"
                  >
                    {{ urlValidationMessage }}
                  </b-form-invalid-feedback>
                </div>
                <b-alert
                  v-model="showTopRemote"
                  class="mt-1 rounded-0 d-flex align-items-center justify-content-center"
                  style="z-index: 1000;"
                  :variant="alertVariant"
                  solid="true"
                  dismissible
                >
                  <h5 class="mt-1 mb-1">
                    {{ alertMessage }}
                  </h5>
                </b-alert>
                <div
                  v-if="restoreRemoteUrlItems?.length > 0"
                  class="d-flex justify-content-between mt-2"
                >
                  <b-table
                    class="b-table"
                    small
                    bordered
                    size="sm"
                    :items="restoreRemoteUrlItems"
                    :fields="computedRestoreRemoteURLFields"
                  >
                    <template #thead-top>
                      <b-tr>
                        <b-td
                          colspan="6"
                          variant="dark"
                          class="text-center"
                        >
                          <b-icon
                            scale="1.2"
                            icon="life-preserver"
                            class="mr-1"
                          /><b>Restore Overview</b>
                        </b-td>
                      </b-tr>
                    </template>
                    <template #cell(url)="data">
                      <div class="table-cell no">
                        {{ data.value }}
                      </div>
                    </template>
                    <template #cell(component)="data">
                      <div class="table-cell">
                        {{ data.value }}
                      </div>
                    </template>
                    <template #cell(file_size)="data">
                      <div class="table-cell no-wrap">
                        {{ addAndConvertFileSizes(data.value) }}
                      </div>
                    </template>
                    <template #cell(actions)="data">
                      <div class="d-flex justify-content-center align-items-center">
                        <b-button
                          v-b-tooltip.hover.top="'Remove restore job'"
                          variant="outline-danger"
                          class="d-flex justify-content-center align-items-center"
                          style="width: 15px; height: 25px"
                          @click="deleteItem(data.index, restoreRemoteUrlItems)"
                        >
                          <b-icon
                            class="d-flex justify-content-center align-items-center"
                            scale="0.9"
                            icon="trash"
                          />
                        </b-button>
                      </div>
                    </template>
                    <template #custom-foot>
                      <b-tr>
                        <b-td
                          colspan="2"
                          variant="dark"
                          class="text-right"
                        />
                        <b-td
                          colspan="2"
                          variant="dark"
                          style="text-align: center; vertical-align: middle;"
                        >
                          <b-icon
                            class="mr-1"
                            icon="hdd"
                            scale="1.4"
                          />{{ addAndConvertFileSizes(restoreRemoteUrlItems) }}
                        </b-td>
                      </b-tr>
                    </template>
                  </b-table>
                </div>
                <div class="mt-2">
                  <div
                    v-if="downloadingFromUrl === true"
                    class="mb-2 mt-2 w-100"
                    style="
                      margin: 0 auto;
                      padding: 12px;
                      border: 1px solid #eaeaea;
                      border-radius: 8px;
                      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                      text-align: center;
                    "
                  >
                    <h5 style="font-size: 16px; margin-bottom: 5px;">
                      <span v-if="downloadingFromUrl === true">
                        <b-spinner small /> {{ restoreFromRemoteURLStatus }}
                      </span>
                    </h5>
                  </div>
                </div>
                <b-button
                  v-if="restoreRemoteUrlItems?.length > 0 && restoreFromRemoteURLStatus === ''"
                  class="mt-2"
                  block
                  variant="outline-primary"
                  @click="restoreFromRemoteFile(appName)"
                >
                  <b-icon
                    icon="arrow-clockwise"
                    scale="1.1"
                    class="mr-1"
                  />Restore
                </b-button>
              </div>
            </b-tab>
          </b-tabs>
        </b-card>
      </div>
    </b-tab>
    <b-tab title="Interactive Terminal" :disabled="noInstanceAvailable">
      <div class="text-center ">
        <div>
          <b-card-group deck>
            <b-card header-tag="header">
              <div
                class="mb-2"
                style="
                  border: 1px solid #ccc;
                  border-radius: 8px;
                  height: 45px;
                  padding: 12px;
                  text-align: left;
                  line-height: 0px;
                "
              >
                <h5>
                  <b-icon
                    class="mr-1"
                    scale="1.2"
                    icon="terminal"
                  /> Browser-based Interactive Terminal
                </h5>
              </div>
              <div class="d-flex align-items-center">
                <div
                  v-show="appSpecification?.compose"
                  class="mr-4"
                >
                  <b-form-select
                    v-model="selectedApp"
                    :options="null"
                    :disabled="!!isVisible || isComposeSingle"
                  >
                    <b-form-select-option
                      value="null"
                      disabled
                    >
                      -- Please select component --
                    </b-form-select-option>
                    <b-form-select-option
                      v-for="component in appSpecification?.compose"
                      :key="component.name"
                      :value="component.name"
                    >
                      {{ component.name }}
                    </b-form-select-option>
                  </b-form-select>
                </div>
                <div class="mr-4">
                  <b-form-select
                    v-model="selectedCmd"
                    :options="options"
                    :disabled="!!isVisible"
                    @input="onSelectChangeCmd"
                  >
                    <template #first>
                      <b-form-select-option
                        :option="null"
                        :value="null"
                        disabled
                      >
                        -- Please select command --
                      </b-form-select-option>
                    </template>
                  </b-form-select>
                </div>
                <b-button
                  v-if="!isVisible && !isConnecting"
                  class="col-2 no-wrap-limit"
                  href="#"
                  variant="outline-primary"
                  @click="connectTerminal(selectedApp ? `${selectedApp}_${appSpecification.name}` : appSpecification.name)"
                >
                  Connect
                </b-button>
                <b-button
                  v-if="!!isVisible"
                  class="col-2 no-wrap-limit"
                  variant="outline-danger"
                  @click="disconnectTerminal"
                >
                  Disconnect
                </b-button>
                <b-button
                  v-if="isConnecting"
                  class="col-2 align-items-center justify-content-center"
                  variant="outline-primary"
                  disabled
                >
                  <div class="d-flex align-items-center justify-content-center">
                    <b-spinner
                      class="mr-1"
                      small
                    />
                    Connecting...
                  </div>
                </b-button>
                <div class="ml-auto mt-1">
                  <div class="ml-auto d-flex">
                    <b-form-checkbox
                      v-model="enableUser"
                      class="ml-4 mr-1 d-flex align-items-center justify-content-center"
                      switch
                      :disabled="!!isVisible"
                      @input="onSelectChangeUser"
                    >
                      <div
                        class="d-flex"
                        style="font-size: 14px;"
                      >
                        User
                      </div>
                    </b-form-checkbox>
                    <b-form-checkbox
                      v-model="enableEnvironment"
                      class="ml-2 d-flex align-items-center justify-content-center"
                      switch
                      :disabled="!!isVisible"
                      @input="onSelectChangeEnv"
                    >
                      <div
                        class="d-flex"
                        style="font-size: 14px;"
                      >
                        Environment
                      </div>
                    </b-form-checkbox>
                  </div>
                </div>
              </div>
              <div
                v-if="selectedCmd === 'Custom' && !isVisible"
                class="d-flex mt-1"
              >
                <b-form-input
                  v-model="customValue"
                  placeholder="Enter custom command (string)"
                  :style="{ width: '100%' }"
                />
              </div>
              <div
                v-if="enableUser && !isVisible"
                class="d-flex mt-1"
              >
                <b-form-input
                  v-model="userInputValue"
                  placeholder="Enter user. Format is one of: user, user:group, uid, or uid:gid."
                  :style="{ width: '100%' }"
                />
              </div>
              <div
                v-if="enableEnvironment && !isVisible"
                class="d-flex mt-1"
              >
                <b-form-input
                  v-model="envInputValue"
                  placeholder="Enter environment parameters (string)"
                  :style="{ width: '100%' }"
                />
              </div>
              <div class="d-flex align-items-center mb-1">
                <div
                  v-if="!!isVisible"
                  class="mt-2"
                >
                  <template v-if="selectedCmd !== 'Custom'">
                    <span style="font-weight: bold;">Exec into container</span>
                    <span :style="selectedOptionTextStyle">{{ selectedApp || appSpecification.name }}</span>
                    <span style="font-weight: bold;">using command</span>
                    <span :style="selectedOptionTextStyle">{{ selectedOptionText }}</span>
                    <span style="font-weight: bold;">as</span>
                    <span :style="selectedOptionTextStyle">{{ !userInputValue ? 'default user' : userInputValue }}</span>
                  </template>
                  <template v-else>
                    <span style="font-weight: bold;">Exec into container</span>
                    <span :style="selectedOptionTextStyle">{{ selectedApp || appSpecification.name }}</span>
                    <span style="font-weight: bold;">using custom command</span>
                    <span :style="selectedOptionTextStyle">{{ customValue }}</span>
                    <span style="font-weight: bold;">as</span>
                    <span :style="selectedOptionTextStyle">{{ !userInputValue ? 'default user' : userInputValue }}</span>
                  </template>
                </div>
              </div>
            </b-card>
          </b-card-group>
          <div
            v-show="isVisible"
            ref="terminalElement"
            style="text-align: left; border-radius: 6px; border: 1px solid #e1e4e8; overflow: hidden;"
          />
        </div>
      </div>
      <div>
        <b-card class="mt-1">
          <div
            class="mb-2"
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border: 1px solid #ccc;
              border-radius: 8px;
              height: 45px;
              padding: 15px 15px 10px 15px;
              text-align: left;
              line-height: 0;
            "
          >
            <h5>
              <b-icon
                class="mr-1"
                scale="1.2"
                icon="server"
              /> Volume browser
            </h5>
            <div
              v-if="selectedAppVolume || !appSpecification?.compose"
              class="d-flex justify-content-center align-items-center no-wrap"
              style="margin-bottom: 7px;"
            >
              <b-progress
                v-b-tooltip.hover.html.left="{
                  id: 'my-id', content: tooltipContent, title: tooltipContent,
                }"
                v-ripple.400="'rgba(255, 255, 255, 0.12)'"
                class="progress-container"
                :value="usagePercentage"
                :max="100"
                :variant="getProgressVariant()"
              >
                <b-progress-bar :value="usagePercentage" />
                <div class="progress-center-text">
                  {{ usagePercentage.toFixed(2) }}%
                </div>
              </b-progress>
            </div>
          </div>
          <div
            class="mr-4 d-flex"
            :class="{ 'mb-2': appSpecification && appSpecification.compose }"
            style="max-width: 250px;"
          >
            <b-form-select
              v-show="appSpecification?.compose"
              v-model="selectedAppVolume"
              :options="null"
              :disabled="isComposeSingle"
              @change="refreshFolderSwitch"
            >
              <b-form-select-option
                value="null"
                disabled
              >
                -- Please select component --
              </b-form-select-option>
              <b-form-select-option
                v-for="component in appSpecification.compose"
                :key="component.name"
                :value="component.name"
              >
                {{ component.name }}
              </b-form-select-option>
            </b-form-select>
          </div>
          <div
            v-if="fileProgressVolume.length > 0"
            class="mb-2 mt-2 w-100"
            style="
              margin: 0 auto;
              padding: 12px;
              border: 1px solid #eaeaea;
              border-radius: 8px;
              box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
              text-align: center;

            "
          >
            <h5 style="font-size: 16px; margin-bottom: 5px;">
              <span v-if="!allDownloadsCompletedVolume()">
                <b-spinner small /> Downloading...
              </span>
              <span v-else>
                Download Completed
              </span>
            </h5>
            <b-progress
              v-for="(item, index) in computedFileProgressVolume"
              v-if="item.progress > 0"
              :key="index"
              class="mt-1"
              style="height: 16px;"
              :max="100"
            >
              <b-progress-bar
                :value="item.progress"
                :label="`${item.fileName} - ${item.progress.toFixed(2)}%`"
                style="font-size: 14px;"
              />
            </b-progress>
          </div>
          <div>
            <b-button-toolbar
              v-if="selectedAppVolume || !appSpecification?.compose"
              justify
              class="mb-1 w-100"
            >
              <div class="d-flex flex-row w-100">
                <b-input-group class="w-100 mr-2">
                  <b-input-group-prepend>
                    <b-input-group-text>
                      <b-icon icon="house-fill" />
                    </b-input-group-text>
                  </b-input-group-prepend>
                  <b-form-input
                    v-model="inputPathValue"
                    class="text-secondary"
                    style="font-weight: bold; font-size: 1.0em;"
                  />
                </b-input-group>
                <b-button-group size="sm" />
                <b-button-group
                  size="sm"
                  class="ml-auto"
                >
                  <b-button
                    variant="outline-primary"
                    @click="refreshFolder()"
                  >
                    <v-icon name="redo-alt" />
                  </b-button>
                  <b-button
                    variant="outline-primary"
                    @click="uploadFilesDialog = true"
                  >
                    <v-icon name="cloud-upload-alt" />
                  </b-button>
                  <b-button
                    variant="outline-primary"
                    @click="createDirectoryDialogVisible = true"
                  >
                    <v-icon name="folder-plus" />
                  </b-button>
                  <b-modal
                    v-model="createDirectoryDialogVisible"
                    title="Create Folder"
                    size="lg"
                    centered
                    ok-only
                    ok-title="Create Folder"
                    header-bg-variant="primary"
                    title-class="custom-modal-title"
                    @ok="createFolder(newDirName)"
                  >
                    <b-form-group
                      label="Folder Name"
                      label-for="folderNameInput"
                    >
                      <b-form-input
                        id="folderNameInput"
                        v-model="newDirName"
                        size="lg"
                        placeholder="New Folder Name"
                      />
                    </b-form-group>
                  </b-modal>
                  <b-modal
                    v-model="uploadFilesDialog"
                    title="Upload Files"
                    size="lg"
                    header-bg-variant="primary"
                    title-class="custom-modal-title"
                    centered
                    hide-footer
                    @close="refreshFolder()"
                  >
                    <file-upload
                      :upload-folder="getUploadFolder()"
                      :headers="zelidHeader"
                      @complete="refreshFolder"
                    />
                  </b-modal>
                </b-button-group>
              </div>
            </b-button-toolbar>
            <b-table
              v-if="selectedAppVolume || !appSpecification?.compose"
              class="fluxshare-table"
              hover
              responsive
              small
              outlined
              size="sm"
              :items="folderContentFilter"
              :fields="fields"
              :busy="loadingFolder"
              :sort-compare="sort"
              sort-by="name"
              show-empty
              :empty-text="`Directory is empty.`"
            >
              <template #table-busy>
                <div class="text-center text-danger my-2">
                  <b-spinner class="align-middle mx-2" />
                  <strong>Loading...</strong>
                </div>
              </template>
              <template #head(name)="data">
                {{ data.label.toUpperCase() }}
              </template>
              <template #cell(name)="data">
                <div v-if="data.item.symLink">
                  <b-link @click="changeFolder(data.item.name)">
                    <b-icon
                      class="mr-1"
                      scale="1.4"
                      icon="folder-symlink"
                    /> {{ data.item.name }}
                  </b-link>
                </div>
                <div v-if="data.item.isDirectory">
                  <b-link @click="changeFolder(data.item.name)">
                    <b-icon
                      class="mr-1"
                      scale="1.4"
                      icon="folder"
                    /> {{ data.item.name }}
                  </b-link>
                </div>
                <div v-else>
                  <div v-if="!data.item.symLink">
                    <b-icon
                      class="mr-1"
                      scale="1.4"
                      icon="file-earmark"
                    /> {{ data.item.name }}
                  </div>
                </div>
              </template>
              <template #cell(modifiedAt)="data">
                <div
                  v-if="!data.item.isUpButton"
                  class="no-wrap"
                >
                  {{ new Date(data.item.modifiedAt).toLocaleString('en-GB', timeoptions) }}
                </div>
              </template>
              <template #cell(type)="data">
                <div v-if="!data.item.isUpButton">
                  <div v-if="data.item.isDirectory">
                    Folder
                  </div>
                  <div v-else-if="data.item.isFile">
                    File
                  </div>
                  <div v-else-if="data.item.isSymbolicLink">
                    File (Symbolic Link)
                  </div>
                  <div v-else>
                    Other
                  </div>
                </div>
              </template>
              <template #cell(size)="data">
                <div
                  v-if="data.item.size > 0 && !data.item.isUpButton"
                  class="no-wrap"
                >
                  {{ addAndConvertFileSizes(data.item.size) }}
                </div>
              </template>
              <template #cell(actions)="data">
                <b-button-group
                  v-if="!data.item.isUpButton"
                  size="sm"
                >
                  <b-button
                    v-if="!data.item.isSymbolicLink"
                    :id="`download-${data.item.name}`"
                    v-b-tooltip.hover.bottom="data.item.isFile ? 'Download' : 'Download zip of folder'"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-secondary"
                  >
                    <v-icon :name="data.item.isFile ? 'file-download' : 'file-archive'" />
                  </b-button>
                  <b-button
                    v-if="!data.item.isSymbolicLink"
                    :id="`rename-${data.item.name}`"
                    v-b-tooltip.hover.bottom="'Rename'"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-secondary"
                    @click="rename(data.item.name)"
                  >
                    <v-icon name="edit" />
                  </b-button>
                  <b-button
                    v-if="data.item.isFile"
                    :id="`edit-${data.item.name}`"
                    v-b-tooltip.hover.bottom="'Edit File'"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-secondary"
                    @click="openEditDialog(data.item.name, data.item.size)"
                  >
                    <v-icon name="file-alt" />
                  </b-button>
                  <b-button
                    v-if="!data.item.isSymbolicLink"
                    :id="`delete-${data.item.name}`"
                    v-b-tooltip.hover.bottom="'Delete'"
                    v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                    variant="outline-secondary"
                  >
                    <v-icon name="trash-alt" />
                  </b-button>
                  <confirm-dialog
                    :target="`delete-${data.item.name}`"
                    :confirm-button="data.item.isFile ? 'Delete File' : 'Delete Folder'"
                    @confirm="deleteFile(data.item.name)"
                  />
                </b-button-group>
                <confirm-dialog
                  :target="`download-${data.item.name}`"
                  :confirm-button="data.item.isFile ? 'Download File' : 'Download Folder'"
                  @confirm="data.item.isFile ? download(data.item.name) : download(data.item.name, true, data.item.size)"
                />
              </template>
            </b-table>
            <b-modal
              v-model="renameDialogVisible"
              header-bg-variant="primary"
              title-class="custom-modal-title"
              hide-header-close
              title="Rename"
              size="lg"
              centered
              ok-title="Rename"
              @ok="confirmRename()"
            >
              <b-form-group
                label="Name"
                label-for="nameInput"
              >
                <b-form-input
                  id="nameInput"
                  v-model="newName"
                  size="lg"
                  placeholder="Name"
                />
              </b-form-group>
            </b-modal>
            <b-modal
              v-model="editDialogVisible"
              :title="`Editing: ${currentEditFile}`"
              header-bg-variant="primary"
              title-class="custom-modal-title"
              no-close-on-backdrop
              no-close-on-esc
              hide-header-close
              size="lg"
              dialog-class="custom-modal-size"
              @shown="onModalShown"
              @hide="closeEditor"
            >
              <div class="editor-container">
                <vue-monaco-editor
                  ref="monacoEditor"
                  :value="editContent"
                  :theme="skin === 'dark' ? 'vs-dark' : 'vs'"
                  :language="editorLanguage"
                  :options="editorOptions"
                  @mount="handleMount"
                />
              </div>
              <template #modal-header>
                <div class="d-flex justify-content-between align-items-center w-100">
                  <span class="custom-modal-title text-truncate flex-grow-1 pr-3">
                    Editing: {{ currentEditFile }}
                  </span>
                  <div class="d-flex align-items-center">
                    <b-input-group class="language-selector">
                      <b-input-group-prepend style="height: 28px;" is-text>
                        <b-icon icon="code-square" scale="1" />
                      </b-input-group-prepend>
                      <b-form-select
                        v-model="editorLanguage"
                        :options="languageOptions"
                        class="custom-select form-control-sm"
                        style="width: 150px; height: 28px; padding: 2px 8px;"
                        @change="updateEditorLanguage"
                      />
                    </b-input-group>
                  </div>
                </div>
              </template>
              <template #modal-footer>
                <b-button variant="danger" @click="closeEditor">
                  Close
                </b-button>
                <b-button variant="primary" :disabled="!hasChanged || saving" @click="saveContent">
                  <template v-if="saving">
                    <b-spinner small type="border" class="mr-2" />
                    Saving...
                  </template>
                  <template v-else>
                    Save
                  </template>
                </b-button>
              </template>
            </b-modal>
          </div>
        </b-card>
      </div>
    </b-tab>
    <b-tab
      :title-item-class="windowWidth > 860 ? '' : 'd-none'"
      title="Global App Management"
      disabled
    />
    <b-tab title="Global Control">
      <div v-if="globalZelidAuthorized">
        <b-row class="match-height">
          <b-col xs="6">
            <b-card title="Control">
              <b-card-text class="mb-2">
                {{ isAppOwner ? 'General options to control all instances of your application' : 'General options to control instances of selected application running on all nodes that you own' }}
              </b-card-text>
              <div class="text-center">
                <b-button
                  id="start-app-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Start App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="play-fill" />
                  </span>
                  <span class="ml-1">Start Application</span>
                </b-button>
                <confirm-dialog
                  target="start-app-global"
                  confirm-button="Start App"
                  @confirm="startAppGlobally(appName)"
                />
                <b-button
                  id="stop-app-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Stop App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="stop-fill" />
                  </span>
                  <span class="ml-1">Stop Application</span>
                </b-button>
                <confirm-dialog
                  target="stop-app-global"
                  confirm-button="Stop App"
                  @confirm="stopAppGlobally(appName)"
                />
                <b-button
                  id="restart-app-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Restart App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="arrow-clockwise" />
                  </span>
                  <span class="ml-1">Restart Application</span>
                </b-button>
                <confirm-dialog
                  target="restart-app-global"
                  confirm-button="Restart App"
                  @confirm="restartAppGlobally(appName)"
                />
              </div>
            </b-card>
          </b-col>
          <b-col xs="6">
            <b-card title="Pause">
              <b-card-text class="mb-2">
                {{ isAppOwner ? 'The Pause command suspends all processes of all instances of your app' : 'The Pause command suspends all processes of selected application on all of nodes that you own' }}
              </b-card-text>
              <div class="text-center">
                <b-button
                  id="pause-app-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Pause App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="pause-circle-fill" />
                  </span>
                  <span class="ml-1">Pause Application</span>
                </b-button>
                <confirm-dialog
                  target="pause-app-global"
                  confirm-button="Pause App"
                  @confirm="pauseAppGlobally(appName)"
                />
                <b-button
                  id="unpause-app-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Unpause App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="play-circle" />
                  </span>
                  <span class="ml-1">Unpause Application</span>
                </b-button>
                <confirm-dialog
                  target="unpause-app-global"
                  confirm-button="Unpause App"
                  @confirm="unpauseAppGlobally(appName)"
                />
              </div>
            </b-card>
          </b-col>
        </b-row>
        <b-row class="match-height">
          <b-col xs="6">
            <b-card title="Redeploy">
              <b-card-text class="mb-2">
                <div
                  class="text-danger "
                >
                  Warning: This will be executed on all your aplications instances accross the network
                </div>
                Reinstall your application from the docker repo. Soft option, keeps data on the instance, Hard option deletes everything and gets installed like a fresh install.
                Using hard option, if app uses syncthing it can takes up to 30m to be up and running on all instances.
              </b-card-text>
              <div class="text-center">
                <b-button
                  id="redeploy-app-soft-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Soft Redeploy App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="arrow-repeat" />
                  </span>
                  <span class="ml-1">Soft Reinstall</span>
                </b-button>
                <confirm-dialog
                  target="redeploy-app-soft-global"
                  confirm-button="Redeploy"
                  @confirm="redeployAppSoftGlobally(appName)"
                />
                <b-button
                  id="redeploy-app-hard-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Hard Redeploy App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="recycle" />
                  </span>
                  <span class="ml-1">Hard Reinstall</span>
                </b-button>
                <confirm-dialog
                  target="redeploy-app-hard-global"
                  confirm-button="Redeploy"
                  @confirm="redeployAppHardGlobally(appName)"
                />
              </div>
            </b-card>
          </b-col>
          <b-col xs="6">
            <b-card title="Fresh Start?">
              <b-card-text class="mb-2">
                All your app instances are uninstalled and are after installed on new Flux Nodes. All app data will be delete.
              </b-card-text>
              <div class="text-center">
                <b-button
                  id="remove-app-global"
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="outline-dark"
                  aria-label="Reinstall App"
                  class="mx-1 my-1 cb"
                >
                  <span class="icon-circle">
                    <b-icon icon="bootstrap-reboot" />
                  </span>
                  <span class="ml-1">Get New Instances</span>
                </b-button>
                <confirm-dialog
                  target="remove-app-global"
                  confirm-button="Reinstall App"
                  @confirm="removeAppGlobally(appName)"
                />
              </div>
            </b-card>
          </b-col>
        </b-row>
      </div>
      <div v-else>
        Global management session expired. Please log out and back into FluxOS.
      </div>
    </b-tab>
    <b-tab title="Running Instances">
      <b-row>
        <b-col>
          <div class="map_m">
            <div v-if="masterSlaveApp && masterIP">
              <b-card class="mb-1">
                <div class="d-flex justify-content-between align-items-center">
                  <div>
                    <b-icon icon="hdd-network-fill" scale="1.3" class="mr-1" />
                    <b-badge v-b-tooltip.hover.top="'Connect to your application server using this IP address.' " variant="primary">
                      Primary Server IP Address
                    </b-badge>
                  </div>
                  <kbd class="bg-primary" style="border-radius: 15px; font-family: monospace; font-size: 13px; padding: 0px 10px;">
                    {{ masterIP }}
                  </kbd>
                </div>
              </b-card>
            </div>
            <flux-map class="mb-0 mt-0" :show-all="false" :filter-nodes="mapLocations" />
          </div>
        </b-col>
      </b-row>
      <b-row>
        <b-col
          md="4"
          sm="4"
          class="my-1"
        >
          <b-form-group class="mb-0">
            <label class="d-inline-block text-left mr-50">Per page</label>
            <b-form-select
              id="perPageSelect"
              v-model="instances.perPage"
              size="sm"
              :options="instances.pageOptions"
              class="w-50"
            />
          </b-form-group>
        </b-col>
        <b-col
          md="8"
          class="my-1"
        >
          <b-form-group
            label="Filter"
            label-cols-sm="1"
            label-align-sm="right"
            label-for="filterInput"
            class="mb-0"
          >
            <b-input-group size="sm">
              <b-form-input
                id="filterInput"
                v-model="instances.filter"
                type="search"
                placeholder="Type to Search"
              />
              <b-input-group-append>
                <b-button
                  :disabled="!instances.filter"
                  @click="instances.filter = ''"
                >
                  Clear
                </b-button>
              </b-input-group-append>
            </b-input-group>
          </b-form-group>
        </b-col>
        <b-col cols="12">
          <b-table
            :key="tableKey"
            class="app-instances-table"
            striped
            hover
            outlined
            responsive
            sort-icon-left
            :busy="isBusy"
            :per-page="instances.perPage"
            :current-page="instances.currentPage"
            :items="instances.data"
            :fields="instances.fields"
            :sort-by.sync="instances.sortBy"
            :sort-desc.sync="instances.sortDesc"
            :sort-direction="instances.sortDirection"
            :filter="instances.filter"
            show-empty
            :empty-text="`No instances of ${appName}`"
          >
            <template #table-busy>
              <div class="text-center text-danger my-2">
                <b-spinner class="align-middle mr-1" />
                <strong>Loading geolocation...</strong>
              </div>
            </template>
            <template #cell(show_details)="row">
              <a @click="row.toggleDetails">
                <v-icon
                  v-if="!row.detailsShowing"
                  class="ml-2"
                  name="chevron-down"
                />
                <v-icon
                  v-if="row.detailsShowing"
                  class="ml-2"
                  name="chevron-up"
                />
              </a>
            </template>
            <template #row-details="row">
              <b-card class="">
                <list-entry
                  v-if="row.item.broadcastedAt"
                  title="Broadcast"
                  :data="new Date(row.item.broadcastedAt).toLocaleString('en-GB', timeoptions.shortDate)"
                />
                <list-entry
                  v-if="row.item.expireAt"
                  title="Expires"
                  :data="new Date(row.item.expireAt).toLocaleString('en-GB', timeoptions.shortDate)"
                />
              </b-card>
            </template>
            <template #cell(visit)="locationRow">
              <div class="button-cell">
                <b-button
                  size="sm"
                  class="mr-1"
                  variant="outline-secondary"
                  @click="openApp(locationRow.item.name, locationRow.item.ip.split(':')[0], getProperPort())"
                >
                  App
                </b-button>
                <b-button
                  size="sm"
                  class="mr-0"
                  variant="outline-primary"
                  @click="openNodeFluxOS(locationRow.item.ip.split(':')[0], locationRow.item.ip.split(':')[1] ? +locationRow.item.ip.split(':')[1] - 1 : 16126)"
                >
                  FluxNode
                </b-button>
              </div>
            </template>
          </b-table>
        </b-col>
        <b-col cols="12">
          <b-pagination
            v-model="instances.currentPage"
            :total-rows="instances.totalRows"
            :per-page="instances.perPage"
            align="center"
            size="sm"
            class="my-0 mt-1"
          />
        </b-col>
      </b-row>
    </b-tab>
    <b-tab
      title="Update/Renew"
      :disabled="!isAppOwner"
    >
      <div
        v-if="!fluxCommunication"
        class="text-danger "
      >
        Warning: Connected Flux is not communicating properly with Flux network
      </div>
      <div
        style="
          border: 1px solid #ccc;
          border-radius: 8px;
          height: 45px;
          padding: 12px;
          line-height: 0px;
        "
      >
        <h5>
          <b-icon
            class="mr-1"
            icon="ui-checks-grid"
          /> Update Application Specifications / Extend Subscription
        </h5>
      </div>
      <div class="form-row form-group">
        <b-input-group class="mt-2">
          <b-input-group-prepend>
            <b-input-group-text>
              <b-icon
                class="mr-1"
                icon="plus-square"
              />
              Update Specifications
              <v-icon
                v-b-tooltip.hover.top="'Select if you want to change your application specifications'"
                name="info-circle"
                class="ml-1"
              />
            </b-input-group-text>
          </b-input-group-prepend>
          <b-input-group-append is-text>
            <b-form-checkbox
              id="updateSpecifications"
              v-model="updateSpecifications"
              switch
              class="custom-control-primary"
            />
          </b-input-group-append>
        </b-input-group>
      </div>
      <div v-if="updateSpecifications">
        <div v-if="appUpdateSpecification.version >= 4">
          <b-row class="match-height">
            <b-col xs="6">
              <b-card title="Details">
                <b-form-group
                  label-cols="2"
                  label-cols-lg="1"
                  label="Version"
                  label-for="version"
                >
                  <b-form-input
                    id="version"
                    v-model="appUpdateSpecification.version"
                    :placeholder="appUpdateSpecification.version.toString()"
                    readonly
                  />
                </b-form-group>
                <b-form-group
                  label-cols="2"
                  label-cols-lg="1"
                  label="Name"
                  label-for="name"
                >
                  <b-form-input
                    id="name"
                    v-model="appUpdateSpecification.name"
                    placeholder="Application Name"
                    readonly
                  />
                </b-form-group>
                <b-form-group
                  label-cols="2"
                  label-cols-lg="1"
                  label="Desc."
                  label-for="desc"
                >
                  <b-form-textarea
                    id="desc"
                    v-model="appUpdateSpecification.description"
                    placeholder="Description"
                    rows="3"
                  />
                </b-form-group>
                <b-form-group
                  label-cols="2"
                  label-cols-lg="1"
                  label="Owner"
                  label-for="owner"
                >
                  <b-form-input
                    id="owner"
                    v-model="appUpdateSpecification.owner"
                    placeholder="Flux ID of Application Owner"
                  />
                </b-form-group>
                <div v-if="appUpdateSpecification.version >= 5 && !isPrivateApp">
                  <div class="form-row form-group">
                    <label class="col-1 col-form-label">
                      Contacts
                      <v-icon
                        v-b-tooltip.hover.top="'Array of strings of emails Contacts to get notifications ex. app about to expire, app spawns. Contacts are also PUBLIC information.'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        id="contacs"
                        v-model="appUpdateSpecification.contacts"
                      />
                    </div>
                    <div class="col-0">
                      <b-button
                        id="upload-contacts"
                        v-b-tooltip.hover.top="
                          'Uploads Contacts to Flux Storage. Contacts will be replaced with a link to Flux Storage instead. This increases maximum allowed contacts while adding enhanced privacy - nobody except FluxOS Team maintaining notifications system has access to contacts.'
                        "
                        variant="outline-primary"
                      >
                        <v-icon name="cloud-upload-alt" />
                      </b-button>
                      <confirm-dialog
                        target="upload-contacts"
                        confirm-button="Upload Contacts"
                        :width="600"
                        @confirm="uploadContactsToFluxStorage()"
                      />
                    </div>
                  </div>
                </div>
                <div v-if="appUpdateSpecification.version >= 5 && !isPrivateApp">
                  <h4>Allowed Geolocation</h4>
                  <div
                    v-for="n in numberOfGeolocations"
                    :key="`${n}pos`"
                  >
                    <b-form-group
                      label-cols="3"
                      label-cols-lg="1"
                      :label="`Continent - ${n}`"
                      label-for="Continent"
                    >
                      <b-form-select
                        id="Continent"
                        v-model="allowedGeolocations[`selectedContinent${n}`]"
                        :options="continentsOptions(false)"
                        @change="adjustMaxInstancesPossible()"
                      >
                        <template #first>
                          <b-form-select-option
                            :value="undefined"
                            disabled
                          >
                            -- Select to restrict Continent --
                          </b-form-select-option>
                        </template>
                      </b-form-select>
                    </b-form-group>
                    <b-form-group
                      v-if="allowedGeolocations[`selectedContinent${n}`] && allowedGeolocations[`selectedContinent${n}`] !== 'ALL'"
                      label-cols="3"
                      label-cols-lg="1"
                      :label="`Country - ${n}`"
                      label-for="Country"
                    >
                      <b-form-select
                        id="country"
                        v-model="allowedGeolocations[`selectedCountry${n}`]"
                        :options="countriesOptions(allowedGeolocations[`selectedContinent${n}`], false)"
                        @change="adjustMaxInstancesPossible()"
                      >
                        <template #first>
                          <b-form-select-option
                            :value="undefined"
                            disabled
                          >
                            -- Select to restrict Country --
                          </b-form-select-option>
                        </template>
                      </b-form-select>
                    </b-form-group>
                    <b-form-group
                      v-if="allowedGeolocations[`selectedContinent${n}`] && allowedGeolocations[`selectedContinent${n}`] !== 'ALL' && allowedGeolocations[`selectedCountry${n}`] && allowedGeolocations[`selectedCountry${n}`] !== 'ALL'"
                      label-cols="3"
                      label-cols-lg="1"
                      :label="`Region - ${n}`"
                      label-for="Region"
                    >
                      <b-form-select
                        id="Region"
                        v-model="allowedGeolocations[`selectedRegion${n}`]"
                        :options="regionsOptions(allowedGeolocations[`selectedContinent${n}`], allowedGeolocations[`selectedCountry${n}`], false)"
                        @change="adjustMaxInstancesPossible()"
                      >
                        <template #first>
                          <b-form-select-option
                            :value="undefined"
                            disabled
                          >
                            -- Select to restrict Region --
                          </b-form-select-option>
                        </template>
                      </b-form-select>
                    </b-form-group>
                  </div>
                  <div class="text-center">
                    <b-button
                      v-if="numberOfGeolocations > 1"
                      v-b-tooltip.hover.bottom="'Remove Allowed Geolocation Restriction'"
                      v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                      variant="outline-secondary"
                      size="sm"
                      class="m-1"
                      @click="numberOfGeolocations = numberOfGeolocations - 1; adjustMaxInstancesPossible()"
                    >
                      <v-icon name="minus" />
                    </b-button>
                    <b-button
                      v-if="numberOfGeolocations < 5"
                      v-b-tooltip.hover.bottom="'Add Allowed Geolocation Restriction'"
                      v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                      variant="outline-secondary"
                      size="sm"
                      class="m-1"
                      @click="numberOfGeolocations = numberOfGeolocations + 1; adjustMaxInstancesPossible()"
                    >
                      <v-icon name="plus" />
                    </b-button>
                  </div>
                </div>
                <br><br>
                <div v-if="appUpdateSpecification.version >= 5">
                  <h4>Forbidden Geolocation</h4>
                  <div
                    v-for="n in numberOfNegativeGeolocations"
                    :key="`${n}posB`"
                  >
                    <b-form-group
                      label-cols="3"
                      label-cols-lg="1"
                      :label="`Continent - ${n}`"
                      label-for="Continent"
                    >
                      <b-form-select
                        id="Continent"
                        v-model="forbiddenGeolocations[`selectedContinent${n}`]"
                        :options="continentsOptions(true)"
                      >
                        <template #first>
                          <b-form-select-option
                            :value="undefined"
                            disabled
                          >
                            -- Select to ban Continent --
                          </b-form-select-option>
                        </template>
                      </b-form-select>
                    </b-form-group>
                    <b-form-group
                      v-if="forbiddenGeolocations[`selectedContinent${n}`] && forbiddenGeolocations[`selectedContinent${n}`] !== 'NONE'"
                      label-cols="3"
                      label-cols-lg="1"
                      :label="`Country - ${n}`"
                      label-for="Country"
                    >
                      <b-form-select
                        id="country"
                        v-model="forbiddenGeolocations[`selectedCountry${n}`]"
                        :options="countriesOptions(forbiddenGeolocations[`selectedContinent${n}`], true)"
                      >
                        <template #first>
                          <b-form-select-option
                            :value="undefined"
                            disabled
                          >
                            -- Select to ban Country --
                          </b-form-select-option>
                        </template>
                      </b-form-select>
                    </b-form-group>
                    <b-form-group
                      v-if="forbiddenGeolocations[`selectedContinent${n}`] && forbiddenGeolocations[`selectedContinent${n}`] !== 'NONE' && forbiddenGeolocations[`selectedCountry${n}`] && forbiddenGeolocations[`selectedCountry${n}`] !== 'ALL'"
                      label-cols="3"
                      label-cols-lg="1"
                      :label="`Region - ${n}`"
                      label-for="Region"
                    >
                      <b-form-select
                        id="Region"
                        v-model="forbiddenGeolocations[`selectedRegion${n}`]"
                        :options="regionsOptions(forbiddenGeolocations[`selectedContinent${n}`], forbiddenGeolocations[`selectedCountry${n}`], true)"
                      >
                        <template #first>
                          <b-form-select-option
                            :value="undefined"
                            disabled
                          >
                            -- Select to ban Region --
                          </b-form-select-option>
                        </template>
                      </b-form-select>
                    </b-form-group>
                  </div>
                  <div class="text-center">
                    <b-button
                      v-if="numberOfNegativeGeolocations > 1"
                      v-b-tooltip.hover.bottom="'Remove Forbidden Geolocation Restriction'"
                      v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                      variant="outline-secondary"
                      size="sm"
                      class="m-1"
                      @click="numberOfNegativeGeolocations = numberOfNegativeGeolocations - 1"
                    >
                      <v-icon name="minus" />
                    </b-button>
                    <b-button
                      v-if="numberOfNegativeGeolocations < 5"
                      v-b-tooltip.hover.bottom="'Add Forbidden Geolocation Restriction'"
                      v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                      variant="outline-secondary"
                      size="sm"
                      class="m-1"
                      @click="numberOfNegativeGeolocations = numberOfNegativeGeolocations + 1"
                    >
                      <v-icon name="plus" />
                    </b-button>
                  </div>
                </div>
                <br>
                <b-form-group
                  v-if="appUpdateSpecification.version >= 3"
                  label-cols="2"
                  label-cols-lg="1"
                  label="Instances"
                  label-for="instances"
                >
                  <div class="mx-1">
                    {{ appUpdateSpecification.instances }}
                  </div>
                  <b-form-input
                    id="instances"
                    v-model="appUpdateSpecification.instances"
                    placeholder="Minimum number of application instances to be spawned"
                    type="range"
                    min="3"
                    :max="maxInstances"
                    step="1"
                  />
                </b-form-group>
                <div
                  v-if="appUpdateSpecification.version >= 7"
                  class="form-row form-group"
                >
                  <label class="col-form-label">
                    Static IP
                    <v-icon
                      v-b-tooltip.hover.top="'Select if your application strictly requires static IP address'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-checkbox
                      id="staticip"
                      v-model="appUpdateSpecification.staticip"
                      switch
                      class="custom-control-primary inline"
                    />
                  </div>
                </div>
                <br>
                <div
                  v-if="appUpdateSpecification.version === 7"
                  class="form-row form-group"
                >
                  <label class="col-form-label">
                    Enterprise Application
                    <v-icon
                      v-b-tooltip.hover.top="'Select if your application requires private image, secrets or if you want to target specific nodes on which application can run. Geolocation targetting is not possible in this case.'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-checkbox
                      id="enterpriseapp"
                      v-model="isPrivateApp"
                      switch
                      class="custom-control-primary inline"
                    />
                  </div>
                </div>
                <div
                  v-if="appUpdateSpecification.version >= 8"
                  class="form-row form-group"
                >
                  <label class="col-form-label">
                    Enterprise Application
                    <v-icon
                      v-b-tooltip.hover.top="'Select if your application requires privacy, your components specifications will be encrypted and only machines running ArcaneOS will be able to install them.'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-checkbox
                      id="enterpriseapp"
                      v-model="isPrivateApp"
                      switch
                      class="custom-control-primary inline"
                    />
                  </div>
                </div>
              </b-card>
            </b-col>
          </b-row>
          <b-card
            v-for="(component, index) in appUpdateSpecification.compose"
            :key="index"
          >
            <b-card-title>
              Component {{ component.name }}
            </b-card-title>
            <b-row class="match-height">
              <b-col
                xs="12"
                xl="6"
              >
                <b-card>
                  <b-card-title>
                    General
                  </b-card-title>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Name
                      <v-icon
                        v-b-tooltip.hover.top="'Name of Application Component'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`repo-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.name"
                        placeholder="Component name"
                        readonly
                      />
                    </div>
                  </div>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Description
                      <v-icon
                        v-b-tooltip.hover.top="'Description of Application Component'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`repo-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.description"
                        placeholder="Component description"
                      />
                    </div>
                  </div>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Repository
                      <v-icon
                        v-b-tooltip.hover.top="'Docker image namespace/repository:tag for component'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`repo-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.repotag"
                        placeholder="Docker image namespace/repository:tag"
                      />
                    </div>
                  </div>
                  <div
                    v-if="appUpdateSpecification.version >= 7 && isPrivateApp"
                    class="form-row form-group"
                  >
                    <label class="col-3 col-form-label">
                      Repository Authentication
                      <v-icon
                        v-b-tooltip.hover.top="'Docker image authentication for private images in the format of username:apikey. This field will be encrypted and accessible to selected enterprise nodes only.'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`repoauth-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.repoauth"
                        placeholder="Docker authentication username:apikey"
                      />
                    </div>
                  </div>
                  <br>
                  <b-card-title>
                    Connectivity
                  </b-card-title>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Ports
                      <v-icon
                        v-b-tooltip.hover.top="'Array of Ports on which application will be available'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`ports-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.ports"
                      />
                    </div>
                  </div>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Domains
                      <v-icon
                        v-b-tooltip.hover.top="'Array of strings of Domains managed by Flux Domain Manager (FDM). Length must correspond to available ports. Use empty strings for no domains'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`domains-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.domains"
                      />
                    </div>
                  </div>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Cont. Ports
                      <v-icon
                        v-b-tooltip.hover.top="'Container Ports - Array of ports which your container has'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`containerPorts-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.containerPorts"
                      />
                    </div>
                  </div>
                </b-card>
              </b-col>
              <b-col
                xs="12"
                xl="6"
              >
                <b-card>
                  <b-card-title>
                    Environment
                  </b-card-title>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Environment
                      <v-icon
                        v-b-tooltip.hover.top="'Array of strings of Environmental Parameters'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`environmentParameters-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.environmentParameters"
                      />
                    </div>
                    <div class="col-0">
                      <b-button
                        id="upload-env"
                        v-b-tooltip.hover.top="
                          'Uploads Enviornment to Flux Storage. Environment parameters will be replaced with a link to Flux Storage instead. This increases maximum allowed size of Env. parameters while adding basic privacy - instead of parameters, link to Flux Storage will be visible.'
                        "
                        variant="outline-primary"
                      >
                        <v-icon name="cloud-upload-alt" />
                      </b-button>
                      <confirm-dialog
                        target="upload-env"
                        confirm-button="Upload Environment Parameters"
                        :width="600"
                        @confirm="uploadEnvToFluxStorage(index)"
                      />
                    </div>
                  </div>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Commands
                      <v-icon
                        v-b-tooltip.hover.top="'Array of strings of Commands'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`commands-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.commands"
                      />
                    </div>
                    <div class="col-0">
                      <b-button
                        id="upload-cmd"
                        v-b-tooltip.hover.top="'Uploads Commands to Flux Storage. Commands will be replaced with a link to Flux Storage instead. This increases maximum allowed size of Commands while adding basic privacy - instead of commands, link to Flux Storage will be visible.'"
                        variant="outline-primary"
                      >
                        <v-icon name="cloud-upload-alt" />
                      </b-button>
                      <confirm-dialog
                        target="upload-cmd"
                        confirm-button="Upload Commands"
                        :width="600"
                        @confirm="uploadCmdToFluxStorage(index)"
                      />
                    </div>
                  </div>
                  <div class="form-row form-group">
                    <label class="col-3 col-form-label">
                      Cont. Data
                      <v-icon
                        v-b-tooltip.hover.top="'Data folder that is shared by application to App volume. Prepend with r: for synced data between instances. Ex. r:/data. Prepend with g: for synced data and primary/standby solution. Ex. g:/data'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`containerData-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.containerData"
                      />
                    </div>
                  </div>
                  <div
                    v-if="appUpdateSpecification.version === 7 && isPrivateApp"
                    class="form-row form-group"
                  >
                    <label class="col-3 col-form-label">
                      Secrets
                      <v-icon
                        v-b-tooltip.hover.top="'Array of strings of Secret Environmental Parameters. This will be encrypted and accessible to selected Enterprise Nodes only'"
                        name="info-circle"
                        class="mr-1"
                      />
                    </label>
                    <div class="col">
                      <b-form-input
                        :id="`secrets-${component.name}_${appUpdateSpecification.name}`"
                        v-model="component.secrets"
                        placeholder="[]"
                      />
                    </div>
                  </div>
                  <br>
                  <b-card-title>
                    Resources &nbsp;&nbsp;&nbsp;<h6 v-if="appUpdateSpecification.version < 8" class="inline text-small">
                      Tiered:
                      <b-form-checkbox
                        id="tiered"
                        v-model="component.tiered"
                        switch
                        class="custom-control-primary inline"
                      />
                    </h6>
                  </b-card-title>
                  <b-form-group
                    v-if="!component.tiered"
                    label-cols="3"
                    label-cols-lg="2"
                    label="CPU"
                    label-for="cpu"
                  >
                    <div class="mx-1">
                      {{ component.cpu }}
                    </div>
                    <b-form-input
                      :id="`cpu-${component.name}_${appUpdateSpecification.name}`"
                      v-model="component.cpu"
                      placeholder="CPU cores to use by default"
                      type="range"
                      min="0.1"
                      max="15"
                      step="0.1"
                    />
                  </b-form-group>
                  <b-form-group
                    v-if="!component.tiered"
                    label-cols="3"
                    label-cols-lg="2"
                    label="RAM"
                    label-for="ram"
                  >
                    <div class="mx-1">
                      {{ component.ram }}
                    </div>
                    <b-form-input
                      :id="`ram-${component.name}_${appUpdateSpecification.name}`"
                      v-model="component.ram"
                      placeholder="RAM in MB value to use by default"
                      type="range"
                      min="100"
                      max="59000"
                      step="100"
                    />
                  </b-form-group>
                  <b-form-group
                    v-if="!component.tiered"
                    label-cols="3"
                    label-cols-lg="2"
                    label="SSD"
                    label-for="ssd"
                  >
                    <div class="mx-1">
                      {{ component.hdd }}
                    </div>
                    <b-form-input
                      :id="`ssd-${component.name}_${appUpdateSpecification.name}`"
                      v-model="component.hdd"
                      placeholder="SSD in GB value to use by default"
                      type="range"
                      min="1"
                      max="820"
                      step="1"
                    />
                  </b-form-group>
                </b-card>
              </b-col>
            </b-row>
            <b-row v-if="component.tiered">
              <b-col
                xs="12"
                md="6"
                lg="4"
              >
                <b-card title="Cumulus">
                  <div>
                    CPU: {{ component.cpubasic }}
                  </div>
                  <b-form-input
                    v-model="component.cpubasic"
                    type="range"
                    min="0.1"
                    max="3"
                    step="0.1"
                  />
                  <div>
                    RAM: {{ component.rambasic }}
                  </div>
                  <b-form-input
                    v-model="component.rambasic"
                    type="range"
                    min="100"
                    max="5000"
                    step="100"
                  />
                  <div>
                    SSD: {{ component.hddbasic }}
                  </div>
                  <b-form-input
                    v-model="component.hddbasic"
                    type="range"
                    min="1"
                    max="180"
                    step="1"
                  />
                </b-card>
              </b-col>
              <b-col
                xs="12"
                md="6"
                lg="4"
              >
                <b-card title="Nimbus">
                  <div>
                    CPU: {{ component.cpusuper }}
                  </div>
                  <b-form-input
                    v-model="component.cpusuper"
                    type="range"
                    min="0.1"
                    max="7"
                    step="0.1"
                  />
                  <div>
                    RAM: {{ component.ramsuper }}
                  </div>
                  <b-form-input
                    v-model="component.ramsuper"
                    type="range"
                    min="100"
                    max="28000"
                    step="100"
                  />
                  <div>
                    SSD: {{ component.hddsuper }}
                  </div>
                  <b-form-input
                    v-model="component.hddsuper"
                    type="range"
                    min="1"
                    max="400"
                    step="1"
                  />
                </b-card>
              </b-col>
              <b-col
                xs="12"
                lg="4"
              >
                <b-card title="Stratus">
                  <div>
                    CPU: {{ component.cpubamf }}
                  </div>
                  <b-form-input
                    v-model="component.cpubamf"
                    type="range"
                    min="0.1"
                    max="15"
                    step="0.1"
                  />
                  <div>
                    RAM: {{ component.rambamf }}
                  </div>
                  <b-form-input
                    v-model="component.rambamf"
                    type="range"
                    min="100"
                    max="59000"
                    step="100"
                  />
                  <div>
                    SSD: {{ component.hddbamf }}
                  </div>
                  <b-form-input
                    v-model="component.hddbamf"
                    type="range"
                    min="1"
                    max="820"
                    step="1"
                  />
                </b-card>
              </b-col>
            </b-row>
          </b-card>
          <b-card
            v-if="appUpdateSpecification.version === 7 && isPrivateApp"
            title="Enterprise Nodes"
          >
            Only these selected enterprise nodes will be able to run your application and are used for encryption. Only these nodes are able to access your private image and secrets.<br>
            Changing the node list after the message is computed and encrypted will result in a failure to run. Secrets and Repository Authentication would need to be adjusted again.<br>
            The score determines how reputable a node and node operator are. The higher the score, the higher the reputation on the network.<br>
            Secrets and Repository Authentication need to be set again if this node list changes.<br>
            The more nodes can run your application, the more stable it is. On the other hand, more nodes will have access to your private data!<br>
            <b-row>
              <b-col
                md="4"
                sm="4"
                class="my-1"
              >
                <b-form-group class="mb-0">
                  <label class="d-inline-block text-left mr-50">Per page</label>
                  <b-form-select
                    id="perPageSelect"
                    v-model="entNodesTable.perPage"
                    size="sm"
                    :options="entNodesTable.pageOptions"
                    class="w-50"
                  />
                </b-form-group>
              </b-col>
              <b-col
                md="8"
                class="my-1"
              >
                <b-form-group
                  label="Filter"
                  label-cols-sm="1"
                  label-align-sm="right"
                  label-for="filterInput"
                  class="mb-0"
                >
                  <b-input-group size="sm">
                    <b-form-input
                      id="filterInput"
                      v-model="entNodesTable.filter"
                      type="search"
                      placeholder="Type to Search"
                    />
                    <b-input-group-append>
                      <b-button
                        :disabled="!entNodesTable.filter"
                        @click="entNodesTable.filter = ''"
                      >
                        Clear
                      </b-button>
                    </b-input-group-append>
                  </b-input-group>
                </b-form-group>
              </b-col>

              <b-col cols="12">
                <b-table
                  class="app-enterprise-nodes-table"
                  striped
                  hover
                  responsive
                  :per-page="entNodesTable.perPage"
                  :current-page="entNodesTable.currentPage"
                  :items="selectedEnterpriseNodes"
                  :fields="entNodesTable.fields"
                  :sort-by.sync="entNodesTable.sortBy"
                  :sort-desc.sync="entNodesTable.sortDesc"
                  :sort-direction="entNodesTable.sortDirection"
                  :filter="entNodesTable.filter"
                  :filter-included-fields="entNodesTable.filterOn"
                  show-empty
                  :empty-text="'No Enterprise Nodes selected'"
                >
                  <template #cell(show_details)="row">
                    <a @click="row.toggleDetails">
                      <v-icon
                        v-if="!row.detailsShowing"
                        name="chevron-down"
                      />
                      <v-icon
                        v-if="row.detailsShowing"
                        name="chevron-up"
                      />
                    </a>
                  </template>
                  <template #row-details="row">
                    <b-card class="">
                      <list-entry
                        v-if="row.item.ip"
                        title="IP Address"
                        :data="row.item.ip"
                      />
                      <list-entry
                        title="Public Key"
                        :data="row.item.pubkey"
                      />
                      <list-entry
                        title="Node Address"
                        :data="row.item.payment_address"
                      />
                      <list-entry
                        title="Collateral"
                        :data="`${row.item.txhash}:${row.item.outidx}`"
                      />
                      <list-entry
                        title="Tier"
                        :data="row.item.tier"
                      />
                      <list-entry
                        title="Overall Score"
                        :data="row.item.score.toString()"
                      />
                      <list-entry
                        title="Collateral Score"
                        :data="row.item.collateralPoints.toString()"
                      />
                      <list-entry
                        title="Maturity Score"
                        :data="row.item.maturityPoints.toString()"
                      />
                      <list-entry
                        title="Public Key Score"
                        :data="row.item.pubKeyPoints.toString()"
                      />
                      <list-entry
                        title="Enterprise Apps Assigned"
                        :data="row.item.enterpriseApps.toString()"
                      />
                      <div>
                        <b-button
                          size="sm"
                          class="mr-0"
                          variant="primary"
                          @click="openNodeFluxOS(row.item.ip.split(':')[0], row.item.ip.split(':')[1] ? +row.item.ip.split(':')[1] - 1 : 16126)"
                        >
                          Visit FluxNode
                        </b-button>
                      </div>
                    </b-card>
                  </template>
                  <template #cell(ip)="row">
                    {{ row.item.ip }}
                  </template>
                  <template #cell(payment_address)="row">
                    {{ row.item.payment_address.slice(0, 8) }}...{{ row.item.payment_address.slice(row.item.payment_address.length - 8, row.item.payment_address.length) }}
                  </template>
                  <template #cell(tier)="row">
                    {{ row.item.tier }}
                  </template>
                  <template #cell(score)="row">
                    {{ row.item.score }}
                  </template>
                  <template #cell(actions)="locationRow">
                    <b-button
                      :id="`remove-${locationRow.item.ip}`"
                      size="sm"
                      class="mr-1 mb-1"
                      variant="danger"
                    >
                      Remove
                    </b-button>
                    <confirm-dialog
                      :target="`remove-${locationRow.item.ip}`"
                      confirm-button="Remove FluxNode"
                      @confirm="removeFluxNode(locationRow.item.ip)"
                    />
                    <b-button
                      size="sm"
                      class="mr-1 mb-1"
                      variant="primary"
                      @click="openNodeFluxOS(locationRow.item.ip.split(':')[0], locationRow.item.ip.split(':')[1] ? +locationRow.item.ip.split(':')[1] - 1 : 16126)"
                    >
                      Visit
                    </b-button>
                  </template>
                </b-table>
              </b-col>
              <b-col cols="12">
                <b-pagination
                  v-model="entNodesTable.currentPage"
                  :total-rows="selectedEnterpriseNodes.length"
                  :per-page="entNodesTable.perPage"
                  align="center"
                  size="sm"
                  class="my-0"
                />
                <span class="table-total">Total: {{ selectedEnterpriseNodes.length }}</span>
              </b-col>
            </b-row>
            <br>
            <br>
            <div class="text-center">
              <b-button
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="primary"
                aria-label="Auto Select Enterprise Nodes"
                class="mb-2 mr-2"
                @click="autoSelectNodes"
              >
                Auto Select Enterprise Nodes
              </b-button>
              <b-button
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="primary"
                aria-label="Choose Enterprise Nodes"
                class="mb-2 mr-2"
                @click="chooseEnterpriseDialog = true"
              >
                Choose Enterprise Nodes
              </b-button>
            </div>
          </b-card>
          <b-card
            v-if="appUpdateSpecification.version >= 8 && isPrivateApp"
            title="Priority Nodes"
          >
            Select if needed Priority Nodes to run your app, the app can still deploy on other nodes on the network.<br>
            <b-row>
              <b-col
                md="4"
                sm="4"
                class="my-1"
              >
                <b-form-group class="mb-0">
                  <label class="d-inline-block text-left mr-50">Per page</label>
                  <b-form-select
                    id="perPageSelect"
                    v-model="entNodesTable.perPage"
                    size="sm"
                    :options="entNodesTable.pageOptions"
                    class="w-50"
                  />
                </b-form-group>
              </b-col>
              <b-col
                md="8"
                class="my-1"
              >
                <b-form-group
                  label="Filter"
                  label-cols-sm="1"
                  label-align-sm="right"
                  label-for="filterInput"
                  class="mb-0"
                >
                  <b-input-group size="sm">
                    <b-form-input
                      id="filterInput"
                      v-model="entNodesTable.filter"
                      type="search"
                      placeholder="Type to Search"
                    />
                    <b-input-group-append>
                      <b-button
                        :disabled="!entNodesTable.filter"
                        @click="entNodesTable.filter = ''"
                      >
                        Clear
                      </b-button>
                    </b-input-group-append>
                  </b-input-group>
                </b-form-group>
              </b-col>

              <b-col cols="12">
                <b-table
                  class="app-enterprise-nodes-table"
                  striped
                  hover
                  responsive
                  :per-page="entNodesTable.perPage"
                  :current-page="entNodesTable.currentPage"
                  :items="selectedEnterpriseNodes"
                  :fields="entNodesTable.fields"
                  :sort-by.sync="entNodesTable.sortBy"
                  :sort-desc.sync="entNodesTable.sortDesc"
                  :sort-direction="entNodesTable.sortDirection"
                  :filter="entNodesTable.filter"
                  :filter-included-fields="entNodesTable.filterOn"
                  show-empty
                  :empty-text="'No Priority Nodes selected'"
                >
                  <template #cell(show_details)="row">
                    <a @click="row.toggleDetails">
                      <v-icon
                        v-if="!row.detailsShowing"
                        name="chevron-down"
                      />
                      <v-icon
                        v-if="row.detailsShowing"
                        name="chevron-up"
                      />
                    </a>
                  </template>
                  <template #row-details="row">
                    <b-card class="">
                      <list-entry
                        v-if="row.item.ip"
                        title="IP Address"
                        :data="row.item.ip"
                      />
                      <list-entry
                        title="Public Key"
                        :data="row.item.pubkey"
                      />
                      <list-entry
                        title="Node Address"
                        :data="row.item.payment_address"
                      />
                      <list-entry
                        title="Collateral"
                        :data="`${row.item.txhash}:${row.item.outidx}`"
                      />
                      <list-entry
                        title="Tier"
                        :data="row.item.tier"
                      />
                      <div>
                        <b-button
                          size="sm"
                          class="mr-0"
                          variant="primary"
                          @click="openNodeFluxOS(row.item.ip.split(':')[0], row.item.ip.split(':')[1] ? +row.item.ip.split(':')[1] - 1 : 16126)"
                        >
                          Visit FluxNode
                        </b-button>
                      </div>
                    </b-card>
                  </template>
                  <template #cell(ip)="row">
                    {{ row.item.ip }}
                  </template>
                  <template #cell(payment_address)="row">
                    {{ row.item.payment_address.slice(0, 8) }}...{{ row.item.payment_address.slice(row.item.payment_address.length - 8, row.item.payment_address.length) }}
                  </template>
                  <template #cell(tier)="row">
                    {{ row.item.tier }}
                  </template>
                  <template #cell(score)="row">
                    {{ row.item.score }}
                  </template>
                  <template #cell(actions)="locationRow">
                    <b-button
                      :id="`remove-${locationRow.item.ip}`"
                      size="sm"
                      class="mr-1 mb-1"
                      variant="danger"
                    >
                      Remove
                    </b-button>
                    <confirm-dialog
                      :target="`remove-${locationRow.item.ip}`"
                      confirm-button="Remove FluxNode"
                      @confirm="removeFluxNode(locationRow.item.ip)"
                    />
                    <b-button
                      size="sm"
                      class="mr-1 mb-1"
                      variant="primary"
                      @click="openNodeFluxOS(locationRow.item.ip.split(':')[0], locationRow.item.ip.split(':')[1] ? +locationRow.item.ip.split(':')[1] - 1 : 16126)"
                    >
                      Visit
                    </b-button>
                  </template>
                </b-table>
              </b-col>
              <b-col cols="12">
                <b-pagination
                  v-model="entNodesTable.currentPage"
                  :total-rows="selectedEnterpriseNodes.length"
                  :per-page="entNodesTable.perPage"
                  align="center"
                  size="sm"
                  class="my-0"
                />
                <span class="table-total">Total: {{ selectedEnterpriseNodes.length }}</span>
              </b-col>
            </b-row>
            <br>
            <br>
            <div class="text-center">
              <b-button
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="primary"
                aria-label="Choose Enterprise Nodes"
                class="mb-2 mr-2"
                @click="chooseEnterpriseDialog = true"
              >
                Choose Priority Nodes
              </b-button>
            </div>
          </b-card>
        </div>
        <div v-else>
          <b-row class="match-height">
            <b-col
              xs="12"
              xl="6"
            >
              <b-card title="Details">
                <b-form-group
                  label-cols="2"
                  label="Version"
                  label-for="version"
                >
                  <b-form-input
                    id="version"
                    v-model="appUpdateSpecification.version"
                    :placeholder="appUpdateSpecification.version.toString()"
                    readonly
                  />
                </b-form-group>
                <b-form-group
                  label-cols="2"
                  label="Name"
                  label-for="name"
                >
                  <b-form-input
                    id="name"
                    v-model="appUpdateSpecification.name"
                    placeholder="App Name"
                    readonly
                  />
                </b-form-group>
                <b-form-group
                  label-cols="2"
                  label="Desc."
                  label-for="desc"
                >
                  <b-form-textarea
                    id="desc"
                    v-model="appUpdateSpecification.description"
                    placeholder="Description"
                    rows="3"
                  />
                </b-form-group>
                <b-form-group
                  label-cols="2"
                  label="Repo"
                  label-for="repo"
                >
                  <b-form-input
                    id="repo"
                    v-model="appUpdateSpecification.repotag"
                    placeholder="Docker image namespace/repository:tag"
                    readonly
                  />
                </b-form-group>
                <b-form-group
                  label-cols="2"
                  label="Owner"
                  label-for="owner"
                >
                  <b-form-input
                    id="owner"
                    v-model="appUpdateSpecification.owner"
                    placeholder="Flux ID of Application Owner"
                  />
                </b-form-group>
                <br>
                <b-form-group
                  v-if="appUpdateSpecification.version >= 3"
                  label-cols="2"
                  label-cols-lg="1"
                  label="Instances"
                  label-for="instances"
                >
                  <div class="mx-1">
                    {{ appUpdateSpecification.instances }}
                  </div>
                  <b-form-input
                    id="instances"
                    v-model="appUpdateSpecification.instances"
                    placeholder="Minimum number of application instances to be spawned"
                    type="range"
                    min="3"
                    :max="maxInstances"
                    step="1"
                  />
                </b-form-group>
                <br>
                <b-form-group
                  v-if="appUpdateSpecification.version >= 6"
                  label-cols="2"
                  label-cols-lg="1"
                  label="Period"
                  label-for="period"
                >
                  <div class="mx-1">
                    {{ getExpireLabel || (appUpdateSpecification.expire ? `${appUpdateSpecification.expire} blocks` : '1 month') }}
                  </div>
                  <b-form-input
                    id="period"
                    v-model="expirePosition"
                    placeholder="How long an application will live on Flux network"
                    type="range"
                    :min="0"
                    :max="5"
                    :step="1"
                  />
                </b-form-group>
              </b-card>
            </b-col>
            <b-col
              xs="12"
              xl="6"
            >
              <b-card title="Environment">
                <div class="form-row form-group">
                  <label class="col-3 col-form-label">
                    Ports
                    <v-icon
                      v-b-tooltip.hover.top="'Array of Ports on which application will be available'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-input
                      id="ports"
                      v-model="appUpdateSpecification.ports"
                    />
                  </div>
                </div>
                <div class="form-row form-group">
                  <label class="col-3 col-form-label">
                    Domains
                    <v-icon
                      v-b-tooltip.hover.top="'Array of strings of Domains managed by Flux Domain Manager (FDM). Length must correspond to available ports. Use empty strings for no domains'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-input
                      id="domains"
                      v-model="appUpdateSpecification.domains"
                    />
                  </div>
                </div>
                <div class="form-row form-group">
                  <label class="col-3 col-form-label">
                    Environment
                    <v-icon
                      v-b-tooltip.hover.top="'Array of strings of Environmental Parameters'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-input
                      id="environmentParameters"
                      v-model="appUpdateSpecification.enviromentParameters"
                    />
                  </div>
                </div>
                <div class="form-row form-group">
                  <label class="col-3 col-form-label">
                    Commands
                    <v-icon
                      v-b-tooltip.hover.top="'Array of strings of Commands'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-input
                      id="commands"
                      v-model="appUpdateSpecification.commands"
                    />
                  </div>
                </div>
                <div class="form-row form-group">
                  <label class="col-3 col-form-label">
                    Cont. Ports
                    <v-icon
                      v-b-tooltip.hover.top="'Container Ports - Array of ports which your container has'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-input
                      id="containerPorts"
                      v-model="appUpdateSpecification.containerPorts"
                    />
                  </div>
                </div>
                <div class="form-row form-group">
                  <label class="col-3 col-form-label">
                    Cont. Data
                    <v-icon
                      v-b-tooltip.hover.top="'Data folder that is shared by application to App volume. Prepend with r: for synced data between instances. Ex. r:/data. Prepend with g: for synced data and primary/standby solution. Ex. g:/data'"
                      name="info-circle"
                      class="mr-1"
                    />
                  </label>
                  <div class="col">
                    <b-form-input
                      id="containerData"
                      v-model="appUpdateSpecification.containerData"
                    />
                  </div>
                </div>
              </b-card>
            </b-col>
          </b-row>
          <b-row class="match-height">
            <b-col xs="12">
              <b-card>
                <b-card-title>
                  Resources &nbsp;&nbsp;&nbsp;<h6 class="inline etext-small">
                    Tiered:
                    <b-form-checkbox
                      id="tiered"
                      v-model="appUpdateSpecification.tiered"
                      switch
                      class="custom-control-primary inline"
                    />
                  </h6>
                </b-card-title>
                <b-form-group
                  v-if="!appUpdateSpecification.tiered"
                  label-cols="2"
                  label-cols-lg="1"
                  label="CPU"
                  label-for="cpu"
                >
                  <div class="mx-1">
                    {{ appUpdateSpecification.cpu }}
                  </div>
                  <b-form-input
                    id="cpu"
                    v-model="appUpdateSpecification.cpu"
                    placeholder="CPU cores to use by default"
                    type="range"
                    min="0.1"
                    max="15"
                    step="0.1"
                  />
                </b-form-group>
                <b-form-group
                  v-if="!appUpdateSpecification.tiered"
                  label-cols="2"
                  label-cols-lg="1"
                  label="RAM"
                  label-for="ram"
                >
                  <div class="mx-1">
                    {{ appUpdateSpecification.ram }}
                  </div>
                  <b-form-input
                    id="ram"
                    v-model="appUpdateSpecification.ram"
                    placeholder="RAM in MB value to use by default"
                    type="range"
                    min="100"
                    max="59000"
                    step="100"
                  />
                </b-form-group>
                <b-form-group
                  v-if="!appUpdateSpecification.tiered"
                  label-cols="2"
                  label-cols-lg="1"
                  label="SSD"
                  label-for="ssd"
                >
                  <div class="mx-1">
                    {{ appUpdateSpecification.hdd }}
                  </div>
                  <b-form-input
                    id="ssd"
                    v-model="appUpdateSpecification.hdd"
                    placeholder="SSD in GB value to use by default"
                    type="range"
                    min="1"
                    max="820"
                    step="1"
                  />
                </b-form-group>
              </b-card>
            </b-col>
          </b-row>
          <b-row v-if="appUpdateSpecification.tiered">
            <b-col
              xs="12"
              md="6"
              lg="4"
            >
              <b-card title="Cumulus">
                <div>
                  CPU: {{ appUpdateSpecification.cpubasic }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.cpubasic"
                  type="range"
                  min="0.1"
                  max="3"
                  step="0.1"
                />
                <div>
                  RAM: {{ appUpdateSpecification.rambasic }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.rambasic"
                  type="range"
                  min="100"
                  max="5000"
                  step="100"
                />
                <div>
                  SSD: {{ appUpdateSpecification.hddbasic }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.hddbasic"
                  type="range"
                  min="1"
                  max="180"
                  step="1"
                />
              </b-card>
            </b-col>
            <b-col
              xs="12"
              md="6"
              lg="4"
            >
              <b-card title="Nimbus">
                <div>
                  CPU: {{ appUpdateSpecification.cpusuper }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.cpusuper"
                  type="range"
                  min="0.1"
                  max="7"
                  step="0.1"
                />
                <div>
                  RAM: {{ appUpdateSpecification.ramsuper }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.ramsuper"
                  type="range"
                  min="100"
                  max="28000"
                  step="100"
                />
                <div>
                  SSD: {{ appUpdateSpecification.hddsuper }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.hddsuper"
                  type="range"
                  min="1"
                  max="400"
                  step="1"
                />
              </b-card>
            </b-col>
            <b-col
              xs="12"
              lg="4"
            >
              <b-card title="Stratus">
                <div>
                  CPU: {{ appUpdateSpecification.cpubamf }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.cpubamf"
                  type="range"
                  min="0.1"
                  max="15"
                  step="0.1"
                />
                <div>
                  RAM: {{ appUpdateSpecification.rambamf }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.rambamf"
                  type="range"
                  min="100"
                  max="59000"
                  step="100"
                />
                <div>
                  SSD: {{ appUpdateSpecification.hddbamf }}
                </div>
                <b-form-input
                  v-model="appUpdateSpecification.hddbamf"
                  type="range"
                  min="1"
                  max="820"
                  step="1"
                />
              </b-card>
            </b-col>
          </b-row>
        </div>
      </div>
      <div
        v-if="appUpdateSpecification.version >= 6"
        class="form-row form-group d-flex align-items-center"
      >
        <b-input-group>
          <b-input-group-prepend>
            <b-input-group-text>
              <b-icon
                class="mr-1"
                icon="clock-history"
              />
              Extend Subscription
              <v-icon
                v-b-tooltip.hover.top="'Select if you want to extend or change your subscription period'"
                name="info-circle"
                class="ml-1"
              />&nbsp; &nbsp;
            </b-input-group-text>
          </b-input-group-prepend>
          <b-input-group-append is-text>
            <b-form-checkbox
              id="extendSubscription"
              v-model="extendSubscription"
              switch
              class="custom-control-primary"
            />
          </b-input-group-append>
        </b-input-group>
      </div>
      <div
        v-if="extendSubscription && appUpdateSpecification.version >= 6"
        class="form-row form-group"
      >
        <label class="col-form-label">
          Period
          <v-icon
            v-b-tooltip.hover.top="'Time your application subscription will be extended'"
            name="info-circle"
            class="mr-2"
          />
          <kbd class="bg-primary mr-1"><b>{{ getExpireLabel || (appUpdateSpecification.expire ? `${appUpdateSpecification.expire} blocks` : '1 month') }}</b></kbd>
        </label>
        <div
          class="w-100"
          style="flex: 1; padding: 10px;"
        >
          <input
            id="period"
            v-model="expirePosition"
            type="range"
            class="form-control-range"
            style="width: 100%; outline: none;"
            :min="0"
            :max="5"
            :step="1"
          />
        </div>
      </div>
      <div>
        Currently your application is subscribed until <b>{{ new Date(appRunningTill.current).toLocaleString('en-GB', timeoptions.shortDate) }}</b>.
        <span v-if="extendSubscription">
          <br>
          Your new adjusted subscription end on <b>{{ new Date(appRunningTill.new).toLocaleString('en-GB', timeoptions.shortDate) }}</b>.
        </span>
        <span v-if="appRunningTill.new < appRunningTill.current" style="color: red">
          <br>
          <b>WARNING: Your selected subscription period will decrease the current subscription time!</b>
        </span>
      </div>
      <br>
      <div class="flex ">
        <b-form-checkbox
          id="tos"
          v-model="tosAgreed"
          switch
          class="custom-control-primary inline"
        /> I agree with
        <a
          href="https://cdn.runonflux.io/Flux_Terms_of_Service.pdf"
          target="_blank"
          rel="noopener noreferrer"
        >
          &nbsp;<b>Terms of Service</b>
        </a>
        <br><br>
      </div>
      <div>
        <b-button
          v-ripple.400="'rgba(255, 255, 255, 0.15)'"
          variant="outline-success"
          aria-label="Compute Update Message"
          class="mb-2 w-100 button-green"
          :disabled="tosAgreed === false"
          @click="checkFluxUpdateSpecificationsAndFormatMessage"
        >
          Compute Update Message
        </b-button>
      </div>
      <div v-if="dataToSign">
        <b-form-group
          label-cols="3"
          label-cols-lg="2"
          label="Update Message"
          label-for="updatemessage"
        >
          <div class="text-wrap">
            <b-form-textarea
              id="updatemessage"
              v-model="dataToSign"
              rows="6"
              readonly
            />
            <b-icon
              ref="copyButtonRef"
              v-b-tooltip="tooltipText"
              class="clipboard icon"
              scale="1.5"
              icon="clipboard"
              @click="copyMessageToSign"
            />
          </div>
        </b-form-group>
        <b-form-group
          label-cols="3"
          label-cols-lg="2"
          label="Signature"
          label-for="updatesignature"
        >
          <b-form-input
            id="updatesignature"
            v-model="signature"
          />
        </b-form-group>
        <b-row class="match-height">
          <b-col
            xs="6"
            lg="8"
          >
            <b-card>
              <br>
              <div class="text-center">
                <h4>
                  <b-icon
                    class="mr-1"
                    scale="1.4"
                    icon="chat-right"
                  />
                  Data has to be signed by the last application owner
                </h4>
              </div>
              <!-- <h4 class="text-center">
                <kbd class="alert-info no-wrap" style="border-radius: 15px; font-weight: 700 !important;"> <b-icon scale="1.2" icon="chat-right" />&nbsp;&nbsp;Data has to be signed by the last application owner&nbsp; </kbd>
              </h4> -->
              <b-card-text v-if="!freeUpdate">
                <br>
                <div class="text-center my-3">
                  <h4>
                    <b-icon
                      class="mr-1"
                      scale="1.4"
                      icon="cash-coin"
                    /><b>{{ appPricePerSpecsUSD }} USD + VAT</b>
                  </h4>
                </div>
              </b-card-text>
              <br>
              <b-button
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                :disabled="signature.length === 0"
                variant="outline-success"
                aria-label="Update Flux App"
                class="w-100"
                @click="update"
              >
                Update Application
              </b-button>
            </b-card>
          </b-col>
          <b-col
            xs="6"
            lg="4"
          >
            <b-card class="text-center" title="Sign with">
              <div class="loginRow">
                <a
                  @click="initiateSignWSUpdate"
                >
                  <img
                    class="walletIcon"
                    src="@/assets/images/FluxID.svg"
                    alt="Flux ID"
                    height="100%"
                    width="100%"
                  >
                </a>
                <a @click="initSSP">
                  <img
                    class="walletIcon"
                    :src="skin === 'dark' ? require('@/assets/images/ssp-logo-white.svg') : require('@/assets/images/ssp-logo-black.svg')"
                    alt="SSP"
                    height="100%"
                    width="100%"
                  >
                </a>
              </div>
              <div class="loginRow">
                <a @click="initWalletConnect">
                  <img
                    class="walletIcon"
                    src="@/assets/images/walletconnect.svg"
                    alt="WalletConnect"
                    height="100%"
                    width="100%"
                  >
                </a>
                <a @click="initMetamask">
                  <img
                    class="walletIcon"
                    src="@/assets/images/metamask.svg"
                    alt="Metamask"
                    height="100%"
                    width="100%"
                  >
                </a>
              </div>
              <div class="loginRow">
                <b-button
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="primary"
                  aria-label="Flux Single Sign On/Email"
                  class="my-1"
                  style="width: 250px"
                  @click="initSignFluxSSO"
                >
                  Flux Single Sign On (SSO)/Email
                </b-button>
              </div>
            </b-card>
          </b-col>
        </b-row>
        <div
          v-if="updateHash && updateSpecifications"
          class="match-height"
        >
          <b-row>
            <b-card title="Test Application Installation">
              <b-card-text>
                <div>
                  It's now time to test your application install/launch. If you have update app specifications other than hardware specs it's very important to test the app install/launch to make sure your new application specifications work.
                  You will get the application install/launch log at the bottom of this page once it's completed, if the app starts you can proceed with the payment, if not, you need to fix/change the specifications and try again before pay for the app update.
                </div>
                <span v-if="testError" style="color: red">
                  <br>
                  <b>WARNING: Test failed! Check logs at the bottom. If the error is related with your application specifications try to fix it before you pay your update subscription.</b>
                </span>
              </b-card-text>
              <b-button
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="success"
                aria-label="Test Launch"
                class="my-1"
                @click="testAppInstall(updateHash)"
              >
                Test Installation
              </b-button>
            </b-card>
          </b-row>
        </div>
        <b-row
          v-if="updateHash && !freeUpdate"
          class="match-height"
        >
          <b-col
            xs="6"
            lg="8"
          >
            <b-card>
              <b-card-text>
                <b>Everything is ready, your payment option links, both for fiat and flux, are valid for the next 30 minutes.</b>
              </b-card-text>
              <br>
              The application will be subscribed until <b>{{ new Date(subscribedTill).toLocaleString('en-GB', timeoptions.shortDate) }}</b>
              <br>
              To finish the application update/renew, pay your application with your prefered payment method or check below how to pay with Flux crypto currency.
            </b-card>
          </b-col>
          <b-col
            xs="6"
            lg="4"
          >
            <b-card class="text-center" title="Pay with Stripe/PayPal">
              <div class="loginRow">
                <a v-if="stripeEnabled" @click="initStripePay(updateHash, appUpdateSpecification.name, appPricePerSpecsUSD, appUpdateSpecification.description)">
                  <img
                    class="stripePay"
                    src="@/assets/images/Stripe.svg"
                    alt="Stripe"
                    height="100%"
                    width="100%"
                  >
                </a>
                <a v-if="paypalEnabled" @click="initPaypalPay(updateHash, appUpdateSpecification.name, appPricePerSpecsUSD, appUpdateSpecification.description)">
                  <img
                    class="paypalPay"
                    src="@/assets/images/PayPal.png"
                    alt="PayPal"
                    height="100%"
                    width="100%"
                  >
                </a>
                <span v-if="!paypalEnabled && !stripeEnabled">Fiat Gateways Unavailable.</span>
              </div>
              <div v-if="checkoutLoading" className="loginRow">
                <b-spinner variant="primary" />
                <div class="text-center">
                  Checkout Loading ...
                </div>
              </div>
              <div v-if="fiatCheckoutURL" className="loginRow">
                <a :href="fiatCheckoutURL" target="_blank" rel="noopener noreferrer">
                  Click here for checkout if not redirected
                </a>
              </div>
            </b-card>
          </b-col>
        </b-row>
        <b-row
          v-if="updateHash && !applicationPriceFluxError && !freeUpdate"
          class="match-height"
        >
          <b-col
            xs="6"
            lg="8"
          >
            <b-card>
              <b-card-text>
                To pay in FLUX, please make a transaction of <b>{{ appPricePerSpecs }} FLUX</b> to address
                <b>'{{ deploymentAddress }}'</b>
                with the following message:
                <b>'{{ updateHash }}'</b>
              </b-card-text>
            </b-card>
          </b-col>
          <b-col
            xs="6"
            lg="4"
          >
            <b-card>
              <h4 v-if="applicationPriceFluxDiscount > 0">
                <kbd class="d-flex justify-content-center bg-primary mb-2">Discount - {{ applicationPriceFluxDiscount }}%</kbd>
              </h4>
              <h4 class="text-center mb-2">
                Pay with Zelcore/SSP
              </h4>
              <div class="loginRow">
                <a @click="initZelcorePay">
                  <img
                    class="walletIcon"
                    src="@/assets/images/FluxID.svg"
                    alt="Flux ID"
                    height="100%"
                    width="100%"
                  >
                </a>
                <a @click="initSSPpay">
                  <img
                    class="walletIcon"
                    :src="skin === 'dark' ? require('@/assets/images/ssp-logo-white.svg') : require('@/assets/images/ssp-logo-black.svg')"
                    alt="SSP"
                    height="100%"
                    width="100%"
                  >
                </a>
              </div>
            </b-card>
          </b-col>
        </b-row>
        <b-row
          v-if="updateHash && freeUpdate"
          class="match-height"
        >
          <b-card>
            <b-card-text>
              Everything is ready, your application update should be effective automatically in less than 30 minutes.
            </b-card-text>
          </b-card>
        </b-row>
      </div>
    </b-tab>
    <b-tab
      title="Cancel Subscription"
      :disabled="!isAppOwner || appUpdateSpecification.version < 6"
    >
      <div
        v-if="!fluxCommunication"
        class="text-danger "
      >
        Warning: Connected Flux is not communicating properly with Flux network
      </div>
      <div
        style="
          border: 1px solid #ccc;
          border-radius: 8px;
          height: 45px;
          padding: 12px;
          line-height: 0px;
        "
      >
        <h5>
          <b-icon
            class="mr-1"
            icon="calendar2-x-fill"
            scale="1.2"
          /> Cancel Application Subscription
        </h5>
      </div>
      <br>
      <div>
        Currently your application is subscribed until <b>{{ new Date(appRunningTill.current).toLocaleString('en-GB', timeoptions.shortDate) }}</b>.
        <br>
        <b style="color: red;">WARNING: By cancelling your application subscription, your application will be removed from the network and all data will be lost.</b>
      </div>
      <br>
      <div>
        <b-button
          v-ripple.400="'rgba(255, 255, 255, 0.15)'"
          variant="outline-danger"
          aria-label="Compute Cancel Message"
          class="mb-2 w-100 button-red"
          @click="checkFluxCancelSubscriptionAndFormatMessage"
        >
          Compute Cancel Message
        </b-button>
      </div>
      <div v-if="dataToSign">
        <b-form-group
          label-cols="3"
          label-cols-lg="2"
          label="Update Message"
          label-for="updatemessage"
        >
          <div class="text-wrap">
            <b-form-textarea
              id="updatemessage"
              v-model="dataToSign"
              rows="6"
              readonly
            />
            <b-icon
              ref="copyButtonRef"
              v-b-tooltip="tooltipText"
              class="clipboard icon"
              scale="1.5"
              icon="clipboard"
              @click="copyMessageToSign"
            />
          </div>
        </b-form-group>
        <b-form-group
          label-cols="3"
          label-cols-lg="2"
          label="Signature"
          label-for="updatesignature"
        >
          <b-form-input
            id="updatesignature"
            v-model="signature"
          />
        </b-form-group>
        <b-row class="match-height">
          <b-col
            xs="6"
            lg="8"
          >
            <b-card>
              <br>
              <div class="text-center">
                <h4>
                  <b-icon
                    class="mr-1"
                    scale="1.4"
                    icon="chat-right"
                  />
                  Data has to be signed by the last application owner
                </h4>
              </div>
              <br>
              <b-button
                v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                variant="outline-success"
                aria-label="Update Flux App"
                class="w-100"
                @click="update"
              >
                Cancel Application
              </b-button>
            </b-card>
          </b-col>
          <b-col
            xs="6"
            lg="4"
          >
            <b-card class="text-center" title="Sign with">
              <div class="loginRow">
                <a
                  @click="initiateSignWSUpdate"
                >
                  <img
                    class="walletIcon"
                    src="@/assets/images/FluxID.svg"
                    alt="Flux ID"
                    height="100%"
                    width="100%"
                  >
                </a>
                <a @click="initSSP">
                  <img
                    class="walletIcon"
                    :src="skin === 'dark' ? require('@/assets/images/ssp-logo-white.svg') : require('@/assets/images/ssp-logo-black.svg')"
                    alt="SSP"
                    height="100%"
                    width="100%"
                  >
                </a>
              </div>
              <div class="loginRow">
                <a @click="initWalletConnect">
                  <img
                    class="walletIcon"
                    src="@/assets/images/walletconnect.svg"
                    alt="WalletConnect"
                    height="100%"
                    width="100%"
                  >
                </a>
                <a @click="initMetamask">
                  <img
                    class="walletIcon"
                    src="@/assets/images/metamask.svg"
                    alt="Metamask"
                    height="100%"
                    width="100%"
                  >
                </a>
              </div>
              <div class="loginRow">
                <b-button
                  v-ripple.400="'rgba(255, 255, 255, 0.15)'"
                  variant="primary"
                  aria-label="Flux Single Sign On/Email"
                  class="my-1"
                  style="width: 250px"
                  @click="initSignFluxSSO"
                >
                  Flux Single Sign On (SSO)/Email
                </b-button>
              </div>
            </b-card>
          </b-col>
        </b-row>
        <b-row
          v-if="updateHash"
          class="match-height"
        >
          <b-card>
            <b-card-text>
              Everything is ready, your application cancelattion should be effective automatically in less than 30 minutes and removed from the network in the next ~3hours.
            </b-card-text>
          </b-card>
        </b-row>
      </div>
    </b-tab>
  </b-tabs>
  <div
    v-if="output.length > 0"
    class="actionCenter"
  >
    <br>
    <b-row>
      <b-col cols="9">
        <b-form-textarea
          plaintext
          no-resize
          :rows="output.length + 1"
          :value="stringOutput()"
          class="mt-1"
        />
      </b-col>
      <b-col
        v-if="downloadOutputReturned"
        cols="3"
      >
        <h3>Downloads</h3>
        <div
          v-for="info in downloadOutput"
          :key="info.id"
        >
          <h4> {{ info.id }}</h4>
          <b-progress
            :value="info.detail.current / info.detail.total * 100"
            max="100"
            striped
            height="1rem"
            :variant="info.variant"
          />
          <br>
        </div>
      </b-col>
    </b-row>
  </div>
  <div>
    <br>
    By managing an application I agree with
    <a
      href="https://cdn.runonflux.io/Flux_Terms_of_Service.pdf"
      target="_blank"
      rel="noopener noreferrer"
    >
      Terms of Service
    </a>
  </div>
  <b-modal
    v-model="chooseEnterpriseDialog"
    header-bg-variant="primary"
    title-class="custom-modal-title"
    title="Select Enterprise Nodes"
    size="xl"
    centered
    button-size="sm"
    ok-only
    ok-title="Done"
  >
    <b-row>
      <b-col
        md="4"
        sm="4"
        class="my-1"
      >
        <b-form-group class="mb-0">
          <label class="d-inline-block text-left mr-50">Per page</label>
          <b-form-select
            id="perPageSelect"
            v-model="entNodesSelectTable.perPage"
            size="sm"
            :options="entNodesSelectTable.pageOptions"
            class="w-50"
          />
        </b-form-group>
      </b-col>
      <b-col
        md="8"
        class="my-1"
      >
        <b-form-group
          label="Filter"
          label-cols-sm="1"
          label-align-sm="right"
          label-for="filterInput"
          class="mb-0"
        >
          <b-input-group size="sm">
            <b-form-input
              id="filterInput"
              v-model="entNodesSelectTable.filter"
              type="search"
              placeholder="Type to Search"
            />
            <b-input-group-append>
              <b-button
                :disabled="!entNodesSelectTable.filter"
                @click="entNodesSelectTable.filter = ''"
              >
                Clear
              </b-button>
            </b-input-group-append>
          </b-input-group>
        </b-form-group>
      </b-col>

      <b-col cols="12">
        <b-table
          class="app-enterprise-nodes-table"
          striped
          hover
          responsive
          :per-page="entNodesSelectTable.perPage"
          :current-page="entNodesSelectTable.currentPage"
          :items="enterpriseNodes"
          :fields="entNodesSelectTable.fields"
          :sort-by.sync="entNodesSelectTable.sortBy"
          :sort-desc.sync="entNodesSelectTable.sortDesc"
          :sort-direction="entNodesSelectTable.sortDirection"
          :filter="entNodesSelectTable.filter"
          :filter-included-fields="entNodesSelectTable.filterOn"
          show-empty
          :empty-text="'No Enterprise Nodes For Addition Found'"
        >
          <template #cell(show_details)="row">
            <a @click="row.toggleDetails">
              <v-icon
                v-if="!row.detailsShowing"
                name="chevron-down"
              />
              <v-icon
                v-if="row.detailsShowing"
                name="chevron-up"
              />
            </a>
          </template>
          <template #row-details="row">
            <b-card class="">
              <list-entry
                title="IP Address"
                :data="row.item.ip"
              />
              <list-entry
                title="Public Key"
                :data="row.item.pubkey"
              />
              <list-entry
                title="Node Address"
                :data="row.item.payment_address"
              />
              <list-entry
                title="Collateral"
                :data="`${row.item.txhash}:${row.item.outidx}`"
              />
              <list-entry
                title="Tier"
                :data="row.item.tier"
              />
              <list-entry
                title="Overall Score"
                :data="row.item.score.toString()"
              />
              <list-entry
                title="Collateral Score"
                :data="row.item.collateralPoints.toString()"
              />
              <list-entry
                title="Maturity Score"
                :data="row.item.maturityPoints.toString()"
              />
              <list-entry
                title="Public Key Score"
                :data="row.item.pubKeyPoints.toString()"
              />
              <list-entry
                title="Enterprise Apps Assigned"
                :data="row.item.enterpriseApps.toString()"
              />
              <div>
                <b-button
                  size="sm"
                  class="mr-0"
                  variant="primary"
                  @click="openNodeFluxOS(locationRow.item.ip.split(':')[0], locationRow.item.ip.split(':')[1] ? +locationRow.item.ip.split(':')[1] - 1 : 16126)"
                >
                  Visit FluxNode
                </b-button>
              </div>
            </b-card>
          </template>
          <template #cell(ip)="row">
            {{ row.item.ip }}
          </template>
          <template #cell(payment_address)="row">
            {{ row.item.payment_address.slice(0, 8) }}...{{ row.item.payment_address.slice(row.item.payment_address.length - 8, row.item.payment_address.length) }}
          </template>
          <template #cell(tier)="row">
            {{ row.item.tier }}
          </template>
          <template #cell(score)="row">
            {{ row.item.score }}
          </template>
          <template #cell(actions)="locationRow">
            <b-button
              size="sm"
              class="mr-1 mb-1"
              variant="primary"
              @click="openNodeFluxOS(locationRow.item.ip.split(':')[0], locationRow.item.ip.split(':')[1] ? +locationRow.item.ip.split(':')[1] - 1 : 16126)"
            >
              Visit
            </b-button>
            <b-button
              v-if="!selectedEnterpriseNodes.find((node) => node.ip === locationRow.item.ip)"
              :id="`add-${locationRow.item.ip}`"
              size="sm"
              class="mr-1 mb-1"
              variant="success"
              @click="addFluxNode(locationRow.item.ip)"
            >
              Add
            </b-button>
            <b-button
              v-if="selectedEnterpriseNodes.find((node) => node.ip === locationRow.item.ip)"
              :id="`add-${locationRow.item.ip}`"
              size="sm"
              class="mr-1 mb-1"
              variant="danger"
              @click="removeFluxNode(locationRow.item.ip)"
            >
              Remove
            </b-button>
          </template>
        </b-table>
      </b-col>
      <b-col cols="12">
        <b-pagination
          v-model="entNodesSelectTable.currentPage"
          :total-rows="entNodesSelectTable.totalRows"
          :per-page="entNodesSelectTable.perPage"
          align="center"
          size="sm"
          class="my-0"
        />
        <span class="table-total">Total: {{ entNodesSelectTable.totalRows }}</span>
      </b-col>
    </b-row>
  </b-modal>
</div>
