import{as as $,at as S,n as x,ah as mt,au as ee,av as U,aw as bt,ax as te,ay as A,az as gt,aA as ht,aB as wt,aC as p,aD as xt,aE as Fe,aF as Pt,aG as vt,aH as Ot,aI as Gt,aJ as R,aK as Ae,aL as De,af as Et,aM as It,aN as St,aO as Je,aP as At,aQ as Dt,aR as Ut,aS as Bt,aT as Ct,aU as Lt,aV as $t,aW as Ft,aX as Ue,aY as Be,aZ as jt,a_ as zt,a$ as Vt}from"./crypto-walletconnect-BoPpUqP0.js";function kt(e,t){let a;try{a=e()}catch{return}return{getItem:r=>{var i;const s=f=>f===null?null:JSON.parse(f,void 0),o=(i=a.getItem(r))!=null?i:null;return o instanceof Promise?o.then(s):s(o)},setItem:(r,i)=>a.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>a.removeItem(r)}}const ne=e=>t=>{try{const a=e(t);return a instanceof Promise?a:{then(n){return ne(n)(a)},catch(n){return this}}}catch(a){return{then(n){return this},catch(n){return ne(n)(a)}}}},Mt=(e,t)=>(a,n,r)=>{let i={storage:kt(()=>localStorage),partialize:d=>d,version:0,merge:(d,m)=>({...m,...d}),...t},s=!1;const o=new Set,f=new Set;let u=i.storage;if(!u)return e((...d)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),a(...d)},n,r);const l=()=>{const d=i.partialize({...n()});return u.setItem(i.name,{state:d,version:i.version})},b=r.setState;r.setState=(d,m)=>{b(d,m),l()};const h=e((...d)=>{a(...d),l()},n,r);r.getInitialState=()=>h;let c;const v=()=>{var d,m;if(!u)return;s=!1,o.forEach(w=>{var O;return w((O=n())!=null?O:h)});const G=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(d=n())!=null?d:h))||void 0;return ne(u.getItem.bind(u))(i.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==i.version){if(i.migrate){const O=i.migrate(w.state,w.version);return O instanceof Promise?O.then(D=>[!0,D]):[!0,O]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var O;const[D,V]=w;if(c=i.merge(V,(O=n())!=null?O:h),a(c,!0),D)return l()}).then(()=>{G?.(c,void 0),c=n(),s=!0,f.forEach(w=>w(c))}).catch(w=>{G?.(void 0,w)})};return r.persist={setOptions:d=>{i={...i,...d},d.storage&&(u=d.storage)},clearStorage:()=>{u?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>v(),hasHydrated:()=>s,onHydrate:d=>(o.add(d),()=>{o.delete(d)}),onFinishHydration:d=>(f.add(d),()=>{f.delete(d)})},i.skipHydration||v(),c||h},Qa=Mt,je=e=>{let t;const a=new Set,n=(u,l)=>{const b=typeof u=="function"?u(t):u;if(!Object.is(b,t)){const h=t;t=l??(typeof b!="object"||b===null)?b:Object.assign({},t,b),a.forEach(c=>c(t,h))}},r=()=>t,o={setState:n,getState:r,getInitialState:()=>f,subscribe:u=>(a.add(u),()=>a.delete(u))},f=t=e(n,r,o);return o},qa=e=>e?je(e):je,en=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function We(e){const{authorization:t,factory:a,factoryData:n}=e;if(a==="0x7702"||a==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";const r=t.address;return $([r,n??"0x"])}return a?$([a,n??"0x"]):"0x"}function Ye(e){const{callGasLimit:t,callData:a,maxPriorityFeePerGas:n,maxFeePerGas:r,paymaster:i,paymasterData:s,paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:f,sender:u,signature:l="0x",verificationGasLimit:b}=e,h=$([S(x(b||0n),{size:16}),S(x(t||0n),{size:16})]),c=We(e),v=$([S(x(n||0n),{size:16}),S(x(r||0n),{size:16})]),d=e.nonce??0n,m=i?$([i,S(x(f||0n),{size:16}),S(x(o||0n),{size:16}),s||"0x"]):"0x",G=e.preVerificationGas??0n;return{accountGasLimits:h,callData:a,initCode:c,gasFees:v,nonce:d,paymasterAndData:m,preVerificationGas:G,sender:u,signature:l}}const Rt={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function Tt(e){const{chainId:t,entryPointAddress:a,userOperation:n}=e,r=Ye(n);return{types:Rt,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:a},message:r}}function tn(e){const{chainId:t,entryPointAddress:a,entryPointVersion:n}=e,r=e.userOperation,{authorization:i,callData:s="0x",callGasLimit:o,maxFeePerGas:f,maxPriorityFeePerGas:u,nonce:l,paymasterAndData:b="0x",preVerificationGas:h,sender:c,verificationGasLimit:v}=r;if(n==="0.8")return mt(Tt({chainId:t,entryPointAddress:a,userOperation:r}));const d=(()=>{if(n==="0.6"){const m=r.initCode?.slice(0,42),G=r.initCode?.slice(42),w=We({authorization:i,factory:m,factoryData:G});return ee([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[c,l,U(w),U(s),o,v,h,f,u,U(b)])}if(n==="0.7"){const m=Ye(r);return ee([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[m.sender,m.nonce,U(m.initCode),U(m.callData),m.accountGasLimits,m.preVerificationGas,m.gasFees,U(m.paymasterAndData)])}throw new Error(`entryPointVersion "${n}" not supported.`)})();return U(ee([{type:"bytes32"},{type:"address"},{type:"uint256"}],[U(d),a,BigInt(t)]))}async function an(e){const{extend:t,nonceKeyManager:a=bt({source:{get(){return Date.now()},set(){}}}),...n}=e;let r=!1;const i=await e.getAddress();return{...t,...n,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(s){const o=s?.key??BigInt(await a.consume({address:i,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...s,key:o}):await ht(e.client,{abi:wt(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[i,o]})},async isDeployed(){return r?!0:(r=!!await A(e.client,gt,"getCode")({address:i}),r)},...e.sign?{async sign(s){const[{factory:o,factoryData:f},u]=await Promise.all([this.getFactoryArgs(),e.sign(s)]);return o&&f?te({address:o,data:f,signature:u}):u}}:{},async signMessage(s){const[{factory:o,factoryData:f},u]=await Promise.all([this.getFactoryArgs(),e.signMessage(s)]);return o&&f&&o!=="0x7702"?te({address:o,data:f,signature:u}):u},async signTypedData(s){const[{factory:o,factoryData:f},u]=await Promise.all([this.getFactoryArgs(),e.signTypedData(s)]);return o&&f&&o!=="0x7702"?te({address:o,data:f,signature:u}):u},type:"smart"}}class re extends p{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(re,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class F extends p{constructor({cause:t,data:a,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a}}Object.defineProperty(F,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(F,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ie extends p{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(ie,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class se extends p{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(se,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class oe extends p{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(oe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class fe extends p{constructor({cause:t,factory:a,factoryData:n,initCode:r}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,a&&`factory: ${a}`,n&&`factoryData: ${n}`,r&&`initCode: ${r}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(fe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class ue extends p{constructor({cause:t,factory:a,factoryData:n,initCode:r}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,a&&`factory: ${a}`,n&&`factoryData: ${n}`,r&&`initCode: ${r}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(ue,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class ce extends p{constructor({cause:t,factory:a,factoryData:n,initCode:r,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,a&&`factory: ${a}`,n&&`factoryData: ${n}`,r&&`initCode: ${r}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(ce,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class de extends p{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(de,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class pe extends p{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}}Object.defineProperty(pe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class le extends p{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}}Object.defineProperty(le,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class ye extends p{constructor({cause:t,nonce:a}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[a&&`nonce: ${a}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(ye,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class me extends p{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}}Object.defineProperty(me,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class T extends p{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}}Object.defineProperty(T,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class be extends p{constructor({cause:t,paymasterAndData:a}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",a&&`paymasterAndData: ${a}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(be,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class L extends p{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(L,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(L,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class ge extends p{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class he extends p{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}}Object.defineProperty(he,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class N extends p{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}}Object.defineProperty(N,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class _ extends p{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(_,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class we extends p{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(we,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class xe extends p{constructor({cause:t,factory:a,factoryData:n,initCode:r}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",a&&"`factory`",n&&"`factoryData`",r&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(xe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class H extends p{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}}Object.defineProperty(H,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class Pe extends p{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(Pe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class J extends p{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(J,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class ve extends p{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(ve,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class Oe extends p{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(Oe,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class Ge extends p{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(Ge,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class Ee extends p{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(Ee,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class W extends p{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(W,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class Y extends p{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(Y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class K extends p{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(K,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class Z extends p{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(Z,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class Nt extends p{constructor({cause:t}){super(`An error occurred while executing user operation: ${t?.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}}class Ie extends p{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(Ie,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class Se extends p{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(Se,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class _t extends p{constructor(t,{callData:a,callGasLimit:n,docsPath:r,factory:i,factoryData:s,initCode:o,maxFeePerGas:f,maxPriorityFeePerGas:u,nonce:l,paymaster:b,paymasterAndData:h,paymasterData:c,paymasterPostOpGasLimit:v,paymasterVerificationGasLimit:d,preVerificationGas:m,sender:G,signature:w,verificationGasLimit:O}){const D=xt({callData:a,callGasLimit:n,factory:i,factoryData:s,initCode:o,maxFeePerGas:typeof f<"u"&&`${Fe(f)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Fe(u)} gwei`,nonce:l,paymaster:b,paymasterAndData:h,paymasterData:c,paymasterPostOpGasLimit:v,paymasterVerificationGasLimit:d,preVerificationGas:m,sender:G,signature:w,verificationGasLimit:O});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",D].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Ht extends p{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class Jt extends p{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}}class ze extends p{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const Wt=[F,T,L,N,_,H,J,Z,W,Y,K];function Yt(e,t){const a=(e.details||"").toLowerCase();if(re.message.test(a))return new re({cause:e});if(ie.message.test(a))return new ie({cause:e});if(se.message.test(a))return new se({cause:e});if(oe.message.test(a))return new oe({cause:e});if(fe.message.test(a))return new fe({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(ue.message.test(a))return new ue({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(ce.message.test(a))return new ce({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(de.message.test(a))return new de({cause:e});if(pe.message.test(a))return new pe({cause:e});if(ye.message.test(a))return new ye({cause:e,nonce:t.nonce});if(le.message.test(a))return new le({cause:e});if(me.message.test(a))return new me({cause:e});if(be.message.test(a))return new be({cause:e});if(L.message.test(a))return new L({cause:e});if(ge.message.test(a))return new ge({cause:e});if(he.message.test(a))return new he({cause:e});if(we.message.test(a))return new we({cause:e});if(Pe.message.test(a))return new Pe({cause:e});if(xe.message.test(a))return new xe({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(ve.message.test(a))return new ve({cause:e});if(Oe.message.test(a))return new Oe({cause:e});if(Ee.message.test(a))return new Ee({cause:e});if(Ge.message.test(a))return new Ge({cause:e});if(Ie.message.test(a))return new Ie({cause:e});if(Se.message.test(a))return new Se({cause:e});const n=e.walk(r=>Wt.some(i=>i.code===r.code));if(n){if(n.code===F.code)return new F({cause:e,data:n.data,message:n.details});if(n.code===T.code)return new T({cause:e});if(n.code===L.code)return new L({cause:e});if(n.code===N.code)return new N({cause:e});if(n.code===_.code)return new _({cause:e});if(n.code===H.code)return new H({cause:e});if(n.code===J.code)return new J({cause:e});if(n.code===Z.code)return new Z({cause:e});if(n.code===W.code)return new W({cause:e});if(n.code===Y.code)return new Y({cause:e});if(n.code===K.code)return new K({cause:e})}return new Nt({cause:e})}function Ke(e,{calls:t,docsPath:a,...n}){const r=(()=>{const i=Yt(e,n);if(t&&i instanceof F){const s=Kt(i),o=t?.filter(f=>f.abi);if(s&&o.length>0)return Zt({calls:o,revertData:s})}return i})();return new _t(r,{docsPath:a,...n})}function Kt(e){let t;return e.walk(a=>{const n=a;if(typeof n.data=="string"||typeof n.data?.revertData=="string"||!(n instanceof p)&&typeof n.message=="string"){const r=(n.data?.revertData||n.data||n.message).match?.(/(0x[A-Za-z0-9]*)/);if(r)return t=r[1],!0}return!1}),t}function Zt(e){const{calls:t,revertData:a}=e,{abi:n,functionName:r,args:i,to:s}=(()=>{const f=t?.filter(l=>!!l.abi);if(f.length===1)return f[0];const u=f.filter(l=>{try{return!!Pt({abi:l.abi,data:a})}catch{return!1}});return u.length===1?u[0]:{abi:[],functionName:f.reduce((l,b)=>`${l?`${l} | `:""}${b.functionName}`,""),args:void 0,to:void 0}})(),o=a==="0x"?new vt({functionName:r}):new Ot({abi:n,data:a,functionName:r});return new Gt(o,{abi:n,args:i,contractAddress:s,functionName:r})}function Xt(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function X(e){const t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=x(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=x(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=x(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=x(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=x(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=x(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=x(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=x(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=Qt(e.authorization)),t}function Qt(e){return{address:e.address,chainId:x(e.chainId),nonce:x(e.nonce),r:e.r?x(BigInt(e.r),{size:32}):S("0x",{size:32}),s:e.s?x(BigInt(e.s),{size:32}):S("0x",{size:32}),yParity:e.yParity?x(e.yParity,{size:1}):S("0x",{size:32})}}async function qt(e,t){const{chainId:a,entryPointAddress:n,context:r,...i}=t,s=X(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:f,...u}=await e.request({method:"pm_getPaymasterData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},n,x(a),r]});return{...u,...o&&{paymasterPostOpGasLimit:R(o)},...f&&{paymasterVerificationGasLimit:R(f)}}}async function ea(e,t){const{chainId:a,entryPointAddress:n,context:r,...i}=t,s=X(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:f,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},n,x(a),r]});return{...u,...o&&{paymasterPostOpGasLimit:R(o)},...f&&{paymasterVerificationGasLimit:R(f)}}}const ta=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function Ce(e,t){const a=t,{account:n=e.account,parameters:r=ta,stateOverride:i}=a;if(!n)throw new Ae;const s=De(n),o=e,f=a.paymaster??o?.paymaster,u=typeof f=="string"?f:void 0,{getPaymasterStubData:l,getPaymasterData:b}=(()=>{if(f===!0)return{getPaymasterStubData:y=>A(o,ea,"getPaymasterStubData")(y),getPaymasterData:y=>A(o,qt,"getPaymasterData")(y)};if(typeof f=="object"){const{getPaymasterStubData:y,getPaymasterData:P}=f;return{getPaymasterStubData:P&&y?y:P,getPaymasterData:P&&y?P:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),h=a.paymasterContext?a.paymasterContext:o?.paymasterContext;let c={...a,paymaster:u,sender:s.address};const[v,d,m,G,w]=await Promise.all([(async()=>a.calls?s.encodeCalls(a.calls.map(y=>{const P=y;return P.abi?{data:Et(P),to:P.to,value:P.value}:P})):a.callData)(),(async()=>{if(!r.includes("factory"))return;if(a.initCode)return{initCode:a.initCode};if(a.factory&&a.factoryData)return{factory:a.factory,factoryData:a.factoryData};const{factory:y,factoryData:P}=await s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:y&&P?$([y,P]):void 0}:{factory:y,factoryData:P}})(),(async()=>{if(r.includes("fees")){if(typeof a.maxFeePerGas=="bigint"&&typeof a.maxPriorityFeePerGas=="bigint")return c;if(o?.userOperation?.estimateFeesPerGas){const y=await o.userOperation.estimateFeesPerGas({account:s,bundlerClient:o,userOperation:c});return{...c,...y}}try{const y=o.client??e,P=await A(y,It,"estimateFeesPerGas")({chain:y.chain,type:"eip1559"});return{maxFeePerGas:typeof a.maxFeePerGas=="bigint"?a.maxFeePerGas:BigInt(2n*P.maxFeePerGas),maxPriorityFeePerGas:typeof a.maxPriorityFeePerGas=="bigint"?a.maxPriorityFeePerGas:BigInt(2n*P.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(r.includes("nonce"))return typeof a.nonce=="bigint"?a.nonce:s.getNonce()})(),(async()=>{if(r.includes("authorization")){if(typeof a.authorization=="object")return a.authorization;if(s.authorization&&!await s.isDeployed())return{...await St(s.client,s.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof v<"u"&&(c.callData=v),typeof d<"u"&&(c={...c,...d}),typeof m<"u"&&(c={...c,...m}),typeof G<"u"&&(c.nonce=G),typeof w<"u"&&(c.authorization=w),r.includes("signature")&&(typeof a.signature<"u"?c.signature=a.signature:c.signature=await s.getStubSignature(c)),s.entryPoint.version==="0.6"&&!c.initCode&&(c.initCode="0x");let O;async function D(){return O||(e.chain?e.chain.id:(O=await A(e,Je,"getChainId")({}),O))}let V=!1;if(r.includes("paymaster")&&l&&!u&&!a.paymasterAndData){const{isFinal:y=!1,sponsor:P,...yt}=await l({chainId:await D(),entryPointAddress:s.entryPoint.address,context:h,...c});V=y,c={...c,...yt}}if(s.entryPoint.version==="0.6"&&!c.paymasterAndData&&(c.paymasterAndData="0x"),r.includes("gas")){if(s.userOperation?.estimateGas){const y=await s.userOperation.estimateGas(c);c={...c,...y}}if(typeof c.callGasLimit>"u"||typeof c.preVerificationGas>"u"||typeof c.verificationGasLimit>"u"||c.paymaster&&typeof c.paymasterPostOpGasLimit>"u"||c.paymaster&&typeof c.paymasterVerificationGasLimit>"u"){const y=await A(o,Ze,"estimateUserOperationGas")({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...c.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...c});c={...c,callGasLimit:c.callGasLimit??y.callGasLimit,preVerificationGas:c.preVerificationGas??y.preVerificationGas,verificationGasLimit:c.verificationGasLimit??y.verificationGasLimit,paymasterPostOpGasLimit:c.paymasterPostOpGasLimit??y.paymasterPostOpGasLimit,paymasterVerificationGasLimit:c.paymasterVerificationGasLimit??y.paymasterVerificationGasLimit}}}if(r.includes("paymaster")&&b&&!u&&!a.paymasterAndData&&!V){const y=await b({chainId:await D(),entryPointAddress:s.entryPoint.address,context:h,...c});c={...c,...y}}return delete c.calls,delete c.parameters,delete c.paymasterContext,typeof c.paymaster!="string"&&delete c.paymaster,c}async function Ze(e,t){const{account:a=e.account,entryPointAddress:n,stateOverride:r}=t;if(!a&&!t.sender)throw new Ae;const i=a?De(a):void 0,s=At(r),o=i?await A(e,Ce,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{const f=[X(o),n??i?.entryPoint?.address],u=await e.request({method:"eth_estimateUserOperationGas",params:s?[...f,s]:[...f]});return Xt(u)}catch(f){const u=t.calls;throw Ke(f,{...o,...u?{calls:u}:{}})}}function aa(e){return e.request({method:"eth_supportedEntryPoints"})}function na(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function ra(e,{hash:t}){const a=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!a)throw new Jt({hash:t});const{blockHash:n,blockNumber:r,entryPoint:i,transactionHash:s,userOperation:o}=a;return{blockHash:n,blockNumber:BigInt(r),entryPoint:i,transactionHash:s,userOperation:na(o)}}function ia(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(a=>Dt(a))),e.receipt&&(t.receipt=Ut(t.receipt)),t}async function Xe(e,{hash:t}){const a=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!a)throw new Ht({hash:t});return ia(a)}async function sa(e,t){const{account:a=e.account,entryPointAddress:n}=t;if(!a&&!t.sender)throw new Ae;const r=a?De(a):void 0,i=r?await A(e,Ce,"prepareUserOperation")(t):t,s=t.signature||await r?.signUserOperation?.(i),o=X({...i,signature:s});try{return await e.request({method:"eth_sendUserOperation",params:[o,n??r?.entryPoint?.address]},{retryCount:0})}catch(f){const u=t.calls;throw Ke(f,{...i,...u?{calls:u}:{},signature:s})}}function oa(e,t){const{hash:a,pollingInterval:n=e.pollingInterval,retryCount:r,timeout:i=12e4}=t;let s=0;const o=Bt(["waitForUserOperationReceipt",e.uid,a]);return new Promise((f,u)=>{const l=Ct(o,{resolve:f,reject:u},b=>{const h=d=>{v(),d(),l()},c=i?setTimeout(()=>h(()=>b.reject(new ze({hash:a}))),i):void 0,v=Lt(async()=>{r&&s>=r&&(clearTimeout(c),h(()=>b.reject(new ze({hash:a}))));try{const d=await A(e,Xe,"getUserOperationReceipt")({hash:a});h(()=>b.resolve(d))}catch(d){const m=d;m.name!=="UserOperationReceiptNotFoundError"&&h(()=>b.reject(m))}finally{clearTimeout(c)}s++},{emitOnBegin:!0,interval:n});return v})})}function fa(e){return{estimateUserOperationGas:t=>Ze(e,t),getChainId:()=>Je(e),getSupportedEntryPoints:()=>aa(e),getUserOperation:t=>ra(e,t),getUserOperationReceipt:t=>Xe(e,t),prepareUserOperation:t=>Ce(e,t),sendUserOperation:t=>sa(e,t),waitForUserOperationReceipt:t=>oa(e,t)}}function nn(e){const{client:t,key:a="bundler",name:n="Bundler Client",paymaster:r,paymasterContext:i,transport:s,userOperation:o}=e;return Object.assign($t({...e,chain:e.chain??t?.chain,key:a,name:n,transport:s,type:"bundlerClient"}),{client:t,paymaster:r,paymasterContext:i,userOperation:o}).extend(fa)}const rn="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",ua="0.1.1";function ca(){return ua}class g extends Error{constructor(t,a={}){const n=(()=>{if(a.cause instanceof g){if(a.cause.details)return a.cause.details;if(a.cause.shortMessage)return a.cause.shortMessage}return a.cause?.message?a.cause.message:a.details})(),r=a.cause instanceof g&&a.cause.docsPath||a.docsPath,s=`https://oxlib.sh${r??""}`,o=[t||"An error occurred.",...a.metaMessages?["",...a.metaMessages]:[],...n||r?["",n?`Details: ${n}`:void 0,r?`See: ${s}`:void 0]:[]].filter(f=>typeof f=="string").join(`
`);super(o,a.cause?{cause:a.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ca()}`}),this.cause=a.cause,this.details=n,this.docs=s,this.docsPath=r,this.shortMessage=t}walk(t){return Qe(this,t)}}function Qe(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Qe(e.cause,t):t?null:e}const da="#__bigint";function Q(e,t,a){return JSON.stringify(e,(n,r)=>typeof r=="bigint"?r.toString()+da:r,a)}function pa(e,t){if(z(e)>t)throw new Aa({givenSize:z(e),maxSize:t})}function la(e,t){if(typeof t=="number"&&t>0&&t>z(e)-1)throw new ot({offset:t,position:"start",size:z(e)})}function ya(e,t,a){if(typeof t=="number"&&typeof a=="number"&&z(e)!==a-t)throw new ot({offset:a,position:"end",size:z(e)})}const E={zero:48,nine:57,A:65,F:70,a:97,f:102};function Ve(e){if(e>=E.zero&&e<=E.nine)return e-E.zero;if(e>=E.A&&e<=E.F)return e-(E.A-10);if(e>=E.a&&e<=E.f)return e-(E.a-10)}function Le(e,t){if(C(e)>t)throw new Ga({givenSize:C(e),maxSize:t})}function ma(e,t){if(typeof t=="number"&&t>0&&t>C(e)-1)throw new nt({offset:t,position:"start",size:C(e)})}function ba(e,t,a){if(typeof t=="number"&&typeof a=="number"&&C(e)!==a-t)throw new nt({offset:a,position:"end",size:C(e)})}function qe(e,t={}){const{dir:a,size:n=32}=t;if(n===0)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Ea({size:Math.ceil(r.length/2),targetSize:n,type:"Hex"});return`0x${r[a==="right"?"padEnd":"padStart"](n*2,"0")}`}const ga=new TextEncoder,ha=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function wa(e,t={}){const{strict:a=!1}=t;if(!e)throw new ke(e);if(typeof e!="string")throw new ke(e);if(a&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Me(e);if(!e.startsWith("0x"))throw new Me(e)}function q(...e){return`0x${e.reduce((t,a)=>t+a.replace("0x",""),"")}`}function et(e){return e instanceof Uint8Array?j(e):Array.isArray(e)?j(new Uint8Array(e)):e}function j(e,t={}){let a="";for(let r=0;r<e.length;r++)a+=ha[e[r]];const n=`0x${a}`;return typeof t.size=="number"?(Le(n,t.size),at(n,t.size)):n}function B(e,t={}){const{signed:a,size:n}=t,r=BigInt(e);let i;n?a?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof e=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&a?-i-1n:0;if(i&&r>i||r<s){const u=typeof e=="bigint"?"n":"";throw new Oa({max:i?`${i}${u}`:void 0,min:`${s}${u}`,signed:a,size:n,value:`${e}${u}`})}const f=`0x${(a&&r<0?(1n<<BigInt(n*8))+BigInt(r):r).toString(16)}`;return n?xa(f,n):f}function tt(e,t={}){return j(ga.encode(e),t)}function xa(e,t){return qe(e,{dir:"left",size:t})}function at(e,t){return qe(e,{dir:"right",size:t})}function I(e,t,a,n={}){const{strict:r}=n;ma(e,t);const i=`0x${e.replace("0x","").slice((t??0)*2,(a??e.length)*2)}`;return r&&ba(i,t,a),i}function C(e){return Math.ceil((e.length-2)/2)}function Pa(e,t={}){const{signed:a}=t;t.size&&Le(e,t.size);const n=BigInt(e);if(!a)return n;const r=(e.length-2)/2,i=(1n<<BigInt(r)*8n)-1n,s=i>>1n;return n<=s?n:n-i-1n}function va(e,t={}){const{strict:a=!1}=t;try{return wa(e,{strict:a}),!0}catch{return!1}}class Oa extends g{constructor({max:t,min:a,signed:n,size:r,value:i}){super(`Number \`${i}\` is not in safe${r?` ${r*8}-bit`:""}${n?" signed":" unsigned"} integer range ${t?`(\`${a}\` to \`${t}\`)`:`(above \`${a}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class ke extends g{constructor(t){super(`Value \`${typeof t=="object"?Q(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Me extends g{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Ga=class extends g{constructor({givenSize:t,maxSize:a}){super(`Size cannot exceed \`${a}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},nt=class extends g{constructor({offset:t,position:a,size:n}){super(`Slice ${a==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}};class Ea extends g{constructor({size:t,targetSize:a,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${a}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function Ia(e){if(!(e instanceof Uint8Array)){if(!e)throw new k(e);if(typeof e!="object")throw new k(e);if(!("BYTES_PER_ELEMENT"in e))throw new k(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new k(e)}}function rt(e){return e instanceof Uint8Array?e:typeof e=="string"?st(e):it(e)}function it(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function st(e,t={}){const{size:a}=t;let n=e;a&&(Le(e,a),n=at(e,a));let r=n.slice(2);r.length%2&&(r=`0${r}`);const i=r.length/2,s=new Uint8Array(i);for(let o=0,f=0;o<i;o++){const u=Ve(r.charCodeAt(f++)),l=Ve(r.charCodeAt(f++));if(u===void 0||l===void 0)throw new g(`Invalid byte sequence ("${r[f-2]}${r[f-1]}" in "${r}").`);s[o]=u*16+l}return s}function z(e){return e.length}function Re(e,t,a,n={}){const{strict:r}=n;la(e,t);const i=e.slice(t,a);return r&&ya(i,t,a),i}function Te(e,t={}){const{size:a}=t;typeof a<"u"&&pa(e,a);const n=j(e,t);return Pa(n,t)}function Sa(e){try{return Ia(e),!0}catch{return!1}}class k extends g{constructor(t){super(`Value \`${typeof t=="object"?Q(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class Aa extends g{constructor({givenSize:t,maxSize:a}){super(`Size cannot exceed \`${a}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class ot extends g{constructor({offset:t,position:a,size:n}){super(`Slice ${a==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}function ft(e,t={}){const{as:a=typeof e=="string"?"Hex":"Bytes"}=t,n=Ft(rt(e));return a==="Bytes"?n:j(n)}function ut(e,t={}){const{compressed:a}=t,{prefix:n,x:r,y:i}=e;if(a===!1||typeof r=="bigint"&&typeof i=="bigint"){if(n!==4)throw new Ne({prefix:n,cause:new La});return}if(a===!0||typeof r=="bigint"&&typeof i>"u"){if(n!==3&&n!==2)throw new Ne({prefix:n,cause:new Ca});return}throw new Ba({publicKey:e})}function Da(e){const t=(()=>{if(va(e))return ct(e);if(Sa(e))return Ua(e);const{prefix:a,x:n,y:r}=e;return typeof n=="bigint"&&typeof r=="bigint"?{prefix:a??4,x:n,y:r}:{prefix:a,x:n}})();return ut(t),t}function Ua(e){return ct(j(e))}function ct(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new $a({publicKey:e});if(e.length===130){const n=BigInt(I(e,0,32)),r=BigInt(I(e,32,64));return{prefix:4,x:n,y:r}}if(e.length===132){const n=Number(I(e,0,1)),r=BigInt(I(e,1,33)),i=BigInt(I(e,33,65));return{prefix:n,x:r,y:i}}const t=Number(I(e,0,1)),a=BigInt(I(e,1,33));return{prefix:t,x:a}}function fn(e,t={}){ut(e);const{prefix:a,x:n,y:r}=e,{includePrefix:i=!0}=t;return q(i?B(a,{size:1}):"0x",B(n,{size:32}),typeof r=="bigint"?B(r,{size:32}):"0x")}class Ba extends g{constructor({publicKey:t}){super(`Value \`${Q(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class Ne extends g{constructor({prefix:t,cause:a}){super(`Prefix "${t}" is invalid.`,{cause:a}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class Ca extends g{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class La extends g{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let $a=class extends g{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${C(et(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const _e=2n**256n-1n;function Fa(e,t={}){const{recovered:a}=t;if(typeof e.r>"u")throw new ae({signature:e});if(typeof e.s>"u")throw new ae({signature:e});if(a&&typeof e.yParity>"u")throw new ae({signature:e});if(e.r<0n||e.r>_e)throw new ka({value:e.r});if(e.s<0n||e.s>_e)throw new Ma({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new $e({value:e.yParity})}function cn(e){if(e.length!==130&&e.length!==132)throw new Va({signature:e});const t=BigInt(I(e,0,32)),a=BigInt(I(e,32,64)),n=(()=>{const r=+`0x${e.slice(130)}`;if(!Number.isNaN(r))try{return ja(r)}catch{throw new $e({value:r})}})();return typeof n>"u"?{r:t,s:a}:{r:t,s:a,yParity:n}}function dn(e){Fa(e);const t=e.r,a=e.s;return q(B(t,{size:32}),B(a,{size:32}),typeof e.yParity=="number"?B(za(e.yParity),{size:1}):"0x")}function ja(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Ra({value:e})}function za(e){if(e===0)return 27;if(e===1)return 28;throw new $e({value:e})}class Va extends g{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${C(et(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class ae extends g{constructor({signature:t}){super(`Signature \`${Q(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class ka extends g{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class Ma extends g{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class $e extends g{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Ra extends g{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const Ta=new TextDecoder,M=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]));({...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t]))});function Na(e,t={}){const{pad:a=!0,url:n=!1}=t,r=new Uint8Array(Math.ceil(e.length/3)*4);for(let f=0,u=0;u<e.length;f+=4,u+=3){const l=(e[u]<<16)+(e[u+1]<<8)+(e[u+2]|0);r[f]=M[l>>18],r[f+1]=M[l>>12&63],r[f+2]=M[l>>6&63],r[f+3]=M[l&63]}const i=e.length%3,s=Math.floor(e.length/3)*4+(i&&i+1);let o=Ta.decode(new Uint8Array(r.buffer,0,s));return a&&i===1&&(o+="=="),a&&i===2&&(o+="="),n&&(o=o.replaceAll("+","-").replaceAll("/","_")),o}function _a(e,t={}){return Na(st(e),t)}const dt={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},pt={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},lt={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Ha=Be(dt.p),Ja=Be(pt.p),Wa=Be(lt.p),Ya=Ue({...dt,Fp:Ha,lowS:!1},jt);Ue({...pt,Fp:Ja,lowS:!1},zt);Ue({...lt,Fp:Wa,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Vt);const He=Ya;Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);function Ka(e={}){const{flag:t=5,rpId:a=window.location.hostname,signCount:n=0}=e,r=ft(tt(a)),i=B(t,{size:1}),s=B(n,{size:4});return q(r,i,s)}function Za(e){const{challenge:t,crossOrigin:a=!1,extraClientData:n,origin:r=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:_a(t,{url:!0,pad:!1}),origin:r,crossOrigin:a,...n})}function pn(e){const{challenge:t,crossOrigin:a,extraClientData:n,flag:r,origin:i,rpId:s,signCount:o,userVerification:f="required"}=e,u=Ka({flag:r,rpId:s,signCount:o}),l=Za({challenge:t,crossOrigin:a,extraClientData:n,origin:i}),b=ft(tt(l)),h=l.indexOf('"challenge"'),c=l.indexOf('"type"'),v={authenticatorData:u,clientDataJSON:l,challengeIndex:h,typeIndex:c,userVerificationRequired:f==="required"},d=q(u,b);return{metadata:v,payload:d}}async function ln(e={}){const{extractable:t=!1}=e,a=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),n=await globalThis.crypto.subtle.exportKey("raw",a.publicKey),r=Da(new Uint8Array(n));return{privateKey:a.privateKey,publicKey:r}}async function yn(e){const{payload:t,privateKey:a}=e,n=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},a,rt(t)),r=it(new Uint8Array(n)),i=Te(Re(r,0,32));let s=Te(Re(r,32,64));return s>He.CURVE.n/2n&&(s=He.CURVE.n-s),{r:i,s}}export{kt as a,nn as b,qa as c,yn as d,dn as e,ln as f,pn as g,cn as h,an as i,rn as j,en as k,tn as l,Qa as p,I as s,fn as t};
