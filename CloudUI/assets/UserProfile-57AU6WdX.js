import{C}from"./scrollbar-CXs_Utq1.js";import{c as F,j as N,I as A}from"./index-QPPWK7xw.js";import{q as R}from"./query-parser-C3-dT-Rr.js";import{u as U,e as j,s as q}from"./vue-core-CU9AIURn.js";import{e as E}from"./eventBus-BZyChua5.js";import"./walletService-ARo4SzYC.js";import"./firebase-BnYKcu-W.js";import{Q as x,R as V,b as m,y as O,z as Q,A as I,T as Z,x as g,U as J,D as M,r as W,c as $,n as G}from"./vuetify-_4u1He_j.js";import{f as H}from"./firebase-Cn841U3c.js";import{u as K}from"./i18n-Bm8bpAAW.js";import{c as X,r as Y,f as v,g as s,P as c,x as S,a3 as a,y as r,Q as e,j as u,U as d,T as y,F as _,l as ee,ay as oe,L as te}from"./apexcharts-nIAyciCq.js";import"./crypto-metamask-D6vz180a.js";import"./ansi-utils-ChIB8aIv.js";import"./socketio-BDGyx5_k.js";import"./uuid-B49X2dQj.js";import"./vueuse-Bid7ZbHY.js";import"./unhead-DEOrWl0D.js";import"./cookie-BfmCf_44.js";import"./unjs-utils-GcjLqAqW.js";import"./http-BZQDkn3h.js";import"./casl-DNC8KRD8.js";import"./icons-mdi-_QP0sdRJ.js";import"./sanitizer-DAUAC_Zc.js";import"./element-plus-Cr1Qs4Q_.js";import"./lodash-C_Sw0jJq.js";import"./event-utils-DGlX1gEp.js";const ae={class:"d-flex gap-2 align-center"},re={class:"text-h6 font-weight-medium"},se={class:"px-4 py-2"},le={class:"d-flex align-center"},Fe={__name:"UserProfile",setup(ie){const{t:z}=K(),T=U(),w=j(),f=F(),{privilege:h,zelid:L}=q(f),k=X(()=>{L.value;const n=localStorage.getItem("zelidauth");if(n)try{return R.parse(n)}catch{return{}}return{}}),l=Y({model:!1,text:"",color:"info",icon:"mdi-information",timeout:4e3});let p=null;function P(n,i,o=null,b=4e3){p&&clearTimeout(p),l.value={model:!1,text:i,icon:o||{success:"mdi-check-circle",error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information",danger:"mdi-alert-circle"}[n],color:n,timeout:b},requestAnimationFrame(()=>{l.value.model=!0}),p=setTimeout(()=>{l.value.model=!1},b)}const t={id:1,fullName:"John Doe",username:"johndoe",password:"admin",avatar:"/images/logo.png",email:"admin@demo.com"};async function B(){const n=localStorage.getItem("zelidauth"),i=localStorage.getItem("loginType");localStorage.removeItem("zelidauth"),localStorage.removeItem("loginType"),N(),f.setPrivilege("none"),f.setZelid("");try{await A.logoutCurrentSession(n)}catch(o){console.error("API error during logout:",o)}if(i==="sso")try{await H.auth().signOut(),console.log("Firebase logged out successfully")}catch(o){console.error("Error during Firebase logout:",o)}else i==="walletconnect"&&console.log("WalletConnect session kept active for future logins");P("success",z("common.messages.loggedOutSuccessfully")),T.path==="/"?E.emit("getZelIdLoginPhrase"):await w.push("/")}const D=[{type:"divider"}];return(n,i)=>(s(),v(_,null,[r(h)!=="none"?(s(),c(g,{key:0,dot:"",bordered:"",location:"bottom right","offset-x":"1","offset-y":"2",color:"success"},{default:e(()=>[a(x,{size:"38",class:"cursor-pointer",color:t&&t.avatar?void 0:"primary",variant:t&&t.avatar?void 0:"tonal"},{default:e(()=>[t&&t.avatar?(s(),c(V,{key:0,src:t.avatar},null,8,["src"])):(s(),c(m,{key:1,icon:"tabler-user"})),a(O,{activator:"parent",width:"240",location:"bottom end",offset:"12px"},{default:e(()=>[a(Q,null,{default:e(()=>[a(I,null,{default:e(()=>[u("div",ae,[a(Z,null,{default:e(()=>[a(g,{dot:"",location:"bottom right","offset-x":"3","offset-y":"3",color:"success",bordered:""},{default:e(()=>[a(x,{color:t&&t.avatar?void 0:"primary",variant:t&&t.avatar?void 0:"tonal"},{default:e(()=>[t&&t.avatar?(s(),c(V,{key:0,src:t.avatar},null,8,["src"])):(s(),c(m,{key:1,icon:"tabler-user"}))]),_:1},8,["color","variant"])]),_:1})]),_:1}),u("div",null,[u("div",re,d((r(k)?.zelid??"").slice(0,14)+(r(k)?.zelid?"...":"")),1),a(J,{class:"text-capitalize text-disabled"},{default:e(()=>[y(d(r(h)),1)]),_:1})])])]),_:1}),a(r(C),{options:{wheelPropagation:!1}},{default:e(()=>[(s(),v(_,null,ee(D,o=>(s(),v(_,{key:o.title},[o.type==="navItem"?(s(),c(I,{key:0,to:o.to},oe({prepend:e(()=>[a(m,{icon:o.icon,size:"22"},null,8,["icon"])]),default:e(()=>[a(M,null,{default:e(()=>[y(d(o.title),1)]),_:2},1024)]),_:2},[o.badgeProps?{name:"append",fn:e(()=>[a(g,te({rounded:"sm",class:"me-3"},{ref_for:!0},o.badgeProps),null,16)]),key:"0"}:void 0]),1032,["to"])):(s(),c(W,{key:1,class:"my-2"}))],64))),64)),u("div",se,[a($,{block:"",size:"small",color:"error","append-icon":"tabler-logout",onClick:B},{default:e(()=>[...i[1]||(i[1]=[y(" Logout ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["color","variant"])]),_:1})):S("",!0),a(G,{modelValue:r(l).model,"onUpdate:modelValue":i[0]||(i[0]=o=>r(l).model=o),timeout:r(l).timeout,color:r(l).color,location:"top",elevation:4,variant:"flat",class:"mb-2"},{default:e(()=>[u("div",le,[r(l).icon?(s(),c(m,{key:0,icon:r(l).icon,class:"me-2"},null,8,["icon"])):S("",!0),u("span",null,d(r(l).text),1)])]),_:1},8,["modelValue","timeout","color"])],64))}};export{Fe as default};
