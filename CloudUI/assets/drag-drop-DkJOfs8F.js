import{u as Ke,r as x,b as Qe,c as y,e as we,o as Ze,w as E,f as q,g as J,j as _e,k as K,F as ea,l as aa,m as Se,p as ve,q as Q,x as Re,y as Me,z as Be}from"./apexcharts-nIAyciCq.js";function ze(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Function]"}function F(a,n,s,R=1){const[$,M]=typeof R=="number"?[R,R]:R,l=Math.round(n/$/a[0])*a[0],m=Math.round(s/M/a[1])*a[1];return[l,m]}function oe(a,n,s){return a-n-s}function re(a,n,s){return a-n-s}function L(a,n,s){return n!==null&&a<n?n:s!==null&&s<a?s:a}function Ne(a,n,s){let R=a;const $=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find(M=>ze(R[M]));if(!ze(R[$]))return!1;do{if(R[$](n))return!0;if(R===s)return!1;R=R.parentNode}while(R);return!1}function ta(a){const n=window.getComputedStyle(a);return[parseFloat(n.getPropertyValue("width"),10),parseFloat(n.getPropertyValue("height"),10)]}function W(a,n,s){a&&(a.attachEvent?a.attachEvent("on"+n,s):a.addEventListener?a.addEventListener(n,s,!0):a["on"+n]=s)}function Pe(a,n,s){a&&(a.detachEvent?a.detachEvent("on"+n,s):a.removeEventListener?a.removeEventListener(n,s,!0):a["on"+n]=null)}const la=["onMousedown","onTouchstart"],Te={__name:"DraggableResizableVue3",props:{draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:a=>typeof a=="string"?a==="auto":a>=0},w:{type:[Number,String],validator:a=>typeof a=="number"?a>0:a==="auto"},h:{type:[Number,String],validator:a=>typeof a=="number"?a>0:a==="auto"},minWidth:{type:Number,default:0,validator:a=>a>=0},minHeight:{type:Number,default:0,validator:a=>a>=0},maxWidth:{type:Number,default:null,validator:a=>a>=0},maxHeight:{type:Number,default:null,validator:a=>a>=0},active:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},activeOnHover:{type:Boolean,default:!1},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},lockAspectRatio:{type:Boolean,default:!1},handlesType:{type:String,default:"handles",validator:a=>["handles","borders","custom"].includes(a)},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:a=>{const n=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(a.filter(s=>n.has(s))).size===a.length}},handlesSize:{type:Number,default:10},handlesBorder:{type:String,default:"0.5px solid #bbb"},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:a=>["x","y","both"].includes(a)},grid:{type:Array,validator:a=>Array.isArray(a)&&typeof a[0]=="number"&&typeof a[1]=="number"},showGrid:{type:[Boolean,String],default:!1,validator:a=>[!0,!1,"x","y","both"].includes(a)},gridColor:{type:String,default:"rgba(0, 0, 0, 0.1)"},parent:{type:[Boolean,String],default:!1},scale:{type:[Number,Array],default:1,validator:a=>typeof a=="number"?a>0:a.length===2&&a[0]>0&&a[1]>0},className:{type:String,default:"drv"},classNameDraggable:{type:String,default:"drv-draggable"},classNameResizable:{type:String,default:"drv-resizable"},classNameDragging:{type:String,default:"drv-dragging"},classNameResizing:{type:String,default:"drv-resizing"},classNameActive:{type:String,default:"drv-active"},classNameHandle:{type:String,default:"drv-handle"},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0}},emits:["update:x","update:y","update:w","update:h","update:active","resizing","resizestop","dragging","dragstop","activated","deactivated"],setup(a,{emit:n}){Ke(e=>({v39a6bff2:Le.value,v4e451bdd:De.value,v51f44245:ke.value}));const s={mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"},touch:{start:"touchstart",move:"touchmove",stop:"touchend"}},R={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},$={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let M=s.mouse;const l=a,m=n,z=x(null),V=x(null),H=x({h:"auto",w:"auto",active:!1,x:0,y:0}),se=Qe(),h=y({get(){return l.w||H.value.w},set(e){m("update:w",e),H.value.w=e}}),p=y({get(){return l.h||H.value.h},set(e){m("update:h",e),H.value.h=e}}),o=y({get(){return l.x||H.value.x},set(e){m("update:x",e),H.value.x=e}}),r=y({get(){return l.y||H.value.y},set(e){m("update:y",e),H.value.y=e}}),i=x(null),c=x(null),C=y({get(){return l.active||H.value.active},set(e){m("update:active",e),H.value.active=e}}),Le=y(()=>l.handlesSize+"px"),ke=y(()=>l.handlesSize/2+"px"),De=y(()=>l.handlesBorder),Z=x(!1),_=x(!1),b=x(null),N=x(null),P=x(null),B=x(null),A=x(!1),k=x(!1),ee=x(!1),ie=x(!1),d=x(null),v=x(null),He=y(()=>({transform:`translate(${o.value}px, ${r.value}px)`,width:$e.value,height:Xe.value,zIndex:l.z,...k.value&&l.disableUserSelect?R:$})),ce=we("drvContainerClass",{}),D=y(()=>ce.value?"."+ce.value:l.parent),ae=we("drvContainerGrid",{}),f=y(()=>!ae||!ae.value?l.grid||[1,1]:l.grid?l.grid:ae.value),Ce=y(()=>{const e={x:`linear-gradient(-90deg, ${l.gridColor} 1px, transparent 1px) 0px 0px / ${f.value[0]}px ${f.value[0]}px`,y:`linear-gradient(0deg, ${l.gridColor} 1px, transparent 1px) 0px 0px / ${f.value[1]}px ${f.value[1]}px`};return l.showGrid==="x"||l.showGrid==="y"?e[l.showGrid]:l.showGrid?`${e.x}, ${e.y}`:null}),Ae=y(()=>l.resizable?l.handles:[]),$e=y(()=>h.value==="auto"&&!Z.value?"auto":h.value+"px"),Xe=y(()=>p.value==="auto"&&!_.value?"auto":p.value+"px"),Y=x(l.minWidth),G=x(l.minHeight),w=x(l.maxWidth),S=x(l.maxHeight),de=y(()=>!!B.value&&(B.value.includes("l")||B.value.includes("r"))),me=y(()=>!!B.value&&(B.value.includes("t")||B.value.includes("b"))),te=()=>{d.value={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},v.value={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},Ye=()=>{if(D.value){const[e,u]=fe();N.value=e,P.value=u,i.value=N.value-h.value-o.value,c.value=P.value-p.value-r.value}},fe=()=>{if(D.value){const e=typeof D.value=="string"?z.value.closest(D.value):z.value.parentNode;V.value=e;const u=window.getComputedStyle(e,null);return[parseInt(u.getPropertyValue("width"),10),parseInt(u.getPropertyValue("height"),10)]}return[null,null]},le=()=>{if(D.value&&l.showGrid){if(!V.value){const e=typeof e.value=="string"?z.value.closest(e.value):z.value.parentNode;V.value=e}V.value.style.background=Ce.value}},Ge=e=>{M=s.touch,ge(e)},Ee=e=>{M=s.mouse,ge(e)},ge=e=>{if(e instanceof MouseEvent&&e.which!==1)return;const u=e.target||e.srcElement;if(z.value.contains(u)){if(l.onDragStart(e)===!1)return;if(l.dragHandle&&!Ne(u,l.dragHandle,z.value)||l.dragCancel&&Ne(u,l.dragCancel,z.value)){k.value=!1;return}C.value||(C.value=!0,m("activated")),l.draggable&&(ee.value=!0),d.value.mouseX=e.touches?e.touches[0].pageX:e.pageX,d.value.mouseY=e.touches?e.touches[0].pageY:e.pageY,d.value.left=o.value,d.value.right=i.value,d.value.top=r.value,d.value.bottom=c.value,D.value&&(v.value=ue()),W(document.documentElement,M.move,Fe),W(document.documentElement,M.stop,xe)}},ue=()=>({minLeft:o.value%f.value[0],maxLeft:Math.floor((N.value-h.value-o.value)/f.value[0])*f.value[0]+o.value,minRight:i.value%f.value[0],maxRight:Math.floor((N.value-h.value-i.value)/f.value[0])*f.value[0]+i.value,minTop:r.value%f.value[1],maxTop:Math.floor((P.value-p.value-r.value)/f.value[1])*f.value[1]+r.value,minBottom:c.value%f.value[1],maxBottom:Math.floor((P.value-p.value-c.value)/f.value[1])*f.value[1]+c.value}),he=e=>{const u=e.target||e.srcElement,t=new RegExp(l.className+"-([trmbl]{2})","");(!z.value||!z.value.contains(u)&&!t.test(u.className))&&(C.value&&!l.preventDeactivation&&(C.value=!1,m("deactivated")),Pe(document.documentElement,M.move,U)),te()},We=(e,u)=>{M=s.touch,pe(e,u)},pe=(e,u)=>{u instanceof MouseEvent&&u.which!==1||l.onResizeStart(e,u)!==!1&&(u.stopPropagation&&u.stopPropagation(),l.lockAspectRatio&&!e.includes("m")?B.value="m"+e.substring(1):B.value=e,ie.value=!0,d.value.mouseX=u.touches?u.touches[0].pageX:u.pageX,d.value.mouseY=u.touches?u.touches[0].pageY:u.pageY,d.value.left=o.value,d.value.right=i.value,d.value.top=r.value,d.value.bottom=c.value,v.value=ne(),W(document.documentElement,M.move,U),W(document.documentElement,M.stop,xe))},ne=()=>{const[e,u]=f.value;l.lockAspectRatio&&(Y.value/G.value>b.value?G.value=Y.value/b.value:Y.value=b.value*G.value,w.value&&S.value?(w.value=Math.min(w.value,b.value*S.value),S.value=Math.min(S.value,w.value/b.value)):w.value?S.value=w.value/b.value:S.value&&(w.value=b.value*S.value)),w.value=w.value-w.value%e,S.value=S.value-S.value%u;const t={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return D.value?(t.minLeft=o.value%e,t.maxLeft=o.value+Math.floor((h.value-Y.value)/e)*e,t.minTop=r.value%u,t.maxTop=r.value+Math.floor((p.value-G.value)/u)*u,t.minRight=i.value%e,t.maxRight=i.value+Math.floor((h.value-Y.value)/e)*e,t.minBottom=c.value%u,t.maxBottom=c.value+Math.floor((p.value-G.value)/u)*u,w.value&&(t.minLeft=Math.max(t.minLeft,N.value-i.value-w.value),t.minRight=Math.max(t.minRight,N.value-o.value-w.value)),S.value&&(t.minTop=Math.max(t.minTop,P.value-c.value-S.value),t.minBottom=Math.max(t.minBottom,P.value-r.value-S.value)),l.lockAspectRatio&&(t.minLeft=Math.max(t.minLeft,o.value-r.value*b.value),t.minTop=Math.max(t.minTop,r.value-o.value/b.value),t.minRight=Math.max(t.minRight,i.value-c.value*b.value),t.minBottom=Math.max(t.minBottom,c.value-i.value/b.value))):(t.minLeft=null,t.maxLeft=o.value+Math.floor((h.value-Y.value)/e)*e,t.minTop=null,t.maxTop=r.value+Math.floor((p.value-G.value)/u)*u,t.minRight=null,t.maxRight=i.value+Math.floor((h.value-Y.value)/e)*e,t.minBottom=null,t.maxBottom=c.value+Math.floor((p.value-G.value)/u)*u,w.value&&(t.minLeft=-(i.value+w.value),t.minRight=-(o.value+w.value)),S.value&&(t.minTop=-(c.value+S.value),t.minBottom=-(r.value+S.value)),l.lockAspectRatio&&w.value&&S.value&&(t.minLeft=Math.min(t.minLeft,-(i.value+w.value)),t.minTop=Math.min(t.minTop,-(S.value+c.value)),t.minRight=Math.min(t.minRight,-o.value-w.value),t.minBottom=Math.min(t.minBottom,-r.value-S.value))),t},Fe=e=>{A.value?U(e):ee.value&&Ve(e)},Ve=e=>{const u=l.axis&&l.axis!=="y"?d.value.mouseX-(e.touches?e.touches[0].pageX:e.pageX):0,t=l.axis&&l.axis!=="x"?d.value.mouseY-(e.touches?e.touches[0].pageY:e.pageY):0,[g,T]=F(f.value,u,t,l.scale),X=L(d.value.left-g,v.value.minLeft,v.value.maxLeft),O=L(d.value.top-T,v.value.minTop,v.value.maxTop);if(l.onDrag(o,r)===!1)return;const j=L(d.value.right+g,v.value.minRight,v.value.maxRight),I=L(d.value.bottom+T,v.value.minBottom,v.value.maxBottom);o.value=X,r.value=O,i.value=j,c.value=I,m("dragging",o.value,r.value),k.value=!0},Ue=e=>{const[u]=F(f.value,e,r.value,1),t=L(u,v.value.minLeft,v.value.maxLeft);o.value=t,i.value=N.value-h.value-t},Oe=e=>{const[,u]=F(f.value,o.value,e,1),t=L(u,v.value.minTop,v.value.maxTop);r.value=t,c.value=P.value-p.value-t},U=e=>{let u=o.value,t=r.value,g=i.value,T=c.value;const X=d.value.mouseX-(e.touches?e.touches[0].pageX:e.pageX),O=d.value.mouseY-(e.touches?e.touches[0].pageY:e.pageY);!Z.value&&X&&(Z.value=!0),!_.value&&O&&(_.value=!0);const[j,I]=F(f.value,X,O,l.scale);B.value.includes("b")?(T=L(d.value.bottom+I,v.value.minBottom,v.value.maxBottom),l.lockAspectRatio&&me&&(g=i.value-(c.value-T)*b.value)):B.value.includes("t")&&(t=L(d.value.top-I,v.value.minTop,v.value.maxTop),l.lockAspectRatio&&me&&(u=o.value-(r.value-t)*b.value)),B.value.includes("r")?(g=L(d.value.right+j,v.value.minRight,v.value.maxRight),l.lockAspectRatio&&de&&(T=c.value-(i.value-g)/b.value)):B.value.includes("l")&&(u=L(d.value.left-j,v.value.minLeft,v.value.maxLeft),l.lockAspectRatio&&de&&(t=r.value-(o.value-u)/b.value));const ye=oe(N.value,u,g),be=re(P.value,t,T);l.onResize(B.value,u,t,ye,be)!==!1&&(o.value=u,r.value=t,i.value=g,c.value=T,h.value=ye,p.value=be,m("resizing",o.value,r.value,h.value,p.value),A.value=!0)},je=e=>{const[u]=F(f.value,e,0,1);let t=L(N.value-u-o.value,v.value.minRight,v.value.maxRight),g=c.value;l.lockAspectRatio&&(g=c.value-(i.value-t)/b.value);const T=oe(N.value,o.value,t),X=re(P.value,r.value,g);i.value=t,c.value=g,h.value=T,p.value=X},Ie=e=>{const[,u]=F(f.value,0,e,1);let t=L(P.value-u-r.value,v.value.minBottom,v.value.maxBottom),g=i.value;l.lockAspectRatio&&(g=i.value-(c.value-t)*b.value);const T=oe(N.value,o.value,g),X=re(P.value,r.value,t);i.value=g,c.value=t,h.value=T,p.value=X},xe=()=>{B.value=null,te(),ee.value=!1,ie.value=!1,A.value&&(A.value=!1,m("resizestop",o.value,r.value,h.value,p.value)),k.value&&(k.value=!1,m("dragstop",o.value,r.value)),Pe(document.documentElement,M.move,U)},qe=()=>{l.activeOnHover&&(C.value=!0)},Je=()=>{l.activeOnHover&&!k.value&&(C.value=!1)};return Ze(()=>{te(),l.enableNativeDrag||(z.value.ondragstart=()=>!1);const[e,u]=fe();N.value=e,P.value=u;const[t,g]=ta(z.value);b.value=(h.value!=="auto"?h.value:t)/(p.value!=="auto"?p.value:g),h.value=h.value!=="auto"?h.value:t,p.value=p.value!=="auto"?p.value:g,i.value=N.value-h.value-o.value,c.value=P.value-p.value-r.value,C.value&&m("activated"),l.showGrid&&le(),W(document.documentElement,"mousedown",he),W(document.documentElement,"touchend touchcancel",he),W(window,"resize",Ye)}),E(()=>l.x,e=>{A.value||k.value||(D.value&&(v.value=ue()),Ue(e))}),E(()=>l.y,e=>{A.value||k.value||(D.value&&(v.value=ue()),Oe(e))}),E(()=>l.lockAspectRatio,e=>{e?b.value=h.value/p.value:b.value=void 0}),E(()=>l.w,e=>{A.value||k.value||(D.value&&(v.value=ne()),je(e))}),E(()=>l.h,e=>{A.value||k.value||(D.value&&(v.value=ne()),Ie(e))}),E(()=>l.showGrid,()=>{le()}),E(()=>l.grid,()=>{le()}),(e,u)=>(J(),q("div",{ref_key:"el",ref:z,style:ve(He.value),class:Q([{[a.classNameActive]:C.value,[a.classNameDragging]:k.value,[a.classNameResizing]:A.value,[a.classNameDraggable]:a.draggable,[a.classNameResizable]:a.resizable},a.className]),onMousedown:Ee,onTouchstart:Ge,onMouseover:qe,onMouseleave:Je},[_e("div",{class:Q("drv-"+a.handlesType)},[(J(!0),q(ea,null,aa(Ae.value,t=>(J(),q("div",{key:t,class:Q([a.classNameHandle,a.classNameHandle+"-"+t,a.classNameHandle!=="drv-handle"?"drv-handle":"",a.classNameHandle!=="drv-handle"?"drv-handle-"+t:""]),style:ve({display:C.value?"block":"none"}),onMousedown:Se(g=>pe(t,g),["stop","prevent"]),onTouchstart:Se(g=>We(t,g),["stop","prevent"])},[Me(se)["handle-"+t]?K(e.$slots,"handle-"+t,{key:0}):Re("",!0),Me(se)["handle-"+t]?Re("",!0):K(e.$slots,"handle",{key:1})],46,la))),128))],2),K(e.$slots,"default")],38))}},ua={__name:"DraggableResizableContainer",props:{grid:{type:Array,default:()=>[1,1],validator:a=>Array.isArray(a)&&typeof a[0]=="number"&&typeof a[1]=="number"},showGrid:{type:[Boolean,String],default:!1,validator:a=>[!0,!1,"x","y","both"].includes(a)},gridColor:{type:String,default:"rgba(0, 0, 0, 0.1)"},className:{type:String,default:"drv-container"}},setup(a){const n=a,s=y(()=>n.grid),R=y(()=>n.className);Be("drvContainerClass",R),Be("drvContainerGrid",s);const $=x(null),M=y(()=>{const m={x:`linear-gradient(-90deg, ${n.gridColor} 1px, transparent 1px) 0px 0px / ${n.grid[0]}px ${n.grid[0]}px`,y:`linear-gradient(0deg, ${n.gridColor} 1px, transparent 1px) 0px 0px / ${n.grid[1]}px ${n.grid[1]}px`};return n.showGrid==="x"||n.showGrid==="y"?m[n.showGrid]:n.showGrid?`${m.x}, ${m.y}`:null}),l=y(()=>{const m={position:"relative"};return n.showGrid&&(m.background=M.value),m});return(m,z)=>(J(),q("div",{ref_key:"el",ref:$,style:ve(l.value),class:Q([R.value])},[K(m.$slots,"default")],6))}};Te.install=a=>(a.component("DraggableResizableVue",Te),a.component("DraggableResizableContainer",ua),a);export{Te as _};
