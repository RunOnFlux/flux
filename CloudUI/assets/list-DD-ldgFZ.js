import{a as $}from"./http-BZQDkn3h.js";import{x as E}from"./index-QPPWK7xw.js";import{u as G}from"./unhead-DEOrWl0D.js";import{V as J,ah as Q,G as W,o as q,p as y,a0 as X,I as Y,b as Z,a3 as ee,a1 as te,ac as oe}from"./vuetify-_4u1He_j.js";import{u as ae}from"./i18n-Bm8bpAAW.js";import{r as d,w as k,c as b,o as se,P as re,g as ne,Q as r,a3 as a,y as m,T as v,U as F}from"./apexcharts-nIAyciCq.js";import"./ansi-utils-ChIB8aIv.js";import"./crypto-metamask-D6vz180a.js";import"./socketio-BDGyx5_k.js";import"./uuid-B49X2dQj.js";import"./vueuse-Bid7ZbHY.js";import"./vue-core-CU9AIURn.js";import"./cookie-BfmCf_44.js";import"./unjs-utils-GcjLqAqW.js";import"./query-parser-C3-dT-Rr.js";import"./casl-DNC8KRD8.js";import"./scrollbar-CXs_Utq1.js";import"./icons-mdi-_QP0sdRJ.js";import"./sanitizer-DAUAC_Zc.js";import"./element-plus-Cr1Qs4Q_.js";import"./lodash-C_Sw0jJq.js";const x="Flux Network Node List - Live Node Directory",w="Browse the complete list of Flux network nodes. View node details, locations, and performance metrics across the decentralized infrastructure.",N="https://cloud.runonflux.com/dashboards/list",_="https://cloud.runonflux.com/images/logo.png",Ce={__name:"list",setup(le){G({title:x,meta:[{name:"description",content:w},{name:"keywords",content:"flux nodes, node list, flux network, node directory, decentralized nodes, flux node status"},{name:"robots",content:"index, follow"},{property:"og:title",content:x},{property:"og:description",content:w},{property:"og:image",content:_},{property:"og:url",content:N},{property:"og:type",content:"website"},{property:"og:site_name",content:"FluxCloud"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:x},{name:"twitter:description",content:w},{name:"twitter:image",content:_},{name:"twitter:site",content:"@RunOnFlux"}],link:[{rel:"canonical",href:N}],script:[{type:"application/ld+json",children:JSON.stringify([{"@context":"https://schema.org","@type":"Organization",name:"Flux Network",url:"https://cloud.runonflux.com",logo:"https://cloud.runonflux.com/images/logo.png",description:"Decentralized Web3 cloud infrastructure powered by FluxNodes worldwide",sameAs:["https://twitter.com/RunOnFlux","https://github.com/RunOnFlux"]},{"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"Home",item:"https://cloud.runonflux.com"},{"@type":"ListItem",position:2,name:"Dashboards",item:"https://cloud.runonflux.com/dashboards/overview"},{"@type":"ListItem",position:3,name:"Node List",item:"https://cloud.runonflux.com/dashboards/list"}]}])}]});const{t:n}=ae(),I={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},c=d(!0),C=[5,10,25,50],P=d([]),g=d([]),h=d(""),f=d("");function D(t,o){let e;return function(...l){clearTimeout(e),e=setTimeout(()=>t(...l),o)}}const O=D(t=>{f.value=t||""},400);k(h,t=>{O(t)});const s=d({page:1,itemsPerPage:10}),T=d([{title:"IP Address",key:"ip",sortable:!0},{title:"Address",key:"payment_address",sortable:!0,translationKey:"paymentAddress"},{title:"Country",key:"location.country",sortable:!0,value:t=>V(t.location?.country),translationKey:"locationCountry"},{title:"Provider",key:"location.org",sortable:!0,value:t=>V(t.location?.org),translationKey:"locationOrg"},{title:"Last Paid",key:"lastpaid",sortable:!0},{title:"Tier",key:"tier",sortable:!0}]),S=b(()=>T.value.map(t=>({...t,title:n(`pages.dashboard.list.columns.${t.translationKey||t.key.replace(".","_")}`)})));function V(t){return t||n("pages.dashboard.list.unknown")}function U(t){return new Date(Number(t)*1e3).toLocaleString("en-GB",I)}const L=b(()=>{if(!f.value)return g.value;const t=f.value.toLowerCase(),o=e=>!e||typeof e!="object"?!1:Object.values(e).some(l=>l&&typeof l=="object"?o(l):l&&typeof l!="object"&&l.toString().toLowerCase().includes(t));return g.value.filter(e=>o(e))}),B=b(()=>L.value.length),z=b(()=>{if(c.value||g.value.length===0)return[];const t=(s.value.page-1)*s.value.itemsPerPage,o=t+s.value.itemsPerPage,e=L.value.slice(t,o);return console.log("Paginated Items:",e),e});k([f,()=>s.value.itemsPerPage],()=>{s.value.page=1});async function A(){try{c.value=!0;const[t,o]=await Promise.all([$.get("https://stats.runonflux.io/fluxlocations"),E.listFluxNodes()]),e=t.data.data,l=o.data.data,j=e.reduce((i,u)=>{const p=u.geolocation?.ip||u.ip;if(p){const K=u.country||u.geolocation?.country||n("pages.dashboard.list.unknown"),M=u.org||u.geolocation?.org||n("pages.dashboard.list.unknown"),H={ip:p,country:K,org:M};i[p]=H}return i},{}),R=l.map(i=>{if(!i.ip)return null;const u=i.ip.split(":")[0],p=j[u];return{...i,location:p||null}}).filter(i=>i!==null&&i.ip);g.value=R,c.value=!1}catch(t){console.log(n("pages.dashboard.list.errorLoading"),t),c.value=!1}}return se(()=>{A()}),(t,o)=>(ne(),re(J,null,{default:r(()=>[a(Q,{modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e),contained:"",persistent:"","scroll-strategy":"none",class:"align-center justify-center overlay"},{default:r(()=>[a(W,{indeterminate:""})]),_:1},8,["modelValue"]),a(q,{class:"ma-0"},{default:r(()=>[a(y,{cols:"4",class:"pa-4 mt-4"},{default:r(()=>[a(X,{modelValue:s.value.itemsPerPage,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.itemsPerPage=e),items:C,label:m(n)("pages.dashboard.list.perPage"),density:"compact",variant:"outlined",style:{"min-width":"100px"}},null,8,["modelValue","label"])]),_:1}),a(y,{cols:"8",class:"pa-4 mt-4"},{default:r(()=>[a(Y,{modelValue:h.value,"onUpdate:modelValue":o[2]||(o[2]=e=>h.value=e),label:m(n)("pages.dashboard.list.filter"),placeholder:m(n)("pages.dashboard.list.filterPlaceholder"),density:"compact",variant:"outlined",clearable:""},{"append-inner":r(()=>[a(Z,{size:"20"},{default:r(()=>[...o[5]||(o[5]=[v(" tabler-search ",-1)])]),_:1})]),_:1},8,["modelValue","label","placeholder"])]),_:1}),a(y,{cols:"12",class:"pa-4"},{default:r(()=>[a(ee,{border:"",rounded:"",style:{"max-height":"none",overflow:"visible"}},{default:r(()=>[a(te,{items:z.value,"items-per-page":s.value.itemsPerPage,headers:S.value,"sort-by":P.value,hover:"",striped:"","hide-default-footer":"",page:s.value.page,class:"no-wrap-table bordered","onUpdate:sortBy":o[3]||(o[3]=e=>P.value=e)},{"item.lastpaid":r(({item:e})=>[v(F(e.lastpaid?U(e.lastpaid):m(n)("pages.dashboard.list.notAvailable")),1)]),"item.location":r(({item:e})=>[v(F(e.location?`${e.location.country} / ${e.location.org}`:m(n)("pages.dashboard.list.notAvailable")),1)]),_:1},8,["items","items-per-page","headers","sort-by","page"])]),_:1})]),_:1}),a(y,{cols:"12",class:"pa-2"},{default:r(()=>[a(oe,{modelValue:s.value.page,"onUpdate:modelValue":o[4]||(o[4]=e=>s.value.page=e),length:Math.max(1,Math.ceil(B.value/s.value.itemsPerPage)),"total-visible":5,rounded:"circle",size:"default",class:"mb-3"},null,8,["modelValue","length"])]),_:1})]),_:1})]),_:1}))}};export{Ce as default};
