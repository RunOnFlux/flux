import{c as P,r as w,w as ae,o as vt,a6 as xn,f as y,g as u,a3 as o,Q as c,j as n,P as C,x as D,F as te,T as b,U as d,l as ze,q as Ze,y as r,R as wa,ao as ba,L as He,ay as ka,n as Ba}from"./apexcharts-nIAyciCq.js";import{u as Sn}from"./useLoginSheet-e2RZXtPE.js";import{s as Dn}from"./vue-core-CU9AIURn.js";import{u as Pn}from"./useMarketplace-C8EoGcBv.js";import{u as An}from"./useGameUtils-lp2yFmRD.js";import{u as zn}from"./useSnackbar-CwwIX0V_.js";import{_ as In,c as En,r as je,k as Mn}from"./index-QPPWK7xw.js";import{a as Sa}from"./http-BZQDkn3h.js";import{g as Nn}from"./geolocation-BklMEt0S.js";import{s as Fn,p as gt,_ as Vn,a as ft}from"./PayPal-ugRCKXrL.js";import{g as ht}from"./firebase-BnYKcu-W.js";import{i as Un,a as $n,e as Tn,b as Ln}from"./enterpriseCrypto-BkXqwt7M.js";import{i as yt,h as Rn,j as _t,p as On,c as Wn,k as Ca,s as Bn,g as Gn,e as Xn,f as wt}from"./walletService-ARo4SzYC.js";import{a as xa}from"./query-parser-C3-dT-Rr.js";import{m as Zn,w as Hn}from"./walletconnect-Db7MYUHa.js";import{f as Ga,s as Xa,a as Za}from"./ssp-logo-white-BYX0TNEU.js";import{u as jn,V as qe,a as bt,Q as Z,b as v,R as qn,c as M,d as Ke,X as Kn,J as Ha,s as R,am as Jn,ae as Yn,x as Qn,a6 as eo,_ as Ne,e as ao,a0 as na,F as kt,I as Ct,o as xt,p as ja,A as oa,G as la,w as to,v as no,a9 as St,z as oo,D as lo,r as Dt,g as so,f as Pt,h as At}from"./vuetify-_4u1He_j.js";import{u as io}from"./i18n-Bm8bpAAW.js";class ro{constructor(){this.baseURL="https://storage.runonflux.io",this.apiVersion="1"}getStorageClient(){return Sa.create({baseURL:this.baseURL,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json, text/plain, */*"}})}async uploadEnv(J){try{console.log("ðŸ” Uploading environment variables to Flux Storage:",{envid:J.envid,envCount:J.env.length});const ie=await this.getStorageClient().post(`/v${this.apiVersion}/env`,J);if(ie.status===200||ie.status===201)return console.log("âœ… Environment variables uploaded successfully to Flux Storage"),ie.data;throw new Error(`Storage upload failed with status: ${ie.status}`)}catch(m){throw console.error("âŒ Failed to upload environment variables to Flux Storage:",m),m.response?new Error(`Storage API error: ${m.response.status} - ${m.response.data?.message||m.response.statusText}`):m.request?new Error("Storage API request failed - no response received"):new Error(`Storage upload error: ${m.message}`)}}async uploadContacts(J){try{console.log("ðŸ“§ Uploading contacts to Flux Storage:",J);const ie=await this.getStorageClient().post(`/v${this.apiVersion}/contacts`,J);if(ie.status===200||ie.status===201)return console.log("âœ… Contacts uploaded successfully to Flux Storage"),ie.data;throw new Error(`Storage upload failed with status: ${ie.status}`)}catch(m){throw console.error("âŒ Failed to upload contacts to Flux Storage:",m),m.response?new Error(`Storage API error: ${m.response.status} - ${m.response.data?.message||m.response.statusText}`):m.request?new Error("Storage API request failed - no response received"):new Error(`Storage upload error: ${m.message}`)}}generateEnvId(){const J=Date.now(),m=Math.floor(Math.random()*1e3)+1e3;return`${J}${m}`}generateContactsId(){return Math.floor(Math.random()*999999999999999).toString()}getEnvStorageReference(J){return`F_S_ENV=https://storage.runonflux.io/v${this.apiVersion}/env/${J}`}getContactsStorageReference(J){return`F_S_CONTACTS=https://storage.runonflux.io/v${this.apiVersion}/contacts/${J}`}}const se=new ro,co="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2028%2028'%3e%3crect%20width='28'%20height='28'%20rx='6'%20fill='%23635BFF'/%3e%3cpath%20d='M14%2010.5c0-.7.6-1%201.5-1%201.4%200%203.1.4%204.5%201.2V7.4c-1.5-.6-3-1-4.5-1-3.7%200-6.2%201.9-6.2%205.1%200%205%206.9%204.2%206.9%206.4%200%20.8-.7%201.1-1.7%201.1-1.5%200-3.4-.6-5-1.5v3.4c1.7.7%203.4%201%205%201%203.8%200%206.4-1.9%206.4-5.1.1-5.4-7-4.5-7-6.3z'%20fill='white'%20transform='translate(-0.5,%200.5)'/%3e%3c/svg%3e",uo={class:"header-content"},mo={class:"app-info"},po={class:"d-flex align-center justify-center fill-height"},vo={class:"app-details"},go={class:"app-name"},fo={class:"step-progress-section"},ho={class:"steps-container"},yo={class:"step-circle"},_o={class:"step-label"},wo={key:0,class:"step-connector"},bo={class:"step-container"},ko={class:"d-flex flex-column"},Co={class:"text-subtitle-1 font-weight-medium mb-1"},xo={class:"text-body-2"},So={key:1,class:"selected-config-logo-container"},Do=["src","alt"],Po={class:"config-section modern-section hardware-section"},Ao={class:"section-header"},zo={key:0,class:"hardware-grid"},Io={class:"hardware-details"},Eo={class:"hardware-label"},Mo={class:"hardware-control"},No={class:"hardware-value-display"},Fo=["value","disabled"],Vo={class:"hardware-details"},Uo={class:"hardware-label"},$o={class:"hardware-control"},To={class:"hardware-value-display"},Lo=["disabled"],Ro={class:"hardware-details"},Oo={class:"hardware-label"},Wo={class:"hardware-control"},Bo={class:"hardware-value-display"},Go=["disabled"],Xo={key:1,class:"compose-entries-container"},Zo={class:"compose-entry-title"},Ho={class:"entry-name"},jo={class:"hardware-grid"},qo={class:"hardware-card"},Ko={class:"hardware-details"},Jo={class:"hardware-control"},Yo={class:"hardware-value-display"},Qo=["value","onInput"],el={class:"hardware-card"},al={class:"hardware-details"},tl={class:"hardware-control"},nl={class:"hardware-value-display"},ol=["onUpdate:modelValue"],ll={class:"hardware-card"},sl={class:"hardware-details"},il={class:"hardware-control"},rl={class:"hardware-value-display"},cl=["onUpdate:modelValue"],dl={class:"config-section modern-section"},ul={class:"section-header"},ml={class:"subscription-duration"},pl={class:"config-section modern-section"},vl={class:"section-header"},gl={class:"deployment-slider-container"},fl={class:"slider-header"},hl={class:"slider-wrapper"},yl={class:"pricing-info modern-section"},_l={class:"section-header"},wl={class:"pricing-chips"},bl={class:"position-relative"},kl={key:0},Cl={key:1},xl={class:"config-section modern-section"},Sl=["innerHTML"],Dl={class:"step-container"},Pl={key:0,class:"params-section"},Al={key:0,class:"advanced-toggle",style:{display:"flex","justify-content":"flex-end","margin-bottom":"16px"}},zl={class:"section-header"},Il={key:1,class:"no-params"},El={class:"no-params-icon"},Ml={class:"no-params-text"},Nl={class:"step-container geolocation-step"},Fl={class:"geolocation-section"},Vl={class:"section-header mb-3"},Ul={class:"deployment-title"},$l={class:"geolocation-content"},Tl={class:"geolocation-card"},Ll={class:"geolocation-title mb-4"},Rl={class:"geolocation-controls"},Ol={class:"control-group mb-3"},Wl={class:"control-label"},Bl={class:"control-group"},Gl={class:"control-label"},Xl={class:"mt-3 d-flex justify-center"},Zl={class:"geolocation-card"},Hl={class:"geolocation-title mb-4"},jl={class:"geolocation-controls"},ql={class:"control-group mb-3"},Kl={class:"control-label"},Jl={class:"control-group"},Yl={class:"control-label"},Ql={class:"mt-3 d-flex justify-center"},es={key:0,class:"mt-4"},as={class:"mb-3 current-rules-title"},ts={key:0,class:"mb-4"},ns={class:"text-success mb-2 d-flex align-center"},os={class:"d-flex flex-wrap gap-2"},ls={key:1},ss={class:"text-error mb-2 d-flex align-center"},is={class:"d-flex flex-wrap gap-2"},rs={class:"alert-content"},cs={class:"alert-list"},ds={key:0},us={class:"step-container email-step"},ms={class:"email-section"},ps={class:"section-header mb-3"},vs={class:"email-title"},gs={class:"email-content"},fs={class:"email-card"},hs={class:"notification-subtitle"},ys={class:"email-control"},_s={class:"notification-info mt-4"},ws={class:"info-item"},bs={class:"info-item"},ks={class:"info-item"},Cs={class:"step-container"},xs={class:"signing-section"},Ss={class:"text-center mb-6"},Ds={class:"d-flex align-center justify-center mb-4"},Ps={class:"text-h4"},As={class:"text-body-1 mb-4"},zs={class:"d-flex justify-center gap-2 mb-6"},Is={key:0,class:"text-center mb-4"},Es={class:"detected-method-display"},Ms=["title"],Ns={key:0,class:"sso-icon-wrapper"},Fs=["src","alt"],Vs=["src","alt"],Us=["src","alt"],$s=["src","alt"],Ts={key:5,class:"sso-icon-wrapper"},Ls={class:"text-body-2"},Rs={key:3,class:"progress-section"},Os={class:"progress-steps mt-6"},Ws={class:"d-flex justify-center align-center gap-6"},Bs={class:"progress-step"},Gs={class:"d-flex align-center"},Xs={class:"progress-icon mr-3"},Zs={class:"progress-text"},Hs={class:"progress-step"},js={class:"d-flex align-center"},qs={class:"progress-icon mr-3"},Ks={class:"progress-text"},Js={key:0,class:"d-flex justify-center mt-5"},Ys={key:4,class:"success-section"},Qs={class:"text-h5 text-success mb-2"},ei={class:"text-caption mt-2"},ai={key:0},ti={key:1},ni={class:"step-container"},oi={class:"payment-section"},li={class:"payment-info-section modern-section"},si={class:"section-header"},ii={class:"payment-info-content"},ri={class:"d-flex align-center mb-3"},ci=["innerHTML"],di={class:"d-flex align-center mb-3"},ui=["innerHTML"],mi={class:"d-flex align-center"},pi=["innerHTML"],vi={class:"payment-method-section modern-section"},gi={class:"section-header"},fi={class:"payment-method-row"},hi={class:"payment-method-info"},yi=["src","alt"],_i={class:"payment-method-text"},wi={class:"text-body-2 font-weight-medium"},bi={class:"text-caption text-medium-emphasis"},ki={class:"payment-method-price"},Ci={key:0,class:"text-body-2 font-weight-bold text-success"},xi={key:0},Si={key:1},Di={key:1,class:"text-body-2 font-weight-bold"},Pi={key:0,class:"crypto-payment-section modern-section"},Ai={class:"section-header"},zi=["src","alt"],Ii={key:0,class:"payment-details-content"},Ei={class:"d-flex align-center mb-1"},Mi={class:"text-caption font-weight-medium"},Ni={class:"d-flex align-center ga-2"},Fi={class:"text-caption flex-grow-1 text-truncate pa-1 rounded",style:{background:"rgba(0,0,0,0.1)"}},Vi={class:"d-flex align-center mb-1"},Ui={class:"text-caption font-weight-medium"},$i={class:"d-flex align-center ga-2"},Ti={class:"text-caption flex-grow-1 text-truncate pa-1 rounded",style:{background:"rgba(0,0,0,0.1)"}},Li={key:1,class:"payment-monitoring-content"},Ri={class:"d-flex flex-column align-center justify-center pa-6"},Oi={class:"text-h6 mb-2"},Wi={class:"text-body-2 text-center mb-4 text-medium-emphasis"},Bi=["innerHTML"],Gi={key:1,class:"text-success"},Xi={key:0,class:"fiat-payment-section modern-section"},Zi={class:"section-header"},Hi=["src","alt"],ji={key:0,class:"maintenance-content"},qi={class:"d-flex flex-column align-center justify-center pa-6"},Ki={class:"text-h6 mb-2"},Ji={class:"text-body-2 text-center mb-4 text-medium-emphasis"},Yi={key:1,class:"payment-details-content"},Qi={class:"text-body-2"},er={key:2,class:"payment-monitoring-content"},ar={class:"d-flex flex-column align-center justify-center pa-6"},tr={class:"text-h6 mb-2"},nr=["innerHTML"],or={class:"step-container d-flex align-center justify-center",style:{"min-height":"400px"}},lr={class:"deployment-summary modern-section",style:{"max-width":"800px",margin:"0 auto"}},sr={class:"section-header"},ir={class:"text-center mb-4"},rr={class:"d-flex align-center justify-center gap-2 text-h5 text-success mb-2"},cr={class:"text-body-2 text-medium-emphasis"},dr={class:"mb-4"},ur={class:"d-flex justify-center mb-3"},mr={class:"d-flex justify-center align-center flex-wrap gap-2"},pr={key:0,class:"mt-3"},vr={class:"font-weight-medium"},gr={class:"payment-summary"},fr={class:"d-flex justify-space-between align-center mb-2"},hr={class:"text-body-2 text-medium-emphasis"},yr={class:"d-flex justify-space-between align-center mb-2"},_r={class:"text-body-2 text-medium-emphasis"},wr={class:"d-flex justify-space-between align-center mb-2"},br={class:"text-body-2 text-medium-emphasis"},kr={class:"d-flex justify-space-between align-center"},Cr={class:"text-body-2 text-medium-emphasis"},xr={class:"d-flex justify-center mb-3"},Sr={key:0,class:"deployment-progress"},Dr={class:"text-h6"},Pr={class:"text-body-1 mb-3"},Ar={class:"text-body-2 text-medium-emphasis"},zt=88e3,It=15,Et=59e3,Mt=820,zr={__name:"InstallDialog",props:{modelValue:{type:Boolean,default:!1},app:{type:Object,required:!0},selectedConfig:{type:Object,default:null},isWordPress:{type:Boolean,default:!1},isGame:{type:Boolean,default:!1}},emits:["update:modelValue","deployed","installed"],setup(B,{emit:J}){const m=B,ie=J,{t:s}=io(),{openLoginBottomSheet:Nt,closeLoginBottomSheet:Da}=Sn(),Pa=jn(),{showSnackbar:z}=zn();Pn();const{parseLandingImage:Ft,getConfigResources:Vt}=An(),A=P(()=>m.isWordPress===!0),sa=P(()=>Ft(m.app?.icon)),Aa=P(()=>{if(m.app?.componentVersions&&m.app.componentVersions.length>0)return m.app.componentVersions;const a=de.value?.compose||m.app?.compose||[];return a.length===0?[]:a.map(e=>({name:e.name,version:e.repotag&&e.repotag.split(":")[1]||"latest",repotag:e.repotag||""}))}),Fe=P({get:()=>m.modelValue,set:a=>ie("update:modelValue",a)}),qa=P(()=>Gt.value!=="none"),Ut=P(()=>Q.value?`${m.app.name}${Q.value}`:m.app.name),x=w(0),Ve=P(()=>A.value?3:7),Ue=w(!1),$=w(!1),Ka=w(!1),Ja=w(!1),ia=w(!1),Ya=w(""),$t=a=>{a.target.tagName==="A"&&(a.stopPropagation(),a.preventDefault(),window.open(a.target.href,"_blank","noopener,noreferrer"))},I=w([!1,!1]),F=w({signing:!1,registering:!1}),me=w({signing:"",registering:""}),K=w(3),T=w(null),ra=w(!1),za=w(!1),Qa=w("");let Je=null,Ye=null;P(()=>!F.value.signing&&!F.value.registering),P(()=>I.value[1]?100:I.value[0]?50:F.value.signing?25:0),P(()=>F.value.signing?s("components.marketplace.installDialog.signingApplicationMessage"):F.value.registering?s("components.marketplace.installDialog.registeringApplication"):I.value[1]?s("components.marketplace.installDialog.applicationReadyForPayment"):s("components.marketplace.installDialog.waitingToStart"));const et=()=>{try{Fa.value=localStorage.getItem("zelidauth");const a=localStorage.getItem("loginType")||localStorage.getItem("logintype");a?be.value=a!=="sso":be.value=Fa.value&&Fa.value.includes("zelid=")}catch(a){console.error("Authentication check failed:",a),be.value=!1}},Ia=w(0),Ea=P(()=>{Ia.value;const a=[],e=(localStorage.getItem("loginType")||"").toLowerCase();return console.log("[InstallDialog] Detecting wallets, loginType:",e),e==="ssp"&&yt()&&a.push("SSP"),e==="metamask"&&Rn()&&a.push("MetaMask"),e==="walletconnect"&&a.push("WalletConnect"),e==="zelcore"&&(_t()?a.push("ZelCore Extension"):a.push("ZelCore App")),e==="sso"&&localStorage.getItem("zelidauth")&&a.push("SSO"),e==="manual"&&localStorage.getItem("zelidauth")&&a.push("Manual"),a}),Y=P(()=>{Ia.value;const a=localStorage.getItem("loginType");let e=null;if(console.log("[InstallDialog] Detecting signing method, loginType:",a),a){const t=a.toLowerCase();t==="zelcore"?e=_t()?"ZelCore Extension":"ZelCore App":t==="ssp"?e="SSP":t==="metamask"?e="MetaMask":t==="walletconnect"?e="WalletConnect":t==="sso"?e="SSO":t==="manual"&&(e="Manual")}if(!e){const t=localStorage.getItem("zelidauth"),l=ht();t&&l&&(console.log("[InstallDialog] No loginType found, but Firebase user exists - using SSO"),e="SSO")}return e||(e=Ea.value[0]||null),console.log("[InstallDialog] Detected signing method:",e),e}),at=w("");ae(Y,(a,e)=>{a&&a!==e&&(at.value=a)},{immediate:!0}),vt(async()=>{et(),ot(),console.log("[InstallDialog] Lazy AppKit initialization enabled - will init only on sign button click");try{await wn()}catch(a){console.error("Failed to load geolocation data:",a),re.value=[],we.value=[],S.value.allowedContinent=null,S.value.allowedCountry=null,S.value.forbiddenContinent=null,S.value.forbiddenCountry=null,z(s("components.marketplace.installDialog.messages.usingGlobalDeployment"),"warning")}});const k=w("stripe");w({number:"",expiry:"",cvv:""});const pe=w([0,0,0,0]),tt=P(()=>[{months:1,label:s("components.marketplace.installDialog.oneMonth"),discount:pe.value[0]},{months:3,label:s("components.marketplace.installDialog.threeMonths"),discount:pe.value[1]},{months:6,label:s("components.marketplace.installDialog.sixMonths"),discount:pe.value[2]},{months:12,label:s("components.marketplace.installDialog.twelveMonths"),discount:pe.value[3]}]),Tt=()=>{m.app.discounts?(pe.value[1]=m.app.discounts.threeMonths||0,pe.value[2]=m.app.discounts.sixMonths||0,pe.value[3]=m.app.discounts.twelveMonths||0):(pe.value[1]=5,pe.value[2]=10,pe.value[3]=20)},p=w({cpu:1,ram:512,storage:1,instances:3,subscriptionMonths:1,parameters:{}}),L=w([]),_e=()=>{if(L.value.length>0){let a=L.value.reduce((l,i)=>l+Number(i.cpu),0),e=L.value.reduce((l,i)=>l+Number(i.ram),0),t=L.value.reduce((l,i)=>l+Number(i.hdd),0);if(a>It){const l=It/a;L.value.forEach(i=>{i.cpu=Number((Number(i.cpu)*l).toFixed(1))}),a=L.value.reduce((i,g)=>i+Number(g.cpu),0)}if(e>Et){const l=Et/e;L.value.forEach(i=>{i.ram=Math.round(Number(i.ram)*l)}),e=L.value.reduce((i,g)=>i+Number(g.ram),0)}if(t>Mt){const l=Mt/t;L.value.forEach(i=>{i.hdd=Math.round(Number(i.hdd)*l)}),t=L.value.reduce((i,g)=>i+Number(g.hdd),0)}p.value.cpu=Number(a.toFixed(1)),p.value.ram=e,p.value.storage=t,da()}},Ma=w(!1);ae(()=>m.selectedConfig,a=>{if(a){const e=Vt(a);e.cpu!==void 0&&e.cpu!==null&&(p.value.cpu=Number(e.cpu)),e.ram!==void 0&&e.ram!==null&&(p.value.ram=Number(e.ram)),e.hdd!==void 0&&e.hdd!==null&&(p.value.storage=Number(e.hdd)),a.instances!==void 0&&a.instances!==null&&(p.value.instances=Number(a.instances)),console.log("ðŸ“‹ Setting config from selectedConfig:",{selectedConfig:a,resources:e,finalConfig:p.value})}},{immediate:!0});const S=w({allowedContinent:null,allowedCountry:null,forbiddenContinent:null,forbiddenCountry:null}),re=w([]),we=w([]),Qe=w({email:""}),Na=w([]),ca=w([]);w([{name:"Canada",code:"CA",continent:"NA"},{name:"United States",code:"US",continent:"NA"},{name:"Mexico",code:"MX",continent:"NA"},{name:"Guatemala",code:"GT",continent:"NA"},{name:"Bahamas",code:"BS",continent:"NA"},{name:"Cuba",code:"CU",continent:"NA"},{name:"Jamaica",code:"JM",continent:"NA"},{name:"Costa Rica",code:"CR",continent:"NA"},{name:"Panama",code:"PA",continent:"NA"},{name:"Germany",code:"DE",continent:"EU"},{name:"France",code:"FR",continent:"EU"},{name:"United Kingdom",code:"GB",continent:"EU"},{name:"Netherlands",code:"NL",continent:"EU"},{name:"Finland",code:"FI",continent:"EU"},{name:"Lithuania",code:"LT",continent:"EU"},{name:"Poland",code:"PL",continent:"EU"},{name:"Portugal",code:"PT",continent:"EU"},{name:"Russia",code:"RU",continent:"EU"},{name:"Slovenia",code:"SI",continent:"EU"},{name:"Spain",code:"ES",continent:"EU"},{name:"Switzerland",code:"CH",continent:"EU"},{name:"Austria",code:"AT",continent:"EU"},{name:"Belgium",code:"BE",continent:"EU"},{name:"Denmark",code:"DK",continent:"EU"},{name:"Norway",code:"NO",continent:"EU"},{name:"Sweden",code:"SE",continent:"EU"},{name:"Italy",code:"IT",continent:"EU"},{name:"Czech Republic",code:"CZ",continent:"EU"},{name:"Hungary",code:"HU",continent:"EU"},{name:"Romania",code:"RO",continent:"EU"},{name:"Bulgaria",code:"BG",continent:"EU"},{name:"Croatia",code:"HR",continent:"EU"},{name:"Greece",code:"GR",continent:"EU"},{name:"Ireland",code:"IE",continent:"EU"},{name:"Estonia",code:"EE",continent:"EU"},{name:"Latvia",code:"LV",continent:"EU"},{name:"Slovakia",code:"SK",continent:"EU"},{name:"Ukraine",code:"UA",continent:"EU"},{name:"China",code:"CN",continent:"AS"},{name:"Japan",code:"JP",continent:"AS"},{name:"South Korea",code:"KR",continent:"AS"},{name:"Singapore",code:"SG",continent:"AS"},{name:"India",code:"IN",continent:"AS"},{name:"Thailand",code:"TH",continent:"AS"},{name:"Malaysia",code:"MY",continent:"AS"},{name:"Indonesia",code:"ID",continent:"AS"},{name:"Philippines",code:"PH",continent:"AS"},{name:"Vietnam",code:"VN",continent:"AS"},{name:"Hong Kong",code:"HK",continent:"AS"},{name:"Taiwan",code:"TW",continent:"AS"},{name:"Israel",code:"IL",continent:"AS"},{name:"United Arab Emirates",code:"AE",continent:"AS"},{name:"Saudi Arabia",code:"SA",continent:"AS"},{name:"Turkey",code:"TR",continent:"AS"},{name:"Australia",code:"AU",continent:"OC"},{name:"New Zealand",code:"NZ",continent:"OC"},{name:"Fiji Islands",code:"FJ",continent:"OC"},{name:"Papua New Guinea",code:"PG",continent:"OC"},{name:"Marshall Islands",code:"MH",continent:"OC"},{name:"Palau",code:"PW",continent:"OC"},{name:"Tonga",code:"TO",continent:"OC"},{name:"Samoa",code:"WS",continent:"OC"},{name:"Vanuatu",code:"VU",continent:"OC"},{name:"Brazil",code:"BR",continent:"SA"},{name:"Argentina",code:"AR",continent:"SA"},{name:"Chile",code:"CL",continent:"SA"},{name:"Colombia",code:"CO",continent:"SA"},{name:"Peru",code:"PE",continent:"SA"},{name:"Ecuador",code:"EC",continent:"SA"},{name:"Uruguay",code:"UY",continent:"SA"},{name:"Paraguay",code:"PY",continent:"SA"},{name:"Venezuela",code:"VE",continent:"SA"},{name:"Bolivia",code:"BO",continent:"SA"},{name:"Guyana",code:"GY",continent:"SA"},{name:"Suriname",code:"SR",continent:"SA"},{name:"South Africa",code:"ZA",continent:"AF"},{name:"Egypt",code:"EG",continent:"AF"},{name:"Nigeria",code:"NG",continent:"AF"},{name:"Morocco",code:"MA",continent:"AF"},{name:"Kenya",code:"KE",continent:"AF"},{name:"Ghana",code:"GH",continent:"AF"},{name:"Ethiopia",code:"ET",continent:"AF"},{name:"Algeria",code:"DZ",continent:"AF"},{name:"Tunisia",code:"TN",continent:"AF"},{name:"Libya",code:"LY",continent:"AF"},{name:"Sudan",code:"SD",continent:"AF"},{name:"Chad",code:"TD",continent:"AF"},{name:"Mali",code:"ML",continent:"AF"},{name:"Niger",code:"NE",continent:"AF"},{name:"Burkina Faso",code:"BF",continent:"AF"},{name:"Senegal",code:"SN",continent:"AF"},{name:"Guinea",code:"GN",continent:"AF"},{name:"Sierra Leone",code:"SL",continent:"AF"},{name:"Liberia",code:"LR",continent:"AF"},{name:"Ivory Coast",code:"CI",continent:"AF"},{name:"Cameroon",code:"CM",continent:"AF"},{name:"Central African Republic",code:"CF",continent:"AF"},{name:"Democratic Republic of Congo",code:"CD",continent:"AF"},{name:"Republic of Congo",code:"CG",continent:"AF"},{name:"Gabon",code:"GA",continent:"AF"},{name:"Equatorial Guinea",code:"GQ",continent:"AF"},{name:"Angola",code:"AO",continent:"AF"},{name:"Zambia",code:"ZM",continent:"AF"},{name:"Zimbabwe",code:"ZW",continent:"AF"},{name:"Botswana",code:"BW",continent:"AF"},{name:"Namibia",code:"NA",continent:"AF"},{name:"Lesotho",code:"LS",continent:"AF"},{name:"Swaziland",code:"SZ",continent:"AF"},{name:"Mozambique",code:"MZ",continent:"AF"},{name:"Madagascar",code:"MG",continent:"AF"},{name:"Mauritius",code:"MU",continent:"AF"},{name:"Seychelles",code:"SC",continent:"AF"},{name:"Antarctica",code:"AQ",continent:"AN"}]);const Lt=P(()=>{if(!S.value.allowedContinent)return[];const a=p.value?.instances||5,e=[],t=S.value.allowedContinent,l=new Map;return ca.value.forEach(i=>{const g=i.value.split("_");if(g.length>=2&&g[0]===t){const h=g[1];l.has(h)||l.set(h,0),l.set(h,l.get(h)+i.instances)}}),l.forEach((i,g)=>{if(i>=a){const h=ya(g);e.push({name:h,code:g,instances:i})}}),e.sort((i,g)=>g.instances-i.instances)}),Rt=P(()=>{if(!S.value.forbiddenContinent)return[];const a=p.value?.instances||5,e=[],t=S.value.forbiddenContinent,l=new Map;return ca.value.forEach(i=>{const g=i.value.split("_");if(g.length>=2&&g[0]===t){const h=g[1];l.has(h)||l.set(h,0),l.set(h,l.get(h)+i.instances)}}),l.forEach((i,g)=>{if(i>=a){const h=ya(g);e.push({name:h,code:g,instances:i})}}),e.sort((i,g)=>g.instances-i.instances)}),Ot=P(()=>[a=>!a||/.+@.+\..+/.test(a)||s("components.marketplace.installDialog.emailMustBeValid")]),Wt=a=>m.app?.lockedValues?.includes(a)||!1,nt=P(()=>!!m.selectedConfig||Wt("instances")),$e=P(()=>!0),Te=P(()=>!0),Le=P(()=>!0);ae(()=>m.app,a=>{if(a&&a.compose&&a.compose.length>0&&!m.selectedConfig){L.value=a.compose.map(i=>({...i,cpu:Number((Number(i.cpu)||.1).toFixed(1)),ram:Number(i.ram)||100,hdd:Number(i.hdd)||1}));const e=a.compose.reduce((i,g)=>i+(Number(g.cpu)||.1),0),t=a.compose.reduce((i,g)=>i+(Number(g.ram)||100),0),l=a.compose.reduce((i,g)=>i+(Number(g.hdd)||1),0);p.value.cpu=Number(e.toFixed(1)),p.value.ram=t,p.value.storage=l,p.value.instances=a.instances,A.value&&a.subscriptionMonths&&(p.value.subscriptionMonths=a.subscriptionMonths)}},{immediate:!0});const Bt=En(),{privilege:Gt}=Dn(Bt),Fa=w(null),be=w(!1),Xt=P(()=>[{id:"stripe",name:"Stripe",description:s("components.marketplace.installDialog.payWithCreditCard"),image:Fn},{id:"paypal",name:"PayPal",description:s("components.marketplace.installDialog.payWithPayPal"),image:gt},{id:"flux",name:"ZelCore",description:s("components.marketplace.installDialog.payWithFlux"),image:Ga},{id:"ssp",name:"SSP",description:s("components.marketplace.installDialog.payWithFlux"),image:Pa.global.name.value==="dark"?Xa:Za}]),Zt=w(1e3);w(0),w(!1);const Ie=w(!1),ce=w({usd:0,flux:0,fluxDiscount:0}),da=async()=>{Ie.value=!0;try{const a=de.value.compose||m.app.compose||[];if(!a.length){console.warn("No compose array found for pricing calculation"),Ie.value=!1;return}let e=0,t=[];if(A.value){e=m.app.price||0;const h=a.reduce((E,U)=>E+(U.cpu||0),0),_=a.reduce((E,U)=>E+(U.ram||0),0),V=a.reduce((E,U)=>E+(U.hdd||0),0);t=[{name:"wordpress",description:"WordPress on Flux",repotag:"runonflux/wp-nginx:latest",ports:[80],containerPorts:[80],domains:[""],environmentParameters:[""],commands:[""],containerData:"/tmp",cpu:h,ram:_,hdd:V,tiered:!1}]}else e=m.app.price,a.length>1&&L.value.length>0?t=a.map((h,_)=>({...h,cpu:Number(L.value[_]?.cpu||h.cpu),ram:Number(L.value[_]?.ram||h.ram),hdd:Number(L.value[_]?.hdd||h.hdd)})):t=[{...a[0],cpu:parseFloat(p.value.cpu),ram:parseInt(p.value.ram),hdd:parseInt(p.value.storage)}];const l=e*p.value.subscriptionMonths,i={version:8,name:m.app.name||m.app.displayName,description:m.app.description||m.app.displayName||"Marketplace App",owner:m.app.owner||"marketplace",compose:t,instances:p.value.instances,expire:zt*p.value.subscriptionMonths,contacts:m.app.contacts||[],geolocation:A.value?m.app.geolocation||[]:Oa()||[],nodes:m.app.nodes||[],staticip:typeof m.app.staticip=="boolean"?m.app.staticip:!1,enterprise:m.app.enterprise||""},g=await je.appPriceUSDandFlux(i);if(g.data&&g.data.status==="success"){const h=g.data.data.usd||0,_=g.data.data.flux||0,V=h>0?_/h:0;ce.value={usd:h,flux:_,fluxDiscount:g.data.data.fluxDiscount||0,fluxPerUsd:V}}else console.error("API pricing request failed:",g.data),A.value&&(ce.value={usd:m.app.price||0,flux:m.app.fluxPrice||0,fluxDiscount:m.app.fluxDiscount||0})}catch(a){console.error("Error fetching API pricing:",a)}finally{Ie.value=!1}},ot=async()=>{try{const a=await je.appsDeploymentInformation();a.data&&a.data.status==="success"&&(st.value=a.data.data)}catch(a){console.error("Error fetching deployment info:",a)}},lt=P(()=>{if(ce.value.fluxPerUsd>0){const e=(Va.value||0)*ce.value.fluxPerUsd,t=p.value.subscriptionMonths||1;return(e*t).toFixed(2)}return"0.00"}),ea=P(()=>lt.value);P(()=>Zt.value<parseFloat(lt.value)),P(()=>{const a=tt.value.find(e=>e.months===p.value.subscriptionMonths);return a?a.discount:0}),P(()=>{if(!m.app)return 0;const a=m.app.compose||[];if(a.length===0)return 0;const e=a[0],t=e.cpu||1,l=e.ram||1e3,i=e.hdd||10,g=p.value.cpu||t,h=p.value.ram||l,_=p.value.storage||i,V=p.value.instances||3;if(g===t&&h===l&&_===i&&V===3)return m.app.price||0;const U=m.app.price||10,ee=t+l/1e3+i/10,ge=t/ee,ke=l/1e3/ee,O=i/10/ee,W=ge*(g/t)*U,fe=ke*(h/l)*U,Ge=O*(_/i)*U,he=(W+fe+Ge)/3*V;return Math.ceil(he*100)/100});const Va=P(()=>{if(m.selectedConfig&&m.selectedConfig.price)return m.selectedConfig.price;if(A.value)return m.app.price||0;if(ce.value.usd>0){const g=Number(ce.value.usd.toFixed(2)),h=m.app.price||0,_=Math.max(g,h);return console.log("ðŸ’° Using API-calculated price:",{apiPrice:g,configPrice:h,finalPrice:_,usedMinimum:_>g}),_}const a=m.app.price||0,e=3,t=p.value.instances||3,l=a/e,i=Number((l*t).toFixed(2));return console.log("ðŸ’° Price calculation (fallback):",{configPrice:a,currentInstances:t,pricePerInstance:l,totalPrice:i}),i}),Ua=P(()=>{const a=Va.value||0;return isNaN(a)?(console.warn("Monthly price is NaN:",Va.value),"0"):a.toFixed(2)}),$a=P(()=>{const a=parseFloat(Ua.value)||0,e=p.value.subscriptionMonths||1,t=a*e;return isNaN(t)?"$0.00":`$${t.toFixed(2)}`}),ua=P(()=>ce.value.fluxDiscount||0),st=w(null),ma=P(()=>st.value?.address||"t1XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"),ne=w(""),G=w(null),j=w(null),oe=w(!1),xe=w(!1),Re=w(!1),pa=w(""),va=w(""),it=P(()=>{const a=new Date,e=p.value.subscriptionMonths||1,t=new Date(a.setMonth(a.getMonth()+e)),l=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),g=t.getFullYear(),h=String(t.getHours()).padStart(2,"0"),_=String(t.getMinutes()).padStart(2,"0");return`${l}/${i}/${g} ${h}:${_}`});P(()=>{const a=new Date;return new Date(a.getTime()+30*6e4).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})});const rt=async(a,e)=>{try{await navigator.clipboard.writeText(a),z(e,"success",3e3,"mdi-content-copy")}catch(t){console.error("Failed to copy:",t),z(s("components.marketplace.installDialog.messages.failedToCopyToClipboard"),"error")}},de=w({...m.app}),aa=P(()=>{const a=de.value.configs||m.app.configs;return!!a&&a.length>0}),Se=()=>{const a=[];try{if(de.value&&de.value.compose&&Array.isArray(de.value.compose))for(let e=0;e<de.value.compose.length;e++){const t=de.value.compose[e];if(t&&t.userEnvironmentParameters&&Array.isArray(t.userEnvironmentParameters)){for(const l of t.userEnvironmentParameters)if(l&&l.name){const i={name:l.name,description:l.description||l.name,placeholder:l.placeholder||"",optional:l.optional||!1,advanced:l.advanced||!1,options:l.parameterConfig?.values||null,defaultValue:l.parameterConfig?.defaultValue||l.defaultValue||"",source:"compose.userEnvironmentParameters",componentIndex:e,componentName:t.name||`Component ${e}`};a.push(i)}}}}catch(e){console.error("Error processing environment parameters:",e)}return a};vt(()=>{Tt(),setTimeout(()=>{da()},1e3)}),ae([()=>p.value.instances,()=>p.value.cpu,()=>p.value.ram,()=>p.value.storage],()=>{da()},{deep:!0}),ae(()=>x.value,(a,e)=>{A.value&&a===0&&Y.value==="SSO"&&!I.value[0]&&ga(),!A.value&&a===4&&Y.value==="SSO"&&!I.value[0]&&ga();const t=A.value?1:5;a===t&&e!==t&&da()});const ct=P(()=>A.value&&x.value===0?I.value[0]&&I.value[1]:A.value&&x.value===1?ce.value.flux<=0||ce.value.usd<=0||!k.value?!1:oe.value:x.value===0?p.value.cpu>0&&p.value.ram>0&&p.value.storage>0&&p.value.instances>0&&ia.value:x.value===1?!Se().some(e=>!e.optional&&!p.value.parameters[e.name]):x.value===2||x.value===3?!0:x.value===4?I.value[0]&&I.value[1]:x.value===5?!k.value||ce.value.flux<=0||ce.value.usd<=0?!1:oe.value:!0);P(()=>!Ue.value&&ct.value),P(()=>["mdi-tune-variant","mdi-code-tags","mdi-earth","mdi-email-alert","mdi-shield-key","mdi-credit-card-outline","mdi-rocket-launch-outline"][x.value]||"mdi-cog"),P(()=>A.value?["Signing","Payment","Deploy"][x.value]||"Setup":["Configuration","Parameters","Location","Alerts","Signing","Payment","Deploy"][x.value]||"Setup");const Ht=P(()=>A.value?[{label:s("components.marketplace.installDialog.signing"),icon:"mdi-shield-key"},{label:s("components.marketplace.installDialog.payment"),icon:"mdi-credit-card-outline"},{label:s("components.marketplace.installDialog.deploy"),icon:"mdi-rocket-launch-outline"}]:[{label:s("components.marketplace.installDialog.config"),icon:"mdi-tune-variant"},{label:s("components.marketplace.installDialog.params"),icon:"mdi-code-tags"},{label:s("components.marketplace.installDialog.location"),icon:"mdi-earth"},{label:s("components.marketplace.installDialog.alerts"),icon:"mdi-email-alert"},{label:s("components.marketplace.installDialog.sign"),icon:"mdi-shield-key"},{label:s("components.marketplace.installDialog.payment"),icon:"mdi-credit-card-outline"},{label:s("components.marketplace.installDialog.deploy"),icon:"mdi-rocket-launch-outline"}]),jt=()=>{if(T.value&&(clearInterval(T.value),T.value=null,K.value=3),x.value<Ve.value-1){let a=x.value+1;if(A.value){x.value=a;return}a===1&&Se().length===0&&(a=2),x.value=a}},qt=()=>{console.log("[InstallDialog] closeDialog() called, deploying:",Ue.value),Ue.value||(console.log("[InstallDialog] Setting isOpen to false and resetting dialog"),Fe.value=!1,La())},Kt=()=>{Da(),Fe.value=!0,Ba(()=>{Ia.value++,et()})},Jt=()=>{if(T.value&&(clearInterval(T.value),T.value=null,K.value=3),A.value){x.value>0&&(x.value===1?(I.value=[!1,!1],F.value={signing:!1,registering:!1},me.value={signing:"",registering:""},q.value=null,Q.value=null,ve.value=null):x.value===2&&(ne.value="",oe.value=!1,xe.value=!1),x.value=x.value-1);return}const a=be.value?4:-1;if(x.value>=a&&(I.value=[!1,!1],F.value={signing:!1,registering:!1},me.value={signing:"",registering:""},q.value=null,Q.value=null,ve.value=null,ne.value="",K.value=3),x.value>0){let e=x.value-1;e===1&&Se().length===0&&(e=0),!be.value&&x.value===5&&e===4&&(e=3),x.value=e}},Yt=()=>{Ta=!0,H&&(H=!1),Oe&&(Oe=!1),We&&(We=!1),Be&&(Be=!1),F.value={signing:!1,registering:!1},I.value=[!1,!1],me.value={signing:"",registering:""},Ka.value=!1,Ja.value=!1,Ya.value="",Q.value&&(Q.value=null),ve.value&&(ve.value=null),G.value&&(clearInterval(G.value),G.value=null),j.value&&(clearTimeout(j.value),j.value=null),$.value=!1,oe.value=!1,xe.value=!1},ga=async()=>{Ta=!1,F.value.signing=!0,me.value.signing="";try{const a=await en(),e=Y.value;switch(at.value=e,e){case"Zelcore":case"ZelCore Extension":case"ZelCore App":await tn(a);break;case"SSP":await an(a);break;case"MetaMask":await nn(a);break;case"WalletConnect":await on(a);break;case"SSO":await ln(a);break;case"Manual":await sn(a);break;default:throw console.error("[InstallDialog] Unknown signing method:",e),console.error("[InstallDialog] loginType from localStorage:",localStorage.getItem("loginType")),new Error(`No compatible signing method found: "${e}". ${s("components.marketplace.installDialog.noCompatibleWallets")}`)}if(Ta){F.value.signing=!1;return}I.value[0]=!0,setTimeout(async()=>{I.value[0]&&!I.value[1]&&await dn(),F.value.signing=!1},3e3)}catch(a){const e="Failed to sign message: "+a.message;me.value.signing=e,F.value.signing=!1,z(e,"error",6e3)}},Q=w(null),ve=w(null);ae([()=>p.value.cpu,()=>p.value.ram,()=>p.value.storage,()=>p.value.instances,()=>p.value.subscriptionMonths,()=>p.value.parameters],()=>{if(A.value)return;const a=F.value.signing||F.value.registering;(I.value[0]||I.value[1]||a)&&(I.value=[!1,!1],F.value={signing:!1,registering:!1},me.value={signing:"",registering:""},q.value=null,Q.value=null,ve.value=null,ne.value="",K.value=3,x.value>=(be.value?2:1)&&(x.value=be.value?2:1))},{deep:!0});const Qt=async()=>{const a=Qe.value.email;if(!a||!a.trim())return[];if(!pt())throw new Error("Invalid email address format");try{const e=se.generateContactsId(),t={contactsid:e,contacts:[a]};return await se.uploadContacts(t),[se.getContactsStorageReference(e)]}catch(e){throw console.error("Failed to upload email to Flux Storage:",e),new Error(`Uploading contacts to Flux Storage failed: ${e.message}`)}},en=async()=>{const a=bn();if(!a.valid)throw new Error(`âš ï¸ Instance Availability Error: ${a.message}`);let e=[];if(A.value&&m.app.contacts&&m.app.contacts.length>0)try{const f=se.generateContactsId(),N={contactsid:f,contacts:m.app.contacts};await se.uploadContacts(N);const X=se.getContactsStorageReference(f);e=[X],console.log("âœ… WordPress contacts uploaded to storage:",X)}catch(f){throw console.error("âŒ Failed to upload WordPress contacts to Flux Storage:",f),new Error(`Uploading WordPress contacts to Flux Storage failed: ${f.message}`)}else e=await Qt();const t=Date.now();Q.value=t;const l=`${m.app.name}${t}`;let i="";try{const f=localStorage.getItem("zelidauth");if(f){const N=f.includes("zelid=")?Object.fromEntries(new URLSearchParams(f)):JSON.parse(f);i=N.zelid||N.ZelID||""}}catch(f){console.warn("Could not parse zelidauth for owner:",f)}if(!i)throw new Error("Owner (zelid) is required for deployment. Please ensure you are logged in.");const g=A.value?m.app.compose||[]:de.value.compose||m.app.compose||[];if(A.value){const f=l;for(const N of g)N.environmentParameters&&(N.environmentParameters=N.environmentParameters.map(X=>X.replace(/fluxoperator_wordpress(?![\d])/g,`fluxoperator_${f}`).replace(/fluxmysql_wordpress(?![\d])/g,`fluxmysql_${f}`).replace(/CLIENT_APPNAME=wordpress(?![\d])/g,`CLIENT_APPNAME=${f}`).replace(/DB_APPNAME=wordpress(?![\d])/g,`DB_APPNAME=${f}`)))}if(A.value&&m.app.uploadEnvToStorage){for(const f of g)if(f.environmentParameters&&f.environmentParameters.length>0){const N=se.generateEnvId(),X={envid:N,env:f.environmentParameters};try{await se.uploadEnv(X),f.environmentParameters=[se.getEnvStorageReference(N)],console.log(`âœ… Uploaded env for component ${f.name}, reference: ${f.environmentParameters[0]}`)}catch(ye){throw console.error(`âŒ Failed to upload env for component ${f.name}:`,ye),new Error(`Failed to upload environment variables for ${f.name}`)}}}const h=g.reduce((f,N)=>f+(N.cpu||0),0),_=g.reduce((f,N)=>f+(N.ram||0),0),V=g.reduce((f,N)=>f+(N.hdd||0),0),E=A.value?1:h>0?p.value.cpu/h:1,U=A.value?1:_>0?p.value.ram/_:1,ee=A.value?1:V>0?p.value.storage/V:1,ge=de.value.description||m.app.description||de.value.displayName||m.app.displayName,ke=Ca(ge),O={version:8,name:l,description:ke,owner:i,compose:g.map((f,N)=>{const X=[...f.environmentParameters||f.enviromentParameters||[]];try{const ue=Se();for(const[Xe,Ae]of Object.entries(p.value.parameters||{}))if(Ae){const Me=ue.find(ta=>ta&&ta.name===Xe);(!Me||Me.componentIndex===void 0||Me.componentIndex===N)&&X.push(`${Xe}=${Ae}`)}}catch(ue){console.warn(`Failed to process environment parameters for component ${N}:`,ue);for(const[Xe,Ae]of Object.entries(p.value.parameters||{}))Ae&&X.push(`${Xe}=${Ae}`)}let ye,Ce,Pe;g.length>1&&L.value.length>0&&L.value[N]?(ye=Number(L.value[N].cpu),Ce=Number(L.value[N].ram),Pe=Number(L.value[N].hdd)):(ye=parseFloat((f.cpu*E).toFixed(1)),Ce=Math.round(f.ram*U),Pe=Math.round(f.hdd*ee));let _a=f.ports||[];if(f.portSpecs&&f.portSpecs.length>0){const ue=[];for(const Xe of f.portSpecs){const Ae=Xe.split("-"),Me=parseInt(Ae[0]),ta=parseInt(Ae[1]);if(!isNaN(Me)&&!isNaN(ta)){const Cn=Math.floor(Math.random()*(ta-Me+1)+Me);ue.push(Cn)}}ue.length>0&&(_a=ue)}const le={name:f.name,description:Ca(f.description),repotag:f.repotag,ports:_a,domains:f.domains.map(ue=>Ca(ue.replace(/"/g,'"'))),environmentParameters:X,commands:f.commands.map(ue=>Ca(ue.replace(/"/g,'"'))),containerPorts:f.containerPorts,containerData:f.containerData,tiered:f.tiered,cpu:ye,ram:Ce,hdd:Pe,secrets:f.secrets??"",repoauth:"",envFluxStorage:f.envFluxStorage};return f.tiered&&(le.cpubasic=ye,le.cpusuper=ye,le.cpubamf=ye,le.rambasic=Ce,le.ramsuper=Ce,le.rambamf=Ce,le.hddbasic=Pe,le.hddsuper=Pe,le.hddbamf=Pe),le}),instances:p.value.instances,contacts:e,geolocation:A.value?m.app.geolocation||[]:Oa(),expire:zt*p.value.subscriptionMonths,nodes:m.app.nodes||[],staticip:m.app.staticip||!1,enterprise:""};for(const f of O.compose)if(f.envFluxStorage&&f.environmentParameters&&f.environmentParameters.length>0&&!f.environmentParameters.some(X=>X.startsWith("F_S_ENV=")))try{const X=se.generateContactsId();await se.uploadEnv({envid:X,env:f.environmentParameters}),f.environmentParameters=[se.getEnvStorageReference(X)],console.log(`âœ… Uploaded env for component ${f.name}, reference: ${f.environmentParameters[0]}`)}catch(X){throw console.error("Flux Storage upload failed:",X),new Error(`Failed to upload environment parameters to Flux Storage: ${X.message}`)}if(O.version>=8&&m.app.isAutoEnterprise)try{if(!Un())throw new Error("WebCrypto not available for enterprise encryption");const f=localStorage.getItem("zelidauth"),N=await je.getAppPublicKey(f,{name:O.name,owner:O.owner});if(N.data.status!=="success")throw new Error("Failed to get public key for enterprise encryption");const X=N.data.data.trim().replace(/\s+/g,""),ye=await $n(X),Ce=crypto.getRandomValues(new Uint8Array(32)),Pe=await Tn(Ce,ye),_a={contacts:O.contacts,compose:O.compose},le=await Ln(JSON.stringify(_a),Ce,Pe);O.enterprise=le,O.contacts=[],O.compose=[]}catch(f){throw console.error("Enterprise encryption failed:",f),new Error(`Enterprise encryption failed: ${f.message}`)}const W=await je.appRegistrationVerificaiton(O);if(W.data.status==="error"){console.error("Verification failed:",W.data);const f=W.data.data?.message||W.data.data||"App specification verification failed";throw f.toLowerCase().includes("geolocation")||f.toLowerCase().includes("instance")||f.toLowerCase().includes("available")||f.toLowerCase().includes("node")?new Error(`âš ï¸ Instance Availability Issue: ${f}`):new Error(f)}ve.value=JSON.parse(JSON.stringify(W.data.data||O));const fe="fluxappregister",Ge="1",he=JSON.stringify(ve.value);return`${fe}${Ge}${he}${t}`},an=async a=>{if(Oe)return Promise.reject(new Error("SSP signing already in progress"));try{Oe=!0;const e=await Xn(a);q.value={signature:e.signature,address:e.address,method:"SSP"},Oe=!1}catch(e){throw Oe=!1,new Error("SSP signing failed: "+e.message)}};let H=!1,Oe=!1,We=!1,Be=!1,Ta=!1;const tn=async a=>H?Promise.reject(new Error("ZelCore signing already in progress")):new Promise(async(e,t)=>{try{H=!0;const l=localStorage.getItem("zelidauth");if(!l){H=!1,t(new Error("ZelCore user not logged in"));return}let i;try{if(i=(l.includes("zelid=")?Object.fromEntries(new URLSearchParams(l)):JSON.parse(l)).zelid,!i){H=!1,t(new Error("ZelID not found in authentication data"));return}}catch{H=!1,t(new Error("Could not parse zelidauth data"));return}const g=window.zelcore&&typeof window.zelcore.sign=="function",h=window.zelcore&&typeof window.zelcore.protocol=="function",_=!window.zelcore;if(g){try{const E=await wt(a,i);q.value={signature:E.signature,address:E.address,method:"ZelCore Extension"},H=!1,e()}catch(E){H=!1,t(E)}return}if(h||_){const E=Mn(),U=Q.value;if(!U){H=!1,t(new Error("Message timestamp not available"));return}const ee=E.replace("https://","wss://").replace("http://","ws://"),ge=`${i}${U}`,ke=`${ee}/ws/sign/${ge}`;try{const W=new WebSocket(ke),fe=setTimeout(()=>{W.close(),H=!1,t(new Error("ZelCore signing timeout"))},6e4);W.onmessage=Ge=>{try{const he=xa.parse(Ge.data);he.status==="success"&&he["data[signature]"]?(clearTimeout(fe),W.close(),H=!1,q.value={signature:he["data[signature]"],address:i,method:"ZelCore App"},e()):(clearTimeout(fe),W.close(),H=!1,t(new Error("ZelCore signing failed: "+(he.message||"No signature in response"))))}catch(he){clearTimeout(fe),W.close(),H=!1,t(new Error("Failed to parse ZelCore response: "+he.message))}},W.onerror=Ge=>{clearTimeout(fe),H=!1,t(new Error("WebSocket connection failed"))}}catch(W){H=!1,t(new Error("Failed to establish WebSocket connection: "+W.message));return}const O=`${E}/id/providesign`;try{await wt(a,i,O,void 0,!0)}catch(W){H=!1,t(W)}return}const V=l.includes("zelid=")?Object.fromEntries(new URLSearchParams(l)):JSON.parse(l);q.value={signature:V.signature,address:i,method:"ZelCore (Existing Auth)",loginPhrase:V.loginPhrase},H=!1,e()}catch(l){console.error("ZelCore signing error:",l),H=!1,t(l)}}),nn=async a=>{if(!window.ethereum||!window.ethereum.isMetaMask)throw new Error("MetaMask not installed");if(We)return Promise.reject(new Error("MetaMask signing already in progress"));try{We=!0;const t=(await window.ethereum.request({method:"eth_requestAccounts"}))[0],l=await window.ethereum.request({method:"personal_sign",params:[a,t]});q.value={signature:l,address:t,method:"MetaMask"},We=!1}catch(e){throw We=!1,new Error("MetaMask signing failed: "+e.message)}},on=async a=>{if(console.log("[InstallDialog] Starting WalletConnect signing..."),Be)return console.warn("[InstallDialog] WalletConnect signing already in progress"),Promise.reject(new Error("WalletConnect signing already in progress"));try{Be=!0,console.log("[InstallDialog] Calling walletService sign function...");const e=await Bn(a);console.log("[InstallDialog] Sign function returned, signature:",e?.substring(0,20)+"...");const t=await Gn();if(console.log("[InstallDialog] Connected account:",t),!t?.address)throw new Error("No connected account found");console.log("[InstallDialog] âœ… Setting deploymentSignature with:",{signatureLength:e.length,address:t.address.toLowerCase(),method:"WalletConnect"}),q.value={signature:e,address:t.address.toLowerCase(),method:"WalletConnect"},console.log("[InstallDialog] âœ… deploymentSignature set:",q.value),Be=!1,console.log("[InstallDialog] âœ… WalletConnect signing complete")}catch(e){throw console.error("[InstallDialog] WalletConnect signing failed:",e),Be=!1,new Error("WalletConnect signing failed: "+e.message)}},ln=async a=>{try{const e=ht();if(!e)throw new Error("SSO authentication required. Please log in with Google or Apple.");const t=await e.getIdToken();if(!t)throw new Error("Unable to get Firebase authentication token");console.log("âœ… Firebase token obtained for SSO signing");const l={"Content-Type":"application/json",Authorization:`Bearer ${t}`},i=await Sa.post("https://service.fluxcore.ai/api/signMessage",{message:a},{headers:l});if(i.data?.status!=="success"||!i.data.signature)throw new Error(i.data?.message||"Failed to sign application message");console.log("âœ… SSO signature obtained");const g=localStorage.getItem("zelidauth"),h=xa.parse(g);q.value={signature:i.data.signature,address:h.zelid||i.data.public_address,method:"SSO"}}catch(e){throw console.error("SSO Signing failed:",e),new Error("SSO signing failed: "+(e.response?.data?.message||e.message))}},sn=async a=>new Promise((e,t)=>{try{const l=localStorage.getItem("zelidauth");if(!l){t(new Error("No login credentials found"));return}const g=(l.includes("zelid=")?Object.fromEntries(new URLSearchParams(l)):JSON.parse(l)).zelid;Qa.value=a,za.value=!0,Je=h=>{q.value={signature:h,address:g,method:"Manual"},e()},Ye=t}catch(l){console.error("Manual signing setup failed:",l),t(new Error("Manual signing setup failed: "+l.message))}});function rn(a){Je&&(Je(a),Je=null,Ye=null)}function cn(){Ye&&(Ye(new Error(s("components.marketplace.installDialog.manualSigningCancelled"))),Je=null,Ye=null)}const q=w(null),dn=async()=>{F.value.registering=!0,me.value.registering="";try{if(!q.value)throw new Error("No signature available. Please sign the application message first.");const a=Q.value;if(!a)throw new Error("Deployment timestamp not available. Please sign the message first.");const e=ve.value;if(!e)throw new Error("App specification not available. Please sign the message first.");const t={type:"fluxappregister",version:1,appSpecification:JSON.parse(JSON.stringify(e)),timestamp:a,signature:q.value.signature},l=localStorage.getItem("zelidauth");if(!l)throw new Error("Authentication required. Please log in to FluxOS.");const i=await je.registerApp(l,t);if(i.data&&i.data.status==="success"){if(i.data.data&&typeof i.data.data=="string")ne.value=i.data.data;else throw console.error("Invalid payment hash in response:",i.data),new Error("Registration succeeded but no valid payment hash was returned");I.value[1]=!0,T.value&&(clearInterval(T.value),T.value=null),K.value=3,T.value=setInterval(()=>{K.value--,K.value<=0&&(clearInterval(T.value),T.value=null,I.value[0]&&I.value[1]&&x.value<Ve.value-1&&x.value++)},1e3)}else throw new Error(i.data?.data?.message||"Registration failed")}catch(a){console.error("Registration error:",a);const e="Failed to register application: "+a.message;me.value.registering=e,z(e,"error",6e3),a.message.includes("No signature available")&&(I.value=[!1,!1],F.value.signing=!1,me.value.signing="",q.value=null,Q.value=null,ve.value=null)}finally{F.value.registering=!1}},La=()=>{x.value=0,Ue.value=!1,Ka.value=!1,Ja.value=!1,Ya.value="",$.value=!1,oe.value=!1,xe.value=!1,k.value=be.value?"flux":"stripe",Da(),ha(),G.value&&(clearInterval(G.value),G.value=null),j.value&&(clearTimeout(j.value),j.value=null),I.value=[!1,!1],F.value={signing:!1,registering:!1},me.value={signing:"",registering:""},q.value=null,Q.value=null,ve.value=null,ne.value="";const a=m.app.compose||[];L.value=a.map(i=>({...i,cpu:Number(i.cpu),ram:Number(i.ram),hdd:Number(i.hdd)}));const e=a.reduce((i,g)=>i+Number(g.cpu),0),t=a.reduce((i,g)=>i+Number(g.ram),0),l=a.reduce((i,g)=>i+Number(g.hdd),0);p.value={cpu:e,ram:t,storage:l,instances:m.app.instances||3,subscriptionMonths:m.app.subscriptionMonths||1,parameters:{}},S.value={allowedContinent:null,allowedCountry:null,forbiddenContinent:null,forbiddenCountry:null},Qe.value={email:""}},fa=async()=>{G.value&&clearInterval(G.value),j.value&&clearTimeout(j.value),j.value=setTimeout(()=>{G.value&&(clearInterval(G.value),G.value=null),oe.value||(z(s("components.marketplace.installDialog.messages.paymentMonitoringTimedOut"),"warning",8e3),$.value=!1)},1800*1e3),G.value=setInterval(async()=>{try{const a=Q.value?`${m.app.name}${Q.value}`:m.app.name,e=await je.getAppLocation(a);if(e.data&&e.data.status==="success"){const t=e.data.data;t&&t.length>0&&(clearInterval(G.value),clearTimeout(j.value),G.value=null,j.value=null,oe.value=!0,$.value=!1,z(s("components.marketplace.installDialog.messages.paymentConfirmedActive"),"success",8e3),T.value&&(clearInterval(T.value),T.value=null),K.value=5,T.value=setInterval(()=>{K.value--,K.value<=0&&(clearInterval(T.value),T.value=null,x.value=Ve.value-1)},1e3))}}catch(a){console.error("Error checking payment status:",a)}},24e4)},un=async()=>{$.value=!0;try{await On({address:ma.value,amount:ea.value,message:ne.value,coin:"flux"}),await fa(),z(s("components.marketplace.installDialog.messages.openingZelCoreWallet"),"info",5e3)}catch(a){console.error("Flux payment failed:",a),$.value=!1,z(s("components.marketplace.installDialog.messages.failedToOpenZelCoreWallet"),"error")}},mn=async()=>{$.value=!0;try{const a=localStorage.getItem("zelidauth");if(!a){z(s("components.marketplace.installDialog.messages.pleaseLoginToMakePayments"),"error"),$.value=!1;return}const e=xa.parse(a);if(!e.zelid||!e.signature||!e.loginPhrase){z(s("components.marketplace.installDialog.messages.invalidAuthenticationData"),"error"),$.value=!1;return}const t={zelid:e.zelid,signature:e.signature,loginPhrase:e.loginPhrase,details:{name:m.app.name,description:m.app.description,hash:ne.value,price:parseFloat(Ua.value),productName:m.app.name,success_url:`${window.location.origin}/successcheckout`,cancel_url:`${window.location.origin}/marketplace`,kpi:{origin:"FluxOS",marketplace:!0,registration:!0}}},l=await Sa.post(`${ft}/api/v1/stripe/checkout/create`,t);if(l.data.status==="error")throw new Error(l.data.message||l.data.data||"Failed to create Stripe checkout");await fa();const i=window.open(l.data.data,"_blank","width=600,height=800,resizable=yes,scrollbars=yes");!i||i.closed||typeof i.closed>"u"?(Re.value=!0,pa.value=l.data.data,va.value="Stripe"):(i.focus(),z(s("components.marketplace.installDialog.messages.stripeCheckoutOpened"),"info",5e3))}catch(a){if(console.error("Stripe payment failed:",a),a.response?.status>=400||a.code==="ERR_NETWORK"||a.code==="ECONNABORTED")Ee(),xe.value=!0,$.value=!1,console.log("ðŸ”§ Payment bridge maintenance mode activated");else{$.value=!1;const e=a.response?.data?.message||a.response?.data?.data||a.message||"Failed to initialize Stripe payment";z(e,"error")}}},pn=async()=>{$.value=!0;try{const a=localStorage.getItem("zelidauth");if(!a){z("Please login to FluxOS to make payments","error"),$.value=!1;return}const e=xa.parse(a);if(!e.zelid||!e.signature||!e.loginPhrase){z("Invalid authentication data - please login again","error"),$.value=!1;return}const t={zelid:e.zelid,signature:e.signature,loginPhrase:e.loginPhrase,details:{name:m.app.name,description:m.app.description,hash:ne.value,price:parseFloat(Ua.value),productName:m.app.name,return_url:`${window.location.origin}/successcheckout`,cancel_url:`${window.location.origin}/marketplace`,kpi:{origin:"FluxOS",marketplace:!0,registration:!0}}},l=await Sa.post(`${ft}/api/v1/paypal/checkout/create`,t);if(l.data.status==="error")throw new Error(l.data.message||l.data.data||"Failed to create PayPal order");await fa();const i=window.open(l.data.data,"_blank","width=600,height=800,resizable=yes,scrollbars=yes");!i||i.closed||typeof i.closed>"u"?(Re.value=!0,pa.value=l.data.data,va.value="PayPal"):(i.focus(),z(s("components.marketplace.installDialog.messages.payPalCheckoutOpened"),"info",5e3))}catch(a){if(console.error("PayPal payment failed:",a),a.response?.status>=400||a.code==="ERR_NETWORK"||a.code==="ECONNABORTED")Ee(),xe.value=!0,$.value=!1,console.log("ðŸ”§ Payment bridge maintenance mode activated");else{$.value=!1;const e=a.response?.data?.message||a.response?.data?.data||a.message||"Failed to initialize PayPal payment";z(e,"error")}}},vn=async()=>{$.value=!0;try{if(!yt()){z(s("components.marketplace.installDialog.messages.sspWalletNotInstalled"),"error"),$.value=!1;return}const a=await Wn({message:ne.value,amount:ea.value.toString(),address:ma.value,chain:"flux"});z(`SSP payment initiated: ${a.txid}`,"success",5e3),await fa()}catch(a){console.error("SSP payment failed:",a),$.value=!1,z(a.message||"Failed to initiate SSP payment","error")}},gn=()=>{pa.value&&(window.open(pa.value,"_blank"),Re.value=!1)},Ee=()=>{G.value&&(clearInterval(G.value),G.value=null),j.value&&(clearTimeout(j.value),j.value=null),ha(),$.value=!1,oe.value=!1,xe.value=!1,z(s("components.marketplace.installDialog.messages.paymentMonitoringCancelled"),"info")},ha=()=>{T.value&&(clearInterval(T.value),T.value=null),K.value=3},dt=(a,e)=>{a==="allowed"?(S.value.allowedContinent=e,S.value.allowedCountry=null):(S.value.forbiddenContinent=e,S.value.forbiddenCountry=null),Ra()},ut=(a,e)=>{a==="allowed"?S.value.allowedCountry=e:S.value.forbiddenCountry=e,Ra()},Ra=()=>{const a=[];return a.push(...re.value),a.push(...we.value),a},Oa=()=>Ra(),fn=()=>{if(!S.value.allowedContinent)return;let a=`ac${S.value.allowedContinent}`;S.value.allowedCountry&&(a+=`_${S.value.allowedCountry}`);const e=mt(a,"allowed");if(e.hasConflict){z(e.message,"error",3e3,"mdi-alert-circle");return}if(!re.value.includes(a))re.value.push(a),z(`Added allowed location: ${De(a)}`,"success",3e3,"mdi-check-circle");else{z(s("components.marketplace.installDialog.messages.locationAlreadyInAllowedList"),"warning",3e3,"mdi-alert");return}S.value.allowedContinent=null,S.value.allowedCountry=null},hn=()=>{if(!S.value.forbiddenContinent)return;let a=`a!c${S.value.forbiddenContinent}`;S.value.forbiddenCountry&&(a+=`_${S.value.forbiddenCountry}`);const e=mt(a,"forbidden");if(e.hasConflict){z(e.message,"error",3e3,"mdi-alert-circle");return}if(!we.value.includes(a))we.value.push(a),z(`Added forbidden location: ${De(a)}`,"success",3e3,"mdi-check-circle");else{z(s("components.marketplace.installDialog.messages.locationAlreadyInForbiddenList"),"warning",3e3,"mdi-alert");return}S.value.forbiddenContinent=null,S.value.forbiddenCountry=null},yn=a=>{const e=re.value.splice(a,1);z(`Removed allowed location: ${De(e[0])}`,"info",3e3,"mdi-delete")},_n=a=>{const e=we.value.splice(a,1);z(`Removed forbidden location: ${De(e[0])}`,"info",3e3,"mdi-delete")},De=a=>{const e=a.startsWith("ac"),t=a.startsWith("a!c");let l;if(e)l=a.slice(2);else if(t)l=a.slice(3);else return a;const i=l.split("_"),g=i[0],h=i[1],_=Wa(g)||g,V=h?ya(h):"All Countries";return h?`${_}, ${V}`:_},mt=(a,e)=>{const t=a.startsWith("a!c")?a.slice(3):a.slice(2),l=t.split("_"),i=l[0],g=l[1];if(e==="allowed")for(const h of we.value){const _=h.slice(3),V=_.split("_"),E=V[0],U=V[1];if(_===t)return{hasConflict:!0,message:`Cannot allow "${De(a)}" because it's already forbidden`};if(g&&E===i&&!U)return{hasConflict:!0,message:`Cannot allow "${De(a)}" because entire continent is forbidden`};if(!g&&E===i&&U)return{hasConflict:!0,message:`Cannot allow entire continent because "${Wa(E)} â†’ ${ya(U)}" is already forbidden`}}else{const h=[];for(let _=0;_<re.value.length;_++){const V=re.value[_],E=V.slice(2),U=E.split("_"),ee=U[0],ge=U[1];E===t&&h.push({index:_,geo:V,reason:"exact match"}),g&&ee===i&&!ge&&h.push({index:_,geo:V,reason:"continent already allowed"}),!g&&ee===i&&ge&&h.push({index:_,geo:V,reason:"country conflicts with continent"})}h.reverse().forEach(_=>{re.value.splice(_.index,1)})}return{hasConflict:!1}},wn=async()=>{try{const e=await(await fetch("https://stats.runonflux.io/fluxinfo?projection=geo")).json();if(e.status==="success"&&e.data&&e.data.length>5e3){const t=[],l=new Map;e.data.forEach(h=>{if(h.geolocation?.continentCode&&h.geolocation?.countryCode&&h.geolocation?.regionName){const _=h.geolocation.continentCode,V=h.geolocation.countryCode,E=h.geolocation.regionName,U=_,ee=`${_}_${V}`,ge=`${ee}_${E}`,ke=O=>{const W=t.find(fe=>fe.value===O);W?W.instances++:t.push({value:O,instances:1})};if(ke(U),ke(ee),ke(ge),!l.has(_)){const O=Wa(_);O&&l.set(_,O)}}}),ca.value=t;const i=p.value?.instances||5,g=[];l.forEach((h,_)=>{const V=t.filter(E=>E.value.startsWith(_)).reduce((E,U)=>E+U.instances,0);V>=i&&g.push({name:h,code:_,totalInstances:V})}),Na.value=g.sort((h,_)=>_.totalInstances-h.totalInstances)}else throw console.warn("Insufficient node data or invalid response from stats API"),new Error("Unable to fetch sufficient node data for geolocation validation")}catch(a){throw console.error("Failed to fetch live geolocation data:",a),a}},Wa=a=>({AF:"Africa",AN:"Antarctica",AS:"Asia",EU:"Europe",NA:"North America",OC:"Oceania",SA:"South America"})[a]||null,ya=a=>{const e=Nn.countries.find(t=>t.code===a);return e?e.name:(console.warn(`Missing country name mapping for code: "${a}"`),a.toUpperCase())},bn=()=>{const a=p.value.instances,e=Oa();if(e.length===0)return{valid:!0,message:"Global deployment allowed"};const t=e.filter(l=>l.startsWith("ac"));if(t.length>0){let l=0;if(t.forEach(i=>{const g=i.slice(2),h=ca.value.find(_=>_.value===g||_.value.startsWith(g+"_"));h&&(l+=h.instances)}),l<a)return{valid:!1,message:`Insufficient nodes available. Required: ${a}, Available: ${l} in selected regions.`}}return{valid:!0,message:"Sufficient instances available"}},pt=()=>{const a=Qe.value.email;return a?/.+@.+\..+/.test(a):!1};return ae(be,a=>{k.value=a?"flux":"stripe"},{immediate:!0}),ae(Fe,a=>{a?Ba(()=>{A.value&&x.value===0&&Y.value==="SSO"&&!I.value[0]&&(console.log("[InstallDialog] Auto-triggering WordPress SSO signing on dialog open"),ga())}):($.value&&Ee(),ha())}),ae([()=>p.value.cpu,()=>p.value.ram,()=>p.value.storage,()=>p.value.instances],()=>{$.value&&(Ee(),ha(),z(s("components.marketplace.installDialog.messages.configurationChanged"),"warning"))}),xn(()=>{G.value&&(clearInterval(G.value),G.value=null),j.value&&(clearTimeout(j.value),j.value=null),T.value&&(clearInterval(T.value),T.value=null)}),ae(()=>m.modelValue,(a,e)=>{e===!0&&a===!1&&La(),e===!1&&a===!0&&(La(),ot())}),ae(()=>m.app,a=>{a&&Se().forEach(t=>{p.value.parameters[t.name]||(p.value.parameters[t.name]=t.defaultValue||t.placeholder||"")})},{immediate:!0}),ae(()=>m.modelValue,a=>{a===!0&&(qa.value?Da():(Fe.value=!1,Ba(()=>{Nt()})))},{immediate:!0}),ae(qa,(a,e)=>{a&&!e&&Kt()}),(a,e)=>(u(),y(te,null,[o(At,{modelValue:Fe.value,"onUpdate:modelValue":e[33]||(e[33]=t=>Fe.value=t),"max-width":"800",persistent:"",scrollable:"",class:"install-dialog",style:{height:"90vh"}},{default:c(()=>[o(qe,{class:"install-card"},{default:c(()=>[o(bt,{class:"install-header"},{default:c(()=>[n("div",uo,[n("div",mo,[o(Z,{size:"36",color:"primary",variant:"flat"},{default:c(()=>[A.value||B.isGame||!sa.value||ra.value?(u(),C(v,{key:0,icon:A.value?"mdi-wordpress":B.isGame?"mdi-gamepad-variant":"mdi-apps",size:"36",color:"white"},null,8,["icon"])):(u(),C(qn,{key:1,src:sa.value,alt:B.app.displayName||B.app.name,onError:e[0]||(e[0]=t=>ra.value=!0),cover:""},{placeholder:c(()=>[n("div",po,[o(v,{icon:"mdi-apps",size:"36",color:"white"})])]),_:1},8,["src","alt"]))]),_:1}),n("div",vo,[n("h3",go,[A.value&&B.app.planName?(u(),y(te,{key:0},[b(" WordPress "+d(B.app.planName),1)],64)):(u(),y(te,{key:1},[b(d(B.app.displayName||B.app.name),1)],64))])])]),o(M,{icon:"mdi-close",variant:"text",size:"default",onClick:qt,class:"close-btn"})])]),_:1}),n("div",fo,[n("div",ho,[(u(!0),y(te,null,ze(Ht.value,(t,l)=>(u(),y("div",{key:l,class:Ze(["step-item",{active:l===x.value,completed:l<x.value,upcoming:l>x.value}])},[n("div",yo,[l<x.value?(u(),C(v,{key:0,icon:"mdi-check",size:"20",color:"white"})):(u(),C(v,{key:1,icon:t.icon,size:"20",color:l===x.value?"primary":"grey"},null,8,["icon","color"]))]),n("div",_o,d(t.label),1),l<Ve.value-1?(u(),y("div",wo)):D("",!0)],2))),128))])]),o(Ke,{class:"install-content"},{default:c(()=>[o(Kn,{modelValue:x.value,"onUpdate:modelValue":e[32]||(e[32]=t=>x.value=t),class:"install-wizard"},{default:c(()=>[A.value?D("",!0):(u(),C(Ne,{key:0,value:0},{default:c(()=>[n("div",bo,[ia.value?D("",!0):(u(),C(Ha,{key:0,type:"warning",variant:"tonal",prominent:"",border:"start",class:"mb-4"},{prepend:c(()=>[o(v,{icon:"mdi-alert-circle",size:"32"})]),default:c(()=>[n("div",ko,[n("span",Co,d(r(s)("components.marketplace.installDialog.termsAcceptanceRequired")),1),n("span",xo,d(r(s)("components.marketplace.installDialog.pleaseScrollAndAccept")),1)])]),_:1})),B.selectedConfig&&sa.value&&!ra.value?(u(),y("div",So,[n("img",{src:sa.value,alt:B.app.displayName||B.app.name,class:"selected-config-logo",onError:e[1]||(e[1]=t=>ra.value=!0)},null,40,Do)])):D("",!0),n("div",Po,[n("div",Ao,[o(Z,{size:"32",color:"primary",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-memory",size:"18",color:"white"})]),_:1}),n("h5",null,d(r(s)("components.marketplace.installDialog.hardwareRequirements")),1),L.value?.length>1?(u(),C(R,{key:0,size:"small",color:"secondary",variant:"tonal",class:"ml-2"},{default:c(()=>[b(d(L.value.length)+" "+d(r(s)("components.marketplace.installDialog.containers")),1)]),_:1})):D("",!0)]),$e.value||Te.value||Le.value?(u(),y("div",zo,[n("div",{class:Ze(["hardware-card",{"hardware-card--disabled":$e.value}]),style:{position:"relative"}},[$e.value?(u(),C(v,{key:0,icon:"mdi-lock",size:"16",color:"warning",style:{position:"absolute",top:"8px",right:"8px","z-index":"1"}})):D("",!0),o(Z,{size:"36",color:"success",variant:"tonal"},{default:c(()=>[o(v,{icon:"mdi-cpu-64-bit",size:"20"})]),_:1}),n("div",Io,[n("span",Eo,d(r(s)("components.marketplace.installDialog.cpuCores")),1),n("div",Mo,[$e.value?D("",!0):(u(),C(M,{key:0,icon:"mdi-minus",size:"x-small",variant:"tonal",color:"success",class:"control-btn",onClick:e[2]||(e[2]=t=>p.value.cpu=Number(Math.max(B.app.compose.reduce((l,i)=>l+Number(i.cpu),0),parseFloat(p.value.cpu)-.1).toFixed(1)))})),n("div",No,[n("input",{value:Number(p.value.cpu).toFixed(1),type:"text",class:"hardware-custom-input",disabled:$e.value,onInput:e[3]||(e[3]=t=>p.value.cpu=Number(parseFloat(t.target.value).toFixed(1)))},null,40,Fo)]),$e.value?D("",!0):(u(),C(M,{key:1,icon:"mdi-plus",size:"x-small",variant:"tonal",color:"success",class:"control-btn",onClick:e[4]||(e[4]=t=>p.value.cpu=Number((parseFloat(p.value.cpu)+.1).toFixed(1)))}))])])],2),n("div",{class:Ze(["hardware-card",{"hardware-card--disabled":Te.value}]),style:{position:"relative"}},[Te.value?(u(),C(v,{key:0,icon:"mdi-lock",size:"16",color:"warning",style:{position:"absolute",top:"8px",right:"8px","z-index":"1"}})):D("",!0),o(Z,{size:"36",color:"info",variant:"tonal"},{default:c(()=>[o(v,{icon:"mdi-memory",size:"20"})]),_:1}),n("div",Vo,[n("span",Uo,d(r(s)("components.marketplace.installDialog.memoryMb")),1),n("div",$o,[Te.value?D("",!0):(u(),C(M,{key:0,icon:"mdi-minus",size:"x-small",variant:"tonal",color:"info",class:"control-btn",onClick:e[5]||(e[5]=t=>p.value.ram=Math.max(B.app.compose.reduce((l,i)=>l+Number(i.ram),0),p.value.ram-100))})),n("div",To,[wa(n("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>p.value.ram=t),type:"text",class:"hardware-custom-input",disabled:Te.value,onInput:e[7]||(e[7]=t=>p.value.ram=t.target.value)},null,40,Lo),[[ba,p.value.ram]])]),Te.value?D("",!0):(u(),C(M,{key:1,icon:"mdi-plus",size:"x-small",variant:"tonal",color:"info",class:"control-btn",onClick:e[8]||(e[8]=t=>p.value.ram=parseInt(p.value.ram)+100)}))])])],2),n("div",{class:Ze(["hardware-card",{"hardware-card--disabled":Le.value}]),style:{position:"relative"}},[Le.value?(u(),C(v,{key:0,icon:"mdi-lock",size:"16",color:"warning",style:{position:"absolute",top:"8px",right:"8px","z-index":"1"}})):D("",!0),o(Z,{size:"36",color:"warning",variant:"tonal"},{default:c(()=>[o(v,{icon:"mdi-harddisk",size:"20"})]),_:1}),n("div",Ro,[n("span",Oo,d(r(s)("components.marketplace.installDialog.storageGb")),1),n("div",Wo,[Le.value?D("",!0):(u(),C(M,{key:0,icon:"mdi-minus",size:"x-small",variant:"tonal",color:"warning",class:"control-btn",onClick:e[9]||(e[9]=t=>p.value.storage=Math.max(B.app.compose.reduce((l,i)=>l+Number(i.hdd),0),p.value.storage-1))})),n("div",Bo,[wa(n("input",{"onUpdate:modelValue":e[10]||(e[10]=t=>p.value.storage=t),type:"text",class:"hardware-custom-input",disabled:Le.value,onInput:e[11]||(e[11]=t=>p.value.storage=t.target.value)},null,40,Go),[[ba,p.value.storage]])]),Le.value?D("",!0):(u(),C(M,{key:1,icon:"mdi-plus",size:"x-small",variant:"tonal",color:"warning",class:"control-btn",onClick:e[12]||(e[12]=t=>p.value.storage=parseInt(p.value.storage)+1)}))])])],2)])):(u(),y("div",Xo,[(u(!0),y(te,null,ze(L.value,(t,l)=>(u(),y("div",{key:l,class:"compose-entry-item"},[n("div",Zo,[o(v,{icon:"mdi-docker",size:"20",color:"secondary",class:"ml-3"}),n("span",Ho,d(t.name||`Container ${l+1}`),1)]),n("div",jo,[n("div",qo,[o(Z,{size:"36",color:"success",variant:"tonal"},{default:c(()=>[o(v,{icon:"mdi-cpu-64-bit",size:"20"})]),_:1}),n("div",Ko,[e[38]||(e[38]=n("span",{class:"hardware-label"},"CPU",-1)),n("div",Jo,[o(M,{icon:"mdi-minus",size:"x-small",variant:"tonal",color:"success",class:"control-btn",onClick:i=>{t.cpu=Number(Math.max(.1,parseFloat(t.cpu)-.1).toFixed(1)),_e()}},null,8,["onClick"]),n("div",Yo,[n("input",{value:Number(t.cpu).toFixed(1),type:"text",class:"hardware-custom-input",onInput:i=>{t.cpu=Number(parseFloat(i.target.value).toFixed(1)),_e()}},null,40,Qo)]),o(M,{icon:"mdi-plus",size:"x-small",variant:"tonal",color:"success",class:"control-btn",onClick:i=>{t.cpu=Number((parseFloat(t.cpu)+.1).toFixed(1)),_e()}},null,8,["onClick"])])])]),n("div",el,[o(Z,{size:"36",color:"info",variant:"tonal"},{default:c(()=>[o(v,{icon:"mdi-memory",size:"20"})]),_:1}),n("div",al,[e[39]||(e[39]=n("span",{class:"hardware-label"},"RAM (MB)",-1)),n("div",tl,[o(M,{icon:"mdi-minus",size:"x-small",variant:"tonal",color:"info",class:"control-btn",onClick:i=>{t.ram=Math.max(100,t.ram-100),_e()}},null,8,["onClick"]),n("div",nl,[wa(n("input",{"onUpdate:modelValue":i=>t.ram=i,type:"text",class:"hardware-custom-input",onInput:_e},null,40,ol),[[ba,t.ram]])]),o(M,{icon:"mdi-plus",size:"x-small",variant:"tonal",color:"info",class:"control-btn",onClick:i=>{t.ram=parseInt(t.ram)+100,_e()}},null,8,["onClick"])])])]),n("div",ll,[o(Z,{size:"36",color:"warning",variant:"tonal"},{default:c(()=>[o(v,{icon:"mdi-harddisk",size:"20"})]),_:1}),n("div",sl,[e[40]||(e[40]=n("span",{class:"hardware-label"},"Storage (GB)",-1)),n("div",il,[o(M,{icon:"mdi-minus",size:"x-small",variant:"tonal",color:"warning",class:"control-btn",onClick:i=>{t.hdd=Math.max(1,t.hdd-1),_e()}},null,8,["onClick"]),n("div",rl,[wa(n("input",{"onUpdate:modelValue":i=>t.hdd=i,type:"text",class:"hardware-custom-input",onInput:_e},null,40,cl),[[ba,t.hdd]])]),o(M,{icon:"mdi-plus",size:"x-small",variant:"tonal",color:"warning",class:"control-btn",onClick:i=>{t.hdd=parseInt(t.hdd)+1,_e()}},null,8,["onClick"])])])])])]))),128))]))]),n("div",dl,[n("div",ul,[o(Z,{size:"32",color:"warning",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-calendar-clock",size:"18",color:"white"})]),_:1}),n("h5",null,d(r(s)("components.marketplace.installDialog.subscriptionDuration")),1)]),n("div",ml,[o(Jn,{modelValue:p.value.subscriptionMonths,"onUpdate:modelValue":e[13]||(e[13]=t=>p.value.subscriptionMonths=t),"selected-class":"text-primary",mandatory:"",class:"duration-chips"},{default:c(()=>[(u(!0),y(te,null,ze(tt.value,t=>(u(),C(R,{key:t.months,value:t.months,variant:"outlined",size:"default",color:"primary",class:"duration-chip"},{default:c(()=>[b(d(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),n("div",pl,[n("div",vl,[o(Z,{size:"32",color:"primary",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-layers-triple",size:"18",color:"white"})]),_:1}),n("h5",null,d(r(s)("components.marketplace.installDialog.deploymentOptions")),1)]),n("div",gl,[n("div",fl,[o(R,{color:"success",variant:"tonal",size:"small",class:"instances-chip"},{default:c(()=>[o(v,{start:"",icon:"mdi-layers",size:"14"}),b(" "+d(r(s)("components.marketplace.installDialog.instances",{count:p.value.instances}))+" ",1),nt.value?(u(),C(v,{key:0,icon:"mdi-lock",size:"14",color:"warning",class:"ml-1"})):D("",!0)]),_:1})]),n("div",hl,[o(Yn,{modelValue:p.value.instances,"onUpdate:modelValue":e[14]||(e[14]=t=>p.value.instances=t),min:3,max:100,step:1,"thumb-label":!1,disabled:nt.value,color:"primary","track-color":"primary",class:"deployment-slider","hide-details":""},null,8,["modelValue","disabled"])])])]),n("div",yl,[n("div",_l,[o(Z,{size:"32",color:"primary",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-calculator",size:"18",color:"white"})]),_:1}),n("h5",null,d(r(s)("components.marketplace.installDialog.estimatedPricing")),1)]),n("div",wl,[o(R,{color:"success",variant:"elevated",size:"large",class:"price-chip usd-chip"},{default:c(()=>[b(d($a.value),1)]),_:1}),n("div",bl,[o(R,{color:"primary",variant:"elevated",size:"large",class:"price-chip flux-chip"},{default:c(()=>[o(v,{start:"",icon:"mdi-lightning-bolt",size:"16"}),Ie.value?(u(),y("span",kl,d(r(s)("components.marketplace.installDialog.loading")),1)):(u(),y("span",Cl,d(ea.value)+" FLUX",1))]),_:1}),!Ie.value&&ua.value>0?(u(),C(Qn,{key:0,content:`-${ua.value}%`,color:"success",class:"position-absolute",style:{top:"4px",right:"4px","pointer-events":"none"}},null,8,["content"])):D("",!0)])])]),n("div",xl,[o(eo,{modelValue:ia.value,"onUpdate:modelValue":e[15]||(e[15]=t=>ia.value=t),color:"primary","hide-details":""},{label:c(()=>[n("span",{class:"text-body-2 terms-label",onClick:$t,innerHTML:r(s)("components.marketplace.installDialog.agreeToTerms")},null,8,Sl)]),_:1},8,["modelValue"])])])]),_:1})),A.value?D("",!0):(u(),C(Ne,{key:1,value:1},{default:c(()=>[n("div",Dl,[Se().length?(u(),y("div",Pl,[aa.value&&Se().some(t=>t.advanced)?(u(),y("div",Al,[o(ao,{modelValue:Ma.value,"onUpdate:modelValue":e[16]||(e[16]=t=>Ma.value=t),label:r(s)("components.marketplace.installDialog.showAdvanced"),color:"primary","hide-details":"",density:"compact"},null,8,["modelValue","label"])])):D("",!0),(u(!0),y(te,null,ze(Se().filter(t=>!t.advanced||Ma.value),t=>(u(),y("div",{key:t.name,class:"param-item modern-section"},[n("div",zl,[o(Z,{size:"28",color:"primary",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-cog",size:"16",color:"white"})]),_:1}),n("h5",null,d(t.name),1)]),t.options&&t.options.length?(u(),C(na,{key:0,modelValue:p.value.parameters[t.name],"onUpdate:modelValue":l=>p.value.parameters[t.name]=l,items:t.options,placeholder:t.placeholder,required:!t.optional,variant:"solo",density:"comfortable","hide-details":"",class:"modern-input",color:"primary",attach:"","menu-props":{contentClass:"install-dialog-select-menu"}},{"append-inner":c(()=>[o(kt,{location:"top"},{activator:c(({props:l})=>[o(v,He({ref_for:!0},l,{icon:"mdi-help-circle",size:"16"}),null,16)]),default:c(()=>[b(" "+d(t.description||r(s)("components.marketplace.installDialog.configurationParameter")),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","items","placeholder","required"])):(u(),C(Ct,{key:1,modelValue:p.value.parameters[t.name],"onUpdate:modelValue":l=>p.value.parameters[t.name]=l,placeholder:t.placeholder,required:!t.optional,variant:"solo",density:"comfortable","hide-details":"",class:"modern-input",color:"primary"},{"append-inner":c(()=>[o(kt,{location:"top"},{activator:c(({props:l})=>[o(v,He({ref_for:!0},l,{icon:"mdi-help-circle",size:"16"}),null,16)]),default:c(()=>[b(" "+d(t.description||r(s)("components.marketplace.installDialog.configurationParameter")),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","required"]))]))),128))])):(u(),y("div",Il,[n("div",El,[o(v,{icon:"mdi-check-circle",size:"48",color:"success"})]),n("div",Ml,[n("h5",null,d(r(s)("components.marketplace.installDialog.allSet")),1),n("p",null,d(r(s)("components.marketplace.installDialog.noAdditionalConfig")),1)])]))])]),_:1})),A.value?D("",!0):(u(),C(Ne,{key:2,value:2},{default:c(()=>[n("div",Nl,[n("div",Fl,[n("div",Vl,[o(Z,{size:"32",color:"primary",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-earth",size:"20",color:"white"})]),_:1}),n("h5",Ul,d(r(s)("components.marketplace.installDialog.deploymentLocation")),1)]),n("div",$l,[o(xt,null,{default:c(()=>[o(ja,{cols:"12",md:aa.value?12:6},{default:c(()=>[n("div",Tl,[n("h6",Ll,[o(v,{icon:"mdi-check-circle",color:"success",class:"mr-2"}),b(" "+d(r(s)("components.marketplace.installDialog.allowedLocations")),1)]),n("div",Rl,[n("div",Ol,[n("label",Wl,d(r(s)("components.marketplace.installDialog.continent"))+":",1),o(na,{modelValue:S.value.allowedContinent,"onUpdate:modelValue":[e[17]||(e[17]=t=>S.value.allowedContinent=t),e[18]||(e[18]=t=>dt("allowed",t))],items:[{name:r(s)("components.marketplace.installDialog.global"),code:"",totalInstances:null},...Na.value],"item-title":"name","item-value":"code",placeholder:r(s)("components.marketplace.installDialog.globalAllContinents"),variant:"outlined",density:"compact",class:"geolocation-select"},{"prepend-inner":c(()=>[o(v,{icon:"mdi-earth",size:"20"})]),item:c(({props:t,item:l})=>[o(oa,He(t,{class:"geolocation-dropdown-item"}),ka({_:2},[l.raw.totalInstances?{name:"append",fn:c(()=>[o(R,{size:"x-small",color:"success",variant:"tonal",class:"node-count-chip"},{default:c(()=>[b(d(l.raw.totalInstances),1)]),_:2},1024)]),key:"0"}:void 0]),1040)]),_:1},8,["modelValue","items","placeholder"])]),n("div",Bl,[n("label",Gl,d(r(s)("components.marketplace.installDialog.country"))+":",1),o(na,{modelValue:S.value.allowedCountry,"onUpdate:modelValue":[e[19]||(e[19]=t=>S.value.allowedCountry=t),e[20]||(e[20]=t=>ut("allowed",t))],items:S.value.allowedContinent?[{name:r(s)("components.marketplace.installDialog.allCountries"),code:"",instances:null},...Lt.value]:[],"item-title":"name","item-value":"code",placeholder:r(s)("components.marketplace.installDialog.allCountries"),variant:"outlined",density:"compact",disabled:!S.value.allowedContinent,class:"geolocation-select"},{"prepend-inner":c(()=>[o(v,{icon:"mdi-flag",size:"20"})]),item:c(({props:t,item:l})=>[o(oa,He(t,{class:"geolocation-dropdown-item"}),ka({_:2},[l.raw.instances?{name:"append",fn:c(()=>[o(R,{size:"x-small",color:"success",variant:"tonal",class:"node-count-chip"},{default:c(()=>[b(d(l.raw.instances),1)]),_:2},1024)]),key:"0"}:void 0]),1040)]),_:1},8,["modelValue","items","placeholder","disabled"])]),n("div",Xl,[o(M,{color:"success",variant:"outlined",size:"small",onClick:fn,disabled:!S.value.allowedContinent},{default:c(()=>[o(v,{icon:"mdi-plus",size:"16",class:"mr-1"}),b(" "+d(r(s)("components.marketplace.installDialog.addAllowed")),1)]),_:1},8,["disabled"])])])])]),_:1},8,["md"]),aa.value?D("",!0):(u(),C(ja,{key:0,cols:"12",md:"6"},{default:c(()=>[n("div",Zl,[n("h6",Hl,[o(v,{icon:"mdi-close-circle",color:"error",class:"mr-2"}),b(" "+d(r(s)("components.marketplace.installDialog.forbiddenLocations")),1)]),n("div",jl,[n("div",ql,[n("label",Kl,d(r(s)("components.marketplace.installDialog.continent"))+":",1),o(na,{modelValue:S.value.forbiddenContinent,"onUpdate:modelValue":[e[21]||(e[21]=t=>S.value.forbiddenContinent=t),e[22]||(e[22]=t=>dt("forbidden",t))],items:[{name:r(s)("components.marketplace.installDialog.noContinentsForbidden"),code:"",totalInstances:null},...Na.value],"item-title":"name","item-value":"code",placeholder:r(s)("components.marketplace.installDialog.noneNoRestrictions"),variant:"outlined",density:"compact",class:"geolocation-select"},{"prepend-inner":c(()=>[o(v,{icon:"mdi-earth",size:"20"})]),item:c(({props:t,item:l})=>[o(oa,He(t,{class:"geolocation-dropdown-item"}),ka({_:2},[l.raw.totalInstances?{name:"append",fn:c(()=>[o(R,{size:"x-small",color:"error",variant:"tonal",class:"node-count-chip"},{default:c(()=>[b(d(l.raw.totalInstances),1)]),_:2},1024)]),key:"0"}:void 0]),1040)]),_:1},8,["modelValue","items","placeholder"])]),n("div",Jl,[n("label",Yl,d(r(s)("components.marketplace.installDialog.country"))+":",1),o(na,{modelValue:S.value.forbiddenCountry,"onUpdate:modelValue":[e[23]||(e[23]=t=>S.value.forbiddenCountry=t),e[24]||(e[24]=t=>ut("forbidden",t))],items:S.value.forbiddenContinent?[{name:r(s)("components.marketplace.installDialog.noCountriesForbidden"),code:"",instances:null},...Rt.value]:[],"item-title":"name","item-value":"code",placeholder:r(s)("components.marketplace.installDialog.allCountries"),variant:"outlined",density:"compact",disabled:!S.value.forbiddenContinent,class:"geolocation-select"},{"prepend-inner":c(()=>[o(v,{icon:"mdi-flag",size:"20"})]),item:c(({props:t,item:l})=>[o(oa,He(t,{class:"geolocation-dropdown-item"}),ka({_:2},[l.raw.instances?{name:"append",fn:c(()=>[o(R,{size:"x-small",color:"error",variant:"tonal",class:"node-count-chip"},{default:c(()=>[b(d(l.raw.instances),1)]),_:2},1024)]),key:"0"}:void 0]),1040)]),_:1},8,["modelValue","items","placeholder","disabled"])]),n("div",Ql,[o(M,{color:"error",variant:"outlined",size:"small",onClick:hn,disabled:!S.value.forbiddenContinent},{default:c(()=>[o(v,{icon:"mdi-plus",size:"16",class:"mr-1"}),b(" "+d(r(s)("components.marketplace.installDialog.addForbidden")),1)]),_:1},8,["disabled"])])])])]),_:1}))]),_:1}),re.value.length>0||we.value.length>0?(u(),y("div",es,[n("h4",as,[o(v,{icon:"mdi-format-list-bulleted",size:"20",class:"mr-2"}),b(" "+d(r(s)("components.marketplace.installDialog.currentRules")),1)]),re.value.length>0?(u(),y("div",ts,[n("h5",ns,[o(v,{icon:"mdi-check-circle",size:"20",class:"mr-1"}),b(" "+d(r(s)("components.marketplace.installDialog.allowedLocationsColon")),1)]),n("div",os,[(u(!0),y(te,null,ze(re.value,(t,l)=>(u(),C(R,{key:l,color:"success",variant:"tonal",closable:"","onClick:close":i=>yn(l)},{default:c(()=>[o(v,{icon:"mdi-check-circle",size:"14",class:"mr-1"}),b(" "+d(De(t)),1)]),_:2},1032,["onClick:close"]))),128))])])):D("",!0),!aa.value&&we.value.length>0?(u(),y("div",ls,[n("h5",ss,[o(v,{icon:"mdi-close-circle",size:"20",class:"mr-1"}),b(" "+d(r(s)("components.marketplace.installDialog.forbiddenLocationsColon")),1)]),n("div",is,[(u(!0),y(te,null,ze(we.value,(t,l)=>(u(),C(R,{key:l,color:"error",variant:"tonal",closable:"","onClick:close":i=>_n(l)},{default:c(()=>[o(v,{icon:"mdi-close-circle",size:"14",class:"mr-1"}),b(" "+d(De(t)),1)]),_:2},1032,["onClick:close"]))),128))])])):D("",!0)])):D("",!0),o(Ha,{type:"info",variant:"tonal",class:"mt-4",icon:"mdi-information"},{default:c(()=>[n("div",rs,[n("ul",cs,[n("li",null,[n("strong",null,d(r(s)("components.marketplace.installDialog.allowedColon")),1),b(" "+d(r(s)("components.marketplace.installDialog.allowedGeoInfo")),1)]),aa.value?D("",!0):(u(),y("li",ds,[n("strong",null,d(r(s)("components.marketplace.installDialog.forbiddenColon")),1),b(" "+d(r(s)("components.marketplace.installDialog.forbiddenGeoInfo")),1)])),n("li",null,[n("strong",null,d(r(s)("components.marketplace.installDialog.globalColon")),1),b(" "+d(r(s)("components.marketplace.installDialog.globalGeoInfo")),1)])])])]),_:1})])])])]),_:1})),A.value?D("",!0):(u(),C(Ne,{key:3,value:3},{default:c(()=>[n("div",us,[n("div",ms,[n("div",ps,[o(Z,{size:"32",color:"warning",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-email-alert",size:"18",color:"white"})]),_:1}),n("h5",vs,d(r(s)("components.marketplace.installDialog.emailNotifications")),1)]),n("div",gs,[o(xt,{justify:"center"},{default:c(()=>[o(ja,{cols:"12",md:"8"},{default:c(()=>[n("div",fs,[n("h6",hs,[o(v,{icon:"mdi-bell-ring",color:"warning",class:"mr-2"}),b(" "+d(r(s)("components.marketplace.installDialog.notificationSettings")),1)]),n("div",ys,[o(Ct,{modelValue:Qe.value.email,"onUpdate:modelValue":e[25]||(e[25]=t=>Qe.value.email=t),label:r(s)("components.marketplace.installDialog.emailAddress"),placeholder:r(s)("components.marketplace.installDialog.enterEmailOptional"),variant:"outlined",density:"comfortable",type:"email",rules:Ot.value,class:"email-input",onInput:pt},{"prepend-inner":c(()=>[o(v,{icon:"mdi-email",size:"20"})]),_:1},8,["modelValue","label","placeholder","rules"])]),n("div",_s,[n("div",ws,[o(v,{icon:"mdi-information",color:"info",class:"mr-3"}),n("span",null,d(r(s)("components.marketplace.installDialog.notificationInfo1")),1)]),n("div",bs,[o(v,{icon:"mdi-information",color:"info",class:"mr-3"}),n("span",null,d(r(s)("components.marketplace.installDialog.notificationInfo2")),1)]),n("div",ks,[o(v,{icon:"mdi-information",color:"info",class:"mr-3"}),n("span",null,d(r(s)("components.marketplace.installDialog.notificationInfo3")),1)])])])]),_:1})]),_:1})])])])]),_:1})),o(Ne,{value:A.value?0:4},{default:c(()=>[n("div",Cs,[n("div",xs,[n("div",Ss,[n("div",Ds,[o(Z,{size:"40",color:"primary",variant:"flat",class:"mr-3"},{default:c(()=>[o(v,{icon:"mdi-rocket-launch",size:"24",color:"white"})]),_:1}),n("div",Ps,d(r(s)("components.marketplace.installDialog.launchingApplication")),1)]),n("div",As,d(r(s)("components.marketplace.installDialog.applicationNeedsSignature")),1),n("div",zs,[o(R,{color:"info",variant:"tonal",size:"small"},{default:c(()=>[o(v,{start:"",icon:"mdi-security",size:"16"}),b(" "+d(r(s)("components.marketplace.installDialog.secureSigning")),1)]),_:1}),o(R,{color:"success",variant:"tonal",size:"small"},{default:c(()=>[o(v,{start:"",icon:"mdi-cloud-check",size:"16"}),b(" "+d(r(s)("components.marketplace.installDialog.networkRegistration")),1)]),_:1})]),!I.value[1]&&Y.value?(u(),y("div",Is,[n("div",Es,[n("a",{class:"wallet-link",title:Y.value},[Y.value==="SSO"?(u(),y("div",Ns,[o(v,{icon:"mdi-at",size:"40",color:"white"})])):Y.value.includes("ZelCore")?(u(),y("img",{key:1,src:r(Ga),alt:r(s)("components.marketplace.installDialog.walletAltZelcore"),class:"walletIcon"},null,8,Fs)):Y.value==="SSP"?(u(),y("img",{key:2,src:r(Pa).global.name.value==="dark"?r(Xa):r(Za),alt:r(s)("components.marketplace.installDialog.walletAltSSP"),class:"walletIcon"},null,8,Vs)):Y.value==="MetaMask"?(u(),y("img",{key:3,src:r(Zn),alt:r(s)("components.marketplace.installDialog.walletAltMetaMask"),class:"walletIcon"},null,8,Us)):Y.value==="WalletConnect"?(u(),y("img",{key:4,src:r(Hn),alt:r(s)("components.marketplace.installDialog.walletAltWalletConnect"),class:"walletIcon"},null,8,$s)):Y.value==="Manual"?(u(),y("div",Ts,[o(v,{icon:"mdi-draw-pen",size:"40",color:"white"})])):D("",!0)],8,Ms)])])):D("",!0),!F.value.signing&&!F.value.registering&&!I.value[1]?(u(),C(M,{key:1,color:"primary",class:"launch-app-btn",onClick:ga,disabled:Ea.value.length===0},{default:c(()=>[o(v,{start:"",icon:"mdi-draw-pen",size:"24"}),b(" "+d(r(s)("components.marketplace.installDialog.signAndRegister")),1)]),_:1},8,["disabled"])):D("",!0),Ea.value.length===0&&!F.value.signing&&!F.value.registering?(u(),C(Ha,{key:2,type:"warning",variant:"tonal",class:"mt-4"},{default:c(()=>[n("div",Ls,d(r(s)("components.marketplace.installDialog.noCompatibleWallets")),1)]),_:1})):D("",!0),F.value.signing||F.value.registering?(u(),y("div",Rs,[n("div",Os,[n("div",Ws,[n("div",Bs,[n("div",Gs,[n("div",Xs,[I.value[0]?(u(),C(v,{key:0,icon:"mdi-check-circle",color:"success",size:"24"})):F.value.signing?(u(),C(la,{key:1,indeterminate:"",size:"24",width:"3",color:"primary"})):(u(),C(v,{key:2,icon:"mdi-circle-outline",color:"grey",size:"24"}))]),n("span",Zs,d(r(s)("components.marketplace.installDialog.signingApp")),1)])]),n("div",Hs,[n("div",js,[n("div",qs,[I.value[1]?(u(),C(v,{key:0,icon:"mdi-check-circle",color:"success",size:"24"})):F.value.registering?(u(),C(la,{key:1,indeterminate:"",size:"24",width:"3",color:"primary"})):(u(),C(v,{key:2,icon:"mdi-circle-outline",color:"grey",size:"24"}))]),n("span",Ks,d(r(s)("components.marketplace.installDialog.registeringApp")),1)])])])]),!I.value[0]&&Y.value!=="SSO"?(u(),y("div",Js,[o(M,{variant:"outlined",color:"error",onClick:Yt,class:"cancel-signing-btn",style:{"min-width":"300px"}},{default:c(()=>[o(v,{start:"",icon:"mdi-close",size:"24"}),b(" "+d(r(s)("components.marketplace.installDialog.cancel")),1)]),_:1})])):D("",!0)])):D("",!0),I.value[0]&&I.value[1]?(u(),y("div",Ys,[o(v,{icon:"mdi-check-circle",size:"64",color:"success",class:"mb-3"}),n("div",Qs,d(r(s)("components.marketplace.installDialog.signingAndRegistrationComplete")),1),n("div",ei,[K.value>0?(u(),y("span",ai,d(r(s)("components.marketplace.installDialog.redirectIn",{seconds:K.value})),1)):(u(),y("span",ti,d(r(s)("components.marketplace.installDialog.proceedToNextStep")),1))])])):D("",!0)])])])]),_:1},8,["value"]),o(Ne,{value:A.value?1:5},{default:c(()=>[n("div",ni,[n("div",oi,[n("div",li,[n("div",si,[o(Z,{size:"32",color:"info",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-information",size:"18",color:"white"})]),_:1}),n("h5",null,d(r(s)("components.marketplace.installDialog.paymentInformation")),1)]),n("div",ii,[n("div",ri,[o(v,{icon:"mdi-check-circle",color:"success",size:"22",class:"mr-2 flex-shrink-0"}),n("div",{class:"text-body-1 text-high-emphasis",innerHTML:r(s)("components.marketplace.installDialog.paymentLinksValid")},null,8,ci)]),n("div",di,[o(v,{icon:"mdi-calendar-clock",color:"orange",size:"22",class:"mr-2 flex-shrink-0"}),n("div",{class:"text-body-1 text-high-emphasis",innerHTML:r(s)("components.marketplace.installDialog.subscribedUntil",{date:it.value})},null,8,ui)]),n("div",mi,[o(v,{icon:"mdi-information",color:"info",size:"22",class:"mr-2 flex-shrink-0"}),n("div",{class:"text-body-1 text-high-emphasis",innerHTML:r(s)("components.marketplace.installDialog.finishRegistrationInfo")},null,8,pi)])])]),n("div",vi,[n("div",gi,[o(Z,{size:"32",color:"primary",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-wallet",size:"18",color:"white"})]),_:1}),n("h5",null,d(r(s)("components.marketplace.installDialog.choosePaymentMethod")),1)]),o(to,{modelValue:k.value,"onUpdate:modelValue":e[26]||(e[26]=t=>k.value=t),class:"payment-methods-compact"},{default:c(()=>[(u(!0),y(te,null,ze(Xt.value,t=>(u(),C(qe,{key:t.id,class:Ze(["payment-method-card-compact",[{selected:k.value===t.id}]]),onClick:l=>k.value=t.id,elevation:k.value===t.id?2:0,variant:k.value===t.id?"elevated":"flat"},{default:c(()=>[o(Ke,{class:"payment-method-content pa-2"},{default:c(()=>[n("div",fi,[n("div",hi,[o(no,{value:t.id,"hide-details":"",color:"primary"},null,8,["value"]),n("img",{src:t.image,alt:t.name,class:"payment-method-logo-compact",style:{"margin-left":"-16px"}},null,8,yi),n("div",_i,[n("div",wi,d(t.name),1),n("div",bi,d(t.description),1)])]),n("div",ki,[t.id==="flux"||t.id==="ssp"?(u(),y("div",Ci,[Ie.value?(u(),y("span",xi,d(r(s)("components.marketplace.installDialog.loading")),1)):(u(),y("span",Si,d(ea.value)+" FLUX",1)),!Ie.value&&ua.value>0?(u(),C(R,{key:2,size:"x-small",color:"success",class:"ml-1"},{default:c(()=>[b("-"+d(ua.value)+"%",1)]),_:1})):D("",!0)])):(u(),y("div",Di,d($a.value)+" + "+d(r(s)("components.marketplace.installDialog.vat")),1))])])]),_:2},1024)]),_:2},1032,["class","onClick","elevation","variant"]))),128))]),_:1},8,["modelValue"])]),o(St,null,{default:c(()=>[k.value==="flux"||k.value==="ssp"?(u(),y("div",Pi,[n("div",Ai,[o(Z,{size:"48",color:"white",variant:"flat"},{default:c(()=>[n("img",{src:k.value==="flux"?r(Ga):r(Pa).global.name.value==="dark"?r(Xa):r(Za),alt:k.value==="flux"?"ZelCore":"SSP",style:{width:"44px",height:"44px","object-fit":"contain"}},null,8,zi)]),_:1}),n("h5",null,d(k.value==="flux"?r(s)("components.marketplace.installDialog.paymentInstructionsZelCore"):r(s)("components.marketplace.installDialog.paymentInstructionsSSP")),1)]),$.value?(u(),y("div",Li,[n("div",Ri,[oe.value?(u(),C(v,{key:1,icon:"mdi-check-circle",size:"64",color:"success",class:"mb-4"})):(u(),C(la,{key:0,indeterminate:"",color:"primary",size:"64",width:"6",class:"mb-4"})),n("div",Oi,d(oe.value?r(s)("components.marketplace.installDialog.paymentConfirmed"):r(s)("components.marketplace.installDialog.waitingForPayment")),1),n("div",Wi,[oe.value?K.value>0?(u(),y("span",Gi,d(r(s)("components.marketplace.installDialog.advancingToDeployment",{seconds:K.value})),1)):D("",!0):(u(),y("span",{key:0,innerHTML:r(s)("components.marketplace.installDialog.completePaymentInWallet",{wallet:k.value==="flux"?"ZelCore":"SSP"})},null,8,Bi))]),oe.value?D("",!0):(u(),C(M,{key:2,variant:"outlined",color:"error",onClick:Ee,class:"text-none"},{default:c(()=>[o(v,{start:"",icon:"mdi-close"}),b(" "+d(r(s)("components.marketplace.installDialog.cancelMonitoring")),1)]),_:1}))])])):(u(),y("div",Ii,[o(qe,{style:{background:"rgba(var(--v-theme-surface), 0.6)"},class:"mb-2"},{default:c(()=>[o(Ke,{class:"pa-2"},{default:c(()=>[n("div",Ei,[o(v,{icon:"mdi-wallet-outline",size:"18",class:"mr-2"}),n("div",Mi,d(r(s)("components.marketplace.installDialog.paymentAddress")),1)]),n("div",Ni,[n("code",Fi,d(ma.value),1),o(M,{size:"x-small",variant:"text",icon:"",color:"grey",onClick:e[27]||(e[27]=t=>rt(ma.value,r(s)("components.marketplace.installDialog.copiedToClipboard")))},{default:c(()=>[o(v,{icon:"mdi-content-copy",size:"16"})]),_:1})])]),_:1})]),_:1}),o(qe,{style:{background:"rgba(var(--v-theme-surface), 0.6)"},class:"mb-2"},{default:c(()=>[o(Ke,{class:"pa-2"},{default:c(()=>[n("div",Vi,[o(v,{icon:"mdi-message-text-outline",size:"18",class:"mr-2"}),n("div",Ui,d(r(s)("components.marketplace.installDialog.paymentMessage")),1)]),n("div",$i,[n("code",Ti,d(ne.value||r(s)("components.marketplace.installDialog.generating")),1),o(M,{size:"x-small",variant:"text",icon:"",color:"grey",onClick:e[28]||(e[28]=t=>rt(ne.value,r(s)("components.marketplace.installDialog.copiedToClipboard"))),disabled:!ne.value},{default:c(()=>[o(v,{icon:"mdi-content-copy",size:"16"})]),_:1},8,["disabled"])])]),_:1})]),_:1}),o(M,{color:"primary",size:"default",block:"",onClick:e[29]||(e[29]=t=>k.value==="flux"?un():vn()),class:"text-none",elevation:"2"},{default:c(()=>[o(v,{start:"",icon:"mdi-wallet",size:"18"}),b(" "+d(r(s)("components.marketplace.installDialog.openWallet",{wallet:k.value==="flux"?"ZelCore":"SSP"})),1)]),_:1})]))])):D("",!0)]),_:1}),o(St,null,{default:c(()=>[k.value==="stripe"||k.value==="paypal"?(u(),y("div",Xi,[n("div",Zi,[o(Z,{size:"48",color:"white",variant:"flat"},{default:c(()=>[n("img",{src:k.value==="stripe"?r(co):r(gt),alt:k.value==="stripe"?"Stripe":"PayPal",style:{width:"48px",height:"48px","object-fit":"contain"}},null,8,Hi)]),_:1}),n("h5",null,d(k.value==="stripe"?"Stripe":"PayPal")+" Payment",1)]),xe.value?(u(),y("div",ji,[n("div",qi,[o(v,{icon:"mdi-wrench",size:"64",color:"warning",class:"mb-4"}),n("div",Ki,d(r(s)("components.marketplace.installDialog.paymentServiceMaintenance")),1),n("div",Ji,d(r(s)("components.marketplace.installDialog.maintenanceMessage")),1),o(M,{variant:"flat",color:"primary",onClick:e[30]||(e[30]=t=>xe.value=!1),class:"text-none"},{default:c(()=>[o(v,{start:"",icon:"mdi-refresh",size:"24"}),b(" "+d(r(s)("components.marketplace.installDialog.tryAgain")),1)]),_:1})])])):$.value?(u(),y("div",er,[n("div",ar,[o(la,{indeterminate:"",color:k.value==="stripe"?"primary":"info",size:"64",width:"6",class:"mb-4"},null,8,["color"]),n("div",tr,d(r(s)("components.marketplace.installDialog.waitingForPayment")),1),n("div",{class:"text-body-2 text-center mb-4 text-medium-emphasis",innerHTML:r(s)("components.marketplace.installDialog.completePaymentInCheckout",{provider:k.value==="stripe"?"Stripe":"PayPal"})},null,8,nr),o(M,{variant:"outlined",color:"error",onClick:Ee,class:"text-none"},{default:c(()=>[o(v,{start:"",icon:"mdi-close"}),e[41]||(e[41]=b(" Cancel Monitoring ",-1))]),_:1})])])):(u(),y("div",Yi,[o(qe,{class:"mb-3",variant:"tonal",color:"primary"},{default:c(()=>[o(Ke,{class:"d-flex align-center pa-3"},{default:c(()=>[o(v,{icon:k.value==="stripe"?"mdi-shield-check":"mdi-security",size:"20",class:"mr-2"},null,8,["icon"]),n("div",Qi,d(r(s)("components.marketplace.installDialog.secureCheckout",{provider:k.value==="stripe"?"Stripe":"PayPal"})),1)]),_:1})]),_:1}),o(M,{color:"primary",size:"large",block:"",onClick:e[31]||(e[31]=t=>k.value==="stripe"?mn():pn()),class:"text-none",elevation:"2"},{default:c(()=>[o(v,{start:"",icon:k.value==="stripe"?"mdi-credit-card":"mdi-paypal",size:"20"},null,8,["icon"]),b(" "+d(r(s)("components.marketplace.installDialog.continueTo",{provider:k.value==="stripe"?"Stripe":"PayPal"})),1)]),_:1})]))])):D("",!0)]),_:1})])])]),_:1},8,["value"]),o(Ne,{value:Ve.value-1},{default:c(()=>[n("div",or,[n("div",lr,[n("div",sr,[o(Z,{size:"32",color:"success",variant:"flat"},{default:c(()=>[o(v,{icon:"mdi-check-circle",size:"18",color:"white"})]),_:1}),n("h5",null,d(r(s)("components.marketplace.installDialog.deploymentSummary")),1)]),n("div",ir,[n("div",rr,[o(v,{icon:"mdi-party-popper",size:"32",color:"success"}),b(" "+d(r(s)("components.marketplace.installDialog.paymentConfirmedExclaim"))+" ",1),o(v,{icon:"mdi-rocket-launch",size:"32",color:"success"})]),n("div",cr,d(r(s)("components.marketplace.installDialog.applicationActiveAndRunning")),1)]),n("div",dr,[n("div",ur,[o(R,{variant:"tonal",size:"default",class:"summary-chip"},{default:c(()=>[o(v,{start:"",icon:"mdi-application",size:"16"}),A.value&&B.app.planName?(u(),y(te,{key:0},[b(" WordPress "+d(B.app.planName),1)],64)):(u(),y(te,{key:1},[b(d(B.app.displayName||B.app.name),1)],64))]),_:1})]),n("div",mr,[o(R,{color:"warning",variant:"tonal",size:"small",class:"summary-chip"},{default:c(()=>[o(v,{start:"",icon:"mdi-cpu-64-bit",size:"14"}),b(" "+d(r(s)("components.marketplace.installDialog.coresCount",{count:Number(p.value.cpu).toFixed(1)})),1)]),_:1}),o(R,{color:"success",variant:"tonal",size:"small",class:"summary-chip"},{default:c(()=>[o(v,{start:"",icon:"mdi-memory",size:"14"}),b(" "+d(p.value.ram)+" MB ",1)]),_:1}),o(R,{color:"purple",variant:"tonal",size:"small",class:"summary-chip"},{default:c(()=>[o(v,{start:"",icon:"mdi-harddisk",size:"14"}),b(" "+d(p.value.storage)+" GB ",1)]),_:1}),o(R,{color:"orange",variant:"tonal",size:"small",class:"summary-chip"},{default:c(()=>[o(v,{start:"",icon:"mdi-layers",size:"14"}),b(" "+d(r(s)("components.marketplace.installDialog.instances",{count:p.value.instances})),1)]),_:1})]),Aa.value.length>0?(u(),y("div",pr,[o(oo,{density:"compact",class:"pa-0",style:{border:"1px solid rgba(var(--v-border-color), var(--v-border-opacity))","border-radius":"8px"}},{default:c(()=>[(u(!0),y(te,null,ze(Aa.value,(t,l)=>(u(),C(oa,{key:t.name,class:Ze({"border-b":l<Aa.value.length-1})},{prepend:c(()=>[o(v,{icon:"mdi-docker",size:"20",color:"info"})]),append:c(()=>[o(R,{size:"x-small",variant:"tonal",color:"info"},{default:c(()=>[b(d(t.version),1)]),_:2},1024)]),default:c(()=>[o(lo,{class:"text-body-2"},{default:c(()=>[n("span",vr,d(t.name),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})])):D("",!0)]),o(Dt,{class:"my-4"}),n("div",gr,[n("div",fr,[n("span",hr,d(r(s)("components.marketplace.installDialog.paymentType"))+":",1),o(R,{size:"small",variant:"tonal",color:k.value==="flux"||k.value==="ssp"?"success":"info"},{default:c(()=>[o(v,{start:"",icon:k.value==="flux"||k.value==="ssp"?"mdi-bitcoin":"mdi-credit-card",size:"16"},null,8,["icon"]),b(" "+d(k.value==="flux"||k.value==="ssp"?r(s)("components.marketplace.installDialog.crypto"):r(s)("components.marketplace.installDialog.fiat")),1)]),_:1},8,["color"])]),n("div",yr,[n("span",_r,d(r(s)("components.marketplace.installDialog.paymentMethod"))+":",1),o(R,{size:"small",variant:"tonal",color:"info"},{default:c(()=>[o(v,{start:"",icon:k.value==="flux"||k.value==="ssp"?"mdi-wallet":k.value==="stripe"?"mdi-credit-card":"mdi-paypal",size:"16"},null,8,["icon"]),b(" "+d(k.value==="flux"?"ZelCore":k.value==="ssp"?"SSP":k.value==="stripe"?"Stripe":"PayPal"),1)]),_:1})]),n("div",wr,[n("span",br,d(r(s)("components.marketplace.installDialog.totalPaid"))+":",1),o(R,{size:"small",variant:"tonal",color:"success"},{default:c(()=>[o(v,{start:"",icon:k.value==="flux"||k.value==="ssp"?"mdi-lightning-bolt":"mdi-check-circle",size:"18"},null,8,["icon"]),b(" "+d(k.value==="flux"||k.value==="ssp"?`${ea.value} FLUX`:$a.value),1)]),_:1})]),n("div",kr,[n("span",Cr,d(r(s)("components.marketplace.installDialog.subscriptionValidUntil"))+":",1),o(R,{size:"small",variant:"tonal"},{default:c(()=>[o(v,{start:"",icon:"mdi-calendar-check",size:"16"}),b(" "+d(it.value),1)]),_:1})])]),o(Dt,{class:"mt-4 mb-2"}),n("div",xr,[o(M,{color:"primary",variant:"flat",size:"default",to:`/apps/manage/${encodeURIComponent(Ut.value)}`},{default:c(()=>[o(v,{start:"",icon:"mdi-cog",size:"20"}),b(" "+d(r(s)("components.marketplace.installDialog.manageApplication")),1)]),_:1},8,["to"])])]),Ue.value?(u(),y("div",Sr,[o(la,{indeterminate:"",color:"primary",size:"48"}),n("p",null,d(r(s)("components.marketplace.installDialog.deployingYourApplication")),1)])):D("",!0)])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1}),x.value<Ve.value-1?(u(),C(Pt,{key:0,class:"install-actions"},{default:c(()=>[x.value>0?(u(),C(M,{key:0,variant:"flat",icon:"mdi-arrow-left-circle",onClick:Jt,disabled:Ue.value},null,8,["disabled"])):D("",!0),o(so),o(M,{color:"primary",variant:"flat",icon:"mdi-arrow-right-circle",onClick:jt,disabled:!ct.value},null,8,["disabled"])]),_:1})):D("",!0)]),_:1})]),_:1},8,["modelValue"]),o(At,{modelValue:Re.value,"onUpdate:modelValue":e[35]||(e[35]=t=>Re.value=t),"max-width":"500"},{default:c(()=>[o(qe,{rounded:"xl",class:"overflow-hidden"},{default:c(()=>[o(bt,{class:"d-flex align-center gap-3 bg-primary text-white",style:{height:"52px","padding-inline":"16px"}},{default:c(()=>[o(v,{icon:"mdi-alert-circle",color:"orange",size:"28"}),n("span",Dr,d(r(s)("components.marketplace.installDialog.popupBlocked")),1)]),_:1}),o(Ke,{class:"py-8 px-6 text-center"},{default:c(()=>[o(v,{icon:"mdi-block-helper",color:"orange",size:"64",class:"mb-4"}),n("p",Pr,d(r(s)("components.marketplace.installDialog.browserBlockedCheckout",{type:va.value})),1),n("p",Ar,d(r(s)("components.marketplace.installDialog.clickButtonToOpenPayment")),1)]),_:1}),o(Pt,{class:"pa-0 d-flex ga-0"},{default:c(()=>[o(M,{color:"error",variant:"flat",size:"large",class:"rounded-0 rounded-bl-xl popup-dialog-btn",style:{flex:"1","max-width":"50%"},onClick:e[34]||(e[34]=()=>{Re.value=!1,Ee()})},{default:c(()=>[o(v,{start:"",icon:"mdi-close-circle"}),b(" "+d(r(s)("components.marketplace.installDialog.cancel")),1)]),_:1}),o(M,{color:"primary",variant:"flat",size:"large",class:"rounded-0 rounded-br-xl popup-dialog-btn",style:{flex:"1","max-width":"50%"},onClick:gn},{default:c(()=>[o(v,{start:"",icon:"mdi-open-in-new"}),b(" "+d(r(s)("components.marketplace.installDialog.openPaymentType",{type:va.value})),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Vn,{modelValue:za.value,"onUpdate:modelValue":e[36]||(e[36]=t=>za.value=t),message:Qa.value,onSubmit:rn,onCancel:cn,onCopy:e[37]||(e[37]=t=>r(z)(r(s)("common.messages.copiedToClipboard"),"success",3e3,"mdi-clipboard-check"))},null,8,["modelValue","message"])],64))}},jr=In(zr,[["__scopeId","data-v-a730760e"]]);export{jr as I};
