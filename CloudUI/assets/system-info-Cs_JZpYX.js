import{u as K}from"./useSEO-5BaNf11O.js";import"./useSnackbar-CwwIX0V_.js";import{_ as X,r as Y}from"./index-QPPWK7xw.js";import{F as ss}from"./FluxService-BN8XNIXv.js";import{L as es}from"./LoadingSpinner-BLJvP0iy.js";import{M as as}from"./MaintenanceCard-DHuXhaWk.js";import{b as R}from"./route-block-B_A1xBdJ.js";import{Q as _,V as f,b as u,a as j,r as A,d as g,o as M,p as x,G as w,s as N,R as ts}from"./vuetify-_4u1He_j.js";import{u as os}from"./i18n-Bm8bpAAW.js";import{r as b,o as ns,f as z,g as h,P as T,y as i,j as a,a3 as s,Q as e,U as o,T as U,F as is,l as ls}from"./apexcharts-nIAyciCq.js";import"./unhead-DEOrWl0D.js";import"./crypto-metamask-D6vz180a.js";import"./ansi-utils-ChIB8aIv.js";import"./socketio-BDGyx5_k.js";import"./uuid-B49X2dQj.js";import"./vueuse-Bid7ZbHY.js";import"./vue-core-CU9AIURn.js";import"./cookie-BfmCf_44.js";import"./unjs-utils-GcjLqAqW.js";import"./http-BZQDkn3h.js";import"./query-parser-C3-dT-Rr.js";import"./casl-DNC8KRD8.js";import"./scrollbar-CXs_Utq1.js";import"./icons-mdi-_QP0sdRJ.js";import"./sanitizer-DAUAC_Zc.js";import"./element-plus-Cr1Qs4Q_.js";import"./lodash-C_Sw0jJq.js";const rs="/images/logo.png",cs="/images/syncthing-logo.png",ds={key:2},us={class:"mb-3"},ms={class:"d-flex align-center mb-2"},ps={class:"text-h5 font-weight-bold"},fs={class:"text-body-2 text-medium-emphasis mb-0"},gs={class:"text-body-1 font-weight-medium"},hs={class:"d-flex align-center justify-space-between"},vs={class:"d-flex align-center mb-2"},_s={class:"text-body-2 font-weight-medium"},ys={class:"text-h5 font-weight-bold"},xs={class:"text-body-2 text-medium-emphasis"},bs={class:"text-caption font-weight-bold"},ws={class:"d-flex align-center justify-space-between"},Is={class:"d-flex align-center mb-2"},ks={class:"text-body-2 font-weight-medium"},zs={class:"text-h5 font-weight-bold"},Ts={class:"text-body-2 text-medium-emphasis"},Cs={class:"text-caption font-weight-bold"},Vs={class:"d-flex align-center justify-space-between"},Ls={class:"d-flex align-center mb-2"},Ps={class:"text-body-2 font-weight-medium"},js={class:"text-h5 font-weight-bold"},As={class:"text-body-2 text-medium-emphasis"},Ms={class:"text-caption font-weight-bold"},Ss={class:"text-body-1 font-weight-medium"},Hs={class:"d-flex align-center justify-space-between",style:{"min-height":"96px"}},Bs={class:"d-flex align-center mb-2"},Fs={class:"text-body-2 font-weight-medium"},Rs={class:"text-h5 font-weight-bold"},Ns={class:"d-flex align-center justify-space-between",style:{"min-height":"96px"}},Us={class:"d-flex align-center mb-2"},Ds={class:"text-body-2 font-weight-medium"},Es={class:"text-h5 font-weight-bold"},Gs={class:"text-caption font-weight-bold"},Os={class:"text-body-1 font-weight-medium"},Qs={class:"d-flex align-center"},Ws={key:0,class:"mr-3",style:{width:"40px",height:"40px",display:"flex","align-items":"center","justify-content":"center"}},Zs={class:"text-body-2 font-weight-medium"},D={__name:"system-info",setup($s){K();const{t:n}=os(),I=b(!0);b(!1);const k=b(null),t=b({storage:{used:0,total:0},cpu:{used:0,cores:0,usage:0},ram:{used:0,total:0},appsHashesTotal:0,hashesPresent:0}),C=b([]),V=b([]),E=()=>{const l=["/images/logo.png","/images/syncthing-logo.png"];return Promise.all(l.map(v=>new Promise((r,m)=>{const d=new Image;d.onload=()=>r(d),d.onerror=()=>r(d),d.src=v})))},S=async()=>{I.value=!0,k.value=null;const l=(async()=>{try{const m=await ss.getFluxInfo();if(console.log("Flux info response:",m),m?.data?.status==="error"){k.value=m.data.data||{message:"An error occurred while loading system information"};return}if(m?.data?.status==="success"&&m?.data?.data){const d=m.data.data;if(d.apps?.fluxusage){const c=d.apps.fluxusage;console.log("Flux usage data:",c);const p=c.nodeSpecs||{},y=d.apps?.resources||{},L=y.appsCpusLocked||0,B=y.appsRamLocked||0,F=y.appsHddLocked||0;console.log("Apps locked:",{cpu:L,ram:B,hdd:F});const $=p.ssdStorage||0;t.value.storage.total=Math.round($),t.value.storage.used=Math.round(F);const P=p.cpuCores||0;t.value.cpu.cores=P,t.value.cpu.used=L,t.value.cpu.usage=P>0?Math.round(L/P*100):0;const q=(p.ram||0)/1024,J=B/1024;t.value.ram.total=Math.round(q),t.value.ram.used=Math.round(J),t.value.appsHashesTotal=d.appsHashesTotal||0,t.value.hashesPresent=d.hashesPresent||0}const H=d.flux,Q={version:rs,dockerversion:"mdi-docker",syncthingversion:cs,nodejsversion:"mdi-nodejs",osversion:"mdi-linux",osprettyname:"mdi-linux",arcaneversion:"mdi-package-variant",arcanehumanversion:"mdi-package-variant-closed"},W={version:"Flux",dockerversion:"Docker",syncthingversion:"Syncthing",nodejsversion:"Node.js",osversion:"OS Version",osprettyname:"OS",arcaneversion:"Arcane",arcanehumanversion:"Arcane Human"},Z={version:"info",dockerversion:"blue",syncthingversion:"secondary",nodejsversion:"success",osprettyname:"warning",arcaneversion:"purple",arcanehumanversion:"indigo"};V.value=Object.keys(H).filter(c=>{const p=c.toLowerCase();return p==="osversion"?!1:p.includes("version")||p==="osprettyname"}).map(c=>{const p=Q[c.toLowerCase()]||"mdi-package-variant";return{name:W[c.toLowerCase()]||c.replace("version","").replace(/([A-Z])/g," $1").trim().split(" ").map(y=>y.charAt(0).toUpperCase()+y.slice(1)).join(" "),version:H[c],icon:p,isImage:p.startsWith("/")||p.startsWith("http"),color:Z[c.toLowerCase()]||"grey"}}).filter(c=>c.version&&typeof c.version=="string"),console.log("Component versions:",V.value)}}catch(m){console.error("Error fetching system info:",m),k.value={name:"Connection Error",message:"Unable to connect to the system. Please check your connection and try again."}}})(),v=new Promise(m=>setTimeout(m,2e3)),r=E();await Promise.all([l,v,r]),I.value=!1},G=async()=>{try{const l=await Y.installedApps();l?.data?.status==="success"&&l?.data?.data&&(C.value=l.data.data.map(v=>({name:v.name||v})))}catch(l){console.error("Error fetching installed apps:",l)}},O=l=>l?l.toString().replace(/^v/i,""):"N/A";return ns(()=>{S(),G()}),(l,v)=>(h(),z("div",null,[I.value?(h(),T(es,{key:0,icon:"mdi-information-outline",title:i(n)("pages.administration.systemInfo.loadingTitle")},null,8,["title"])):k.value?(h(),T(as,{key:1,title:i(n)("pages.administration.systemInfo.errorTitle"),subtitle:i(n)("pages.administration.systemInfo.errorSubtitle"),description:i(n)("pages.administration.systemInfo.errorDescription"),loading:I.value,"margin-top":"-50px",onRetry:S},null,8,["title","subtitle","description","loading"])):(h(),z("div",ds,[a("div",us,[a("div",ms,[s(_,{color:"primary",variant:"flat",size:"48",class:"mr-3"},{default:e(()=>[s(u,{icon:"mdi-information-outline",size:"32",color:"white"})]),_:1}),a("div",null,[a("h2",ps,o(i(n)("pages.administration.systemInfo.title")),1),a("p",fs,o(i(n)("pages.administration.systemInfo.subtitle")),1)])])]),s(f,{class:"mb-3",elevation:"1"},{default:e(()=>[s(j,{class:"d-flex align-center pa-3 bg-surface"},{default:e(()=>[s(u,{icon:"mdi-server",size:"24",class:"mr-2"}),a("span",gs,o(i(n)("pages.administration.systemInfo.resourcesAllocated")),1)]),_:1}),s(A),s(g,{class:"pa-3"},{default:e(()=>[s(M,null,{default:e(()=>[s(x,{cols:"12",md:"4",lg:"4"},{default:e(()=>[s(f,{variant:"tonal",color:"info"},{default:e(()=>[s(g,{class:"pa-3"},{default:e(()=>[a("div",hs,[a("div",null,[a("div",vs,[s(_,{color:"info",variant:"flat",size:"32",class:"mr-2"},{default:e(()=>[s(u,{icon:"mdi-harddisk",size:"18",color:"white"})]),_:1}),a("span",_s,o(i(n)("pages.administration.systemInfo.storage")),1)]),a("div",ys,o(i(n)("pages.administration.systemInfo.storageUsed",{used:t.value.storage.used})),1),a("div",xs,o(i(n)("pages.administration.systemInfo.storageTotal",{total:t.value.storage.total})),1)]),s(w,{"model-value":t.value.storage.used/t.value.storage.total*100,size:80,width:8,color:"info"},{default:e(()=>[a("span",bs,o(Math.round(t.value.storage.used/t.value.storage.total*100))+"%",1)]),_:1},8,["model-value"])])]),_:1})]),_:1})]),_:1}),s(x,{cols:"12",md:"4",lg:"4"},{default:e(()=>[s(f,{variant:"tonal",color:"success"},{default:e(()=>[s(g,{class:"pa-3"},{default:e(()=>[a("div",ws,[a("div",null,[a("div",Is,[s(_,{color:"success",variant:"flat",size:"32",class:"mr-2"},{default:e(()=>[s(u,{icon:"mdi-cpu-64-bit",size:"18",color:"white"})]),_:1}),a("span",ks,o(i(n)("pages.administration.systemInfo.vcpu")),1)]),a("div",zs,o(i(n)("pages.administration.systemInfo.vcpuUsed",{used:t.value.cpu.used})),1),a("div",Ts,o(i(n)("pages.administration.systemInfo.vcpuTotal",{total:t.value.cpu.cores})),1)]),s(w,{"model-value":t.value.cpu.usage,size:80,width:8,color:"success"},{default:e(()=>[a("span",Cs,o(t.value.cpu.usage)+"%",1)]),_:1},8,["model-value"])])]),_:1})]),_:1})]),_:1}),s(x,{cols:"12",md:"4",lg:"4"},{default:e(()=>[s(f,{variant:"tonal",color:"warning"},{default:e(()=>[s(g,{class:"pa-3"},{default:e(()=>[a("div",Vs,[a("div",null,[a("div",Ls,[s(_,{color:"warning",variant:"flat",size:"32",class:"mr-2"},{default:e(()=>[s(u,{icon:"mdi-memory",size:"18",color:"white"})]),_:1}),a("span",Ps,o(i(n)("pages.administration.systemInfo.ram")),1)]),a("div",js,o(i(n)("pages.administration.systemInfo.ramUsed",{used:t.value.ram.used})),1),a("div",As,o(i(n)("pages.administration.systemInfo.ramTotal",{total:t.value.ram.total})),1)]),s(w,{"model-value":t.value.ram.used/t.value.ram.total*100,size:80,width:8,color:"warning"},{default:e(()=>[a("span",Ms,o(Math.round(t.value.ram.used/t.value.ram.total*100))+"%",1)]),_:1},8,["model-value"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(f,{class:"mb-3",elevation:"1"},{default:e(()=>[s(j,{class:"d-flex align-center pa-3 bg-surface"},{default:e(()=>[s(u,{icon:"mdi-apps",size:"24",class:"mr-2"}),a("span",Ss,o(i(n)("pages.administration.systemInfo.applications")),1)]),_:1}),s(A),s(g,{class:"pa-3"},{default:e(()=>[s(M,null,{default:e(()=>[s(x,{cols:"12",md:"6",lg:"6"},{default:e(()=>[s(f,{variant:"tonal",color:"primary",class:"h-100"},{default:e(()=>[s(g,{class:"pa-3"},{default:e(()=>[a("div",Hs,[a("div",null,[a("div",Bs,[s(_,{color:"primary",variant:"flat",size:"32",class:"mr-2"},{default:e(()=>[s(u,{icon:"mdi-apps",size:"18",color:"white"})]),_:1}),a("span",Fs,o(i(n)("pages.administration.systemInfo.installedApps")),1)]),a("div",Rs,o(i(n)("pages.administration.systemInfo.installedAppsCount",{count:C.value.length})),1)]),s(w,{"model-value":C.value.length>0?100:0,size:80,width:8,color:"primary"},{default:e(()=>[s(u,{icon:"mdi-apps",size:"32",color:"primary"})]),_:1},8,["model-value"])])]),_:1})]),_:1})]),_:1}),s(x,{cols:"12",md:"6",lg:"6"},{default:e(()=>[s(f,{variant:"tonal",color:"info",class:"h-100"},{default:e(()=>[s(g,{class:"pa-3"},{default:e(()=>[a("div",Ns,[a("div",null,[a("div",Us,[s(_,{color:"info",variant:"flat",size:"32",class:"mr-2"},{default:e(()=>[s(u,{icon:"mdi-database-check",size:"18",color:"white"})]),_:1}),a("span",Ds,o(i(n)("pages.administration.systemInfo.appsHashes")),1)]),a("div",Es,o(t.value.hashesPresent)+" / "+o(t.value.appsHashesTotal),1),s(N,{size:"small",variant:"flat",color:"warning",class:"mt-1"},{default:e(()=>[s(u,{icon:"mdi-alert-circle-outline",size:"16",class:"mr-1"}),U(" "+o(i(n)("pages.administration.systemInfo.notSynced",{count:t.value.appsHashesTotal-t.value.hashesPresent})),1)]),_:1})]),s(w,{"model-value":t.value.appsHashesTotal>0?t.value.hashesPresent/t.value.appsHashesTotal*100:0,size:80,width:8,color:"info"},{default:e(()=>[a("span",Gs,o(t.value.appsHashesTotal>0?(t.value.hashesPresent/t.value.appsHashesTotal*100).toFixed(1):0)+"%",1)]),_:1},8,["model-value"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(f,{class:"mb-3",elevation:"1"},{default:e(()=>[s(j,{class:"d-flex align-center pa-3 bg-surface"},{default:e(()=>[s(u,{icon:"mdi-package-variant",size:"24",class:"mr-2"}),a("span",Os,o(i(n)("pages.administration.systemInfo.componentVersions")),1)]),_:1}),s(A),s(g,{class:"pa-3"},{default:e(()=>[s(M,null,{default:e(()=>[(h(!0),z(is,null,ls(V.value,r=>(h(),T(x,{key:r.name,cols:"12",sm:"6",md:"4",lg:"3"},{default:e(()=>[s(f,{variant:"flat",style:{"background-color":"rgba(0, 0, 0, 0.08)"},class:"border"},{default:e(()=>[s(g,{class:"pa-3"},{default:e(()=>[a("div",Qs,[r.isImage?(h(),z("div",Ws,[s(ts,{src:r.icon,width:"40",height:"40",contain:""},null,8,["src"])])):(h(),T(_,{key:1,color:r.color,variant:"flat",size:"40",class:"mr-3"},{default:e(()=>[s(u,{icon:r.icon,size:"28",color:"white"},null,8,["icon"])]),_:2},1032,["color"])),a("div",null,[a("div",Zs,o(r.name),1),s(N,{size:"small",variant:"tonal",color:r.color,class:"mt-1"},{default:e(()=>[U(o(O(r.version)),1)]),_:2},1032,["color"])])])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]))]))}};typeof R=="function"&&R(D);const Ie=X(D,[["__scopeId","data-v-bc45158a"]]);export{Ie as default};
