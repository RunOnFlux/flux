const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/monaco-T-LZewlR.js","assets/apexcharts-nIAyciCq.js"])))=>i.map(i=>d[i]);
import{_ as Ml}from"./TosDialog-BaExyJJf.js";import{_ as wa,k as Eo,r as ct}from"./index-QPPWK7xw.js";import{v as pt}from"./uuid-B49X2dQj.js";import{b as p,J as Ie,o as mt,p as Ce,e as Na,a0 as ft,A as Nt,s as z,c as L,V as Me,F as re,D as oa,I as be,L as eo,M as La,N as Ia,O as Fa,z as to,U as Sl,a as lt,d as De,ad as Go,f as Ot,g as Pt,h as Rt,u as qo,a4 as Ko,n as ao,aa as $l,Q as ya,Y as Do,Z as No,ae as Xt,X as Lo,_ as Bt,H as zl,a6 as Io,$ as Cl,x as Fo,a3 as xa,af as Xa,a1 as Uo,G as Bo,a9 as Vl,ag as Al}from"./vuetify-_4u1He_j.js";import{E as Tl}from"./element-plus-Cr1Qs4Q_.js";import{u as _a}from"./i18n-Bm8bpAAW.js";import{r as k,c as le,o as ta,w as ie,P as I,g as b,Q as a,j as s,f as P,x as C,a3 as o,T as r,U as d,y as u,q as Mt,aq as El,ar as Dl,F as de,l as Qe,L as ce,n as aa,m as St,R as oo,ax as Nl,a2 as so,$ as Oo,a as Ro,p as Qt,aw as jo}from"./apexcharts-nIAyciCq.js";import{a as Xe}from"./http-BZQDkn3h.js";import{g as Ta}from"./geolocation-BklMEt0S.js";import{q as Ea}from"./query-parser-C3-dT-Rr.js";import{p as Ll,c as Il,e as Fl,g as Ul,s as Bl,f as Ol}from"./walletService-ARo4SzYC.js";import{g as Rl}from"./firebase-BnYKcu-W.js";import{p as jl,s as Wl,_ as Jl,a as Da}from"./PayPal-ugRCKXrL.js";import{E as Hl}from"./ExplorerService-oc3qiwdf.js";import{D as Gl}from"./DaemonService-D09C4O6H.js";import{_ as ql}from"./crypto-metamask-D6vz180a.js";import{j as Qa}from"./yaml-CtIyp6rB.js";import{L as Ua}from"./LoadingSpinner-BLJvP0iy.js";import{C as Kl}from"./clipboard-DDQOmope.js";import{i as Zl,a as Yl,e as Xl,b as Ql,g as en,c as Wo}from"./enterpriseCrypto-BkXqwt7M.js";import{s as tn,a as an,f as on}from"./ssp-logo-white-BYX0TNEU.js";import{c as dt}from"./lodash-C_Sw0jJq.js";const sn={class:"mb-4 pa-4 sync-config-card v-card"},ln={class:"d-flex align-center mb-3"},nn={class:"text-h6"},rn={class:"font-weight-medium"},un={class:"text-caption"},dn={key:0,class:"d-flex align-center mb-2"},cn={key:1,class:"d-flex align-center justify-space-between mb-2"},pn={class:"d-flex align-center"},mn={class:"text-caption text-medium-emphasis"},fn={class:"d-flex align-center"},vn={class:"d-flex align-center"},gn={class:"mount-type-example mt-2"},bn={class:"d-flex align-center"},hn={style:{"max-width":"300px"}},yn={key:0},xn={key:1},wn={class:"d-flex align-center"},_n={style:{"max-width":"350px"}},kn={key:0},Pn={key:1},Mn={class:"d-flex gap-2 flex-wrap"},Sn={class:"tree-view-container"},$n={class:"mount-info d-none d-md-flex flex-wrap align-center ga-2",style:{width:"100%","align-items":"center !important"}},zn={class:"mount-info d-flex d-md-none flex-column align-start ga-2",style:{width:"100%"}},Cn={class:"d-flex align-center ga-2"},Vn={class:"d-flex align-center ga-2"},An={class:"d-flex align-center justify-end ga-2 flex-wrap",style:{width:"100%"}},Tn={key:0},En={class:"text-h6 mb-3 mt-2 d-flex align-center"},Dn={class:"mount-types-grid"},Nn={class:"d-flex align-center mb-2"},Ln={class:"text-subtitle-2 font-weight-bold"},In={class:"mount-type-example-compact"},Fn={class:"text-h6 mb-3 mt-6 d-flex align-center"},Un={class:"info-section-card mb-4"},Bn={class:"info-section-content"},On={key:0,class:"info-item mb-3"},Rn={class:"d-flex align-start"},jn={class:"font-weight-bold text-body-2"},Wn={class:"text-caption"},Jn={class:"info-item mb-3"},Hn={class:"d-flex align-start"},Gn={class:"font-weight-bold text-body-2"},qn={class:"text-caption"},Kn={class:"info-item"},Zn={class:"d-flex align-start"},Yn={class:"font-weight-bold text-body-2"},Xn={class:"text-caption"},Qn={class:"text-h6 mb-3 mt-5 d-flex align-center"},er={class:"example-card mb-3"},tr={class:"d-flex align-center mb-3"},ar={class:"text-subtitle-2 font-weight-bold"},or={class:"text-caption mb-3"},sr={class:"example-tree"},lr={class:"tree-item d-none d-md-flex align-center"},nr={class:"tree-item-mobile d-flex d-md-none flex-column ga-2"},rr={class:"d-flex align-center ga-2"},ir={class:"d-flex align-center ga-2"},ur={class:"d-flex justify-end",style:{width:"100%"}},dr={class:"example-card mb-3"},cr={class:"d-flex align-center mb-3"},pr={class:"text-subtitle-2 font-weight-bold"},mr={class:"text-caption mb-3"},fr={class:"example-tree"},vr={class:"tree-item d-none d-md-flex align-center mb-2"},gr={class:"tree-item-mobile d-flex d-md-none flex-column ga-2 mb-2"},br={class:"d-flex align-center ga-2"},hr={class:"d-flex align-center ga-2"},yr={class:"d-flex justify-end",style:{width:"100%"}},xr={class:"tree-item d-none d-md-flex align-center"},wr={class:"tree-item-mobile d-flex d-md-none flex-column ga-2"},_r={class:"d-flex align-center ga-2"},kr={class:"d-flex align-center ga-2"},Pr={class:"d-flex justify-end",style:{width:"100%"}},Mr={class:"example-card mb-3"},Sr={class:"d-flex align-center mb-3"},$r={class:"text-subtitle-2 font-weight-bold"},zr={class:"text-caption mb-3"},Cr={class:"example-tree"},Vr={class:"tree-item d-none d-md-flex align-center mb-2"},Ar={class:"tree-item-mobile d-flex d-md-none flex-column ga-2 mb-2"},Tr={class:"d-flex align-center ga-2"},Er={class:"d-flex align-center ga-2"},Dr={class:"d-flex justify-end",style:{width:"100%"}},Nr={class:"tree-item d-none d-md-flex align-center"},Lr={class:"tree-item-mobile d-flex d-md-none flex-column ga-2"},Ir={class:"d-flex align-center ga-2"},Fr={class:"d-flex align-center ga-2"},Ur={class:"d-flex justify-end",style:{width:"100%"}},Br={class:"example-card mb-3"},Or={class:"d-flex align-center mb-3"},Rr={class:"text-subtitle-2 font-weight-bold"},jr={class:"text-caption mb-3"},Wr={class:"example-tree"},Jr={class:"tree-item d-none d-md-flex align-center mb-2"},Hr={class:"tree-item-mobile d-flex d-md-none flex-column ga-2 mb-2"},Gr={class:"d-flex align-center ga-2"},qr={class:"d-flex align-center ga-2"},Kr={class:"d-flex justify-end ga-2",style:{width:"100%"}},Zr={class:"tree-item d-none d-md-flex align-center mb-2"},Yr={class:"tree-item-mobile d-flex d-md-none flex-column ga-2 mb-2"},Xr={class:"d-flex align-center ga-2"},Qr={class:"d-flex align-center ga-2"},ei={class:"d-flex justify-end ga-2",style:{width:"100%"}},ti={class:"tree-item d-none d-md-flex align-center"},ai={class:"tree-item-mobile d-flex d-md-none flex-column ga-2"},oi={class:"d-flex align-center ga-2"},si={class:"d-flex align-center ga-2"},li={class:"d-flex justify-end ga-2",style:{width:"100%"}},ni={class:"example-card mb-4"},ri={class:"d-flex align-center mb-3"},ii={class:"text-subtitle-2 font-weight-bold"},ui={class:"text-caption mb-3"},di={class:"example-tree"},ci={class:"tree-item d-none d-md-flex align-center mb-2"},pi={class:"tree-item-mobile d-flex d-md-none flex-column ga-2 mb-2"},mi={class:"d-flex align-center ga-2"},fi={class:"d-flex align-center ga-2"},vi={class:"d-flex justify-end",style:{width:"100%"}},gi={class:"tree-item d-none d-md-flex align-center mb-2"},bi={class:"tree-item-mobile d-flex d-md-none flex-column ga-2 mb-2"},hi={class:"d-flex align-center ga-2"},yi={class:"d-flex align-center ga-2"},xi={class:"d-flex justify-end",style:{width:"100%"}},wi={class:"tree-item d-none d-md-flex align-center"},_i={class:"tree-item-mobile d-flex d-md-none flex-column ga-2"},ki={class:"d-flex align-center ga-2"},Pi={class:"d-flex align-center ga-2"},Mi={class:"d-flex justify-end",style:{width:"100%"}},Si={class:"text-h6 mb-3 mt-5 d-flex align-center"},$i={class:"info-section-card"},zi={class:"info-section-content"},Ci={class:"info-item mb-2"},Vi={class:"d-flex align-center"},Ai={class:"info-item mb-2"},Ti={class:"d-flex align-center"},Ei={class:"info-item mb-2"},Di={class:"d-flex align-center"},Ni={class:"info-item mb-2"},Li={class:"d-flex align-center"},Ii={class:"info-item mb-2"},Fi={class:"d-flex align-center"},Ui={class:"info-item mb-2"},Bi={class:"d-flex align-center"},Oi={class:"info-item mb-2"},Ri={class:"d-flex align-center"},ji={class:"info-item"},Wi={class:"d-flex align-center"},Ji={__name:"VolumePathBuilder",props:{modelValue:String,componentIndex:Number,newApp:Boolean,specVersion:Number},emits:["update:modelValue"],setup(x,{emit:c}){const i=x,Ve=c,{t:h}=_a(),R=k([]),J=le(()=>[{value:"",label:h("core.volumePathBuilder.modeNone")}]),Se=$=>"/"+$.replace(/^\/+/,"").replace(/\/+$/,"").replace(/\/+/g,"/"),Fe=$=>$.mountType==="component_file"||$.mountType==="component_directory",X=k({enabled:!1,mode:"r"}),me=le(()=>{const $=[{value:"r",label:h("core.volumePathBuilder.modePhasedMasterMaster"),description:h("core.volumePathBuilder.modePhasedMasterMasterDesc")},{value:"g",label:h("core.volumePathBuilder.modePrimaryStandby"),description:h("core.volumePathBuilder.modePrimaryStandbyDesc")}];return!i.newApp&&i.modelValue&&i.modelValue.includes("s:")&&$.unshift({value:"s",label:h("core.volumePathBuilder.modeMasterMaster"),description:h("core.volumePathBuilder.modeMasterMasterDesc")+" (Deprecated)"}),$});function $e(){const $=[];for(let l=0;l<=i.componentIndex;l++)$.push({value:String(l),label:l===i.componentIndex?h("core.volumePathBuilder.remountFromSameComponent",{index:l}):h("core.volumePathBuilder.mountFromComponent",{index:l})});return $}function pe(){return[...J.value,...$e()]}const B=k([]),ze=k(null);function G($){return $?$.split("|").map((l,y)=>{const w=pe(),U=l.match(/^cf:(\d+):([^:]+):(\/.*)$/);if(U){const V=U[1],te=U[2],A=U[3],D=w.find(Je=>Je.value===V)||{value:V,label:`${V}:`};return{id:pt(),mode:D,mountType:"component_file",subdir:te,path:A}}const Z=l.match(/^c:(\d+):([^:]+):(\/.*)$/);if(Z){const V=Z[1],te=Z[2],A=Z[3],D=w.find(Je=>Je.value===V)||{value:V,label:`${V}:`};return{id:pt(),mode:D,mountType:"component_directory",subdir:te,path:A}}const ue=l.match(/^f:([^:]+):(\/.*)$/);if(ue){const V=ue[1],te=ue[2],A=w.find(D=>D.value==="")||{value:"",label:"None"};return y===0&&(ze.value=te),{id:pt(),mode:A,mountType:"file",subdir:V,path:te}}const fe=l.match(/^m:([^:]+):(\/.*)$/);if(fe){const V=fe[1],te=fe[2],A=w.find(D=>D.value==="")||{value:"",label:"None"};return{id:pt(),mode:A,mountType:"directory",subdir:V,path:te}}const Ne=l.match(/^([srg]):(\/.*)$/);if(Ne&&y===0){const V=Ne[1],te=Ne[2];return X.value.enabled=!0,X.value.mode=V,ze.value=te,{id:pt(),mode:{value:"",label:"None"},mountType:"primary",subdir:"appdata",path:te}}const Ee=l.match(/^(\d+):(\/.*)$/);if(Ee){const V=Ee[1],te=Ee[2],A=w.find(D=>D.value===V)||{value:V,label:`${V}:`};return y===0&&(ze.value=te),{id:pt(),mode:A,mountType:"component_primary",subdir:"appdata",path:te}}const nt=l,E=w.find(V=>V.value==="")||{value:"",label:"None"};return y===0&&(ze.value=nt),{id:pt(),mode:E,mountType:"primary",subdir:"appdata",path:nt}}):[]}ta(()=>{B.value=G(i.modelValue),B.value.length===0?B.value.push({id:pt(),mode:J.value[0],mountType:"primary",subdir:"appdata",path:"/data"}):B.value.forEach($=>{$.path=Se($.path||""),$.subdir||($.mountType==="primary"||$.mountType==="component_primary"?$.subdir="appdata":($.mountType==="file"||$.mountType,$.subdir=""))})});function _e($){const l=B.value[$];if(!l)return;const y=l.path||"",w=Se(y);y!==w&&(l.path=w),Ue()}function j($){const l=B.value[$];if(!l)return J.value;const y=$e(),w=l.mountType;return w==="component_primary"||w==="component_directory"||w==="component_file"?y.filter(U=>U.value!==String(i.componentIndex)):$===0&&w==="primary"?J.value:w==="directory"||w==="file"?J.value.filter(U=>U.value===""):J.value.filter(U=>U.value==="")}function N($){const l=B.value[$];if(!l)return;const y=j($),w=typeof l.mode=="object"?l.mode.value:l.mode;y.some(ue=>ue.value===w)||(l.mode=y[0]);const Z=l.mountType;Z==="directory"||Z==="component_directory"?l.subdir&&l.subdir.includes(".")?l.subdir="data":l.subdir||(l.subdir="data"):(Z==="file"||Z==="component_file")&&(l.subdir&&!l.subdir.includes(".")?l.subdir="config.yaml":l.subdir||(l.subdir="config.yaml"))}le(()=>{const $=typeof B.value[0]?.mode=="object"?B.value[0]?.mode?.value:B.value[0]?.mode;return/^\d+$/.test($)});function Ae($,l,y){const w=[],U=E=>"/"+E.replace(/^\/+/,"").replace(/\/+$/,"").replace(/\/+/g,"/");if(!$||$.length===0||!$[0])return w;const Z=$[0],ue=U(Z?.path||"");typeof Z?.mode=="object"?Z.mode?.value:Z.mode;const fe=new Set,Ne=new Set;$.forEach((E,V)=>{if(!E)return;const te=E.path||"",A=U(te),D=typeof E.mode=="object"?E.mode?.value:E.mode,Je=/^\d+$/.test(D);if(!te.trim()){w.push({index:V,mode:D,path:"",reason:h("core.volumePathBuilder.validationPathEmpty")});return}if(V===0&&E.mountType!=="primary"&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationBaseCannotBeMount")}),!Je&&V>0&&(E.mountType==="file"&&(E.subdir?((E.subdir.includes("/")||E.subdir.includes(".."))&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationInvalidFilename")}),E.subdir.includes(":")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameContainsColon")}),E.subdir.includes("|")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameContainsPipe")}),(E.subdir==="appdata"||E.subdir==="backup"||E.subdir==="."||E.subdir==="..")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationReservedSubdir")}),E.subdir.length>255&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameTooLong")}),Ne.has(E.subdir)?w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationDuplicateSubdir")}):Ne.add(E.subdir)):w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameRequired")})),E.mountType==="directory"&&(E.subdir?((E.subdir.includes("/")||E.subdir.includes(".."))&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationInvalidSubdir")}),E.subdir.includes(":")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirContainsColon")}),E.subdir.includes("|")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirContainsPipe")}),(E.subdir==="appdata"||E.subdir==="backup"||E.subdir==="."||E.subdir==="..")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationReservedSubdir")}),E.subdir.length>255&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirTooLong")}),Ne.has(E.subdir)?w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationDuplicateSubdir")}):Ne.add(E.subdir)):w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirRequired")}))),E.mountType==="component_file"&&(E.subdir?((E.subdir.includes("/")||E.subdir.includes(".."))&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationInvalidFilename")}),E.subdir.includes(":")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameContainsColon")}),E.subdir.includes("|")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameContainsPipe")}),E.subdir.length>255&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameTooLong")})):w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilenameRequired")}),Je||w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationComponentMountRequiresNumber")})),E.mountType==="component_directory"&&(E.subdir?((E.subdir.includes("/")||E.subdir.includes(".."))&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationInvalidSubdir")}),E.subdir.includes(":")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirContainsColon")}),E.subdir.includes("|")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirContainsPipe")}),E.subdir.length>255&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirTooLong")})):w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationSubdirRequired")}),Je||w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationComponentMountRequiresNumber")})),E.mountType==="component_primary"&&!Je&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationComponentMountRequiresNumber")}),V>0&&E.mountType==="primary"&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationOnlyFirstCanBePrimary")}),V===0&&D&&["m","f","c","cf"].includes(D)&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationModeConflictsWithPrefix")}),fe.has(A)?w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationDuplicatePath")}):fe.add(A),A.startsWith("/")||w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationPathMustStartWithSlash")}),E.mountType==="file"||E.mountType==="component_file")if(A.endsWith("/"))w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilePathMustHaveFilename")});else{const Pe=A.split("/").filter(Lt=>Lt!==""),Ge=Pe[Pe.length-1];(Pe.length===0||!Ge||!Ge.includes("."))&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationFilePathShouldHaveExtension")})}A.includes(":")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationPathContainsColon")}),A.includes("|")&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationPathContainsPipe")});const ka=/[<>:"\\\|?*\x00-\x1F;]/;A.split("/").filter(Pe=>Pe!=="").some(Pe=>ka.test(Pe))&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationInvalidCharacters")}),/^\d+$/.test(D)&&parseInt(D)>l&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationMountFutureComponent")}),V!==0&&A===ue&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationPathCannotEqualBase")}),V!==0&&/^\d+$/.test(D)&&y?.enabled&&(A===ue||A.startsWith(ue+"/")||ue.startsWith(A+"/"))&&w.push({index:V,mode:D,path:A,reason:h("core.volumePathBuilder.validationMountOverlapsSyncRoot")})});const nt=$.map((E,V)=>{if(!E||!E.path)return"";const te=typeof E.mode=="object"?E.mode?.value:E.mode;return V===0?`${te?`${te}:`:""}${E.path}`:E.mountType==="file"?`f:${E.subdir||""}:${E.path}`:E.mountType==="directory"?`m:${E.subdir||""}:${E.path}`:E.mountType==="component_file"?`cf:${te||""}:${E.subdir||""}:${E.path}`:E.mountType==="component_directory"?`c:${te||""}:${E.subdir||""}:${E.path}`:E.mountType==="component_primary"?`${te||""}:${E.path}`:""}).filter(E=>E!=="").join("|");return nt.length>200&&w.push({index:-1,mode:"",path:"",reason:h("core.volumePathBuilder.validationContainerDataTooLong",{current:nt.length,max:200})}),w}const Oe=le(()=>Ae(B.value,i.componentIndex,X.value));function wt($){return Oe.value.filter(l=>l.index===$).map(l=>l.reason).join(", ")}function Ue(){const $=Ae(B.value,i.componentIndex,X.value),l=typeof B.value[0]?.mode=="object"?B.value[0]?.mode?.value:B.value[0]?.mode;if(/^\d+$/.test(l)||$.length>0)return;const y=B.value.filter(w=>w.path?.trim()).map((w,U)=>{const Z=typeof w.mode=="object"?w.mode?.value:w.mode,ue=Se(w.path||""),fe=/^\d+$/.test(Z);return U===0&&w.mountType==="primary"?X.value.enabled?`${X.value.mode}:${ue}`:ue:w.mountType==="component_file"&&w.subdir&&fe?`cf:${Z}:${w.subdir}:${ue}`:w.mountType==="component_directory"&&w.subdir&&fe?`c:${Z}:${w.subdir}:${ue}`:w.mountType==="file"&&w.subdir?`f:${w.subdir}:${ue}`:w.mountType==="directory"&&w.subdir?`m:${w.subdir}:${ue}`:w.mountType==="component_primary"&&fe?`${Z}:${ue}`:Z?`${Z}:${ue}`:ue}).join("|");Ve("update:modelValue",y)}const Te=le(()=>!0);function $t(){const $=typeof B.value[0]?.mode=="object"?B.value[0]?.mode?.value:B.value[0]?.mode,l=["s","r","g"].includes($),y=j(B.value.length).find(w=>w.value===(l?"0":""))||J.value[0];B.value.push({id:pt(),mode:y,mountType:"directory",subdir:"",path:""})}function zt($){B.value.length<=1||(B.value=B.value.filter(l=>l.id!==$),Ue())}function Ct(){B.value.push({id:pt(),mode:J.value[0],mountType:"directory",subdir:"logs",path:"/var/log"}),Ue()}function ke(){B.value.push({id:pt(),mode:J.value[0],mountType:"file",subdir:"config.yaml",path:"/etc/config.yaml"}),Ue()}const Re=le(()=>!i.newApp&&i.modelValue&&i.modelValue.includes("s:")),F=le(()=>[{value:"primary",label:h("core.volumePathBuilder.typePrimary"),icon:"mdi-database",description:h("core.volumePathBuilder.typePrimaryDesc"),example:"/data → /apps/flux[appid]/appdata"},{value:"directory",label:h("core.volumePathBuilder.typeDirectory"),icon:"mdi-folder",description:h("core.volumePathBuilder.typeDirectoryDesc"),example:"logs → /apps/flux[appid]/logs"},{value:"file",label:h("core.volumePathBuilder.typeFile"),icon:"mdi-file",description:h("core.volumePathBuilder.typeFileDesc"),example:"config.yaml → /apps/flux[appid]/config.yaml"},{value:"component_primary",label:h("core.volumePathBuilder.typeComponentPrimary"),icon:"mdi-vector-link",description:h("core.volumePathBuilder.typeComponentPrimaryDesc"),example:"0:/data → /apps/fluxCOMP0/appdata"},{value:"component_directory",label:h("core.volumePathBuilder.typeComponentDirectory"),icon:"mdi-folder-network",description:h("core.volumePathBuilder.typeComponentDirectoryDesc"),example:"0:data → /apps/fluxCOMP0/data"},{value:"component_file",label:h("core.volumePathBuilder.typeComponentFile"),icon:"mdi-file-link",description:h("core.volumePathBuilder.typeComponentFileDesc"),example:"0:config.yaml → /apps/fluxCOMP0/config.yaml"}]);function O($){const l=F.value,y=i.componentIndex===0;return $===0?y?l.filter(w=>w.value==="primary"):l.filter(w=>w.value==="primary"||w.value==="component_primary"):y?l.filter(w=>w.value==="directory"||w.value==="file"):l.filter(w=>w.value==="directory"||w.value==="file"||w.value==="component_directory"||w.value==="component_file")}function K($){return F.value.find(y=>y.value===$)?.icon||"mdi-help-circle"}function je(){const $=new Set(Oe.value.map(fe=>fe.index)),l=B.value.filter((fe,Ne)=>fe.path?.trim()&&!$.has(Ne)),y=fe=>"/"+fe.replace(/^\/+/,"").replace(/\/+$/,"").replace(/\/+/g,"/"),w=[...l].sort((fe,Ne)=>{const Ee=y(fe.path||"/"),nt=y(Ne.path||"/"),E=Ee.split("/").filter(te=>te).length,V=nt.split("/").filter(te=>te).length;return E-V}),U=w.map((fe,Ne)=>{const Ee=y(fe.path||"/");let nt=null,E=0;for(let V=0;V<Ne;V++){const te=w[V],A=y(te.path||"/");if(Ee!==A&&Ee.startsWith(A+"/")){const D=A.split("/").filter(Je=>Je).length;D>E&&(nt=A,E=D)}}return{id:Ee,label:Ee,entry:fe,parentPath:nt,children:[]}}),Z=new Map,ue=[];return U.forEach(fe=>{Z.set(fe.id,fe)}),U.forEach(fe=>{if(fe.parentPath){const Ne=Z.get(fe.parentPath);Ne?Ne.children.push(fe):ue.push(fe)}else ue.push(fe)}),ue}const He=le(()=>je());function he($){return!(!B.value||B.value.length===0||!X.value.enabled||$.mountType==="component_primary"||$.mountType==="component_directory"||$.mountType==="component_file")}le(()=>{const $=l=>"/"+l.replace(/^\/+/,"").replace(/\/+$/,"").replace(/\/+/g,"/");return B.value.filter(l=>l.path?.trim()).map((l,y)=>{const w=typeof l.mode=="object"?l.mode?.value:l.mode,U=$(l.path||""),Z=/^\d+$/.test(w);return y===0&&l.mountType==="primary"?w?`${w}:${U}`:U:l.mountType==="component_file"&&l.subdir&&Z?`cf:${w}:${l.subdir}:${U}`:l.mountType==="component_directory"&&l.subdir&&Z?`c:${w}:${l.subdir}:${U}`:l.mountType==="file"&&l.subdir?`f:${l.subdir}:${U}`:l.mountType==="directory"&&l.subdir?`m:${l.subdir}:${U}`:l.mountType==="component_primary"&&Z?`${w}:${U}`:w?`${w}:${U}`:U}).join("|")||h("core.volumePathBuilder.outputPreviewEmpty")}),ie(Oe,$=>{R.value=$.length>0?[0]:[]});let q=!1;return ie(B,$=>{q||$.forEach((l,y)=>{if(y===0||!l.subdir||!l.subdir.trim())return;const w=typeof l.mode=="object"?l.mode?.value:l.mode,U=/^\d+$/.test(w),Z=/\.[a-zA-Z0-9]+$/.test(l.subdir.trim());let ue=null;U?Z&&l.mountType!=="component_file"?ue="component_file":!Z&&l.mountType!=="component_directory"&&l.mountType!=="component_primary"&&(ue="component_directory"):Z&&l.mountType!=="file"?ue="file":!Z&&l.mountType!=="directory"&&(ue="directory"),ue&&(q=!0,l.mountType=ue,aa(()=>{q=!1}))})},{deep:!0}),($,l)=>(b(),I(Me,{class:"pa-4",variant:"tonal"},{default:a(()=>[s("div",sn,[s("div",ln,[o(p,{class:"mr-2",size:"24"},{default:a(()=>[...l[3]||(l[3]=[r("mdi-sync",-1)])]),_:1}),s("h4",nn,d(u(h)("core.volumePathBuilder.syncTitle")),1)]),o(Ie,{type:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:a(()=>[r(d(u(h)("core.volumePathBuilder.syncDescription")),1)]),_:1}),o(mt,{align:"center"},{default:a(()=>[o(Ce,{cols:"12",md:"6"},{default:a(()=>[o(Na,{modelValue:X.value.enabled,"onUpdate:modelValue":[l[0]||(l[0]=y=>X.value.enabled=y),Ue],label:u(h)("core.volumePathBuilder.syncEnableLabel"),color:"primary","hide-details":"auto"},null,8,["modelValue","label"]),s("div",{class:Mt(["text-caption mt-1 font-weight-bold",X.value.enabled?"text-success":"text-warning"])},d(X.value.enabled?u(h)("core.volumePathBuilder.syncEnabledHint"):u(h)("core.volumePathBuilder.syncDisabledHint")),3)]),_:1}),X.value.enabled?(b(),I(Ce,{key:0,cols:"12",md:"6"},{default:a(()=>[o(ft,{modelValue:X.value.mode,"onUpdate:modelValue":[l[1]||(l[1]=y=>X.value.mode=y),Ue],items:me.value,"item-title":"label","item-value":"value",label:u(h)("core.volumePathBuilder.syncModeLabel"),density:"comfortable",variant:"outlined",color:"secondary"},{item:a(({props:y,item:w})=>[o(Nt,El(Dl(y)),{title:a(()=>[s("div",rn,d(w.raw.label),1)]),subtitle:a(()=>[s("div",un,d(w.raw.description),1)]),_:2},1040)]),_:1},8,["modelValue","items","label"])]),_:1})):C("",!0)]),_:1})]),(b(!0),P(de,null,Qe(B.value,(y,w)=>(b(),P("div",{key:y.id},[w===0?(b(),P("div",dn,[o(p,{class:"mr-2"},{default:a(()=>[...l[4]||(l[4]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",variant:"tonal"},{default:a(()=>[r(d(u(h)("core.volumePathBuilder.primaryMountLabel")),1)]),_:1})])):(b(),P("div",cn,[s("div",pn,[o(p,{class:"mr-2"},{default:a(()=>[r(d(K(y.mountType)),1)]),_:2},1024),s("span",mn,d(u(h)("core.volumePathBuilder.entryNumber",{number:w})),1)]),w!==0?(b(),I(L,{key:0,icon:"",variant:"text",onClick:U=>zt(y.id),color:"error",disabled:B.value.length===1,class:"d-md-none"},{default:a(()=>[o(p,{size:"22"},{default:a(()=>[...l[5]||(l[5]=[r("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","disabled"])):C("",!0)])),o(Me,{class:"mb-3 pa-5 mount-entry-card",variant:"outlined"},{default:a(()=>[o(mt,{align:"center"},{default:a(()=>[Fe(y)?(b(),I(Ce,{key:0,cols:"12",md:"3"},{default:a(()=>[s("div",fn,[o(ft,{modelValue:y.mode,"onUpdate:modelValue":U=>y.mode=U,items:j(w),"item-title":"label","item-value":"value",dense:"","hide-details":"",label:u(h)("core.volumePathBuilder.labelMode"),color:"secondary",onBlur:Ue,style:{flex:"1"}},{item:a(({props:U,item:Z})=>[o(Nt,ce({ref_for:!0},U),{title:a(()=>[s("div",null,d(Z.raw.label),1)]),_:2},1040)]),_:1},8,["modelValue","onUpdate:modelValue","items","label"]),o(re,{location:"top"},{activator:a(({props:U})=>[o(p,ce({ref_for:!0},U,{size:"18",class:"ml-1",color:"grey"}),{default:a(()=>[...l[6]||(l[6]=[r("mdi-help-circle-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(h)("core.volumePathBuilder.modeTooltip")),1)]),_:1})])]),_:2},1024)):C("",!0),o(Ce,{cols:"12",md:Fe(y)?2:3},{default:a(()=>[s("div",vn,[(b(),I(ft,{modelValue:y.mountType,"onUpdate:modelValue":[U=>y.mountType=U,()=>{N(w),Ue()}],items:O(w),"item-title":"label","item-value":"value",dense:"","hide-details":"",label:u(h)("core.volumePathBuilder.labelMountType"),color:"secondary",disabled:w===0,key:`mount-type-${y.id}-${y.mountType}`,style:{flex:"1"}},{item:a(({item:U,props:Z})=>[o(Nt,ce({ref_for:!0},Z,{class:"mount-type-item"}),{prepend:a(()=>[o(p,{icon:U.raw.icon,class:"mr-3"},null,8,["icon"])]),default:a(()=>[o(oa,null,{default:a(()=>[r(d(U.raw.description),1)]),_:2},1024),s("div",gn,[s("code",null,d(U.raw.example),1)])]),_:2},1040)]),_:1},8,["modelValue","onUpdate:modelValue","items","label","disabled"])),o(re,{location:"top"},{activator:a(({props:U})=>[o(p,ce({ref_for:!0},U,{size:"18",class:"ml-1",color:"grey"}),{default:a(()=>[...l[7]||(l[7]=[r("mdi-help-circle-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(h)("core.volumePathBuilder.typeTooltip")),1)]),_:1})])]),_:2},1032,["md"]),y.mountType==="file"||y.mountType==="directory"||y.mountType==="component_file"||y.mountType==="component_directory"?(b(),I(Ce,{key:1,cols:"12",md:"2"},{default:a(()=>[s("div",bn,[o(be,{modelValue:y.subdir,"onUpdate:modelValue":U=>y.subdir=U,label:y.mountType==="file"||y.mountType==="component_file"?"Host Filename":"Host Folder",placeholder:y.mountType==="file"||y.mountType==="component_file"?u(h)("core.volumePathBuilder.filenamePlaceholder"):u(h)("core.volumePathBuilder.subdirPlaceholder"),dense:"","hide-details":"",disabled:y.mountType==="primary"||y.mountType==="component_primary",onBlur:Ue,style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue","label","placeholder","disabled"]),o(re,{location:"top"},{activator:a(({props:U})=>[o(p,ce({ref_for:!0},U,{size:"18",class:"ml-1",color:"grey"}),{default:a(()=>[...l[8]||(l[8]=[r("mdi-help-circle-outline",-1)])]),_:1},16)]),default:a(()=>[s("div",hn,[s("strong",null,d(y.mountType==="file"||y.mountType==="component_file"?"Host Filename":"Host Folder Name"),1),l[17]||(l[17]=s("br",null,null,-1)),y.mountType==="file"||y.mountType==="component_file"?(b(),P("span",yn,[l[9]||(l[9]=r(" This file will be created at ",-1)),s("code",null,"/apps/flux[appid]/"+d(y.subdir||"filename"),1),l[10]||(l[10]=r(" on the host.",-1)),l[11]||(l[11]=s("br",null,null,-1)),l[12]||(l[12]=r(" It does NOT need to match the container path. ",-1))])):(b(),P("span",xn,[l[13]||(l[13]=r(" This folder will be created at ",-1)),s("code",null,"/apps/flux[appid]/"+d(y.subdir||"foldername"),1),l[14]||(l[14]=r(" on the host.",-1)),l[15]||(l[15]=s("br",null,null,-1)),l[16]||(l[16]=r(" It does NOT need to match the container path. ",-1))]))])]),_:2},1024)])]),_:2},1024)):C("",!0),o(Ce,{cols:"12",md:y.mountType==="file"||y.mountType==="directory"||y.mountType==="component_file"||y.mountType==="component_directory"?Fe(y)?4:6:Fe(y)?6:8},{default:a(()=>[s("div",wn,[o(be,{modelValue:y.path,"onUpdate:modelValue":U=>y.path=U,label:y.mountType==="file"||y.mountType==="component_file"?"Container File Path":"Container Path",placeholder:y.mountType==="file"||y.mountType==="component_file"?"/etc/config.yaml":u(h)("core.volumePathBuilder.pathPlaceholder"),error:!!wt(w),dense:"",onBlur:()=>_e(w),style:{flex:"1"}},null,8,["modelValue","onUpdate:modelValue","label","placeholder","error","onBlur"]),o(re,{location:"top"},{activator:a(({props:U})=>[o(p,ce({ref_for:!0},U,{size:"18",class:"ml-1",color:"grey"}),{default:a(()=>[...l[18]||(l[18]=[r("mdi-help-circle-outline",-1)])]),_:1},16)]),default:a(()=>[s("div",_n,[s("strong",null,d(y.mountType==="file"||y.mountType==="component_file"?"Container File Path":"Container Path"),1),l[21]||(l[21]=s("br",null,null,-1)),y.mountType==="file"||y.mountType==="component_file"?(b(),P("span",kn,[...l[19]||(l[19]=[r(" The FULL file path where the file appears inside the container.",-1),s("br",null,null,-1),r(" Example: ",-1),s("code",null,"/etc/config.yaml",-1),r(", ",-1),s("code",null,"/app/settings.json",-1),s("br",null,null,-1),r(" ⚠️ Must include the filename, not just the directory! ",-1)])])):(b(),P("span",Pn,[...l[20]||(l[20]=[r(" The directory path where the folder appears inside the container.",-1),s("br",null,null,-1),r(" Example: ",-1),s("code",null,"/var/log",-1),r(", ",-1),s("code",null,"/data",-1)])]))])]),_:2},1024)])]),_:2},1032,["md"]),w!==0?(b(),I(Ce,{key:2,cols:"auto",class:"ml-auto d-none d-md-flex align-center"},{default:a(()=>[o(L,{icon:"",variant:"text",onClick:U=>zt(y.id),color:"error",disabled:B.value.length===1},{default:a(()=>[o(p,{size:"22"},{default:a(()=>[...l[22]||(l[22]=[r("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick","disabled"])]),_:2},1024)):C("",!0)]),_:2},1024)]),_:2},1024)]))),128)),s("div",Mn,[Te.value?(b(),I(L,{key:0,onClick:$t,"prepend-icon":"mdi-plus",variant:"flat",size:"small",color:"primary"},{default:a(()=>[r(d(u(h)("core.volumePathBuilder.addPath")),1)]),_:1})):C("",!0),Te.value?(b(),I(L,{key:1,onClick:Ct,"prepend-icon":"mdi-text-box",variant:"outlined",size:"small",color:"grey"},{default:a(()=>[r(d(u(h)("core.volumePathBuilder.quickAddLogs")),1)]),_:1})):C("",!0),Te.value?(b(),I(L,{key:2,onClick:ke,"prepend-icon":"mdi-file-cog",variant:"outlined",size:"small",color:"grey"},{default:a(()=>[r(d(u(h)("core.volumePathBuilder.quickAddConfig")),1)]),_:1})):C("",!0)]),B.value.length>0&&He.value.length>0?(b(),I(eo,{key:0,variant:"accordion",class:"mt-4","model-value":[0]},{default:a(()=>[o(La,null,{default:a(()=>[o(Ia,{class:"d-flex align-center"},{default:a(()=>[o(p,{size:"28",class:"mr-2",color:"grey"},{default:a(()=>[...l[23]||(l[23]=[r("mdi-docker",-1)])]),_:1}),l[24]||(l[24]=s("strong",null,"Container Filesystem View",-1))]),_:1}),o(Fa,null,{default:a(()=>[s("div",Sn,[He.value.length>0?(b(),I(u(Tl),{key:0,data:He.value,props:{label:"label",children:"children"},"default-expand-all":"",class:"tree-content",style:{background:"transparent !important","background-color":"transparent !important"}},{default:a(({data:y})=>[s("div",$n,[o(p,{size:"18",style:{display:"flex","align-items":"center"}},{default:a(()=>[r(d(K(y.entry.mountType)),1)]),_:2},1024),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important",display:"inline-flex !important","align-items":"center !important"}},{default:a(()=>[r(d(y.entry.path),1)]),_:2},1024),o(p,{size:"20",class:"text-medium-emphasis",style:{display:"flex","align-items":"center"}},{default:a(()=>[...l[25]||(l[25]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",style:{display:"flex","align-items":"center"}},{default:a(()=>[...l[26]||(l[26]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important",display:"inline-flex !important","align-items":"center !important"}},{default:a(()=>[r(" /apps/flux[appid]/"+d(y.entry.subdir||"appdata"),1)]),_:2},1024),l[30]||(l[30]=s("div",{style:{"flex-grow":"1"}},null,-1)),y.entry.mountType==="primary"&&X.value.enabled?(b(),P(de,{key:0},[o(p,{size:"20",color:"warning",style:{display:"flex","align-items":"center"}},{default:a(()=>[r(d(X.value.mode==="r"?"mdi-alpha-r-circle":X.value.mode==="g"?"mdi-alpha-g-circle":"mdi-alpha-s-circle"),1)]),_:1}),o(p,{size:"20",color:"warning",class:"sync-icon-animated",style:{display:"flex","align-items":"center"}},{default:a(()=>[...l[27]||(l[27]=[r("mdi-sync",-1)])]),_:1})],64)):he(y.entry)?(b(),I(p,{key:1,size:"20",color:"warning",class:"sync-icon-animated",style:{display:"flex","align-items":"center"}},{default:a(()=>[...l[28]||(l[28]=[r("mdi-sync",-1)])]),_:1})):X.value.enabled&&X.value.mode==="g"&&y.entry.mountType!=="primary"&&he(y.entry)?(b(),I(p,{key:2,size:"20",color:"info",style:{display:"flex","align-items":"center"}},{default:a(()=>[...l[29]||(l[29]=[r("mdi-eye",-1)])]),_:1})):C("",!0),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important",display:"inline-flex !important","align-items":"center !important"}},{default:a(()=>[r(d(y.entry.mountType==="primary"?"Primary":y.entry.mountType==="directory"?"Directory":y.entry.mountType==="file"?"File":y.entry.mountType==="component_directory"?"Component Dir":y.entry.mountType==="component_file"?"Component File":"Component"),1)]),_:2},1024)]),s("div",zn,[s("div",Cn,[o(p,{size:"18"},{default:a(()=>[r(d(K(y.entry.mountType)),1)]),_:2},1024),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[r(d(y.entry.path),1)]),_:2},1024)]),s("div",Vn,[o(p,{size:"18"},{default:a(()=>[...l[31]||(l[31]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[r(" /apps/flux[appid]/"+d(y.entry.subdir||"appdata"),1)]),_:2},1024)]),s("div",An,[y.entry.mountType==="primary"&&X.value.enabled?(b(),P(de,{key:0},[o(p,{size:"20",color:"warning"},{default:a(()=>[r(d(X.value.mode==="r"?"mdi-alpha-r-circle":X.value.mode==="g"?"mdi-alpha-g-circle":"mdi-alpha-s-circle"),1)]),_:1}),o(p,{size:"20",color:"warning",class:"sync-icon-animated"},{default:a(()=>[...l[32]||(l[32]=[r("mdi-sync",-1)])]),_:1})],64)):he(y.entry)?(b(),I(p,{key:1,size:"20",color:"warning",class:"sync-icon-animated"},{default:a(()=>[...l[33]||(l[33]=[r("mdi-sync",-1)])]),_:1})):X.value.enabled&&X.value.mode==="g"&&y.entry.mountType!=="primary"&&he(y.entry)?(b(),I(p,{key:2,size:"20",color:"info"},{default:a(()=>[...l[34]||(l[34]=[r("mdi-eye",-1)])]),_:1})):C("",!0),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[r(d(y.entry.mountType==="primary"?"Primary":y.entry.mountType==="directory"?"Directory":y.entry.mountType==="file"?"File":y.entry.mountType==="component_directory"?"Component Dir":y.entry.mountType==="component_file"?"Component File":"Component"),1)]),_:2},1024)])])]),_:1},8,["data"])):C("",!0)])]),_:1})]),_:1})]),_:1})):C("",!0),o(eo,{modelValue:R.value,"onUpdate:modelValue":l[2]||(l[2]=y=>R.value=y),variant:"accordion",class:"mt-4"},{default:a(()=>[o(La,null,{default:a(()=>[o(Ia,{class:"d-flex align-center"},{default:a(()=>[o(p,{color:Oe.value.length===0?"success":"error",size:"21",class:"mr-2"},{default:a(()=>[r(d(Oe.value.length===0?"mdi-file-document-check":"mdi-file-document-remove"),1)]),_:1},8,["color"]),r(" "+d(u(h)("core.volumePathBuilder.validationLogs")),1)]),_:1}),o(Fa,null,{default:a(()=>[Oe.value.length===0?(b(),P("div",Tn,d(u(h)("core.volumePathBuilder.noValidationErrors")),1)):(b(),I(to,{key:1,dense:""},{default:a(()=>[(b(!0),P(de,null,Qe(Oe.value,(y,w)=>(b(),I(Nt,{key:w},{default:a(()=>[o(oa,null,{default:a(()=>[r(d(u(h)("core.volumePathBuilder.entryLabel",{index:y.index,mode:y.mode||"none",path:y.path})),1)]),_:2},1024),o(Sl,{style:{color:"#FF4C51"}},{default:a(()=>[r(d(y.reason),1)]),_:2},1024)]),_:2},1024))),128))]),_:1}))]),_:1})]),_:1}),o(La,null,{default:a(()=>[o(Ia,{class:"d-flex align-center"},{default:a(()=>[o(p,{size:"21",class:"mr-2"},{default:a(()=>[...l[35]||(l[35]=[r("mdi-information",-1)])]),_:1}),r(" "+d(u(h)("core.volumePathBuilder.generalInfoTitle")),1)]),_:1}),o(Fa,null,{default:a(()=>[s("h4",En,[o(p,{icon:"mdi-file-tree",size:"22",class:"mr-2"}),s("strong",null,d(u(h)("core.volumePathBuilder.mountTypesTitle")),1)]),s("div",Dn,[(b(!0),P(de,null,Qe(F.value,y=>(b(),P("div",{key:y.value,class:"mount-type-compact-card"},[s("div",Nn,[o(p,{icon:y.icon,size:"20",class:"mr-2",color:"grey"},null,8,["icon"]),s("span",Ln,d(y.label),1)]),s("div",In,[s("code",null,d(y.example),1)])]))),128))]),s("h4",Fn,[o(p,{icon:"mdi-sync-circle",size:"22",class:"mr-2"}),s("strong",null,d(u(h)("core.volumePathBuilder.syncModesTitle")),1)]),s("div",Un,[s("div",Bn,[Re.value?(b(),P("div",On,[s("div",Rn,[o(p,{icon:"mdi-alpha-s-circle",size:"18",color:"error",class:"mr-2 mt-1"}),s("div",null,[s("div",jn,d(u(h)("core.volumePathBuilder.syncModesMasterMasterLabel")),1),s("div",Wn,d(u(h)("core.volumePathBuilder.syncModesMasterMasterDesc"))+" (Deprecated)",1)])])])):C("",!0),s("div",Jn,[s("div",Hn,[o(p,{icon:"mdi-alpha-r-circle",size:"18",color:"success",class:"mr-2 mt-1"}),s("div",null,[s("div",Gn,d(u(h)("core.volumePathBuilder.syncModesPhasedMasterMasterLabel")),1),s("div",qn,d(u(h)("core.volumePathBuilder.syncModesPhasedMasterMasterDesc")),1)])])]),s("div",Kn,[s("div",Zn,[o(p,{icon:"mdi-alpha-g-circle",size:"18",color:"info",class:"mr-2 mt-1"}),s("div",null,[s("div",Yn,d(u(h)("core.volumePathBuilder.syncModesPrimaryStandbyLabel")),1),s("div",Xn,d(u(h)("core.volumePathBuilder.syncModesPrimaryStandbyDesc")),1)])])])])]),s("h4",Qn,[o(p,{icon:"mdi-lightbulb-on",size:"22",class:"mr-2"}),s("strong",null,d(u(h)("core.volumePathBuilder.examplesTitle")),1)]),s("div",er,[s("div",tr,[o(p,{icon:"mdi-numeric-1-circle",size:"20",class:"mr-2"}),s("span",ar,d(u(h)("core.volumePathBuilder.exampleBasicLabel")),1)]),s("div",or,d(u(h)("core.volumePathBuilder.exampleBasicDesc")),1),l[48]||(l[48]=s("div",{class:"example-string mb-3"},[s("code",{class:"d-block pa-2"},"/data")],-1)),s("div",sr,[s("div",lr,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[36]||(l[36]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[37]||(l[37]=[r("/data",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[38]||(l[38]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[39]||(l[39]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[40]||(l[40]=[r("/apps/flux[appid]/appdata",-1)])]),_:1}),l[42]||(l[42]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[41]||(l[41]=[r("Primary",-1)])]),_:1})]),s("div",nr,[s("div",rr,[o(p,{size:"18"},{default:a(()=>[...l[43]||(l[43]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[44]||(l[44]=[r("/data",-1)])]),_:1})]),s("div",ir,[o(p,{size:"18"},{default:a(()=>[...l[45]||(l[45]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[46]||(l[46]=[r("/apps/flux[appid]/appdata",-1)])]),_:1})]),s("div",ur,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[47]||(l[47]=[r("Primary",-1)])]),_:1})])])])]),s("div",dr,[s("div",cr,[o(p,{icon:"mdi-numeric-2-circle",size:"20",class:"mr-2"}),s("span",pr,d(u(h)("core.volumePathBuilder.exampleDirectoryLabel")),1)]),s("div",mr,d(u(h)("core.volumePathBuilder.exampleDirectoryDesc")),1),l[73]||(l[73]=s("div",{class:"example-string mb-3"},[s("code",{class:"d-block pa-2"},"/data|m:logs:/var/log")],-1)),s("div",fr,[s("div",vr,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[49]||(l[49]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[50]||(l[50]=[r("/data",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[51]||(l[51]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[52]||(l[52]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[53]||(l[53]=[r("/apps/flux[appid]/appdata",-1)])]),_:1}),l[55]||(l[55]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[54]||(l[54]=[r("Primary",-1)])]),_:1})]),s("div",gr,[s("div",br,[o(p,{size:"18"},{default:a(()=>[...l[56]||(l[56]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[57]||(l[57]=[r("/data",-1)])]),_:1})]),s("div",hr,[o(p,{size:"18"},{default:a(()=>[...l[58]||(l[58]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[59]||(l[59]=[r("/apps/flux[appid]/appdata",-1)])]),_:1})]),s("div",yr,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[60]||(l[60]=[r("Primary",-1)])]),_:1})])]),s("div",xr,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[61]||(l[61]=[r("mdi-folder",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[62]||(l[62]=[r("/var/log",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[63]||(l[63]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[64]||(l[64]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[65]||(l[65]=[r("/apps/flux[appid]/logs",-1)])]),_:1}),l[67]||(l[67]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[66]||(l[66]=[r("Directory",-1)])]),_:1})]),s("div",wr,[s("div",_r,[o(p,{size:"18"},{default:a(()=>[...l[68]||(l[68]=[r("mdi-folder",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[69]||(l[69]=[r("/var/log",-1)])]),_:1})]),s("div",kr,[o(p,{size:"18"},{default:a(()=>[...l[70]||(l[70]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[71]||(l[71]=[r("/apps/flux[appid]/logs",-1)])]),_:1})]),s("div",Pr,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[72]||(l[72]=[r("Directory",-1)])]),_:1})])])])]),s("div",Mr,[s("div",Sr,[o(p,{icon:"mdi-numeric-3-circle",size:"20",class:"mr-2"}),s("span",$r,d(u(h)("core.volumePathBuilder.exampleFileLabel")),1)]),s("div",zr,d(u(h)("core.volumePathBuilder.exampleFileDesc")),1),l[98]||(l[98]=s("div",{class:"example-string mb-3"},[s("code",{class:"d-block pa-2"},"/data|f:config.yaml:/etc/config.yaml")],-1)),s("div",Cr,[s("div",Vr,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[74]||(l[74]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[75]||(l[75]=[r("/data",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[76]||(l[76]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[77]||(l[77]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[78]||(l[78]=[r("/apps/flux[appid]/appdata",-1)])]),_:1}),l[80]||(l[80]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[79]||(l[79]=[r("Primary",-1)])]),_:1})]),s("div",Ar,[s("div",Tr,[o(p,{size:"18"},{default:a(()=>[...l[81]||(l[81]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[82]||(l[82]=[r("/data",-1)])]),_:1})]),s("div",Er,[o(p,{size:"18"},{default:a(()=>[...l[83]||(l[83]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[84]||(l[84]=[r("/apps/flux[appid]/appdata",-1)])]),_:1})]),s("div",Dr,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[85]||(l[85]=[r("Primary",-1)])]),_:1})])]),s("div",Nr,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[86]||(l[86]=[r("mdi-file",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[87]||(l[87]=[r("/etc/config.yaml",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[88]||(l[88]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[89]||(l[89]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[90]||(l[90]=[r("/apps/flux[appid]/config.yaml",-1)])]),_:1}),l[92]||(l[92]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[91]||(l[91]=[r("File",-1)])]),_:1})]),s("div",Lr,[s("div",Ir,[o(p,{size:"18"},{default:a(()=>[...l[93]||(l[93]=[r("mdi-file",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[94]||(l[94]=[r("/etc/config.yaml",-1)])]),_:1})]),s("div",Fr,[o(p,{size:"18"},{default:a(()=>[...l[95]||(l[95]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[96]||(l[96]=[r("/apps/flux[appid]/config.yaml",-1)])]),_:1})]),s("div",Ur,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[97]||(l[97]=[r("File",-1)])]),_:1})])])])]),s("div",Br,[s("div",Or,[o(p,{icon:"mdi-numeric-4-circle",size:"20",class:"mr-2"}),s("span",Rr,d(u(h)("core.volumePathBuilder.exampleMixedLabel")),1)]),s("div",jr,d(u(h)("core.volumePathBuilder.exampleMixedDesc")),1),l[143]||(l[143]=s("div",{class:"example-string mb-3"},[s("code",{class:"d-block pa-2"},"r:/data|m:logs:/var/log|f:config.yaml:/etc/config.yaml")],-1)),s("div",Wr,[s("div",Jr,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[99]||(l[99]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[100]||(l[100]=[r("/data",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[101]||(l[101]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[102]||(l[102]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[103]||(l[103]=[r("/apps/flux[appid]/appdata",-1)])]),_:1}),l[107]||(l[107]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(p,{size:"20",color:"warning",class:"mr-1"},{default:a(()=>[...l[104]||(l[104]=[r("mdi-alpha-r-circle",-1)])]),_:1}),o(p,{size:"20",color:"warning",class:"mr-2 sync-icon-animated"},{default:a(()=>[...l[105]||(l[105]=[r("mdi-sync",-1)])]),_:1}),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[106]||(l[106]=[r("Primary",-1)])]),_:1})]),s("div",Hr,[s("div",Gr,[o(p,{size:"18"},{default:a(()=>[...l[108]||(l[108]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[109]||(l[109]=[r("/data",-1)])]),_:1})]),s("div",qr,[o(p,{size:"18"},{default:a(()=>[...l[110]||(l[110]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[111]||(l[111]=[r("/apps/flux[appid]/appdata",-1)])]),_:1})]),s("div",Kr,[o(p,{size:"20",color:"warning"},{default:a(()=>[...l[112]||(l[112]=[r("mdi-alpha-r-circle",-1)])]),_:1}),o(p,{size:"20",color:"warning",class:"sync-icon-animated"},{default:a(()=>[...l[113]||(l[113]=[r("mdi-sync",-1)])]),_:1}),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[114]||(l[114]=[r("Primary",-1)])]),_:1})])]),s("div",Zr,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[115]||(l[115]=[r("mdi-folder",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[116]||(l[116]=[r("/var/log",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[117]||(l[117]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[118]||(l[118]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[119]||(l[119]=[r("/apps/flux[appid]/logs",-1)])]),_:1}),l[122]||(l[122]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(p,{size:"20",color:"warning",class:"mr-2 sync-icon-animated"},{default:a(()=>[...l[120]||(l[120]=[r("mdi-sync",-1)])]),_:1}),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[121]||(l[121]=[r("Directory",-1)])]),_:1})]),s("div",Yr,[s("div",Xr,[o(p,{size:"18"},{default:a(()=>[...l[123]||(l[123]=[r("mdi-folder",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[124]||(l[124]=[r("/var/log",-1)])]),_:1})]),s("div",Qr,[o(p,{size:"18"},{default:a(()=>[...l[125]||(l[125]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[126]||(l[126]=[r("/apps/flux[appid]/logs",-1)])]),_:1})]),s("div",ei,[o(p,{size:"20",color:"warning",class:"sync-icon-animated"},{default:a(()=>[...l[127]||(l[127]=[r("mdi-sync",-1)])]),_:1}),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[128]||(l[128]=[r("Directory",-1)])]),_:1})])]),s("div",ti,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[129]||(l[129]=[r("mdi-file",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[130]||(l[130]=[r("/etc/config.yaml",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[131]||(l[131]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[132]||(l[132]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[133]||(l[133]=[r("/apps/flux[appid]/config.yaml",-1)])]),_:1}),l[136]||(l[136]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(p,{size:"20",color:"warning",class:"mr-2 sync-icon-animated"},{default:a(()=>[...l[134]||(l[134]=[r("mdi-sync",-1)])]),_:1}),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[135]||(l[135]=[r("File",-1)])]),_:1})]),s("div",ai,[s("div",oi,[o(p,{size:"18"},{default:a(()=>[...l[137]||(l[137]=[r("mdi-file",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[138]||(l[138]=[r("/etc/config.yaml",-1)])]),_:1})]),s("div",si,[o(p,{size:"18"},{default:a(()=>[...l[139]||(l[139]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[140]||(l[140]=[r("/apps/flux[appid]/config.yaml",-1)])]),_:1})]),s("div",li,[o(p,{size:"20",color:"warning",class:"sync-icon-animated"},{default:a(()=>[...l[141]||(l[141]=[r("mdi-sync",-1)])]),_:1}),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[142]||(l[142]=[r("File",-1)])]),_:1})])])])]),s("div",ni,[s("div",ri,[o(p,{icon:"mdi-numeric-5-circle",size:"20",class:"mr-2"}),s("span",ii,d(u(h)("core.volumePathBuilder.exampleComponentLabel")),1)]),s("div",ui,d(u(h)("core.volumePathBuilder.exampleComponentDesc")),1),l[180]||(l[180]=s("div",{class:"example-string mb-3"},[s("code",{class:"d-block pa-2"},"/app|c:0:data:/db|c:0:backups:/restore")],-1)),s("div",di,[s("div",ci,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[144]||(l[144]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[145]||(l[145]=[r("/app",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[146]||(l[146]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[147]||(l[147]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[148]||(l[148]=[r("/apps/flux[appid]/appdata",-1)])]),_:1}),l[150]||(l[150]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[149]||(l[149]=[r("Primary",-1)])]),_:1})]),s("div",pi,[s("div",mi,[o(p,{size:"18"},{default:a(()=>[...l[151]||(l[151]=[r("mdi-database",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[152]||(l[152]=[r("/app",-1)])]),_:1})]),s("div",fi,[o(p,{size:"18"},{default:a(()=>[...l[153]||(l[153]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[154]||(l[154]=[r("/apps/flux[appid]/appdata",-1)])]),_:1})]),s("div",vi,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[155]||(l[155]=[r("Primary",-1)])]),_:1})])]),s("div",gi,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[156]||(l[156]=[r("mdi-vector-link",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[157]||(l[157]=[r("/db",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[158]||(l[158]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[159]||(l[159]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[160]||(l[160]=[r("/apps/fluxCOMP0/data",-1)])]),_:1}),l[162]||(l[162]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[161]||(l[161]=[r("Component Dir",-1)])]),_:1})]),s("div",bi,[s("div",hi,[o(p,{size:"18"},{default:a(()=>[...l[163]||(l[163]=[r("mdi-vector-link",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[164]||(l[164]=[r("/db",-1)])]),_:1})]),s("div",yi,[o(p,{size:"18"},{default:a(()=>[...l[165]||(l[165]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[166]||(l[166]=[r("/apps/fluxCOMP0/data",-1)])]),_:1})]),s("div",xi,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[167]||(l[167]=[r("Component Dir",-1)])]),_:1})])]),s("div",wi,[o(p,{size:"18",class:"mr-2"},{default:a(()=>[...l[168]||(l[168]=[r("mdi-folder-network",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"mr-2 font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[169]||(l[169]=[r("/restore",-1)])]),_:1}),o(p,{size:"20",class:"mx-2 text-medium-emphasis"},{default:a(()=>[...l[170]||(l[170]=[r("mdi-arrow-left-bold",-1)])]),_:1}),o(p,{size:"18",class:"mr-1"},{default:a(()=>[...l[171]||(l[171]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"mr-2 font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[172]||(l[172]=[r("/apps/fluxCOMP0/backups",-1)])]),_:1}),l[174]||(l[174]=s("div",{style:{"flex-grow":"1"}},null,-1)),o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[173]||(l[173]=[r("Component Dir",-1)])]),_:1})]),s("div",_i,[s("div",ki,[o(p,{size:"18"},{default:a(()=>[...l[175]||(l[175]=[r("mdi-folder-network",-1)])]),_:1}),o(z,{size:"small",color:"success",variant:"tonal",class:"font-weight-medium",style:{"background-color":"rgba(var(--v-theme-success), 0.16) !important",color:"rgb(var(--v-theme-success)) !important"}},{default:a(()=>[...l[176]||(l[176]=[r("/restore",-1)])]),_:1})]),s("div",Pi,[o(p,{size:"18"},{default:a(()=>[...l[177]||(l[177]=[r("mdi-harddisk",-1)])]),_:1}),o(z,{size:"small",color:"grey",variant:"tonal",class:"font-mono",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[178]||(l[178]=[r("/apps/fluxCOMP0/backups",-1)])]),_:1})]),s("div",Mi,[o(z,{size:"x-small",variant:"flat",color:"grey",style:{"background-color":"rgba(var(--v-theme-on-surface), 0.12) !important",color:"rgb(var(--v-theme-on-surface)) !important"}},{default:a(()=>[...l[179]||(l[179]=[r("Component Dir",-1)])]),_:1})])])])]),s("h4",Si,[o(p,{icon:"mdi-shield-check",size:"22",class:"mr-2"}),s("strong",null,d(u(h)("core.volumePathBuilder.rulesTitle")),1)]),s("div",$i,[s("div",zi,[s("div",Ci,[s("div",Vi,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[181]||(l[181]=s("div",{class:"text-caption"},"First entry must be Primary type (cannot reference another component)",-1))])]),s("div",Ai,[s("div",Ti,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[182]||(l[182]=s("div",{class:"text-caption"},"Container paths must be unique (no duplicates)",-1))])]),s("div",Ei,[s("div",Di,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[183]||(l[183]=s("div",{class:"text-caption"},"Host subdirectories/filenames must be unique within the component",-1))])]),s("div",Ni,[s("div",Li,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[184]||(l[184]=s("div",{class:"text-caption"},'All container paths must start with / and cannot contain special characters (: | < > " \\ ? *)',-1))])]),s("div",Ii,[s("div",Fi,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[185]||(l[185]=s("div",{class:"text-caption"},"Component references (Mode with numbers) can only point to earlier components",-1))])]),s("div",Ui,[s("div",Bi,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[186]||(l[186]=s("div",{class:"text-caption"},"When sync is enabled on the primary mount, all mounts in that component are synchronized across instances",-1))])]),s("div",Oi,[s("div",Ri,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[187]||(l[187]=s("div",{class:"text-caption"},"File mount container paths must include the filename with extension",-1))])]),s("div",ji,[s("div",Wi,[o(p,{icon:"mdi-check-circle",size:"16",color:"success",class:"mr-2"}),l[188]||(l[188]=s("div",{class:"text-caption"},"Reserved host folder names: appdata, backup",-1))])])])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},Hi=wa(Ji,[["__scopeId","data-v-8f767bd0"]]),Gi={class:"d-flex align-center"},qi={class:"text-h6 text-white"},Ki={class:"text-body-2"},Zi={key:0,class:"drop-overlay"},Yi={class:"text-h6 mt-2"},Xi={class:"d-flex align-center justify-center mt-3"},Qi={__name:"ImportJsonDialog",props:{modelValue:{type:Boolean,required:!0},type:{type:String,required:!0,validator:x=>["env","commands"].includes(x)}},emits:["update:modelValue","import"],setup(x,{emit:c}){const i=x,Ve=c,{t:h}=_a(),R=k(""),J=k(""),Se=k(!1),Fe=k(null);ie(()=>i.modelValue,j=>{j&&(R.value="",J.value="",Se.value=!1)});const X=j=>{Se.value=!0},me=j=>{Se.value=!1},$e=async j=>{Se.value=!1;const N=j.dataTransfer.files;N.length>0&&await ze(N[0])},pe=()=>{Fe.value?.click()},B=async j=>{const N=j.target.files;N.length>0&&await ze(N[0])},ze=async j=>{if(!j.name.endsWith(".json")&&!j.name.endsWith(".txt")){J.value=h("components.dialogs.importJsonDialog.invalidFileType");return}try{const N=await j.text();R.value=N,J.value=""}catch(N){J.value=h("components.dialogs.importJsonDialog.failedToReadFile",{message:N.message})}},G=()=>{Ve("update:modelValue",!1)},_e=()=>{J.value="";try{const j=JSON.parse(R.value);if(!Array.isArray(j)){J.value=h("components.dialogs.importJsonDialog.invalidJsonArray");return}if(j.length===0){J.value=h("components.dialogs.importJsonDialog.emptyArray");return}if(i.type==="env"){const N=[];for(const Ae of j){if(typeof Ae!="string"||!Ae.includes("=")){J.value=h("components.dialogs.importJsonDialog.invalidEnvFormat",{item:Ae});return}const[Oe,...wt]=Ae.split("="),Ue=wt.join("=");if(!Oe||!Ue){J.value=h("components.dialogs.importJsonDialog.invalidEnvEntry",{item:Ae});return}N.push({key:Oe,value:Ue})}Ve("import",N)}else{const N=j.filter(Ae=>typeof Ae=="string"&&Ae.trim());if(N.length===0){J.value=h("components.dialogs.importJsonDialog.noValidCommands");return}Ve("import",N)}G()}catch(j){J.value=h("components.dialogs.importJsonDialog.invalidJsonFormat",{message:j.message})}};return(j,N)=>(b(),I(Rt,{"model-value":x.modelValue,"onUpdate:modelValue":N[1]||(N[1]=Ae=>j.$emit("update:modelValue",Ae)),"max-width":"600",persistent:""},{default:a(()=>[o(Me,null,{default:a(()=>[o(lt,{class:"d-flex align-center justify-space-between bg-primary"},{default:a(()=>[s("div",Gi,[o(p,{color:"white",size:"24",class:"mr-2"},{default:a(()=>[...N[2]||(N[2]=[r("mdi-file-import-outline",-1)])]),_:1}),s("span",qi,d(u(h)("components.dialogs.importJsonDialog.title",{type:x.type==="env"?u(h)("components.dialogs.importJsonDialog.environmentVariables"):u(h)("components.dialogs.importJsonDialog.commands")})),1)]),o(L,{icon:"mdi-close",variant:"text",size:"small",color:"white",onClick:G})]),_:1}),o(De,{class:"pt-6"},{default:a(()=>[o(Ie,{type:"info",variant:"tonal",class:"mb-4",density:"compact"},{default:a(()=>[s("div",Ki,[s("strong",null,d(u(h)("components.dialogs.importJsonDialog.format"))+":",1),r(" "+d(u(h)("components.dialogs.importJsonDialog.formatHint"))+" ",1),x.type==="env"?(b(),P(de,{key:0},[N[3]||(N[3]=s("br",null,null,-1)),r(d(u(h)("components.dialogs.importJsonDialog.example"))+": ",1),N[4]||(N[4]=s("code",null,'["KEY=value", "FOO=bar", "PORT=3000"]',-1))],64)):(b(),P(de,{key:1},[N[5]||(N[5]=s("br",null,null,-1)),r(d(u(h)("components.dialogs.importJsonDialog.example"))+": ",1),N[6]||(N[6]=s("code",null,'["npm install", "npm run build", "node server.js"]',-1))],64))])]),_:1}),s("div",{class:Mt(["drop-zone",{"drop-zone-active":Se.value}]),onDragover:St(X,["prevent"]),onDragleave:St(me,["prevent"]),onDrop:St($e,["prevent"])},[o(Go,{modelValue:R.value,"onUpdate:modelValue":N[0]||(N[0]=Ae=>R.value=Ae),placeholder:u(h)("components.dialogs.importJsonDialog.placeholder"),rows:"8",variant:"outlined",density:"comfortable",color:"primary","auto-grow":"","persistent-placeholder":"","error-messages":J.value},null,8,["modelValue","placeholder","error-messages"]),Se.value?(b(),P("div",Zi,[o(p,{size:"48",color:"primary"},{default:a(()=>[...N[7]||(N[7]=[r("mdi-file-upload",-1)])]),_:1}),s("div",Yi,d(u(h)("components.dialogs.importJsonDialog.dropFileHere")),1)])):C("",!0)],34),s("div",Xi,[o(L,{variant:"outlined",color:"grey",density:"comfortable",onClick:pe,class:"text-none"},{default:a(()=>[o(p,{size:"20",class:"mr-2"},{default:a(()=>[...N[8]||(N[8]=[r("mdi-folder-open-outline",-1)])]),_:1}),r(" "+d(u(h)("components.dialogs.importJsonDialog.browse")),1)]),_:1}),s("input",{ref_key:"fileInput",ref:Fe,type:"file",accept:".json,.txt,text/plain,application/json",style:{display:"none"},onChange:B},null,544)])]),_:1}),o(Ot,{class:"px-6 pb-6"},{default:a(()=>[o(Pt),o(L,{color:"error",variant:"tonal",density:"comfortable",onClick:G,"min-width":"100"},{default:a(()=>[r(d(u(h)("common.buttons.cancel")),1)]),_:1}),o(L,{color:"primary",variant:"flat",density:"comfortable",disabled:!R.value.trim(),onClick:_e,"min-width":"100"},{default:a(()=>[r(d(u(h)("common.buttons.import")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Jo=wa(Qi,[["__scopeId","data-v-878f0d18"]]),xt=8,eu=202e4;function jt(x){return x>=eu?88e3:22e3}function tu(x){const c={name:x.name,description:x.description,repotag:x.repotag,ports:[x.port],containerPorts:[x.containerPort],environmentParameters:x.enviromentParameters||[],commands:x.commands||[],containerData:x.containerData,cpu:x.cpu||0,ram:x.ram||0,hdd:x.hdd||0,repoauth:""};return{version:xt,name:x.name,description:x.description,contacts:[],expire:jt(x.height),geolocation:[],instances:3,nodes:[],owner:x.owner,staticip:!1,compose:[c],enterprise:"",hash:x.hash,height:x.height}}function au(x){const c={name:x.name,description:x.description,repotag:x.repotag,ports:(x.ports||[]).map(i=>typeof i=="string"?parseInt(i,10):i),containerPorts:(x.containerPorts||[]).map(i=>typeof i=="string"?parseInt(i,10):i),environmentParameters:x.enviromentParameters,commands:x.commands,domains:x.domains,containerData:x.containerData,cpu:x.cpu||0,ram:x.ram||0,hdd:x.hdd||0,repoauth:""};return{version:xt,name:x.name,description:x.description,contacts:[],expire:jt(x.height),geolocation:[],instances:3,nodes:[],owner:x.owner,staticip:!1,compose:[c],enterprise:"",hash:x.hash,height:x.height}}function ou(x){const c={name:x.name,description:x.description,repotag:x.repotag,ports:(x.ports||[]).map(i=>typeof i=="string"?parseInt(i,10):i),containerPorts:(x.containerPorts||[]).map(i=>typeof i=="string"?parseInt(i,10):i),environmentParameters:x.enviromentParameters,commands:x.commands,domains:x.domains,containerData:x.containerData,cpu:x.cpu||0,ram:x.ram||0,hdd:x.hdd||0,repoauth:""};return{version:xt,name:x.name,description:x.description,contacts:[],expire:jt(x.height),geolocation:[],instances:x.instances||3,nodes:[],owner:x.owner,staticip:!1,compose:[c],enterprise:"",hash:x.hash,height:x.height}}function su(x){const c=x.compose.map(i=>({name:i.name,description:i.description,repotag:i.repotag,ports:i.ports,containerPorts:i.containerPorts,environmentParameters:i.environmentParameters,commands:i.commands,domains:i.domains,containerData:i.containerData,cpu:i.cpu||0,ram:i.ram||0,hdd:i.hdd||0,repoauth:""}));return{version:xt,name:x.name,description:x.description,contacts:[],expire:jt(x.height),geolocation:[],instances:x.instances||3,nodes:[],staticip:!1,enterprise:"",compose:c,hash:x.hash,height:x.height}}function lu(x){const c=x.compose.map(i=>({name:i.name,description:i.description,repotag:i.repotag,ports:i.ports,containerPorts:i.containerPorts,environmentParameters:i.environmentParameters,commands:i.commands,domains:i.domains,containerData:i.containerData,cpu:i.cpu||0,ram:i.ram||0,hdd:i.hdd||0,repoauth:""}));return{version:xt,name:x.name,description:x.description,contacts:x.contacts||[],expire:jt(x.height),geolocation:x.geolocation||[],instances:x.instances||3,nodes:[],staticip:!1,enterprise:"",compose:c,hash:x.hash,height:x.height}}function nu(x){const c=x.compose.map(i=>({name:i.name,description:i.description,repotag:i.repotag,ports:i.ports,containerPorts:i.containerPorts,environmentParameters:i.environmentParameters,commands:i.commands,domains:i.domains,containerData:i.containerData,cpu:i.cpu||0,ram:i.ram||0,hdd:i.hdd||0,repoauth:""}));return{version:xt,name:x.name,description:x.description,contacts:x.contacts||[],expire:x.expire||jt(x.height),geolocation:x.geolocation||[],instances:x.instances||3,nodes:[],staticip:!1,enterprise:"",compose:c,hash:x.hash,height:x.height}}function ru(x){const c=x.compose.map(i=>({name:i.name,description:i.description,repotag:i.repotag,ports:i.ports,containerPorts:i.containerPorts,environmentParameters:i.environmentParameters,commands:i.commands,domains:i.domains,containerData:i.containerData,cpu:i.cpu||0,ram:i.ram||0,hdd:i.hdd||0,repoauth:i.repoauth||""}));return{version:xt,name:x.name,description:x.description,contacts:x.contacts||[],expire:x.expire||jt(x.height),geolocation:x.geolocation||[],instances:x.instances||3,nodes:[],staticip:x.staticip||!1,enterprise:"",compose:c,hash:x.hash,height:x.height}}function lo(x){if(!x||!x.version)throw new Error("Invalid app specification");switch(x.version){case 1:return tu(x);case 2:return au(x);case 3:return ou(x);case 4:return su(x);case 5:return lu(x);case 6:return nu(x);case 7:return ru(x);case 8:return{...x};default:if(x.version>xt)return console.warn(`App version ${x.version} is newer than supported version ${xt}. Returning as-is.`),{...x};throw new Error(`Unsupported app specification version: ${x.version}`)}}const iu={class:"ml-2 flex-grow-1"},uu={key:0,class:"mb-3"},du={key:1},cu={class:"text-h6 mb-2"},pu={class:"text-caption text-medium-emphasis"},mu={key:0,class:"drop-overlay"},fu={class:"text-h6 mt-2"},vu={key:2,class:"d-flex flex-column",style:{"min-height":"0"}},gu={class:"monaco-editor-wrapper paste-mode-editor"},bu={class:"monaco-loader-overlay"},hu={key:3,class:"d-flex flex-column"},yu={class:"d-flex align-center w-100 flex-grow-1"},xu={class:"flex-grow-1"},wu={class:"monaco-editor-wrapper"},_u={class:"monaco-loader-overlay"},ku={class:"d-flex align-center"},Pu={__name:"ImportSpecDialog",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","import"],setup(x,{emit:c}){const i=x,Ve=c,h=Nl(()=>ql(()=>import("./monaco-T-LZewlR.js"),__vite__mapDeps([0,1])).then(F=>F.VueMonacoEditor)),{t:R}=_a(),J=qo(),Se=k(i.modelValue),Fe=k(!1),X=k(null),me=k(null),$e=k(""),pe=k(!1),B=k("file"),ze=k(""),G=k(!1),_e=k({show:!1,message:"",color:"error",icon:"mdi-alert-circle",timeout:5e3}),j=le(()=>J.global.name.value==="dark"?"vs-dark":"vs"),N={automaticLayout:!0,formatOnType:!0,formatOnPaste:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on",fontSize:13,lineNumbers:"on",glyphMargin:!1,folding:!0,lineDecorationsWidth:0,lineNumbersMinChars:3,contextmenu:!0,readOnly:!1,domReadOnly:!1,disableMonospaceOptimizations:!0,fontLigatures:!1};ie(()=>i.modelValue,F=>{Se.value=F}),ie(Se,F=>{F||(Ve("update:modelValue",!1),setTimeout(()=>{me.value=null,$e.value="",pe.value=!1,B.value="file",ze.value="",G.value=!1},300))});function Ae(){X.value?.click()}function Oe(){Se.value=!1}function wt(){me.value=null,$e.value="",pe.value=!1}async function Ue(){try{const F=await navigator.clipboard.readText();ze.value=F,_e.value.message=R("components.dialogs.importJsonDialog.contentPasted"),_e.value.color="success",_e.value.icon="mdi-check-circle",_e.value.show=!0}catch(F){console.error("Failed to read clipboard:",F),_e.value.message=R("components.dialogs.importJsonDialog.clipboardFailed"),_e.value.color="error",_e.value.icon="mdi-alert-circle",_e.value.show=!0}}function Te(){try{let F;try{F=JSON.parse(ze.value)}catch{F=Qa.load(ze.value)}const O=ke(F);if(O?F=O:F.version&&F.version<8&&(F=lo(F)),!F.name||typeof F.name!="string")throw new Error(R("components.dialogs.importJsonDialog.invalidName"));if(!F.compose||!Array.isArray(F.compose))throw new Error(R("components.dialogs.importJsonDialog.invalidCompose"));if(F.compose.length===0)throw new Error(R("components.dialogs.importJsonDialog.emptyCompose"));me.value=F,$e.value=JSON.stringify(F,null,2),pe.value=!1}catch(F){console.error("Error parsing pasted content:",F),_e.value.message=F.message,_e.value.show=!0}}function $t(){try{const F=JSON.parse($e.value);if(!F.name||typeof F.name!="string")throw new Error(R("components.dialogs.importJsonDialog.invalidName"));if(!F.compose||!Array.isArray(F.compose))throw new Error(R("components.dialogs.importJsonDialog.invalidCompose"));if(F.compose.length===0)throw new Error(R("components.dialogs.importJsonDialog.emptyCompose"));F.version=8,delete F.owner,Ve("import",F),Oe()}catch(F){console.error("Error parsing edited JSON:",F),_e.value.message=F.message,_e.value.show=!0}}async function zt(F){const O=F.target.files[0];O&&await Re(O),F.target.value=""}async function Ct(F){Fe.value=!1;const O=F.dataTransfer.files[0];O&&await Re(O)}function ke(F){const O=F.services&&typeof F.services=="object";if(F.version&&(F.version.toString().startsWith("2")||F.version.toString().startsWith("3")),!O)return null;const K=F.services,je=[];return Object.entries(K).forEach(([he,q])=>{const $={name:he,description:q.labels?.description||q.container_name||`${he} component`,repotag:q.image||"",ports:[],domains:[],environmentParameters:[],commands:[],containerPorts:[],containerData:"",cpu:.5,ram:512,hdd:5,repoauth:""};if(q.ports&&Array.isArray(q.ports)&&q.ports.forEach(l=>{const w=String(l).split("/")[0].split(":");if(w.length===2){const[U,Z]=w;$.ports.push(Number(U)),$.containerPorts.push(Number(Z))}else w.length===1&&($.ports.push(Number(w[0])),$.containerPorts.push(Number(w[0])))}),q.environment&&(Array.isArray(q.environment)?$.environmentParameters=q.environment:typeof q.environment=="object"&&($.environmentParameters=Object.entries(q.environment).map(([l,y])=>`${l}=${y}`))),q.command?$.commands=Array.isArray(q.command)?q.command:[String(q.command)]:q.entrypoint&&($.commands=Array.isArray(q.entrypoint)?q.entrypoint:[String(q.entrypoint)]),q.volumes&&Array.isArray(q.volumes)&&q.volumes.length>0){const y=String(q.volumes[0]).split(":");$.containerData=y.length>1?y[1]:y[0]}if(q.deploy?.resources?.limits){const l=q.deploy.resources.limits;if(l.cpus){const y=String(l.cpus);$.cpu=y.endsWith("m")?parseFloat(y)/1e3:parseFloat(y)}if(l.memory){const y=String(l.memory).toUpperCase();y.endsWith("G")?$.ram=parseFloat(y)*1024:y.endsWith("M")?$.ram=parseFloat(y):$.ram=parseFloat(y)/(1024*1024)}}je.push($)}),{version:8,name:F.name||"importeddockerapp",description:F.description||"Imported from Docker Compose",compose:je,contacts:[],geolocation:[],instances:3,staticip:!1,enterprise:"",nodes:[]}}async function Re(F){try{const O=await F.text();let K;if(F.name.endsWith(".json"))K=JSON.parse(O);else if(F.name.endsWith(".yaml")||F.name.endsWith(".yml"))K=Qa.load(O);else try{K=JSON.parse(O)}catch{K=Qa.load(O)}const je=ke(K);if(je?K=je:K.version&&K.version<8&&(K=lo(K)),!K.name||typeof K.name!="string")throw new Error(R("components.dialogs.importJsonDialog.invalidName"));if(!K.compose||!Array.isArray(K.compose))throw new Error(R("components.dialogs.importJsonDialog.invalidCompose"));if(K.compose.length===0)throw new Error(R("components.dialogs.importJsonDialog.emptyCompose"));me.value=K,$e.value=JSON.stringify(K,null,2),pe.value=!1}catch(O){console.error("Error parsing file:",O),_e.value.message=O.message,_e.value.show=!0}}return(F,O)=>(b(),I(Rt,{modelValue:Se.value,"onUpdate:modelValue":O[8]||(O[8]=K=>Se.value=K),"max-width":"600",persistent:""},{default:a(()=>[o(Me,{rounded:"xl",class:"d-flex flex-column import-dialog-card"},{default:a(()=>[o(lt,{class:"bg-primary text-white dialog-title flex-shrink-0 d-flex align-center"},{default:a(()=>[o(p,null,{default:a(()=>[...O[9]||(O[9]=[r("mdi-file-import",-1)])]),_:1}),s("span",iu,d(u(R)("components.dialogs.importJsonDialog.title")),1),o(L,{icon:"mdi-close",variant:"text",size:"small",onClick:Oe,class:"close-title-btn"})]),_:1}),o(De,{class:"px-6 pt-4 pb-6 flex-grow-1 d-flex flex-column",style:{overflow:"hidden","min-height":"0"}},{default:a(()=>[me.value?C("",!0):(b(),P("div",uu,[o(Ko,{modelValue:B.value,"onUpdate:modelValue":O[0]||(O[0]=K=>B.value=K),color:"primary",variant:"outlined",mandatory:"",density:"compact",class:"w-100 mode-toggle"},{default:a(()=>[o(L,{value:"file",class:"flex-grow-1"},{default:a(()=>[o(p,{start:""},{default:a(()=>[...O[10]||(O[10]=[r("mdi-file-upload",-1)])]),_:1}),r(" "+d(u(R)("components.dialogs.importJsonDialog.uploadFile")),1)]),_:1}),o(L,{value:"paste",class:"flex-grow-1"},{default:a(()=>[o(p,{start:""},{default:a(()=>[...O[11]||(O[11]=[r("mdi-content-paste",-1)])]),_:1}),r(" "+d(u(R)("components.dialogs.importJsonDialog.pasteSpecification")),1)]),_:1})]),_:1},8,["modelValue"])])),!me.value&&B.value==="file"?(b(),P("div",du,[s("div",{class:Mt(["drop-zone",{"drop-zone-active":Fe.value}]),onClick:Ae,onDrop:St(Ct,["prevent"]),onDragover:O[1]||(O[1]=St(K=>Fe.value=!0,["prevent"])),onDragleave:O[2]||(O[2]=St(K=>Fe.value=!1,["prevent"]))},[o(p,{size:"48",color:"grey",class:"mb-4"},{default:a(()=>[...O[12]||(O[12]=[r("mdi-file-import",-1)])]),_:1}),s("div",cu,d(u(R)("components.dialogs.importJsonDialog.dropFileHere")),1),s("div",pu,d(u(R)("components.dialogs.importJsonDialog.fileTypeHint")),1)],34),s("input",{ref_key:"fileInput",ref:X,type:"file",accept:".json,.yaml,.yml,application/json,text/yaml",style:{display:"none"},onChange:zt},null,544),Fe.value?(b(),P("div",mu,[o(p,{size:"48",color:"primary"},{default:a(()=>[...O[13]||(O[13]=[r("mdi-file-upload",-1)])]),_:1}),s("div",fu,d(u(R)("components.dialogs.importJsonDialog.dropFileHere")),1)])):C("",!0)])):C("",!0),!me.value&&B.value==="paste"?(b(),P("div",vu,[o(Ie,{type:"info",variant:"tonal",density:"compact",class:"mb-3"},{default:a(()=>[r(d(u(R)("components.dialogs.importJsonDialog.pasteHint")),1)]),_:1}),s("div",gu,[o(u(h),{value:ze.value,"onUpdate:value":O[3]||(O[3]=K=>ze.value=K),language:"yaml",options:N,theme:j.value,class:"monaco-editor",onMount:O[4]||(O[4]=K=>G.value=!0)},null,8,["value","theme"]),o(L,{icon:"",variant:"text",color:"secondary",class:"floating-paste-btn",size:"small",onClick:Ue},{default:a(()=>[o(p,{size:"18"},{default:a(()=>[...O[14]||(O[14]=[r("mdi-clipboard-arrow-down",-1)])]),_:1}),o(re,{activator:"parent",location:"left"},{default:a(()=>[r(d(u(R)("components.dialogs.importJsonDialog.pasteFromClipboard")),1)]),_:1})]),_:1}),oo(s("div",bu,[o(Ua,{icon:"mdi-content-paste","icon-size":50,title:u(R)("components.dialogs.importJsonDialog.loadingEditor"),message:""},null,8,["title"])],512),[[so,!G.value]])]),o(L,{color:"primary",variant:"flat",class:"mt-3",disabled:!ze.value.trim(),onClick:Te},{default:a(()=>[o(p,{start:"",size:"20"},{default:a(()=>[...O[15]||(O[15]=[r("mdi-file-check",-1)])]),_:1}),r(" "+d(u(R)("components.dialogs.importJsonDialog.loadSpecification")),1)]),_:1},8,["disabled"])])):C("",!0),me.value?(b(),P("div",hu,[o(Ie,{variant:"tonal",density:"compact",color:"info",class:"mb-3 review-alert"},{prepend:a(()=>[o(p,{color:"info",class:"align-self-center"},{default:a(()=>[...O[16]||(O[16]=[r("mdi-information",-1)])]),_:1})]),default:a(()=>[s("div",yu,[s("span",xu,d(u(R)("components.dialogs.importJsonDialog.reviewAndEdit")),1),o(L,{icon:"",variant:"text",color:"secondary",size:"default",onClick:wt},{default:a(()=>[o(p,{size:"24"},{default:a(()=>[...O[17]||(O[17]=[r("mdi-arrow-left-circle",-1)])]),_:1})]),_:1})])]),_:1}),s("div",wu,[o(u(h),{value:$e.value,"onUpdate:value":O[5]||(O[5]=K=>$e.value=K),language:"json",options:N,theme:j.value,class:"monaco-editor",onMount:O[6]||(O[6]=K=>pe.value=!0)},null,8,["value","theme"]),oo(s("div",_u,[o(Ua,{icon:"mdi-file-import","icon-size":50,title:u(R)("components.dialogs.importJsonDialog.loadingEditor"),message:""},null,8,["title"])],512),[[so,!pe.value]])])])):C("",!0)]),_:1}),me.value?(b(),I(Ot,{key:0,class:"dialog-actions flex-shrink-0 pt-4 pb-4"},{default:a(()=>[o(Pt),o(L,{color:"primary",variant:"flat",onClick:$t},{default:a(()=>[r(d(u(R)("components.dialogs.importJsonDialog.import")),1)]),_:1})]),_:1})):C("",!0)]),_:1}),o(ao,{modelValue:_e.value.show,"onUpdate:modelValue":O[7]||(O[7]=K=>_e.value.show=K),timeout:_e.value.timeout,color:_e.value.color,location:"top"},{default:a(()=>[s("div",ku,[_e.value.icon?(b(),I(p,{key:0,icon:_e.value.icon,class:"me-2"},null,8,["icon"])):C("",!0),s("span",null,d(_e.value.message),1)])]),_:1},8,["modelValue","timeout","color"])]),_:1},8,["modelValue"]))}},Mu=wa(Pu,[["__scopeId","data-v-a7d91917"]]),Su={class:"ml-2"},$u={class:"text-body-1 mb-4"},zu={class:"font-weight-bold mb-2"},Cu={class:"ml-2"},Vu={class:"font-weight-bold mb-2"},Au={class:"ml-2"},Tu={__name:"UpgradeSpecDialog",props:{modelValue:{type:Boolean,required:!0},currentVersion:{type:Number,required:!0},targetVersion:{type:Number,default:8}},emits:["update:modelValue","confirm"],setup(x,{emit:c}){const i=x,Ve=c,{t:h}=_a(),R=k(i.modelValue),J=le(()=>{const X=[];return i.currentVersion>=3&&i.currentVersion<=7&&X.push(h("components.dialogs.upgradeSpecDialog.warnings.tieredPricing")),i.currentVersion<5&&(X.push(h("components.dialogs.upgradeSpecDialog.warnings.customContacts")),X.push(h("components.dialogs.upgradeSpecDialog.warnings.customGeolocation"))),i.currentVersion<6&&X.push(h("components.dialogs.upgradeSpecDialog.warnings.customExpire")),i.currentVersion<=2&&X.push(h("components.dialogs.upgradeSpecDialog.warnings.portConversion")),X});ie(()=>i.modelValue,X=>{R.value=X}),ie(R,X=>{X||Ve("update:modelValue",!1)});function Se(){R.value=!1}function Fe(){Ve("confirm"),Se()}return(X,me)=>(b(),I(Rt,{modelValue:R.value,"onUpdate:modelValue":me[0]||(me[0]=$e=>R.value=$e),"max-width":"700",persistent:""},{default:a(()=>[o(Me,{rounded:"xl"},{default:a(()=>[o(lt,{class:"bg-primary text-white dialog-title d-flex align-center"},{default:a(()=>[o(p,null,{default:a(()=>[...me[1]||(me[1]=[r("mdi-upload",-1)])]),_:1}),s("span",Su,d(u(h)("components.dialogs.upgradeSpecDialog.title")),1)]),_:1}),o(De,{class:"px-6 pt-6 pb-0"},{default:a(()=>[s("div",$u,d(u(h)("components.dialogs.upgradeSpecDialog.upgradeInfo",{currentVersion:x.currentVersion,targetVersion:x.targetVersion})),1),o(Ie,{type:"warning",variant:"tonal",class:"mb-4"},{default:a(()=>[s("div",zu,d(u(h)("components.dialogs.upgradeSpecDialog.dataLossWarning")),1),s("ul",Cu,[(b(!0),P(de,null,Qe(J.value,($e,pe)=>(b(),P("li",{key:pe},d($e),1))),128))])]),_:1}),o(Ie,{type:"info",variant:"tonal"},{default:a(()=>[s("div",Vu,d(u(h)("components.dialogs.upgradeSpecDialog.nextSteps")),1),s("ul",Au,[s("li",null,d(u(h)("components.dialogs.upgradeSpecDialog.step1",{targetVersion:x.targetVersion})),1),s("li",null,d(u(h)("components.dialogs.upgradeSpecDialog.step2")),1),s("li",null,d(u(h)("components.dialogs.upgradeSpecDialog.step3")),1)])]),_:1})]),_:1}),o(Ot,{class:"dialog-actions"},{default:a(()=>[o(Pt),o(L,{color:"error",variant:"text",onClick:Se},{default:a(()=>[r(d(u(h)("common.buttons.cancel")),1)]),_:1}),o(L,{color:"warning",variant:"flat",onClick:Fe},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...me[2]||(me[2]=[r("mdi-upload",-1)])]),_:1}),r(" "+d(u(h)("components.dialogs.upgradeSpecDialog.upgrade")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Eu=wa(Tu,[["__scopeId","data-v-926edfc7"]]),Du={class:"d-flex w-100 align-center justify-space-between border-frame"},Nu={class:"d-flex align-center"},Lu={class:"border-frame-title"},Iu={class:"d-flex align-center gap-4"},Fu={key:0,class:"mb-2",style:{"margin-top":"-8px"}},Uu={key:1,class:"d-flex align-center justify-space-between flex-wrap gap-4 tabs-container-overflow mt-6"},Bu={class:"d-flex align-center tab-content"},Ou={class:"d-none d-sm-inline"},Ru={key:0},ju={key:1},Wu={key:2},Ju={key:0},Hu={key:1},Gu={key:2},qu={key:2,class:"mt-4"},Ku={key:1,class:"pa-3"},Zu={key:0,class:"px-3"},Yu={class:"d-flex flex-column gap-2 mt-2"},Xu={class:"mr-2"},Qu={class:"mr-2"},ed={class:"d-flex flex-column gap-2 mt-2"},td={class:"mr-2"},ad={style:{height:"32px",display:"flex","align-items":"center"}},od={class:"mr-2"},sd={key:0},ld={key:1,class:"px-3"},nd={class:"d-flex flex-column gap-2 mt-2"},rd={class:"mr-2"},id={class:"mr-2"},ud={class:"d-flex flex-column gap-2 mt-2"},dd={class:"mr-2"},cd={class:"mr-2"},pd={class:"mt-4 px-3"},md={key:3,class:"mt-4"},fd={style:{"list-style":"none",padding:"0","padding-left":"16px"}},vd={class:"d-flex align-start mb-3"},gd={class:"d-flex align-start mb-3"},bd={class:"d-flex align-start mb-4"},hd={class:"pa-2"},yd={class:"d-flex align-center"},xd={class:"text-body-1"},wd=["disabled"],_d={key:0},kd={key:1},Pd={key:1,class:"d-flex align-center mb-3"},Md={class:"border rounded pa-3"},Sd={class:"d-flex align-center justify-space-between mb-2"},$d={key:0,class:"mb-2 mt-2"},zd={class:"d-flex align-center justify-space-between mb-1"},Cd={class:"d-flex align-center"},Vd={class:"mb-5"},Ad={class:"d-flex justify-space-between align-center px-3"},Td={style:{"line-height":"1.25","font-size":"0.875rem"}},Ed={class:"text-caption grey--text",style:{"line-height":"1.25","white-space":"nowrap"}},Dd={key:0,class:"px-3",style:{"font-size":"0.8125rem"}},Nd={key:1,class:"d-flex align-center px-3",style:{"font-size":"0.875rem",color:"#ff9800"}},Ld={key:2,style:{color:"red"}},Id={key:1,class:"d-flex align-center mb-1 mt-4"},Fd={key:2,class:"d-flex flex-wrap gap-4 mt-1 pa-2"},Ud={class:"d-flex align-center pa-2 switch-container"},Bd={class:"d-flex align-center pa-2 switch-container"},Od={class:"pa-4"},Rd={class:"text-center"},jd={class:"d-flex align-center justify-center flex-wrap gap-1"},Wd={class:"d-flex justify-center mt-2 mb-2"},Jd={class:"mt-2"},Hd={class:"text-center"},Gd={class:"d-flex align-center justify-center flex-wrap gap-1"},qd={class:"d-flex justify-center mt-2 mb-2"},Kd={class:"mt-2"},Zd={class:"pa-4"},Yd={class:"d-flex justify-space-between align-center mb-3"},Xd={class:"d-flex align-center tab-content"},Qd={class:"d-none d-sm-inline"},ec={class:"d-flex align-center mb-3 mt-2"},tc={key:0},ac={key:1},oc={key:0},sc={key:1},lc={class:"d-flex align-center mb-3 mt-2"},nc={class:"text-subtitle-2"},rc={class:"d-flex align-center mb-3 mt-2"},ic={class:"text-subtitle-2"},uc={class:"d-flex flex-wrap gap-2 env-buttons-container"},dc={class:"env-btn-text"},cc={class:"env-btn-text"},pc={class:"text-left pa-2"},mc={class:"text-caption mb-2",style:{color:"inherit !important"}},fc={class:"text-caption mb-2",style:{color:"inherit !important"}},vc={class:"text-caption",style:{color:"#ff9800 !important"}},gc={class:"mb-3"},bc={class:"d-flex align-center mb-3"},hc={class:"border rounded d-flex flex-column justify-center",style:{"min-height":"60px"}},yc={key:1,class:"d-flex flex-wrap align-center gap-1 px-2 pb-2"},xc=["onClick"],wc={key:2,class:"mt-2"},_c={class:"d-flex align-center mb-2"},kc={class:"d-flex align-center gap-2"},Pc={class:"d-flex align-center justify-space-between w-100"},Mc={class:"text-h5 text-white"},Sc={class:"d-flex mb-4 align-center",style:{gap:"8px"}},$c={class:"bg-primary"},zc={style:{width:"56px",height:"40px","text-align":"right","padding-right":"8px"}},Cc={class:"text-right"},Vc={class:"d-flex align-center justify-space-between w-100"},Ac={class:"text-h5 text-white"},Tc={class:"d-flex mb-4 align-center gap-2"},Ec={class:"bg-primary"},Dc={class:"text-white"},Nc={style:{width:"40px","text-align":"right","padding-right":"8px"}},Lc={class:"d-flex align-center mb-3"},Ic={class:"border rounded pa-2"},Fc={class:"hardware-item"},Uc={class:"hardware-label-box"},Bc={class:"hardware-label-text"},Oc={class:"hardware-name"},Rc={class:"hardware-unit"},jc={class:"hardware-item"},Wc={class:"hardware-label-box"},Jc={class:"hardware-label-text"},Hc={class:"hardware-name"},Gc={class:"hardware-unit"},qc={class:"hardware-item"},Kc={class:"hardware-label-box hardware-label-box-storage"},Zc={class:"hardware-label-text"},Yc={class:"hardware-name"},Xc={class:"hardware-unit"},Qc={class:"hardware-container"},ep={class:"hardware-box-with-input"},tp={class:"hardware-label-content"},ap={class:"hardware-label-text"},op={class:"hardware-name"},sp={class:"hardware-unit"},lp={class:"hardware-box-with-input"},np={class:"hardware-label-content"},rp={class:"hardware-label-text"},ip={class:"hardware-name"},up={class:"hardware-unit"},dp={class:"hardware-box-with-input"},cp={class:"hardware-label-content"},pp={class:"hardware-label-text"},mp={class:"hardware-name"},fp={class:"hardware-unit"},vp={class:"pa-4"},gp={key:0},bp={class:"d-flex gap-2"},hp={class:"px-4 pt-3 pb-2"},yp={class:"d-flex gap-2 align-center"},xp={class:"d-flex align-center mb-2"},wp={class:"ml-1"},_p={class:"actions-cell"},kp=["colspan"],Pp={class:"d-flex align-center mb-2"},Mp={class:"mr-2",style:{"min-width":"180px"}},Sp={class:"d-flex align-center mb-2"},$p={class:"mr-2",style:{"min-width":"180px"}},zp={class:"text-break"},Cp={class:"d-flex align-center mb-2"},Vp={class:"mr-2",style:{"min-width":"180px"}},Ap={class:"text-break"},Tp={key:0,class:"d-flex align-center mb-2"},Ep={class:"mr-2",style:{"min-width":"180px"}},Dp={class:"text-break"},Np={class:"d-flex align-center mb-2"},Lp={class:"mr-2",style:{"min-width":"180px"}},Ip={class:"d-flex align-center mb-2"},Fp={class:"mr-2",style:{"min-width":"180px"}},Up={class:"d-flex align-center mb-2"},Bp={class:"mr-2",style:{"min-width":"180px"}},Op={class:"d-flex align-center mb-2"},Rp={class:"mr-2",style:{"min-width":"180px"}},jp={class:"d-flex align-center mb-2"},Wp={class:"mr-2",style:{"min-width":"180px"}},Jp={class:"d-flex align-center mb-2"},Hp={class:"mr-2",style:{"min-width":"180px"}},Gp={key:1,class:"d-flex align-center mb-2"},qp={class:"mr-2",style:{"min-width":"180px"}},Kp={class:"text-center pa-4"},Zp={class:"mt-2 text-grey"},Yp={key:0,class:"d-flex justify-center align-center pa-3"},Xp={class:"mx-3"},Qp={key:1},em={class:"px-1 pt-1"},tm={class:"d-flex align-center justify-space-between pa-1 mb-4 review-header"},am={class:"d-flex align-center"},om={class:"text-h6 mb-0"},sm={class:"spec-row"},lm={class:"label-cell"},nm={class:"value-cell d-flex align-center justify-end pr-4"},rm={key:0,class:"d-flex justify-center"},im={key:1,class:"d-flex justify-center"},um={key:2,class:"d-flex justify-center"},dm={key:0,class:"mt-3"},cm={class:"spec-row mt-2"},pm={class:"label-cell"},mm={class:"value-cell d-flex align-center justify-end pr-4"},fm={class:"mr-1"},vm={class:"d-flex align-center flex-wrap gap-1 mr-1"},gm={class:"price-display"},bm={class:"d-none d-sm-inline",style:{"white-space":"nowrap"}},hm={class:"d-inline d-sm-none",style:{"white-space":"nowrap","font-size":"11px"}},ym={class:"d-flex align-center gap-1"},xm={class:"price-display"},wm={class:"d-none d-sm-inline",style:{"white-space":"nowrap"}},_m={class:"d-inline d-sm-none",style:{"white-space":"nowrap","font-size":"11px"}},km={class:"mr-1"},Pm={class:"spec-row mt-2"},Mm={class:"label-cell"},Sm={class:"value-cell d-flex align-center justify-end pr-4"},$m={class:"mr-1"},zm={class:"spec-row mt-2"},Cm={class:"label-cell"},Vm={class:"value-cell d-flex align-center justify-end pr-4"},Am={class:"spec-row mt-2"},Tm={class:"label-cell"},Em={class:"value-cell d-flex align-center justify-end pr-4"},Dm={key:0,class:"d-flex justify-center"},Nm={key:1,class:"d-flex justify-center"},Lm={class:"d-flex justify-center align-center mt-4"},Im={class:"mb-4"},Fm={class:"d-flex align-center justify-space-between"},Um={class:"d-flex gap-2"},Bm={class:"d-flex align-center"},Om={key:0},Rm={key:1},jm={key:2},Wm={key:3},Jm={class:"installation-output"},Hm={class:"d-flex align-center justify-start w-100"},Gm={class:"flex-grow-1"},qm={key:3},Km={key:2,class:"payment-monitoring-container"},Zm={class:"text-h4 font-weight-bold mb-3 text-success"},Ym={class:"text-body-1 mb-6 text-medium-emphasis"},Xm={key:3,class:"payment-monitoring-container"},Qm={class:"d-flex justify-center"},ef={class:"deployment-monitoring-wrapper"},tf={class:"deployment-message-box"},af={class:"d-flex align-center"},of={key:0},sf={key:1},lf={key:2},nf={class:"d-flex align-center"},rf={key:4,class:"payment-methods-container",style:{"margin-top":"0"}},uf={class:"payment-method-selection-label"},df={key:5,class:"payment-methods-container"},cf={class:"d-flex align-center"},pf={class:"text-white"},mf={class:"text-h6 font-weight-bold"},ff={class:"text-subtitle-2 opacity-90"},vf={class:"text-center"},gf={class:"payment-icons-grid mb-4"},bf=["src"],hf=["src"],yf={key:0,class:"mt-4 mb-4"},xf={key:1,class:"mb-4"},wf={class:"payment-field-container mb-2"},_f={class:"payment-field-label"},kf={class:"payment-field-value"},Pf={class:"payment-field-container mb-2"},Mf={class:"payment-field-label"},Sf={class:"payment-field-value"},$f={class:"payment-field-container"},zf={class:"payment-field-label"},Cf={class:"payment-field-value"},Vf={class:"d-flex align-center"},Af={class:"text-white"},Tf={class:"text-h6 font-weight-bold"},Ef={class:"text-subtitle-2 opacity-90"},Df={class:"text-center"},Nf={class:"wallet-icons-grid mb-4"},Lf=["src"],If=["src"],Ff={class:"text-center mb-4"},Uf={class:"mb-3"},Bf={class:"payment-field-container"},Of={class:"payment-field-label"},Rf={class:"payment-field-value"},jf={class:"payment-field-container"},Wf={class:"payment-field-label"},Jf={class:"payment-field-value"},Hf={class:"d-flex align-center"},Gf={class:"d-flex align-center"},qf={class:"text-h5 text-white"},Kf=["colspan"],Zf={class:"d-flex align-center mb-2"},Yf={class:"mr-2",style:{"min-width":"180px"}},Xf={class:"d-flex align-center mb-2"},Qf={class:"mr-2",style:{"min-width":"180px"}},ev={class:"text-break"},tv={class:"d-flex align-center mb-2"},av={class:"mr-2",style:{"min-width":"180px"}},ov={class:"text-break"},sv={key:0,class:"d-flex align-center mb-2"},lv={class:"mr-2",style:{"min-width":"180px"}},nv={class:"text-break"},rv={class:"d-flex align-center mb-2"},iv={class:"mr-2",style:{"min-width":"180px"}},uv={class:"d-flex align-center mb-2"},dv={class:"mr-2",style:{"min-width":"180px"}},cv={class:"d-flex align-center mb-2"},pv={class:"mr-2",style:{"min-width":"180px"}},mv={class:"d-flex align-center mb-2"},fv={class:"mr-2",style:{"min-width":"180px"}},vv={class:"d-flex align-center mb-2"},gv={class:"mr-2",style:{"min-width":"180px"}},bv={class:"d-flex align-center mb-2"},hv={class:"mr-2",style:{"min-width":"180px"}},yv={key:1,class:"d-flex align-center mb-2"},xv={class:"mr-2",style:{"min-width":"180px"}},wv={class:"mt-3"},_v={class:"ml-1"},kv={class:"text-center pa-4"},Pv={class:"mt-2 text-grey"},Mv={key:2,class:"d-flex justify-center align-center pa-3"},Sv={class:"mx-3"},$v={class:"text-h6"},zv={class:"text-body-1 mb-3"},Cv={class:"text-body-2 text-medium-emphasis"},Vv={class:"d-flex align-center"},Av=1,Ho=120,ye=202e4,ea=88e3,Tv={__name:"SubscriptionManager",props:{appSpec:Object,newApp:Boolean,executeLocalCommand:Function,resetTrigger:Number,isRedeploy:Boolean,instanceReady:Boolean,initialAction:String},emits:["specConverted"],setup(x){const c=x,{t:i}=_a(),Ve=xt,h=le(()=>c.appSpec?.version||Ve),R=le(()=>({supportsInstances:h.value>=3,supportsCompose:h.value>=4,supportsContacts:h.value>=5,supportsGeolocation:h.value>=5,supportsExpire:h.value>=6,supportsNodes:h.value>=7,supportsStaticIp:h.value>=7,supportsRepoAuth:h.value>=7})),J=k(""),Se=k(Date.now()),Fe=le(()=>c.newApp?"fluxappregister":"fluxappupdate"),X=k(null),me=k(null),$e=k(localStorage.getItem("loginType")),pe=k(!1),B=k(!1),ze=k(null),G=k(0),_e=k(0),j=k(!1),N=k(c.initialAction||"renewal"),Ae=k(!1),Oe=k(!1),wt=k(!1),Ue=k(!1),Te=k(sessionStorage.getItem("flux-tos-accepted")==="true"),$t=k(!1),zt=k(!1),Ct=k(""),ke=k(!1),Re=k(!0),F=k(sessionStorage.getItem("flux-tos-accepted")==="true"?void 0:"0"),O=le({get:()=>{const t=Te.value?F.value:"0";return console.log("[ToS] tosPanel.get():",{acceptedTerms:Te.value,internal:F.value,returning:t}),t},set:t=>{console.log("[ToS] tosPanel.set():",{newValue:t,acceptedTerms:Te.value});const e=t==null;Te.value?(F.value=t,console.log("[ToS] Updated internal state to:",t)):e?console.log("[ToS] Prevented collapse - terms not accepted"):(F.value=t,console.log("[ToS] Allowed expansion - updating internal state to:",t))}}),K=k(!1),je=k(""),He=k(0),he=k(null),q=k(null),$=k(!1),l=k(!1),y=k(!1),w=k(""),U=k(""),Z=k(!1),ue=k(!1);function fe(t){return["Zelcore","SSP"].includes(t)}const Ne=()=>{Te.value=!0,$t.value=!1};ie(G,(t,e)=>{c.newApp&&!Te.value&&t!==0&&e===0?aa(()=>{G.value=0,zt.value=!0}):_e.value=e}),ie(Te,t=>{console.log("[ToS] acceptedTerms changed:",{newValue:t}),sessionStorage.setItem("flux-tos-accepted",t.toString()),t&&(F.value=void 0,console.log("[ToS] Collapsed panel because terms accepted"))}),ta(()=>{fs();const t=new URLSearchParams(window.location.search),e=t.get("payment_success"),m=t.get("payment_method"),g=t.get("amount");if(e==="true"){const n=t.get("payment_method");if(n&&!fe(n)){K.value=!0,m.value=n,g&&(He.value=parseFloat(g)),M("success",i("core.subscriptionManager.cardPaymentCompletedSuccessfully"));const v=window.location.pathname;window.history.replaceState(null,"",v)}}});const Ee=qo();$l();const nt=le(()=>jl),E=le(()=>Ee.global.name.value==="dark"?tn:an),V=k([]),te=k([]),A=k({continent:"ALL",country:"ALL",region:"ALL"}),D=k({continent:"NONE",country:"ALL",region:"ALL"}),Je=k([]),ka=le(()=>{const t=[{label:i("core.subscriptionManager.tabGeneral"),icon:"mdi-application",value:0}];return R.value.supportsGeolocation&&t.push({label:i("core.subscriptionManager.tabGeolocation"),icon:"mdi-earth",value:1}),c.appSpec?.version>=7&&Pe.value&&t.push({label:c.appSpec?.version===7?i("core.subscriptionManager.tabEnterpriseNodes"):i("core.subscriptionManager.tabPriorityNodes"),icon:"mdi-server-network",value:2}),t.push({label:i("core.subscriptionManager.tabComponents"),icon:"mdi-cube",value:3}),t}),T=k({name:"",description:"",owner:"",contacts:"",instances:3,staticip:!1,enterprise:"",nodes:"",renewalIndex:0}),Pe=k(!1),Ge=k([]),Lt=k(10),Pa=k(!1);le(()=>{const t=c.appSpec?.name||T.value.name;if(console.log("Checking marketplace status for:",t),console.log("Marketplace apps count:",Ge.value.length),!t||!Ge.value.length)return console.log("Not marketplace - no app name or no marketplace data"),!1;const e=t.toLowerCase();console.log("All marketplace apps:",Ge.value.map(g=>g.name));const m=Ge.value.some(g=>{const n=g.name.toLowerCase(),v=e.startsWith(n);return v&&console.log("Marketplace app matched:",g.name),v});return console.log("Is marketplace app:",m),m});const ve=k([]),Wt=k(!1),vt=k([]),Ba=k([]),Jt=k(""),sa=k(""),Ht=k(5),Vt=k(1),Gt=k(10),At=k(1),Ma=k(!1),no=k([]),ro=k([]),Zo=le(()=>[{title:"",key:"data-table-expand",sortable:!1,width:"50px"},{title:i("core.subscriptionManager.ipAddress"),key:"ip"},{title:i("core.subscriptionManager.nodeAddress"),key:"payment_address"},{title:i("core.subscriptionManager.tier"),key:"tier"},{title:i("core.subscriptionManager.overallScore"),key:"score"},{title:"",key:"actions",sortable:!1}]),Yo=le(()=>[{title:i("core.subscriptionManager.select"),key:"select",sortable:!1},{title:i("core.subscriptionManager.ipAddress"),key:"ip"},{title:i("core.subscriptionManager.nodeAddress"),key:"payment_address"},{title:i("core.subscriptionManager.tier"),key:"tier"},{title:i("core.subscriptionManager.overallScore"),key:"score"},{title:i("core.subscriptionManager.status"),key:"status"}]),ge=Oo({show:!1,componentIndex:null,entries:[],newCommand:""});function Xo(t){const e=c.appSpec.compose[t];ge.show=!1,requestAnimationFrame(()=>{ge.componentIndex=t,ge.entries=[...e.commands||[]],ge.newCommand="",ge.show=!0})}function Qo(){const t=ge.newCommand.trim();if(!t)return M("error","Command cannot be empty.");ge.entries.push(t),ge.newCommand=""}function es(t){ge.entries.splice(t,1)}function ts(t){ge.entries.push(...t),M("success",`Imported ${t.length} command(s)`)}function as(t){try{if(t.name&&(c.appSpec.name=t.name,T.value.name=t.name),t.description&&(c.appSpec.description=t.description,T.value.description=t.description),t.owner&&(c.appSpec.owner=t.owner,T.value.owner=t.owner),t.repotag&&(c.appSpec.repotag=t.repotag),t.port&&(c.appSpec.port=t.port),t.domains&&(c.appSpec.domains=t.domains),t.tiered!==void 0&&(c.appSpec.tiered=t.tiered),t.version&&(c.appSpec.version=t.version),c.appSpec.contacts=t.contacts||[],T.value.contacts=Array.isArray(t.contacts)?t.contacts.join(", "):t.contacts||"",c.appSpec.geolocation=t.geolocation||[],t.expire&&(c.appSpec.expire=t.expire),t.nodes&&(c.appSpec.nodes=t.nodes||[],T.value.nodes=Array.isArray(t.nodes)?t.nodes.join(", "):t.nodes),t.instances!==void 0&&(c.appSpec.instances=t.instances,T.value.instances=t.instances),t.staticip!==void 0&&(c.appSpec.staticip=t.staticip,T.value.staticip=t.staticip),t.enterprise!==void 0&&(c.appSpec.enterprise=t.enterprise,T.value.enterprise=t.enterprise),t.compose&&Array.isArray(t.compose)&&(c.appSpec.compose=t.compose),!t.compose&&t.cpu!==void 0){const e={name:t.name||"",description:t.description||"",repotag:t.repotag||"",ports:t.ports||[],domains:t.domains||[],environmentParameters:t.environmentParameters||[],commands:t.commands||[],containerPorts:t.containerPorts||[],containerData:t.containerData||"",cpu:t.cpu||.1,ram:t.ram||100,hdd:t.hdd||1};t.tiered!==void 0&&(e.tiered=t.tiered),c.appSpec.compose=[e]}if(G.value===99){const e=G.value;G.value=0,aa(()=>{G.value=e})}M("success","Application specification imported successfully")}catch(e){console.error("Error importing specification:",e),M("error",`Failed to import specification: ${e.message}`)}}function os(){const t=ge.componentIndex;t!==null&&(c.appSpec.compose[t].commands=[...ge.entries],ge.show=!1)}function ss(){!c.isRedeploy||h.value>=Ve||(ue.value=!0)}function ls(){Z.value=!0;try{const t=c.appSpec;if(t.version>=Ve){M("info","Application is already using latest specification format"),Z.value=!1;return}const e=lo(t);Object.keys(t).forEach(m=>delete t[m]),Object.assign(t,e),M("success",`Application upgraded from V${h.value} to V${Ve} successfully`)}catch(t){console.error("Error converting specification:",t),M("error",`Failed to upgrade specification: ${t.message}`)}finally{Z.value=!1}}const gt={shortDate:{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}},la=k(!1),It=k(null),na=k(null),Q=k(null),Le=k(null),qe=k(!1),bt=k(null),We=k(null),ae=k(null),ra=k(!1),xe=k(!1),we=k(!1),ht=k(!1),_t=k([]);k(!1);const rt=k(null);let Ke=null;const it=["expire","instances","cpu","ram","hdd","tiered","domains","geolocation","staticip","enterprise","nodes"];k(null),k(0);const ia=k(!0),ua=k(!0),ns=le(()=>{const t=new Date;return t.setDate(t.getDate()+30),t.toLocaleString("en-GB",gt.shortDate)}),Tt=k(!1),ut=k(!1),qt=k(!1),rs=le(()=>_t.value.some(t=>t.status==="warning")),et=k({model:!1,text:"",color:"info",icon:"mdi-information",timeout:4e3});let Oa=null;function M(t,e,m=null,g=4e3){Oa&&clearTimeout(Oa),et.value.text=e,et.value.icon=m||{success:"mdi-check-circle",error:"mdi-alert-circle",warning:"mdi-alert",info:"mdi-information",danger:"mdi-alert-circle"}[t]||"mdi-information",et.value.color=t==="danger"?"error":t,et.value.timeout=g,et.value.model=!0,Oa=setTimeout(()=>{et.value.model=!1},g)}function is(){R.value.supportsExpire?(c.appSpec.expire=100,console.log("Canceling subscription - set expire to 100 blocks"),G.value=99):M("error","Cancel subscription is only available for V6+ applications")}let io=null;ie(()=>c.appSpec,(t,e)=>{if(console.log("SubscriptionManager: appSpec changed:",t),t&&t!==e){console.log("SubscriptionManager: updating appDetails with owner:",t.owner),t.name!==T.value.name&&(T.value.name=t.name||""),t.description!==T.value.description&&(T.value.description=t.description||""),(t.owner&&t.owner!==T.value.owner||!T.value.owner&&t.owner)&&(T.value.owner=t.owner),t.contacts!==T.value.contacts&&(T.value.contacts=t.contacts||""),t.instances!==T.value.instances&&(T.value.instances=t.instances??3),t.staticip!==T.value.staticip&&(T.value.staticip=t.staticip??!1),console.log("SubscriptionManager: appDetails.owner after update:",T.value.owner),t.version===7&&t.nodes&&t.nodes.length>0||t.version>=8&&t.enterprise&&t.enterprise!==""?Pe.value=!0:Pe.value=!1,T.value.nodes=t.nodes?t.nodes.join(", "):"",t.nodes&&Array.isArray(t.nodes)&&(ve.value=t.nodes.map(n=>({ip:n,payment_address:"Loading...",tier:"Loading...",score:0})));let m;if(t.version<6)m=88e3;else{const v=t.expire??88e3;m=v,t.height&&t.height<ye&&(m=Math.round(v*4),console.log("Fork-aware conversion for renewalIndex: original",v,"× 4 =",m))}console.log("Setting renewalIndex - expire for matching:",m,"original expire:",t.expire,"spec version:",t.version,"height:",t.height);const g=io;if(g&&g.length>0){let n=g.findIndex(v=>v.value===m);if(n===-1){let v=2,f=Math.abs(g[2].value-m);g.forEach((_,S)=>{const W=Math.abs(_.value-m);W<f&&(f=W,v=S)}),n=v,console.log("No exact match - closest option at index:",n,"value:",g[n].value,"diff:",Math.abs(g[n].value-m))}else console.log("Found exact match at index:",n,"value:",g[n].value);T.value.renewalIndex=n}else console.log("renewalOptions not yet initialized, using default index 2"),T.value.renewalIndex=2;(t.nodes&&Array.isArray(t.nodes)&&t.nodes.length>0||Pe.value&&t.version>=7)&&pa()}},{immediate:!0}),ta(()=>{if(console.log("SubscriptionManager onMounted - props.appSpec:",c.appSpec),console.log("SubscriptionManager onMounted - props.appSpec.owner:",c.appSpec?.owner),!T.value.owner){const t=localStorage.getItem("zelidauth");if(t)try{const e=Ea.parse(t);e.zelid&&(T.value.owner=e.zelid,console.log("SubscriptionManager: Set default owner to:",e.zelid?"Present":"Missing"))}catch(e){console.error("Failed to parse zelidauth for default owner:",e)}}if(ws(),c.appSpec?.compose?c.appSpec.compose.forEach(t=>{t.hasOwnProperty("repoauth")||(t.repoauth=""),t.hasOwnProperty("secrets")||(t.secrets="")}):c.appSpec.compose=[],c.appSpec&&c.appSpec.expire===void 0){const t=c.appSpec.height&&c.appSpec.height>=ye?88e3:22e3;c.appSpec.expire=t}!c.newApp&&c.appSpec?.name&&(Ae.value=!0)});const tt=k(null);async function us(){try{const{data:t}=await Xe.get("https://stats.runonflux.io/marketplace/listapps");t.status==="success"&&(Ge.value=t.data)}catch(t){console.error(t)}}async function ds(){try{const{data:t}=await Xe.get("https://stats.runonflux.io/apps/multiplier");t.status==="success"&&typeof t.data=="number"&&t.data>=1&&(Lt.value=t.data)}catch(t){console.error(t),Lt.value=10}}async function cs(){if(c.executeLocalCommand&&!c.newApp&&c.appSpec?.name&&c.instanceReady)try{const t=await c.executeLocalCommand("/daemon/getblockcount");if(t?.data?.status==="success"&&typeof t.data?.data=="number"){tt.value=t.data.data;return}}catch(t){console.log("Daemon block height not available, falling back to explorer:",t)}try{const t=await Hl.getScannedHeight();if(t.data.status==="success"){tt.value=t.data.data.generalScannedHeight;return}}catch(t){console.error("Error fetching block height from both sources:",t)}tt.value=null}ta(async()=>{Promise.all([us(),ds()]),await cs(),ze.value=new Kl(".copy-btn"),ze.value.on("success",t=>{M("success",i("common.messages.copiedToClipboard")),t.clearSelection()}),ze.value.on("error",t=>{M("error",i("common.messages.failedToCopy")),console.error("Copy error:",t)})});function ps(t){return .5*60*1e3}const at=k(null),da=k(null),Et=k(null);ta(()=>{const t=c.appSpec?.height&&c.appSpec.height>=ye?88e3:22e3;if(at.value=c.appSpec?.expire??t,!c.newApp&&c.appSpec){const e=dt(c.appSpec);delete e.expire,da.value=e}c.newApp&&(j.value=!0)});const Kt=le(()=>{if(c.newApp||!da.value||!c.appSpec)return!0;try{const t=dt(c.appSpec);delete t.expire;const e=JSON.stringify(t)!==JSON.stringify(da.value);return console.log(e?"⚠️ Spec changes detected":"✅ No spec changes detected"),e}catch(t){return console.error("Error comparing specs:",t),!0}}),kt=le(()=>{if(!c.appSpec)return!0;const t=c.newApp?Et.value:da.value;if(!t)return!0;try{const e=dt(c.appSpec);it.forEach(n=>delete e[n]),e.compose&&Array.isArray(e.compose)&&e.compose.forEach(n=>{it.forEach(v=>delete n[v])});const m=dt(t);it.forEach(n=>delete m[n]),m.compose&&Array.isArray(m.compose)&&m.compose.forEach(n=>{it.forEach(v=>delete n[v])});const g=JSON.stringify(e)!==JSON.stringify(m);return console.log("🧪 Testable fields check:",{hasChanged:g,isNewApp:c.newApp,usingTestedSnapshot:c.newApp&&!!Et.value,excludedFields:it,currentInstances:c.appSpec?.instances,currentCpu:c.appSpec?.cpu,currentRam:c.appSpec?.ram,currentHdd:c.appSpec?.hdd}),g&&console.log("🔍 Testable fields DIFF:",{current:e,snapshot:m}),g}catch(e){return console.error("Error comparing testable fields:",e),!0}}),Sa=le(()=>{const t=!we.value&&kt.value&&(c.newApp||Q.value?.flux!==0)&&!l.value&&!$.value&&(c.newApp||N.value!=="cancel")&&(c.newApp||N.value!=="renewal");return console.log("🧪 Test Section Visibility Check:",{shouldShow:t,testFinished:we.value,specsHaveChanged:Kt.value,testableFieldsHaveChanged:kt.value,isNewApp:c.newApp,fluxPrice:Q.value?.flux,paymentProcessing:l.value,paymentConfirmed:$.value,managementAction:N.value,renewalEnabled:j.value}),t});let Zt=k(null);ie(()=>c.appSpec,t=>{if(t&&Zt.value)try{const e=dt(t);delete e.expire;const m=JSON.stringify(e),g=JSON.stringify(Zt.value);if(m!==g){console.log("⚠️ Spec changed after signing - analyzing changes");const n=dt(e),v=c.newApp&&Et.value?Et.value:Zt.value,f=dt(v);it.forEach(S=>{delete n[S],delete f[S]}),n.compose&&Array.isArray(n.compose)&&n.compose.forEach(S=>{it.forEach(W=>delete S[W])}),f.compose&&Array.isArray(f.compose)&&f.compose.forEach(S=>{it.forEach(W=>delete S[W])});const _=JSON.stringify(n)!==JSON.stringify(f);console.log("🔍 Spec watcher comparison:",{isNewApp:c.newApp,hasTestedSnapshot:!!Et.value,usingTestedSnapshot:c.newApp&&!!Et.value,excludedFields:it,currentInstances:t.instances,currentCpu:t.cpu,currentRam:t.ram,baselineInstances:v.instances}),console.log("📊 Change analysis:",{testableFieldsChanged:_,message:_?"Testable fields changed (repo/tag/env/commands/ports/etc) - clearing test results":"Only non-testable fields changed (resources/scaling/DNS) - preserving test results (re-sign still required)"}),Ke&&(clearTimeout(Ke),Ke=null,console.log("🛑 Cancelled auto-navigation to payment tab due to spec change")),ae.value=null,J.value=null,Zt.value=null,_?(we.value=!1,xe.value=!1,console.log("🧹 Cleared test results - testable fields changed")):console.log("✅ Preserved test results - only instances changed")}}catch(e){console.error("Error checking spec changes:",e)}},{deep:!0}),ie(J,t=>{if(t&&bt.value)try{const e=dt(bt.value);delete e.expire,Zt.value=e,console.log("📸 Stored signed spec state (appSpecFormated):",e)}catch(e){console.error("Error storing signed spec state:",e)}else t||(Zt.value=null)});const uo=le(()=>{if(!tt.value||typeof c.appSpec?.height!="number"||!at.value)return null;const t=c.appSpec.height,e=at.value,m=t+e;let g=m;if(t<ye&&m>ye){const v=e*2,_=(ye-t)*2,W=(v-_)/.5;g=ye+W}return g-tt.value}),ms=le(()=>{let t=uo.value;return(t==null||isNaN(t))&&(t=0),[Math.round(ea*(1/4)+t),Math.round(ea*(1/2)+t),ea+t,ea*3+t,ea*6+t,ea*12+t]}),co=k(["1 Week","2 Weeks","1 Month","3 Months","6 Months","1 Year"]);function fs(){try{co.value=[i("core.subscriptionManager.renewal1Week"),i("core.subscriptionManager.renewal2Weeks"),i("core.subscriptionManager.renewal1Month"),i("core.subscriptionManager.renewal3Months"),i("core.subscriptionManager.renewal6Months"),i("core.subscriptionManager.renewal1Year")]}catch(t){console.error("Error getting renewal labels:",t)}}const Ze=le(()=>{const t=ms.value,e=co.value,m=t.map((g,n)=>({value:g,label:e[n]||`Option ${n+1}`}));return io=m,m}),po=le(()=>Ze.value.map(t=>t.label)),ot=le(()=>{const t=Date.now(),e=uo.value??0,m=j.value||N.value==="renewal"?Ze.value[T.value.renewalIndex]?.value??0:0;function g(_,S=!1){if(!tt.value||_<=0)return _*ps();let W=0;if(S&&typeof c.appSpec?.height=="number"&&at.value){const se=c.appSpec.height<ye?2:.5,Y=at.value*se;let H=0;if(c.appSpec.height<ye)if(tt.value<=ye)H=(tt.value-c.appSpec.height)*2;else{const ne=ye-c.appSpec.height,ee=tt.value-ye;H=ne*2+ee*.5}else H=(tt.value-c.appSpec.height)*.5;W=Y-H}else tt.value>=ye?W=_*.5:W=_*2;return W*60*1e3}const n=g(e,!0)+t,v=g(m,!1),f=t+v;return console.log("Renewal calculation:",{now:new Date(t).toLocaleString(),currentExpiry:new Date(n).toLocaleString(),renewalIndex:T.value.renewalIndex,renewalOptions:Ze.value,chosenRenewalBlocks:m,renewalTimeMs:v,renewalTimeDays:v/(1440*60*1e3),newExpiry:new Date(f).toLocaleString()}),{current:n,new:f}}),mo=le(()=>{const t=Date.now(),m=ot.value.current-t;if(m<=0)return i("core.subscriptionManager.expired");const g=Math.floor(m/(1440*60*1e3)),n=Math.floor(m%(1440*60*1e3)/(3600*1e3)),v=Math.floor(m%(3600*1e3)/(60*1e3)),f=[];return g>0&&f.push(`${g}d`),n>0&&f.push(`${n}h`),(v>0||f.length===0)&&f.push(`${v}m`),f.join(" ")}),fo=le(()=>{const t=Date.now(),m=ot.value.current-t;if(m<=0)return"error";const g=Math.floor(m/(1440*60*1e3));return g<3?"error":g<=4?"warning":"success"});ie(T,t=>{if(c.appSpec)if(Ae.value||(c.appSpec.name=t.name),c.appSpec.description=t.description,c.appSpec.owner=t.owner,c.appSpec.contacts=t.contacts,c.appSpec.instances=t.instances,c.appSpec.staticip=t.staticip,c.appSpec.enterprise=t.enterprise,c.appSpec.nodes=t.nodes?t.nodes.split(",").map(e=>e.trim()).filter(e=>e):[],j.value||c.newApp||N.value==="renewal"){const e=Ze.value[t.renewalIndex]?.value;c.appSpec.expire=e}else c.appSpec.expire=at.value},{deep:!0}),ie(j,t=>{if(t||c.newApp||N.value==="renewal"){const e=Ze.value[T.value.renewalIndex]?.value;c.appSpec.expire=e}else c.appSpec.expire=at.value}),ie(()=>T.value.renewalIndex,t=>{if(j.value||c.newApp||N.value==="renewal"){const e=Ze.value[t]?.value;c.appSpec.expire=e}}),ie(J,async t=>{t&&pe.value&&!ae.value&&(pe.value=!1,await el())}),ie(ut,(t,e)=>{console.log("💰 hasCalculatedPrice changed:",{oldValue:e,newValue:t,appSpecPrice:Q?.value})}),ie(N,(t,e)=>{if(!c.newApp&&at.value!==null&&c.appSpec)if(console.log(`Management action changed: ${e} → ${t}`),t==="renewal"){const m=Ze.value[T.value.renewalIndex]?.value||88e3;c.appSpec.expire=m,console.log("Applied renewal period:",m)}else if(t==="update")if(j.value){const m=Ze.value[T.value.renewalIndex]?.value;m&&(c.appSpec.expire=m,console.log("Applied renewal period for update with renewal:",m))}else c.appSpec.expire=at.value,console.log("Restored original expire for update without renewal:",at.value);else t==="cancel"?console.log("Switching to cancel mode - expire will be set by cancelSubscription()"):(c.appSpec.expire=at.value,console.log("Restored original expire:",at.value))});function vs(t){let e=t,m=!1;if(t.forEach(g=>{(g.startsWith("b")||!g.startsWith("ac")&&!g.startsWith("a!c"))&&(m=!0)}),m){const g=t.find(f=>f.startsWith("a")&&!f.startsWith("ac")&&!f.startsWith("a!c")),n=t.find(f=>f.startsWith("b"));let v=`ac${g?.slice(1)||""}`;n&&(v+=`_${n.slice(1)}`),e=[v]}V.value=e.filter(g=>g.startsWith("ac")),te.value=e.filter(g=>g.startsWith("a!c"))}function $a(){return[...V.value.includes("acALL")?[]:V.value,...te.value]}function gs(t,e){const m=t.replace(/^a!?c/,"").split("_");return te.value.some(n=>n.replace(/^a!?c/,"").split("_").every((f,_)=>f===m[_]))}function vo(t,e){const m=t.replace(/^a!?c/,"").split("_");return e.some(g=>{const n=g.replace(/^a!?c/,"").split("_");return n.every((v,f)=>v===m[f])&&n.length<m.length})}function go(t,e){const m=t.replace(/^a!?c/,"").split("_");e.value=e.value.filter(g=>{const n=g.replace(/^a!?c/,"").split("_");return!(n.length>m.length&&m.every((v,f)=>v===n[f]))})}function bo(t,e){let m=`${t}${e.continent}`;return e.country&&e.country!=="ALL"&&(m+=`_${e.country}`,e.region&&e.region!=="ALL"&&(m+=`_${e.region}`)),m}function bs(){if(!A.value.continent||A.value.continent==="NONE")return;const t=bo("ac",A.value);!t||t==="acALL"||!V.value.includes(t)&&!gs(t)&&!te.value.includes("a!cNONE")&&!vo(t,V.value)&&(go(t,V),V.value.push(t))}function hs(){if(!D.value.continent||D.value.continent==="ALL")return;const t=bo("a!c",D.value);if(!(!t||t==="a!cNONE")&&!te.value.includes(t)&&!vo(t,te.value)){const e=t.replace(/^a!c/,"");V.value=V.value.filter(m=>{const g=m.replace(/^ac/,"");return!(g===e||g.startsWith(e+"_"))}),go(t,te),te.value.push(t),c.appSpec.geolocation=$a()}}function ys(t){V.value.splice(t,1),V.value=[...V.value],c.appSpec.geolocation=$a()}function xs(t){te.value.splice(t,1),te.value=[...te.value],c.appSpec.geolocation=$a()}async function ws(){let t=[];try{const e=await Xe.get("https://stats.runonflux.io/fluxinfo?projection=geo");if(e.data.status==="success"){const m=e.data.data;m.length>5e3&&(t=[],m.forEach(g=>{if(g.geolocation?.continentCode&&g.geolocation?.countryCode&&g.geolocation?.regionName){const n=g.geolocation.continentCode,v=g.geolocation.countryCode,f=g.geolocation.regionName,_=n,S=`${n}_${v}`,W=`${S}_${f}`,se=Y=>{const H=t.find(ne=>ne.value===Y);H?H.instances++:t.push({value:Y,instances:1})};se(_),se(S),se(W)}}))}}catch{console.warn("Failed to fetch Flux geolocation stats.")}Je.value=t,c.appSpec?.geolocation&&vs(c.appSpec.geolocation)}function ho(t=!1){const g=[{value:t?"NONE":"ALL",text:t?"None":"Global"}],n=new Set;return Je.value.forEach(v=>{const f=v.value.split("_")[0];if(!n.has(f)){n.add(f);const _=Ta.continents.find(S=>S.code===f)?.name||f;g.push({value:f,text:_})}}),g}function yo(t){if(!t||t==="ALL"||t==="NONE")return[{value:"ALL",text:"All Countries"}];const e=new Set,m=[{value:"ALL",text:"All Countries"}];return Je.value.forEach(g=>{const[n,v]=g.value.split("_");if(n===t&&v&&!e.has(v)){e.add(v);const f=Ta.countries.find(_=>_.code===v)?.name||v;m.push({value:v,text:f})}}),m}function xo(t,e){if(!t||!e||e==="ALL")return[{value:"ALL",text:"All Regions"}];const m=new Set;return Je.value.forEach(g=>{const[n,v,f]=g.value.split("_");n===t&&v===e&&f&&m.add(f)}),[{value:"ALL",text:"All Regions"},...[...m].map(g=>({value:g,text:g}))]}function wo(t){const e=t.replace(/^a!?c/,""),[m,g,n]=e.split("_"),v=Ta.continents.find(S=>S.code===m)?.name||m,f=g?Ta.countries.find(S=>S.code===g)?.name||g:"",_=n||"";return _?`${v} / ${f} / ${_}`:f?`${v} / ${f}`:`${v}`}function _s(){T.value.contacts&&(T.value.contacts=[...new Set(T.value.contacts.filter(t=>t&&t.trim()).map(t=>t.trim()))])}function ks(t){const e=ve.value.findIndex(m=>m.ip===t.ip);e>-1&&(ve.value.splice(e,1),ca())}function ca(){c.appSpec&&(c.appSpec.nodes=ve.value.map(t=>t.ip))}function _o(t){if(t){const[e,m]=t.includes(":")?t.split(":"):[t,null],g=m?parseInt(m)-1:16126,n=`http://${e}:${g}`;window.open(n,"_blank")}else M("error","Unable to open FluxNode - invalid IP")}async function pa(){const t=sessionStorage.getItem("flux_enterprise_nodes");t&&(vt.value=JSON.parse(t),ma());try{Ma.value=!0;const e=await ct.getEnterpriseNodes();e.data.status==="error"?M("error",e.data.data.message||e.data.data):(vt.value=e.data.data,sessionStorage.setItem("flux_enterprise_nodes",JSON.stringify(vt.value)),ma())}catch(e){console.error("Error fetching enterprise nodes:",e),M("error","Failed to fetch enterprise nodes")}finally{Ma.value=!1}}function ma(){Ba.value=vt.value.map(m=>({...m,isSelected:ve.value.some(g=>g.ip===m.ip)}));const t=[];ve.value.forEach(m=>{const g=vt.value.find(n=>n.ip===m.ip);g&&t.push({...g})});const e=ve.value.length-t.length;e>0&&M("warning",`${e} node(s) removed as they are no longer available`),ve.value=t,ca()}function Ps(t){if(ve.value.some(m=>m.ip===t.ip)){const m=ve.value.findIndex(g=>g.ip===t.ip);m>-1&&ve.value.splice(m,1)}else{if(ve.value.length>=Ho){M("error",`Maximum of ${Ho} nodes allowed`);return}ve.value.push({...t})}ma(),ca()}function Ms(){Wt.value=!0,vt.value.length===0?pa():ma()}function Ss(){Wt.value=!1,M("success",`Selected ${ve.value.length} nodes`)}async function $s(){try{vt.value.length===0&&await pa();const t=c.appSpec?.instances??3,e=t+3,m=t+Math.ceil(Math.max(7,t*.15)),n=vt.value.filter(f=>!ve.value.some(_=>_.ip===f.ip)).filter(f=>f.enterprisePoints>0||f.score>1e3);if(n.length===0)throw new Error("No high-quality nodes available for auto-selection");const v=[];for(let f=0;f<n.length;f++){const _=n[f],S=ve.value.filter(se=>se.pubkey===_.pubkey).length,W=v.filter(se=>se.pubkey===_.pubkey).length;if(S+W<e&&v.push(_),v.length+ve.value.length>=m)break}if(v.length+ve.value.length<m)throw new Error("Not enough high-quality nodes available to run your enterprise app");v.forEach(f=>{ve.value.push({ip:f.ip,payment_address:f.payment_address,tier:f.tier,score:f.score,pubkey:f.pubkey,enterprisePoints:f.enterprisePoints})}),ma(),ca(),M("success",i("core.subscriptionManager.autoSelectedNodes",{count:v.length}))}catch(t){console.error("Auto-select error:",t),M("error",t.message||"Failed to auto-select nodes")}}const Ra=le(()=>{if(!Jt.value)return Ba.value;const t=Jt.value.toLowerCase();return Ba.value.filter(e=>e.ip.toLowerCase().includes(t)||e.payment_address.toLowerCase().includes(t)||e.tier.toLowerCase().includes(t))}),ja=le(()=>{if(!sa.value)return ve.value;const t=sa.value.toLowerCase();return ve.value.filter(e=>e.ip.toLowerCase().includes(t)||e.payment_address.toLowerCase().includes(t)||e.tier.toLowerCase().includes(t))}),ko=le(()=>Math.ceil(ja.value.length/Gt.value)||1),zs=le(()=>{const t=(Vt.value-1)*Gt.value,e=t+Gt.value;return ja.value.slice(t,e)}),Po=le(()=>Math.ceil(Ra.value.length/Ht.value)||1),Cs=le(()=>{const t=(At.value-1)*Ht.value,e=t+Ht.value;return Ra.value.slice(t,e)});ie(Jt,()=>{At.value=1}),ie(Ht,()=>{At.value=1}),ie(Gt,()=>{Vt.value=1}),ie(sa,()=>{Vt.value=1}),ie(()=>A.value.continent,()=>{A.value.country="ALL",A.value.region="ALL"}),ie(()=>A.value.country,()=>{A.value.region="ALL"}),ie(()=>D.value.continent,()=>{D.value.country="ALL",D.value.region="ALL"}),ie(()=>D.value.country,()=>{D.value.region="ALL"}),ie([V,te],()=>{c.appSpec&&(c.appSpec.geolocation=$a())},{deep:!0}),ie(()=>Pe.value,async(t,e)=>{c.appSpec&&c.appSpec.version>=7&&(t&&!e?(vt.value.length===0&&await pa(),c.appSpec.nodes&&c.appSpec.nodes.length>0&&ve.value.length===0&&(c.appSpec.nodes.forEach(m=>{const g=vt.value.find(n=>n.ip===m);g&&ve.value.push({ip:g.ip,payment_address:g.payment_address,tier:g.tier,score:g.score})}),ca()),Pe.value=!0,M("info","Enterprise mode enabled - nodes loaded")):!t&&e&&(ve.value=[],c.appSpec.nodes=[],c.appSpec.compose&&c.appSpec.compose.forEach(m=>{m.repoauth="",m.secrets=""}),Pe.value=!1,M("info","Enterprise settings cleared")))});const Vs=le(()=>c.appSpec?.compose?.map((t,e)=>({label:t.name||`${i("core.subscriptionManager.component")} ${e+1}`,icon:"mdi-cube-outline",value:`component-${e}`}))||[]),Ft=k("component-0");le(()=>[...ka,...Vs.value]);function As(){c.appSpec.compose||(c.appSpec.compose=[]);const t=c.appSpec.compose.push({name:"",description:"",repotag:"",ports:[],domains:[],environmentParameters:[],commands:[],containerPorts:[],containerData:"",cpu:1,ram:1024,hdd:10,tiered:!1,repoauth:"",secrets:""})-1;Ft.value=`component-${t}`}const Dt=k(null),Wa=k([]),Mo=k([]),Be=k([]),yt=k({}),Ja=k([]),fa=k(null);function Ts(t,e){Wa.value[t]=e}function Es(t,e){Mo.value[t]=e}function za(t){Dt.value=null,fa.value=null,delete yt.value[t],document.removeEventListener("click",va)}function Ds(t,e,m,g){Dt.value!==null&&fa.value!==null&&za(Dt.value),Ja.value[m]={exposed:t.ports[m],container:t.containerPorts[m]},Dt.value=m,fa.value=e,yt.value[m]={exposed:!1,container:!1},aa(()=>{Wa.value[m]?.focus&&Wa.value[m].focus(),setTimeout(()=>{document.addEventListener("click",va)},0)})}function So(t,e){yt.value[t]=yt.value[t]||{exposed:!1,container:!1},yt.value[t][e]=!0}function $o(t,e){yt.value[t]=yt.value[t]||{exposed:!1,container:!1},yt.value[t][e]=!1}function zo(t,e){t.ports[e]=Ja.value[e].exposed,t.containerPorts[e]=Ja.value[e].container,za(e)}function Co(t,e,m){const g=t.ports[m],n=t.containerPorts[m];return!ga(g)||!ga(n)?!1:c.appSpec.compose.flatMap((f,_)=>_===e?f.ports.filter((S,W)=>W!==m):f.ports||[]).includes(g)?(M("error",`Exposed port ${g} is already used.`),!1):!0}function va(t){const e=Dt.value,m=fa.value;if(e===null||m===null)return;const g=Mo.value[e],n=c.appSpec.compose[m];g&&!g.contains(t.target)&&(n&&Co(n,m,e)?za(e):zo(n,e))}function Vo(t,e,m){Co(t,e,m)?za(m):zo(t,m)}function Ao(t,e,m){const g=m==="exposed"?t.ports[e]:t.containerPorts[e];if(!ga(g)){M("error","Port must be a number between 1 and 65535."),m==="exposed"?t.ports[e]=null:t.containerPorts[e]=null;return}if(m==="exposed"){const n=c.appSpec.compose.flatMap(_=>_.ports||[]),v=n.findIndex(_=>_===g);(n.filter(_=>_===g).length>1||v!==-1&&t.ports[e]!==g)&&(M("error",`Port ${g} is already in use.`),t.ports[e]=null)}}function Ns(t){const e=c.appSpec.compose[t],m=Be.value[t];if(!m)return;const g=e.ports.includes(m.exposed),v=c.appSpec.compose.flatMap((f,_)=>_===t?[]:f.ports||[]).includes(m.exposed);if(ga(m.exposed)&&ga(m.container)&&!g&&!v){e.ports.push(m.exposed),e.containerPorts.push(m.container);const f=m.exposed+1;Be.value[t]={exposed:f,container:null}}else M("error",v?`Port ${m.exposed} is already used in another component.`:"Invalid or duplicate port values.")}function Ls(t){const e=Be.value[t];e&&e.exposed&&!e.container&&(Be.value[t].container=e.exposed)}function Is(t,e){t.ports.splice(e,1),t.containerPorts.splice(e,1),t.domains.splice(e,1),Dt.value=null,delete yt.value[e],document.removeEventListener("click",va)}function ga(t){return Number.isInteger(t)&&t>0&&t<=65535}Ro(()=>{document.removeEventListener("click",va),ze.value&&(ze.value.destroy(),ze.value=null),he.value&&(clearInterval(he.value),he.value=null),q.value&&(clearTimeout(q.value),q.value=null),pe.value=!1,me.value&&(me.value.close(),me.value=null),l.value=!1,$.value=!1,K.value=!1,je.value="",He.value=0}),ie(G,(t,e)=>{if(console.log("🔀 TAB CHANGED",{oldTab:e,newTab:t,isEnteringTestPay:t===100,isLeavingTestPay:e===100&&t!==100}),t===100&&(console.log("💳 ENTERING TEST & PAY - Payment UI States:",{paymentProcessing:l?.value,paymentConfirmed:$?.value,paymentCompleted:K?.value,registrationHash:ae?.value,deploymentAddress:rt?.value,signature:J?.value,hasCalculatedPrice:ut?.value,appSpecPrice:Q?.value,paymentMonitoringInterval:he?.value,paymentMonitoringTimeout:q?.value,testFinished:we?.value,testError:xe?.value,renewalEnabled:j?.value,specsHaveChanged:Kt?.value,newApp:c?.newApp}),ae?.value&&!$?.value&&!he?.value&&(Q?.value?.flux===0?(console.log("🆓 FREE APP/UPDATE DETECTED - Auto-starting deployment monitoring"),we.value=!0,xe.value=!1,Yt()):!c.newApp&&!kt.value?(console.log("💰 PAID UPDATE (unchanged testable specs) - Skipping test, showing payment section"),we.value=!0,xe.value=!1):console.log("💰 NEW APP or CHANGED SPECS - Test section should be visible"))),e===100&&t!==100){console.log("🚪 LEAVING TEST & PAY - Clearing payment states",{hadSuccessfulDeployment:$.value});const m=$.value||K.value;he.value&&(clearInterval(he.value),he.value=null),q.value&&(clearTimeout(q.value),q.value=null),l.value=!1,$.value=!1,K.value=!1,je.value="",He.value=0,m&&(ae.value=null,J.value=null,rt.value=null,console.log("🧹 Cleared registration states after leaving successful deployment screen")),console.log("✅ Payment states cleared")}}),ta(()=>{console.log("🚀 COMPONENT MOUNTED - Initial States:",{tab:G?.value,signature:J?.value,registrationHash:ae?.value,paymentProcessing:l?.value,paymentConfirmed:$?.value,deploymentAddress:rt?.value,hasCalculatedPrice:ut?.value,appSpecPrice:Q?.value,newApp:c?.newApp}),G.value=0,console.log("✅ Tab reset to 0 on mount")}),Ro(()=>{Ke&&(clearTimeout(Ke),Ke=null,console.log("🧹 Cleaned up auto-navigation timer on unmount"))}),ie(()=>c.resetTrigger,(t,e)=>{console.log("🔄 RESET TRIGGER FIRED",{newTrigger:t,oldTrigger:e,willReset:e&&t&&t!==e}),e&&t&&t!==e&&(console.log("📊 STATE BEFORE RESET:",{tab:G?.value,signature:J?.value,registrationHash:ae?.value,paymentProcessing:l?.value,paymentConfirmed:$?.value,deploymentAddress:rt?.value,isSigning:pe?.value,signingFailed:B?.value,isPropagating:ra?.value,hasCalculatedPrice:ut?.value,appSpecPrice:Q?.value}),G.value=0,c.newApp||(j.value=!1),console.log("📊 STATE AFTER RESET (tab changed to 0):",{tab:G?.value,signature:J?.value,registrationHash:ae?.value,paymentProcessing:l?.value,paymentConfirmed:$?.value,renewalEnabled:j?.value}))});function Fs(t=3e4,e=39999){return Math.floor(Math.random()*(e-t+1))+t}ie(()=>c.appSpec?.compose?.length,t=>{if(t>0){for(Be.value||(Be.value=[]);Be.value.length<t;)Be.value.push({exposed:Fs(),container:null});Be.value.length>t&&(Be.value=Be.value.slice(0,t))}else Be.value=[]},{immediate:!0}),ie(()=>c.initialAction,t=>{t&&!c.newApp&&(N.value=t)});function Us(t){!c.appSpec.compose||t<0||t>=c.appSpec.compose.length||(c.appSpec.compose.splice(t,1),Dt.value=null,Be.value.splice(t,1),delete yt.value[t],document.removeEventListener("click",va),c.appSpec.compose.length>0?Ft.value=`component-${Math.max(0,t-1)}`:Ft.value="")}const oe=Oo({show:!1,componentIndex:null,entries:[],newKey:"",newValue:""}),Ha=k(!1),Ga=k(!1),qa=k(!1);ie(()=>oe.show,t=>{t||(oe.componentIndex=null,oe.entries=[],oe.newKey="",oe.newValue="")});function Bs(t){const e=c.appSpec.compose[t];oe.show=!1,requestAnimationFrame(()=>{oe.componentIndex=t,oe.entries=(e.environmentParameters||[]).map(m=>{const[g,...n]=m.split("=");return{key:g,value:n.join("=")}}),oe.newKey="",oe.newValue="",oe.show=!0})}function Os(){const t=oe.newKey.trim(),e=oe.newValue.trim();if(!t||!e)return M("error","Key and value are required.");if(oe.entries.some(m=>m.key===t))return M("error",`Duplicate key "${t}"`);oe.entries.push({key:t,value:e}),oe.newKey="",oe.newValue=""}function Rs(t){oe.entries.splice(t,1)}function js(t){let e=0,m=0;for(const g of t){if(oe.entries.some(n=>n.key===g.key)){m++;continue}oe.entries.push(g),e++}m>0?M("success",`Imported ${e} environment variable(s), skipped ${m} duplicate(s)`):M("success",`Imported ${e} environment variable(s)`)}function Ws(t){const e=t.clipboardData?.getData("text");if(!e)return;const m=se=>{const Y=se.trim();if(!Y)return[];if(Y.includes(";")&&(Y.match(/=/g)||[]).length>1)return Y.split(";").map(H=>H.trim()).filter(H=>H.length>0);if(Y.includes(",")&&(Y.match(/=/g)||[]).length>1){const H=(Y.match(/,/g)||[]).length,ne=(Y.match(/=/g)||[]).length;if(H<ne)return Y.split(",").map(ee=>ee.trim()).filter(ee=>ee.length>0)}if(Y.includes(" ")&&(Y.match(/=/g)||[]).length>1){const H=/([^\s]+(?:=(?:"[^"]*"|'[^']*'|[^\s,;]+)))/g,ne=Y.match(H);if(ne&&ne.length>1)return ne}return[Y]},g=e.split(`
`),n=[];for(const se of g){const Y=m(se);n.push(...Y)}const v=n.filter(se=>se&&se.trim().length>0);if(v.length===1&&!v[0].includes("=")||!v.some(se=>se.includes("=")))return;t.preventDefault();let _=0,S=0,W=0;for(const se of v){if(!se.includes("=")){W++;continue}const[Y,...H]=se.split("="),ne=H.join("=");let ee=Y.trim(),Ye=ne.trim();if((ee.startsWith('"')&&ee.endsWith('"')||ee.startsWith("'")&&ee.endsWith("'"))&&(ee=ee.slice(1,-1)),(Ye.startsWith('"')&&Ye.endsWith('"')||Ye.startsWith("'")&&Ye.endsWith("'"))&&(Ye=Ye.slice(1,-1)),!ee||Ye===void 0){W++;continue}if(oe.entries.some(ha=>ha.key===ee)){S++;continue}oe.entries.push({key:ee,value:Ye}),_++}if(_>0){let se=`Imported ${_} environment variable(s)`;S>0&&(se+=`, skipped ${S} duplicate(s)`),W>0&&(se+=`, ignored ${W} invalid line(s)`),M("success",se)}else(S>0||W>0)&&M("warning",`No new variables imported. ${S} duplicate(s), ${W} invalid line(s)`)}function Js(){const t=oe.componentIndex;if(t===null)return;const e=c.appSpec.compose[t];e.environmentParameters=oe.entries.map(m=>`${m.key}=${m.value}`),oe.show=!1}ie(()=>c.appSpec.compose,t=>{Array.isArray(t)&&t.forEach(e=>{Array.isArray(e.ports)||(e.ports=[]),Array.isArray(e.containerPorts)||(e.containerPorts=[]),Array.isArray(e.domains)||(e.domains=[]),e.ports.forEach((m,g)=>{typeof e.domains[g]!="string"&&(e.domains[g]=""),typeof e.containerPorts[g]>"u"&&(e.containerPorts[g]=null)}),e.domains.length>e.ports.length&&(e.domains.length=e.ports.length),e.containerPorts.length>e.ports.length&&(e.containerPorts.length=e.ports.length)})},{deep:!0,immediate:!0}),ie(()=>c.appSpec.compose,t=>{Array.isArray(t)&&t.forEach(e=>{Array.isArray(e.ports)||(e.ports=[]),Array.isArray(e.containerPorts)||(e.containerPorts=[]),Array.isArray(e.domains)||(e.domains=[]),e.ports.forEach((m,g)=>{typeof e.domains[g]!="string"&&(e.domains[g]=""),typeof e.containerPorts[g]>"u"&&(e.containerPorts[g]=null)}),e.domains.length>e.ports.length&&(e.domains.length=e.ports.length),e.containerPorts.length>e.ports.length&&(e.containerPorts.length=e.ports.length)})},{deep:!0,immediate:!0});const Ka=le(()=>{if(!c.newApp&&N.value==="renewal"){let W;R.value.supportsExpire?W=Ze.value[T.value.renewalIndex]?.value??0:W=88e3;const se=Le.value>=ye?.5:2,Y=W*se,H=Math.floor(Y/1440),ne=Math.floor(Y%1440/60),ee=Y%60,Ye=[];return H>0&&Ye.push(`${H} day${H>1?"s":""}`),ne>0&&Ye.push(`${ne} hour${ne>1?"s":""}`),ee>0&&Ye.push(`${ee} minute${ee!==1?"s":""}`),Ye.join(", ")}let t;if(c.newApp)t=Ze.value[T.value.renewalIndex]?.value??88e3;else if(!R.value.supportsExpire&&N.value!=="cancel")t=88e3;else if(N.value==="cancel"||j.value)t=c.appSpec?.expire??100;else{const W=c.appSpec?.height&&c.appSpec.height>=ye?88e3:22e3;t=at.value??c.appSpec?.expire??W}if(c.newApp||j.value||N.value==="cancel"||!R.value.supportsExpire){if(!Le.value){const ha=Math.floor(30.555555555555557),Ya=Math.floor(44e3%1440/60),Pl=44e3%60,Aa=[];return ha>0&&Aa.push(`${ha} day${ha>1?"s":""}`),Ya>0&&Aa.push(`${Ya} hour${Ya>1?"s":""}`),Aa.push(`${Pl} minutes`),Aa.join(", ")}const W=Le.value>=ye?.5:2,se=t*W,Y=Math.floor(se/1440),H=Math.floor(se%1440/60),ne=se%60,ee=[];return Y>0&&ee.push(`${Y} day${Y>1?"s":""}`),H>0&&ee.push(`${H} hour${H>1?"s":""}`),ne>0&&ee.push(`${ne} minute${ne!==1?"s":""}`),ee.join(", ")}const e=Le.value,m=c.appSpec.height;if(!e||!m)return"";let g;if(N.value==="cancel"?g=t:N.value==="update"&&!j.value&&R.value.supportsExpire&&We.value!==null?g=We.value:g=m+t-e,g<1)return"";let n=0;if(N.value==="update"&&!j.value&&R.value.supportsExpire&&We.value!==null){const W=e>=ye?.5:2;n=g*W}else if(m<ye&&e>=ye){const se=t*2,Y=ye-m,H=e-ye,ne=Y*2+H*.5;n=se-ne}else{const W=e>=ye?.5:2;n=g*W}if(n<0)return"";const v=Math.floor(n/1440),f=Math.floor(n%1440/60),_=Math.floor(n%60),S=[];return v>0&&S.push(`${v} day${v>1?"s":""}`),f>0&&S.push(`${f} hour${f>1?"s":""}`),_>0&&S.push(`${_} minute${_!==1?"s":""}`),S.length>0?S.join(", "):"0 minutes"});ie(G,async t=>{if(t===99){if(console.log("📝 ENTERING REVIEW & VALIDATE TAB",{hasRegistrationHash:!!ae.value,hasAppSpecPrice:!!Q.value,hasCalculatedPrice:ut.value,specsHaveChanged:Kt.value,isNewApp:c.newApp}),ae.value){console.log("✅ Already registered - keeping existing states",{hasHash:!!ae.value,specsHaveChanged:Kt.value,testFinished:we.value,testError:xe.value}),la.value=!1,(c.newApp&&!we.value||!c.newApp&&!Kt.value)&&(we.value=!0,xe.value=!1),Ke&&clearTimeout(Ke),Ke=setTimeout(()=>{G.value===99&&(G.value=100),Ke=null},1e3);return}la.value=!0,console.log("🔍 Tab 99 BEFORE preserve logic:",{testFinishedBefore:we.value,testableFieldsHaveChanged:kt.value,testedSpecSnapshot:!!Et.value,isNewApp:c.newApp});const e=we.value&&!kt.value;console.log("🔍 Preserve calculation:",{testFinished:we.value,testableFieldsHaveChanged:kt.value,result:e}),bt.value=null,J.value=null,ae.value=null,It.value=null,na.value=null,Q.value=null,Le.value=null,qe.value=!1,We.value=null,ra.value=!1,xe.value=!1,we.value=!!e,ht.value=!1,e||(_t.value=[]),console.log("🔍 Tab 99 AFTER preserve logic:",{testFinishedAfter:we.value,preserveTestResults:e}),console.log("🔄 Tab 99 validation:",{preserveTestResults:e,testableFieldsHaveChanged:kt.value}),Tt.value=!1,qt.value=!1,ut.value=!1;let m=!1,g=!1,n=!1;if(console.log("🔄 Tab 99 - Before expire fix:",{managementAction:N.value,renewalEnabled:j.value,currentExpire:c.appSpec?.expire,supportsExpire:R.value.supportsExpire,newApp:c.newApp}),!c.newApp){if(N.value==="renewal"){const f=Ze.value[T.value.renewalIndex]?.value||88e3;c.appSpec.expire=f,console.log("🔄 Tab 99 - Set expire for renewal mode:",f)}else if(N.value==="update")if(j.value){const f=Ze.value[T.value.renewalIndex]?.value||88e3;c.appSpec.expire=f,console.log("🔄 Tab 99 - Set expire for update with renewal:",f)}else console.log("🔄 Tab 99 - Update without renewal, checking expire:",c.appSpec.expire),R.value.supportsExpire&&c.appSpec.expire<0?(c.appSpec.expire=88e3,console.log("🔄 Tab 99 - Fixed negative expire for update without renewal:",88e3)):console.log("🔄 Tab 99 - Keeping current expire (not negative or not v6+):",c.appSpec.expire)}console.log("🔄 Tab 99 - After expire fix:",c.appSpec?.expire),await Ys(),g=!0;const v=await Ks();if(It.value=v,m=!0,!v){la.value=!1,Tt.value=m,qt.value=g;return}await Zs(),n=!0,la.value=!1,Tt.value=m,qt.value=g,ut.value=n,$e.value==="sso"&&n&&await Za()}}),ie(G,async(t,e)=>{t===100&&e!==100&&(console.log("📋 ENTERING TEST & PAY TAB",{hasRegistrationHash:!!ae.value,testFinished:we.value,testError:xe.value,testRunning:ht.value,specsHaveChanged:Kt.value,testableFieldsHaveChanged:kt.value,shouldShowTestSection:Sa.value,isNewApp:c.newApp,appSpecPrice:Q.value?.flux}),Sa.value&&ae.value&&!ht.value?(console.log("🚀 AUTO-TRIGGERING TEST INSTALLATION"),await aa(),setTimeout(()=>{Ca()},500)):console.log("⏭️ Skipping auto-test:",{reason:Sa.value?ae.value?ht.value?"Test already running":"Unknown":"No registration hash":"Test section not visible (test not required)"}))});async function Hs(t){try{wt.value=!0;const e=(oe.entries||[]).map(v=>{const f=String(v?.key??"").trim(),_=String(v?.value??"").trim();return f&&_?`${f}=${_}`:""}).filter(Boolean);if(!e.length){M("warning","No environment variables to upload");return}if(e.some(v=>v.includes("F_S_ENV="))){M("warning","Environment parameters are already in Flux Storage");return}const m=Math.floor(Math.random()*999999999999999).toString(),{data:g}=await Xe.post("https://storage.runonflux.io/v1/env",{envid:m,env:e});if(g?.status==="error"){M("danger",g?.message||"Upload failed");return}const n=`F_S_ENV=https://storage.runonflux.io/v1/env/${m}`;M("success","Successful upload of Environment to Flux Storage"),oe.entries.splice(0,oe.entries.length,{key:"F_S_ENV",value:`https://storage.runonflux.io/v1/env/${m}`})}catch(e){M("danger",e?.message||String(e))}finally{wt.value=!1}}async function Gs(t){try{Oe.value=!0;const e=(ge.entries||[]).map(v=>typeof v=="string"?v.trim():String(v||"").trim()).filter(v=>v.length>0);if(!e.length){M("warning","No commands to upload");return}if(e.some(v=>v.includes("F_S_CMD="))){M("warning","Commands are already in Flux Storage");return}const m=Math.floor(Math.random()*999999999999999).toString(),{data:g}=await Xe.post("https://storage.runonflux.io/v1/cmd",{cmdid:m,cmd:e});if(g?.status==="error"){M("danger",g?.message||"Upload failed");return}const n=`F_S_CMD=https://storage.runonflux.io/v1/cmd/${m}`;M("success","Successful upload of Commands to Flux Storage"),ge.entries.splice(0,ge.entries.length,n)}catch(e){M("danger",e?.message||String(e))}finally{Oe.value=!1}}async function qs(){try{Ue.value=!0;const t=T.value.contacts;if(console.log(t),t.length===0){M("warning","No contacts to upload");return}if(t.some(v=>v.includes("F_S_CONTACTS="))){M("warning","Contacts are already in Flux Storage");return}const e=Math.floor(Math.random()*999999999999999).toString(),{data:m}=await Xe.post("https://storage.runonflux.io/v1/contacts",{contactsid:e,contacts:t});if(m?.status==="error"){M("danger",m?.message||"Upload failed");return}const n=`F_S_CONTACTS=${`https://storage.runonflux.io/v1/contacts/${e}`}`;M("success","Successful upload of Contacts to Flux Storage"),T.value.contacts.splice(0,T.value.contacts.length,n)}catch(t){M("danger",t?.message||String(t))}finally{Ue.value=!1}}async function Ks(){bt.value=null;try{const t=dt(c.appSpec);if(c.newApp&&Ge.value.length>0&&t.compose){const n=["PresearchNode","PresearchNodeLegacy"];for(const v of t.compose)if(v.repotag){const f=v.repotag.toLowerCase();for(const _ of Ge.value)if(n.includes(_.name)&&_.compose&&Array.isArray(_.compose)){for(const S of _.compose)if(S.repotag){const W=S.repotag.toLowerCase();if(f===W||f.includes(W.split(":")[0]))throw new Error(i("core.subscriptionManager.marketplaceAppRestricted",{repotag:v.repotag}))}}}}if(console.log("[verifyAppSpec] Original appSpecTemp:",{version:t.version,_isV3Original:t._isV3Original,hasCompose:!!t.compose,composePath:t.compose?.[0],flatPorts:t.ports,flatContainerPorts:t.containerPorts,flatEnvParams:t.enviromentParameters}),t._isV3Original&&t.compose&&t.compose[0]){console.log("[V3 Sync] BEFORE sync - compose[0] data:",{name:t.compose[0].name,ports:t.compose[0].ports,portsType:typeof t.compose[0].ports[0],containerPorts:t.compose[0].containerPorts,environmentParameters:t.compose[0].environmentParameters,repotag:t.compose[0].repotag}),console.log("[V3 Sync] BEFORE sync - flat fields:",{name:t.name,ports:t.ports,portsType:t.ports?typeof t.ports[0]:"undefined",containerPorts:t.containerPorts,enviromentParameters:t.enviromentParameters,repotag:t.repotag});const n=t.compose[0];t.name=n.name,t.description=n.description,t.repotag=n.repotag,t.containerData=n.containerData,t.cpu=n.cpu,t.ram=n.ram,t.hdd=n.hdd;const v=n.ports,f=n.containerPorts;t.ports=n.ports.map(S=>String(S)),t.containerPorts=n.containerPorts.map(S=>String(S)),console.log("[V3 Sync] Port conversion:",{portsFrom:v,portsTo:t.ports,containerPortsFrom:f,containerPortsTo:t.containerPorts}),t.enviromentParameters=n.environmentParameters,console.log("[V3 Sync] Environment parameters sync:",{from:"environmentParameters (no typo)",to:"enviromentParameters (with typo)",value:t.enviromentParameters}),t.commands=n.commands||[],t.domains=n.domains||[],t.tiered=!1,console.log("[V3 Sync] Forced tiered = false (V3 requires boolean)"),console.log("[V3 Sync] Deleting unsupported fields:",["compose","_isV3Original","contacts","geolocation","expire","nodes","staticip","enterprise","repoauth"]),delete t.compose,delete t._isV3Original,delete t.contacts,delete t.geolocation,delete t.expire,delete t.nodes,delete t.staticip,delete t.enterprise,delete t.repoauth,console.log("[V3 Sync] AFTER sync - Clean V3 flat structure:",{version:t.version,name:t.name,ports:t.ports,portsType:typeof t.ports[0],containerPorts:t.containerPorts,enviromentParameters:t.enviromentParameters,tiered:t.tiered,hasCompose:!!t.compose,has_isV3Original:!!t._isV3Original}),console.log("[V3 Sync] Complete V3 spec for validation:",JSON.stringify(t,null,2))}if(t.version>=8&&(console.log("[V8 Cleanup] Ensuring no tiered fields in components"),t.compose&&Array.isArray(t.compose))){const n=["tiered","cpubasic","rambasic","hddbasic","cpusuper","ramsuper","hddsuper","cpubamf","rambamf","hddbamf"];t.compose.forEach((v,f)=>{const _=n.filter(S=>v[S]!==void 0);_.length>0&&console.log(`[V8 Cleanup] Component[${f}] found tiered fields (removing):`,_),delete v.tiered,delete v.cpubasic,delete v.rambasic,delete v.hddbasic,delete v.cpusuper,delete v.ramsuper,delete v.hddsuper,delete v.cpubamf,delete v.rambamf,delete v.hddbamf})}console.log("[verifyAppSpec] After version-specific cleanup:",{version:t.version,hasCompose:!!t.compose,composeLength:t.compose?.length,hasTiered:t.tiered!==void 0,has_isV3Original:!!t._isV3Original}),t.version>=5&&(t.contacts||(t.contacts=[]),t.geolocation||(t.geolocation=[])),We.value!==null&&!j.value&&t.version>=6&&N.value==="update"&&(We.value>0?(t.expire=We.value,console.log(`[V${t.version}] UPDATE without renewal - sending fork-aware remaining blocks:`,We.value)):console.log(`[V${t.version}] App expired - keeping original expire:`,t.expire));const e=t.name,m=Ge.value.find(n=>e?.toLowerCase().startsWith(n.name.toLowerCase()));if(m&&(console.log("Marketplace app detected:",m.name),m.multiplier>1&&console.log("Marketplace multiplier:",m.multiplier,"× General:",Lt.value,"= Combined:",m.multiplier*Lt.value)),delete t.priceUSD,t.version>=7&&t.compose&&Array.isArray(t.compose)&&t.compose.forEach(n=>{n.hasOwnProperty("repoauth")||(n.repoauth=""),t.version===7&&!n.hasOwnProperty("secrets")&&(n.secrets="")}),t.version>=8){if(console.log("Version 8+ app - checking enterprise mode"),console.log("UI isPrivateApp state:",Pe.value),console.log("AppSpec enterprise field:",t.enterprise),Pe.value){console.log("Enterprise v8+ encryption process starting..."),console.log("Original appSpecTemp before encryption:",JSON.stringify(t,null,2));const n=localStorage.getItem("zelidauth");console.log("Using current owner for encryption:",t.owner);const v={name:t.name,owner:t.owner},f=await ct.getAppPublicKey(n,v);if(console.log("getAppPublicKey response:",f.data),f.data.status==="error"){const ne=f.data.data;let ee="Failed to get app public key";throw ne&&(typeof ne=="string"?ee=ne:ne.message?ee=ne.message:ee=JSON.stringify(ne)),new Error(ee)}const _=f.data.data;if(console.log("Retrieved public key length:",_.length),!Zl()){console.warn("WebCrypto not available, cannot use enterprise features"),M("warning","Enterprise features require HTTPS or localhost. Please access this application using a secure connection.","mdi-alert-triangle",6e3),appSpec.value.enterprise="";return}const S=await Yl(_),W=crypto.getRandomValues(new Uint8Array(32)),se=await Xl(W,S),Y={contacts:t.contacts,compose:t.compose};console.log("Enterprise specs to encrypt:",JSON.stringify(Y,null,2));const H=await Ql(JSON.stringify(Y),W,se);console.log("Encrypted enterprise data length:",H.length),t.enterprise=H,t.contacts=[],t.compose=[],console.log("AppSpecTemp after encryption:",JSON.stringify(t,null,2))}}else if(t.version===7&&Pe.value){if(!ve.value||ve.value.length===0)throw new Error("Please select enterprise nodes for your private application");const n=await en(ve.value);let v=!1;for(const f of t.compose||[]){if(f.secrets&&!f.secrets.startsWith("-----BEGIN PGP MESSAGE")){const _=await Wo(f.secrets,n);f.secrets=_,v=!0}if(f.repoauth&&!f.repoauth.startsWith("-----BEGIN PGP MESSAGE")){const _=await Wo(f.repoauth,n);f.repoauth=_,v=!0}}t.nodes=ve.value.map(f=>f.ip),!v&&t.nodes.length===0&&M("warning","No secrets or repository authentication to encrypt, but nodes have been set")}if(console.log("Sending appSpec for validation:",t),Pe.value&&t.version===7&&(!t.nodes||t.nodes.length===0))throw new Error("Enterprise app requires selected nodes");if(t.version>=8&&Pe.value){if(console.log("Enterprise app validation - checking required fields"),!t.enterprise||t.enterprise.length===0)throw new Error("Enterprise encryption failed - no encrypted data");if(!t.name||!t.owner)throw new Error("Enterprise app missing required fields: name or owner");Array.isArray(t.contacts)||(t.contacts=[]),Array.isArray(t.compose)||(t.compose=[])}console.log("[verifyAppSpec] Using AppsService for verification:",c.newApp?"registration":"update");const g=c.newApp?await ct.appRegistrationVerificaiton(t):await ct.appUpdateVerification(t);if(g.data?.status!=="success"){console.error("Validation failed. Full response:",g.data),console.error("Request that failed:",JSON.stringify(t,null,2));let n="Validation failed";return g.data?.data?(typeof g.data.data=="string"?n=g.data.data:g.data.data.message?n=g.data.data.message:n=JSON.stringify(g.data.data),n.includes("appSpecifications")&&(n="Enterprise validation error: Backend expects different data format. Please check that all required fields are present.")):g.data?.message&&(n=g.data.message),na.value=n,M("error",n),!1}return bt.value=g.data.data,!0}catch(t){console.error("Validation error caught:",t),console.error("Error response:",t.response?.data);let e=t.message||t.toString()||"Unknown error";return(e.includes("appSpecifications")||t.response?.data&&JSON.stringify(t.response.data).includes("appSpecifications"))&&(e="Enterprise validation failed: Data structure mismatch. This may be due to encryption process issues."),e.includes("select enterprise nodes")&&(e=i("core.subscriptionManager.enterpriseNodesRequired")),na.value=e,M("error",e),!1}}async function Zs(){try{const t=bt.value?.name,e=Ge.value.find(n=>t?.toLowerCase().startsWith(n.name.toLowerCase()));console.log("=== Price Calculation Debug ==="),console.log("App name:",t),console.log("Marketplace apps loaded:",Ge.value.length),console.log("Is marketplace app:",!!e),e&&(console.log("Marketplace app details:",e),console.log("Marketplace multiplier:",e.multiplier),e.multiplier>1&&console.log("Combined multiplier (marketplace × general):",e.multiplier*Lt.value),console.log("Note: Backend will apply multipliers automatically"));const m=dt(bt.value);delete m.priceUSD;const g=await ct.appPriceUSDandFlux(m);return console.log("Price calculation response:",g.data),g.data?.status!=="success"?(Q.value=null,!1):(Q.value=g.data.data,console.log("Calculated price:",Q.value),e&&(Pa.value=!0),!0)}catch(t){return console.error("Price calculation error:",t),Q.value=null,!1}}async function Ys(){try{const t=await Gl.getBlockCount();if(t?.data?.status==="success"&&typeof t.data?.data=="number"){Le.value=t.data.data;const e=c.appSpec?.height&&c.appSpec.height>=ye?88e3:22e3,m=c.appSpec?.expire??e,g=j.value||c.newApp?Le.value:c.appSpec.height;if(console.log("Expire blocks:",m),console.log("Block height:",Le.value),console.log("Is new app:",c.newApp),typeof g=="number")if(We.value=g+m-Le.value,console.log("Blocks to expire (initial):",We.value),c.newApp)We.value=m,qe.value=!0,console.log("New app - blocks to expire:",We.value,"isExpiryValid:",qe.value);else if(!j.value&&N.value!=="renewal"&&N.value!=="cancel"){let n=0;if(g<ye&&Le.value>=ye){const _=m*2,S=ye-g,W=Le.value-ye,se=S*2+W*.5;n=_-se}else{const f=Le.value>=ye?.5:2;n=We.value*f}const v=10080;qe.value=n>=v,Le.value>=ye&&n>0?We.value=Math.floor(n/.5):n>0&&(We.value=Math.floor(n/2)),console.log("Expiry validation:",{height:g,blockHeight:Le.value,expireBlocks:m,blocksToExpire:We.value,remainingMinutes:n,minMinutes:v,isExpiryValid:qe.value})}else qe.value=!0;else qe.value=!!c.newApp,console.log("Height is not a number, isExpiryValid:",qe.value)}else console.log("Failed to get block count, response:",t?.data),Le.value=null,qe.value=!!c.newApp}catch(t){console.error("Error fetching block height:",t),Le.value=null,qe.value=!!c.newApp}}const Xs=le(()=>{const e=`${localStorage.getItem("backendURL")||Eo()}/id/providesign`;return encodeURI(e)}),Ut=k("");async function Za(){Ge.value.find(e=>bt.value.name.toLowerCase().startsWith(e.name.toLowerCase()))&&(Pa.value=!0),pe.value=!0,B.value=!1,Se.value=Date.now(),Ut.value=`${Fe.value}${Av}${JSON.stringify(bt.value)}${Se.value}`,await kl()}function Qs(){pe.value=!1,me.value&&(me.value.close(),me.value=null),X.value&&(X.value=null),M("info","Signing cancelled")}async function el(){if(!J.value){M("error","No signature found. Please sign the message first.");return}ra.value=!0;try{const t={type:Fe.value,version:1,appSpecification:bt.value,timestamp:Se.value,signature:J.value},e=localStorage.getItem("zelidauth"),m=c.newApp?await ct.registerApp(e,t):await ct.updateApp(e,t);if(m.data?.status==="success")ae.value=m.data.data,M("success","Application registered successfully! Redirecting to Test & Pay..."),await tl(),Ke&&clearTimeout(Ke),Ke=setTimeout(()=>{G.value=100,Ke=null},2e3);else throw new Error(m.data?.data?.message||m.data?.data||"Registration failed")}catch(t){console.error("Registration error:",t);let e="Failed to register application";t.response?.data?.data?.message?e=t.response.data.data.message:t.response?.data?.data?e=t.response.data.data:t.message&&(e=t.message),M("error",e),J.value="",B.value=!0}finally{ra.value=!1}}async function tl(){try{const t=await ct.appsDeploymentInformation();t.data?.status==="success"&&(rt.value=t.data.data.address)}catch(t){console.error("Failed to get deployment info:",t)}}async function Ca(){if(!ae.value){M("error","Please propagate the signed message first");return}xe.value=!1,we.value=!1,ht.value=!0,Re.value=!1,_t.value=[],await aa(),await new Promise(t=>setTimeout(t,50)),Re.value=!0,M("info",i("core.subscriptionManager.testStarting")),_t.value.push({status:"info",message:i("core.subscriptionManager.testInitializing"),timestamp:new Date().toISOString(),step:"init"});try{const t=localStorage.getItem("zelidauth");await st(i("core.subscriptionManager.testPreparingEnvironment"),"info",500),await st(i("core.subscriptionManager.testConnectingNetwork"),"info",800),await st(i("core.subscriptionManager.testValidatingImage"),"info",1e3),console.log("Testing with hash:",ae.value,"isNewApp:",c.newApp),console.log("Testing on Flux network via AppsService");const e=await ct.testAppInstall(t,ae.value);if(await st(i("core.subscriptionManager.testProcessingResults"),"info",300),console.log("Test response:",e.data),e.data?.status==="error"){await st(`Test failed: ${e.data.data?.message||e.data.data||"Unknown error"}`,"error",200),xe.value=!0,M("error",i("core.subscriptionManager.testInstallationFailed"));return}if(e.data?.status==="success"&&e.data?.data){await st(i("core.subscriptionManager.testAnalyzingResults"),"info",400);const m=e.data.data;let g=[];if(typeof m=="string"&&m.trim().length>0)try{const S=m.includes("}{")?m.replace(/}{/g,"},{"):m;S.trim().startsWith("{")||S.trim().startsWith("[")?g=JSON.parse(S.startsWith("[")?S:`[${S}]`):g=[{status:"info",message:m}]}catch(S){console.warn("Failed to parse JSON output:",S),g=[{status:"info",message:m}]}for(const S of g)await st(S.message||i("core.subscriptionManager.testStepCompleted"),S.status||"info",200,S);const n=S=>!S||typeof S!="string"?!1:/ERROR|FAILED|FATAL|Exception|CRASH|ABORT|terminated|exit code [1-9]/i.test(S),v=S=>!S||typeof S!="string"?!1:/WARNING|WARN|deprecated/i.test(S),f=g.some(S=>S.status==="error"||n(S.message)),_=g.some(S=>S.status==="warning"||v(S.message));f?(await st(i("core.subscriptionManager.testCompletedWithErrors"),"error",300),xe.value=!0,M("error",i("core.subscriptionManager.testFailedCheckInstallationLogs"))):_?(await st(i("core.subscriptionManager.testCompletedWithWarnings"),"warning",300),xe.value=!1,Re.value=!1,M("warning",i("core.subscriptionManager.testWarningsReviewLogs"))):(await st(i("core.subscriptionManager.testInstallationSuccessful"),"success",300),xe.value=!1,Re.value=!1,M("success",i("core.subscriptionManager.testPassedReady")))}else await st(i("core.subscriptionManager.testInstallationCompletedSuccessfully"),"success",300),xe.value=!1,Re.value=!1,M("success",i("core.subscriptionManager.testCompletedReady"))}catch(t){await st(`Test failed: ${t.message||"Unknown error"}`,"error",200),xe.value=!0,M("error",i("core.subscriptionManager.testInstallationFailed")),console.error("Test error:",t)}finally{if(ht.value=!1,we.value=!0,c.newApp&&c.appSpec&&!xe.value){const t=dt(c.appSpec);it.forEach(e=>delete t[e]),t.compose&&Array.isArray(t.compose)&&t.compose.forEach(e=>{it.forEach(m=>delete e[m])}),Et.value=t,console.log("📸 Saved tested spec snapshot for new app (test succeeded, excluding non-testable fields:",it,")")}else c.newApp&&xe.value&&console.log("⚠️ Test failed - NOT saving snapshot (user must retest on any change)");await st(i("core.subscriptionManager.testProcessCompleted"),"info",200),console.log("Test completed:",{testFinished:we.value,testError:xe.value,testOutput:_t.value.length,shouldShowPayment:we.value&&!xe.value})}}async function st(t,e,m,g={}){_t.value.push({status:e,message:t,timestamp:new Date().toISOString(),step:g.step||`step-${_t.value.length}`,...g}),m>0&&await new Promise(n=>setTimeout(n,m))}function al(){xe.value=!1,we.value||(we.value=!0),M("warning","Payment manually enabled. Please proceed with caution and ensure your app specifications are correct."),console.log("Payment manually enabled by user")}function ol(t){if(!t)return"";let e="";if(t.timestamp){const n=new Date(t.timestamp);e+=`[${n.toLocaleTimeString()}] `}const m=t.status?.toUpperCase()||"INFO",g={SUCCESS:"✓",ERROR:"✗",WARNING:"⚠",INFO:"ℹ"}[m]||"ℹ";return e+=`${g} ${m}: `,t.message&&(e+=t.message),t.step&&t.step!=="init"&&(e+=` (${t.step})`),(t.containerName||t.appName)&&(e+=`
    App: ${t.containerName||t.appName}`),t.node&&(e+=`
    Node: ${t.node}`),t.progress!==void 0&&(e+=`
    Progress: ${t.progress}%`),t.data&&typeof t.data=="object"&&t.data!==t&&(t.data.details&&(e+=`
    Details: ${t.data.details}`),t.data.port&&(e+=`
    Port: ${t.data.port}`),t.data.image&&(e+=`
    Image: ${t.data.image}`)),e}function sl(t){switch(t){case"success":return"success";case"error":return"error";case"warning":return"warning";case"info":return"info";default:return"primary"}}function ll(t){switch(t){case"success":return"mdi-check-circle";case"error":return"mdi-alert-circle";case"warning":return"mdi-alert-triangle";case"info":return"mdi-information";default:return"mdi-circle-outline"}}async function nl(t=null,e=null,m=null,g=null){try{Ct.value="",ke.value=!0;const n=localStorage.getItem("zelidauth");if(console.log("Stripe - zelidauth:",n?"Present":"Missing"),!n){M("error","Authentication required - please login first"),ke.value=!1;return}const v=Ea.parse(n);if(console.log("Stripe - Parsed auth:",{hasZelid:!!v.zelid,zelid:v.zelid?v.zelid.substring(0,8)+"...":"none",hasSignature:!!v.signature,hasLoginPhrase:!!v.loginPhrase}),!v.zelid||!v.signature||!v.loginPhrase){M("error","Invalid authentication data - please login again"),ke.value=!1;return}const f={zelid:v.zelid,signature:v.signature,loginPhrase:v.loginPhrase,details:{name:e||T.name,description:g||T.description,hash:t||ae.value,price:m||Q.value?.usd||0,productName:e||T.name,success_url:`${window.location.origin}/successcheckout`,cancel_url:window.location.origin,kpi:{origin:"FluxOS",marketplace:Pa.value,registration:c.newApp||c.isRedeploy}}},_=t||ae.value,S=e||T.name,W=g||T.description,se=m||Q.value?.usd||0;if(!_){M("error","Registration hash required - please register application first"),ke.value=!1;return}if(!se||se<=0){M("error","Invalid price - please calculate price first"),ke.value=!1;return}if(!S){M("error","Application name required"),ke.value=!1;return}console.log("Stripe checkout request data:",JSON.stringify(f,null,2)),console.log("Stripe - appDetails:",T),console.log("Stripe - registrationHash:",ae.value),console.log("Stripe - appSpecPrice:",Q.value);const Y=window.open("about:blank","_blank","width=800,height=600,scrollbars=yes,resizable=yes");if(!Y||Y.closed||typeof Y.closed>"u"){console.warn("Stripe checkout popup was blocked by browser"),ke.value=!1;try{const H=await Xe.post(`${Da}/api/v1/stripe/checkout/create`,f);H.data.status==="success"&&(y.value=!0,w.value=H.data.data,U.value="Stripe")}catch(H){console.error("Stripe checkout error:",H)}return}Y.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${i("core.subscriptionManager.loadingStripeCheckout")}</title>
          <style>
            body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            .loader-container { text-align: center; color: white; }
            .spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid white; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
            h2 { margin: 0 0 10px 0; font-weight: 600; }
            p { margin: 0; opacity: 0.9; font-size: 14px; }
          </style>
        </head>
        <body>
          <div class="loader-container">
            <div class="spinner"></div>
            <h2>${i("core.subscriptionManager.redirectingToStripe")}</h2>
            <p>${i("core.subscriptionManager.pleaseWaitCheckout")}</p>
          </div>
        </body>
      </html>
    `);try{const H=await Xe.post(`${Da}/api/v1/stripe/checkout/create`,f);if(console.log("Stripe checkout response:",H.data),H.data.status==="error"){console.error("Stripe checkout error:",H.data),M("error",`Stripe checkout failed: ${H.data.message||H.data.data||"Unknown error"}`),Y.close(),ke.value=!1;return}Ct.value=H.data.data,ke.value=!1,je.value="Stripe",He.value=se,Y.location.href=H.data.data,Y.focus(),Yt(),M("info","Stripe checkout opened. Complete payment in the new window.")}catch(H){console.error("Stripe API error:",H),Y.close(),M("error","Failed to create Stripe checkout session"),ke.value=!1}}catch(n){console.error("Stripe checkout network error:",n),console.error("Stripe error response:",n.response?.data);const v=n.response?.data?.message||n.response?.data?.data||n.message||"Connection failed";M("error",`Stripe checkout error: ${v}`),ke.value=!1}}async function rl(t=null,e=null,m=null,g=null){try{Ct.value="",ke.value=!0;let n=null,v=await Xe.get("https://api.ipify.org?format=json").catch(()=>{console.log("Error geting clientIp from api.ipify.org from")});v&&v.data&&v.data.ip?n=v.data.ip:(v=await Xe.get("https://ipinfo.io").catch(()=>{console.log("Error geting clientIp from ipinfo.io from")}),v&&v.data&&v.data.ip?n=v.data.ip:(v=await Xe.get("https://api.ip2location.io").catch(()=>{console.log("Error geting clientIp from api.ip2location.io from")}),v&&v.data&&v.data.ip&&(n=v.data.ip)));const f=localStorage.getItem("zelidauth");if(console.log("PayPal - zelidauth:",f?"Present":"Missing"),!f){M("error","Authentication required - please login first"),ke.value=!1;return}const _=Ea.parse(f);if(console.log("PayPal - Parsed auth:",{hasZelid:!!_.zelid,zelid:_.zelid?_.zelid.substring(0,8)+"...":"none",hasSignature:!!_.signature,hasLoginPhrase:!!_.loginPhrase}),!_.zelid||!_.signature||!_.loginPhrase){M("error","Invalid authentication data - please login again"),ke.value=!1;return}const S={zelid:_.zelid,signature:_.signature,loginPhrase:_.loginPhrase,details:{clientIP:n,name:e||T.name,description:g||T.description,hash:t||ae.value,price:m||Q.value?.usd||0,productName:e||T.name,return_url:`${window.location.origin}/successcheckout`,cancel_url:window.location.origin,kpi:{origin:"FluxOS",marketplace:Pa.value,registration:c.newApp||c.isRedeploy}}},W=t||ae.value,se=e||T.name,Y=g||T.description,H=m||Q.value?.usd||0;if(!W){M("error","Registration hash required - please register application first"),ke.value=!1;return}if(!H||H<=0){M("error","Invalid price - please calculate price first"),ke.value=!1;return}if(!se){M("error","Application name required"),ke.value=!1;return}console.log("PayPal checkout request data:",JSON.stringify(S,null,2)),console.log("PayPal - appDetails:",T),console.log("PayPal - registrationHash:",ae.value),console.log("PayPal - appSpecPrice:",Q.value);const ne=window.open("about:blank","_blank","width=800,height=600,scrollbars=yes,resizable=yes");if(!ne||ne.closed||typeof ne.closed>"u"){console.warn("PayPal checkout popup was blocked by browser"),ke.value=!1;try{const ee=await Xe.post(`${Da}/api/v1/paypal/checkout/create`,S);ee.data.status==="success"&&(y.value=!0,w.value=ee.data.data,U.value="PayPal")}catch(ee){console.error("PayPal checkout error:",ee)}return}ne.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>${i("core.subscriptionManager.loadingPayPalCheckout")}</title>
          <style>
            body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #0070ba 0%, #1546a0 100%); }
            .loader-container { text-align: center; color: white; }
            .spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid white; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 0 auto 20px; }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
            h2 { margin: 0 0 10px 0; font-weight: 600; }
            p { margin: 0; opacity: 0.9; font-size: 14px; }
          </style>
        </head>
        <body>
          <div class="loader-container">
            <div class="spinner"></div>
            <h2>${i("core.subscriptionManager.redirectingToPayPal")}</h2>
            <p>${i("core.subscriptionManager.pleaseWaitCheckout")}</p>
          </div>
        </body>
      </html>
    `);try{const ee=await Xe.post(`${Da}/api/v1/paypal/checkout/create`,S);if(console.log("PayPal checkout response:",ee.data),ee.data.status==="error"){console.error("PayPal checkout error:",ee.data),M("error",`PayPal checkout failed: ${ee.data.message||ee.data.data||"Unknown error"}`),ne.close(),ke.value=!1;return}Ct.value=ee.data.data,ke.value=!1,je.value="PayPal",He.value=H,ne.location.href=ee.data.data,ne.focus(),Yt(),M("info","PayPal checkout opened. Complete payment in the new window.")}catch(ee){console.error("PayPal API error:",ee),ne.close(),M("error","Failed to create PayPal checkout session"),ke.value=!1}}catch(n){console.error("PayPal checkout network error:",n),console.error("PayPal error response:",n.response?.data);const v=n.response?.data?.message||n.response?.data?.data||n.message||"Connection failed";M("error",`PayPal checkout error: ${v}`),ke.value=!1}}const Yt=async()=>{console.log("🚀 START PAYMENT MONITORING",{registrationHash:ae.value,isFreeUpdate:Q.value?.flux===0}),he.value&&clearInterval(he.value),q.value&&clearTimeout(q.value),l.value=!0,$.value=!1,console.log("✅ paymentProcessing set to true - monitoring UI should now be visible"),q.value=setTimeout(()=>{he.value&&(clearInterval(he.value),he.value=null),$.value||(M("warning","Payment monitoring timed out. Please check your application status."),l.value=!1)},1800*1e3),he.value=setInterval(async()=>{const t=c.newApp?T.value.name:c.appSpec?.name;console.log("⏰ MONITORING CHECK - Polling for deployment status...",{timestamp:new Date().toLocaleTimeString(),appName:t,"appDetails.value.name":T.value.name,"props.appSpec?.name":c.appSpec?.name,isNewApp:c.newApp,registrationHash:ae.value});try{if(!t){console.warn("⚠️ No app name available for monitoring");return}if(c.newApp){const e=await ct.getAppLocation(t);if(e.data&&e.data.status==="success"){const m=e.data.data;console.log("🔍 Checking new app deployment:",{appLocation:m,hasInstances:m&&m.length>0}),m&&m.length>0&&(console.log("✅ NEW APP DEPLOYMENT DETECTED - App is running!"),clearInterval(he.value),clearTimeout(q.value),he.value=null,q.value=null,$.value=!0,l.value=!1,K.value=!0,console.log("✅ Deployment successful - registrationHash kept for UI stability"),M("success",Q.value?.flux===0?i("core.subscriptionManager.deploymentSuccessfulRunning"):i("core.subscriptionManager.paymentConfirmedActive")))}}else{const e=await ct.getAppSpecifics(t);if(e.data&&e.data.status==="success"){const m=e.data.data;if(console.log("🔍 Checking update deployment:",{currentHash:m?.hash,registeredHash:ae.value,hashesMatch:m?.hash===ae.value}),m?.hash&&ae.value&&m.hash===ae.value){if(console.log("✅ UPDATE DETECTED - Hash matches!"),clearInterval(he.value),clearTimeout(q.value),he.value=null,q.value=null,$.value=!0,l.value=!1,K.value=!0,c.appSpec){const g=dt(c.appSpec);delete g.expire,da.value=g,console.log("📸 Updated originalAppSpecSnapshot after successful deployment")}console.log("✅ Deployment successful - registrationHash kept for UI stability"),M("success",Q.value?.flux===0?i("core.subscriptionManager.updateDeployedSuccessfully"):i("core.subscriptionManager.paymentConfirmedSpecUpdated"))}}}}catch(e){console.error("Error checking payment status:",e)}},3e4)},il=()=>{w.value&&(window.open(w.value,"_blank"),y.value=!1,Yt(),M("info",`${U.value} checkout opened. Complete payment in the new tab.`))},To=()=>{he.value&&(clearInterval(he.value),he.value=null),q.value&&(clearTimeout(q.value),q.value=null),l.value=!1,$.value=!1,je.value="",He.value=0,M("info","Payment monitoring cancelled")};async function ul(){try{const t=Q.value?.flux;if(!t||t<=0){M("error","Invalid payment amount. Please validate your app specifications first.");return}if(!rt.value){M("error","Deployment address not available");return}if(!ae.value){M("error","Registration hash not available");return}je.value="Zelcore",He.value=t,await Ll({address:rt.value,amount:t,message:ae.value,coin:"zelcash"}),M("info","Zelcore payment initiated - please complete payment in Zelcore wallet"),Yt()}catch{M("error","Failed to open Zelcore")}}async function dl(){try{const t=Q.value?.flux;if(!t||t<=0){M("error","Invalid payment amount. Please validate your app specifications first.");return}if(!rt.value){M("error","Deployment address not available");return}if(!ae.value){M("error","Registration hash not available");return}je.value="SSP",He.value=t;const e={message:ae.value,amount:t.toString(),address:rt.value,chain:"flux"},m=await Il(e);M("success",`${m.data}: ${m.txid}`),Yt()}catch(t){M("error",t.message),je.value="",He.value=0}}async function cl(){try{const t=Ut.value,e=Rl();if(!e){M("error","Not logged in as SSO"),pe.value=!1,B.value=!0;return}const g={"Content-Type":"application/json",Authorization:`Bearer ${e.auth.currentUser.accessToken}`},n=await Xe.post("https://service.fluxcore.ai/api/signMessage",{message:t},{headers:g});if(n.data?.status!=="success"||!n.data?.signature){M("error","SSO signing failed"),pe.value=!1,B.value=!0;return}J.value=n.data.signature}catch(t){M("error","SSO error: "+t.message),pe.value=!1,B.value=!0}}async function pl(){try{const t=localStorage.getItem("zelidauth");let e;t&&(e=(t.includes("zelid=")?Object.fromEntries(new URLSearchParams(t)):JSON.parse(t)).zelid);let m=localStorage.getItem("backendURL")||Eo();m=m.replace("https://","wss://").replace("http://","ws://");const g=`${c.appSpec.owner}${Se.value}`,n=`${m}/ws/sign/${g}`;console.log("Creating WebSocket:",n),me.value=new WebSocket(n),me.value.onopen=fl,me.value.onclose=vl,me.value.onerror=gl,me.value.onmessage=ml,await Ol(Ut.value,e,Xs.value,void 0,!0)}catch(t){M("error",`Zelcore sign error: ${t}`),pe.value=!1,B.value=!0}}function ml(t){const e=Ea.parse(t.data);e.status==="success"&&(e["data[signature]"]?J.value=e["data[signature]"]:e.data&&typeof e.data=="object"&&e.data.signature?J.value=e.data.signature:e.signature&&(J.value=e.signature))}function fl(t){}function vl(t){}function gl(t){console.error("WS error",t)}async function bl(){try{if(!await Ul()){M("error","WalletConnect not connected. Please log into FluxOS first."),pe.value=!1,B.value=!0;return}const e=await Bl(Ut.value);J.value=e}catch(t){M("error",t.message),pe.value=!1,B.value=!0}}async function hl(){try{const t=window.ethereum;if(!t){M("danger","Metamask not found"),pe.value=!1,B.value=!0;return}const e=t.selectedAddress||(await t.request({method:"eth_requestAccounts"}))[0],m=`0x${window.Buffer.from(Ut.value,"utf8").toString("hex")}`,g=await t.request({method:"personal_sign",params:[m,e]});J.value=g}catch(t){M("error",t.message),pe.value=!1,B.value=!0}}async function yl(){try{const t=await Fl(Ut.value);J.value=t.signature}catch(t){M("error",t.message),pe.value=!1,B.value=!0}}const ba=k(!1),Va=k("");async function xl(){try{const t=localStorage.getItem("zelidauth");if(!t){M("error",i("core.subscriptionManager.noLoginCredentials")),pe.value=!1,B.value=!0;return}const e=t.includes("zelid=")?Object.fromEntries(new URLSearchParams(t)):JSON.parse(t);Va.value=Ut.value,ba.value=!0}catch(t){M("error",i("core.subscriptionManager.failedToPrepareManualSigning",{error:t.message})),pe.value=!1,B.value=!0}}function wl(t){if(!t||!t.trim()){M("error",i("core.subscriptionManager.pleaseEnterSignature"));return}J.value=t.trim(),ba.value=!1,Va.value=""}function _l(){ba.value=!1,Va.value="",pe.value=!1,B.value=!0}async function kl(){switch($e.value){case"sso":await cl();break;case"zelcore":await pl();break;case"walletconnect":await bl();break;case"metamask":await hl();break;case"ssp":await yl();break;case"manual":await xl();break;default:M("error",`Unknown loginType: ${$e}`)}}return(t,e)=>{const m=Hi,g=Ml;return b(),P(de,null,[o(Me,{flat:""},{default:a(()=>[o(mt,{class:"align-center justify-space-between mb-2"},{default:a(()=>[o(Ce,{cols:"12",class:"d-flex align-center"},{default:a(()=>[s("div",Du,[s("div",Nu,[o(ya,{size:"35",color:"success",variant:"tonal",rounded:"sm",class:"mr-2 ml-1"},{default:a(()=>[o(p,{size:"26"},{default:a(()=>[r(d(c.newApp?"mdi-package-variant-plus":"mdi-account-cog"),1)]),_:1})]),_:1}),s("span",Lu,d(c.newApp?u(i)("core.subscriptionManager.registerNewApplication"):u(i)("core.subscriptionManager.title")),1)]),s("div",Iu,[c.isRedeploy&&h.value>=3&&h.value<u(Ve)?(b(),I(re,{key:0,location:"top"},{activator:a(({props:n})=>[o(L,ce(n,{icon:"",color:"warning",variant:"tonal",density:"comfortable",class:"import-glow-btn border-frame-btn",onClick:ss,loading:Z.value,disabled:Z.value}),{default:a(()=>[o(p,{size:"26"},{default:a(()=>[...e[70]||(e[70]=[r("mdi-upload",-1)])]),_:1})]),_:1},16,["loading","disabled"])]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.upgradeToLatest")),1)]),_:1})):C("",!0),c.newApp?(b(),I(re,{key:1,location:"top"},{activator:a(({props:n})=>[o(L,ce(n,{icon:"",color:"success",variant:"tonal",density:"comfortable",class:"import-glow-btn border-frame-btn",disabled:!Te.value,onClick:e[0]||(e[0]=v=>qa.value=!0)}),{default:a(()=>[o(p,{size:"22"},{default:a(()=>[...e[71]||(e[71]=[r("mdi-file-import",-1)])]),_:1})]),_:1},16,["disabled"])]),default:a(()=>[s("span",null,d(Te.value?u(i)("core.subscriptionManager.importSpec"):u(i)("core.subscriptionManager.tos.acceptFirst")),1)]),_:1})):C("",!0)])])]),_:1})]),_:1}),!c.newApp&&G.value!==99&&G.value!==100?(b(),P("div",Fu,[o(Ko,{modelValue:N.value,"onUpdate:modelValue":e[1]||(e[1]=n=>N.value=n),mandatory:"",rounded:"lg",color:"primary",variant:"flat",divided:"",density:"compact",class:"d-flex flex-wrap ga-1"},{default:a(()=>[o(L,{value:"renewal",class:"flex-grow-1",size:"large"},{default:a(()=>[o(p,{start:"",size:"22"},{default:a(()=>[...e[72]||(e[72]=[r("mdi-refresh",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.renewalAction")),1)]),_:1}),o(L,{value:"update",class:"flex-grow-1",size:"large"},{default:a(()=>[o(p,{start:"",size:"22"},{default:a(()=>[...e[73]||(e[73]=[r("mdi-pencil",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.updateAction")),1)]),_:1}),R.value.supportsExpire?(b(),I(L,{key:0,value:"cancel",class:"flex-grow-1",size:"large"},{default:a(()=>[o(p,{start:"",size:"22"},{default:a(()=>[...e[74]||(e[74]=[r("mdi-cancel",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.cancelAction")),1)]),_:1})):C("",!0)]),_:1},8,["modelValue"])])):C("",!0),c.newApp||N.value==="update"?(b(),P("div",Uu,[s("div",{class:Mt(["d-flex flex-grow-1 min-w-0 align-center tabs-inner-overflow",t.$vuetify.display.xs?"gap-1":""])},[o(Do,{modelValue:G.value,"onUpdate:modelValue":e[3]||(e[3]=n=>G.value=n),start:"",density:"comfortable",class:"v-tabs-pill mobile-scrollable-tabs"},{default:a(()=>[(b(!0),P(de,null,Qe(ka.value,(n,v)=>(b(),I(No,{key:v,value:n.value,class:"mobile-circle-tab mx-1"},{default:a(()=>[t.$vuetify.display.xs?(b(),I(re,{key:0,location:"top",activator:"parent"},{default:a(()=>[r(d(n.label),1)]),_:2},1024)):C("",!0),s("div",Bu,[o(p,{style:Qt({fontSize:"22px !important",height:"22px !important",width:"22px !important",marginRight:t.$vuetify.display.xs?"0":"4px"})},{default:a(()=>[r(d(n.icon),1)]),_:2},1032,["style"]),s("span",Ou,d(n.label),1)])]),_:2},1032,["value"]))),128)),t.$vuetify.display.xs?(b(),I(re,{key:0,location:"top"},{activator:a(({props:n})=>[o(L,ce(n,{icon:"",color:"success",variant:"tonal",class:"mobile-circle-tab review-glow-btn mx-1",style:{width:"44px !important",height:"44px !important"},onClick:e[2]||(e[2]=v=>G.value=99),disabled:G.value!==2}),{default:a(()=>[o(p,{style:{fontSize:"22px !important",height:"22px !important",width:"22px !important"}},{default:a(()=>[...e[75]||(e[75]=[r(" mdi-check-decagram ",-1)])]),_:1})]),_:1},16,["disabled"])]),default:a(()=>[c.newApp?(b(),P("span",Ru,d(u(i)("core.subscriptionManager.reviewAndSign")),1)):N.value==="renewal"?(b(),P("span",ju,d(u(i)("core.subscriptionManager.reviewAndSign")),1)):N.value==="update"?(b(),P("span",Wu,d(u(i)("core.subscriptionManager.updateAction")),1)):C("",!0)]),_:1})):C("",!0)]),_:1},8,["modelValue"])],2),o(re,{location:"top","max-width":"200"},{activator:a(({props:n})=>[t.$vuetify.display.xs?C("",!0):(b(),I(L,ce({key:0},n,{color:"success",variant:"tonal",class:"ml-2 review-glow-btn",style:{"margin-right":"12px"},onClick:e[4]||(e[4]=v=>G.value=99),disabled:G.value!==3}),{default:a(()=>[o(p,{size:"24",class:"mr-1"},{default:a(()=>[...e[76]||(e[76]=[r("mdi-check-decagram",-1)])]),_:1}),c.newApp?(b(),P("span",Ju,d(u(i)("core.subscriptionManager.review")),1)):N.value==="renewal"?(b(),P("span",Hu,d(u(i)("core.subscriptionManager.review")),1)):N.value==="update"?(b(),P("span",Gu,d(u(i)("core.subscriptionManager.updateAction")),1)):C("",!0)]),_:1},16,["disabled"]))]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.reviewTooltip")),1)]),_:1})])):C("",!0),!c.newApp&&N.value==="renewal"&&G.value!==99&&G.value!==100?(b(),P("div",qu,[o(Me,{elevation:"2",class:"pa-4",border:""},{default:a(()=>[tt.value?(b(),P("div",Ku,[R.value.supportsExpire?(b(),P("div",Zu,[s("div",Yu,[o(z,{color:"default",variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[77]||(e[77]=[r("mdi-calendar-check",-1)])]),_:1}),s("span",Xu,d(u(i)("core.subscriptionManager.currentSubscriptionUntil")),1),s("strong",null,d(new Date(ot.value.current).toLocaleString("en-GB",gt.shortDate)),1)]),_:1}),o(z,{color:fo.value,variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[78]||(e[78]=[r("mdi-clock-outline",-1)])]),_:1}),s("span",Qu,d(u(i)("core.subscriptionManager.timeLeft")),1),s("strong",null,d(mo.value),1)]),_:1},8,["color"])]),s("div",ed,[o(z,{color:"info",variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[79]||(e[79]=[r("mdi-update",-1)])]),_:1}),s("span",td,d(u(i)("core.subscriptionManager.renewalPeriod")),1),s("strong",null,d(po.value[T.value.renewalIndex]),1)]),_:1}),s("div",ad,[o(Xt,{modelValue:T.value.renewalIndex,"onUpdate:modelValue":e[5]||(e[5]=n=>T.value.renewalIndex=n),min:0,max:(Ze.value.value?.length??6)-1,step:"1","hide-details":"","thumb-label":!1,"thumb-size":18,"track-size":"4"},null,8,["modelValue","max"])]),o(z,{color:"success",variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[80]||(e[80]=[r("mdi-calendar-arrow-right",-1)])]),_:1}),s("span",od,d(u(i)("core.subscriptionManager.afterRenewalSubscriptionUntil")),1),s("strong",null,d(new Date(ot.value.new).toLocaleString("en-GB",gt.shortDate)),1)]),_:1})]),ot.value.new<ot.value.current?(b(),P("div",sd,[o(Ie,{type:"warning",color:"error",variant:"tonal",density:"compact",size:"small",class:"mt-3"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.subscriptionPeriodDecreaseWarning")),1)]),_:1})])):C("",!0)])):(b(),P("div",ld,[s("div",nd,[o(z,{color:"default",variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[81]||(e[81]=[r("mdi-calendar-check",-1)])]),_:1}),s("span",rd,d(u(i)("core.subscriptionManager.currentSubscriptionUntil")),1),s("strong",null,d(new Date(ot.value.current).toLocaleString("en-GB",gt.shortDate)),1)]),_:1}),o(z,{color:fo.value,variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[82]||(e[82]=[r("mdi-clock-outline",-1)])]),_:1}),s("span",id,d(u(i)("core.subscriptionManager.timeLeft")),1),s("strong",null,d(mo.value),1)]),_:1},8,["color"])]),s("div",ud,[o(z,{color:"info",variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[83]||(e[83]=[r("mdi-update",-1)])]),_:1}),s("span",dd,d(u(i)("core.subscriptionManager.renewalPeriod")),1),s("strong",null,d(u(i)("core.subscriptionManager.renewal1Month")),1)]),_:1}),o(z,{color:"success",variant:"tonal",label:"",style:{"font-size":"14px"}},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[84]||(e[84]=[r("mdi-calendar-arrow-right",-1)])]),_:1}),s("span",cd,d(u(i)("core.subscriptionManager.afterRenewalSubscriptionUntil")),1),s("strong",null,d(new Date(Date.now()+88e3*.5*60*1e3).toLocaleString("en-GB",gt.shortDate)),1)]),_:1})])])),s("div",pd,[o(L,{color:"primary",variant:"flat",size:"large",density:"compact",block:"",class:"renewal-action-btn",onClick:e[6]||(e[6]=n=>G.value=99)},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[85]||(e[85]=[r("mdi-refresh",-1)])]),_:1}),s("span",null,d(u(i)("core.subscriptionManager.renewalAction")),1)]),_:1})])])):(b(),I(Ua,{key:0,icon:"mdi-database-clock","icon-size":40,title:u(i)("common.messages.loadingData")},null,8,["title"]))]),_:1})])):C("",!0),!c.newApp&&N.value==="cancel"&&G.value!==99&&G.value!==100?(b(),P("div",md,[o(Me,{elevation:"2",class:"pa-4",border:""},{default:a(()=>[o(Ie,{type:"warning",variant:"tonal",class:"mb-4"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.cancelWarning")),1)]),_:1}),s("ul",fd,[s("li",vd,[o(p,{size:"20",class:"mr-2 mt-1",color:"default"},{default:a(()=>[...e[86]||(e[86]=[r("mdi-calendar-check",-1)])]),_:1}),s("span",null,[r(d(u(i)("core.subscriptionManager.currentlySubscribedUntil"))+" ",1),s("b",null,d(new Date(ot.value.current).toLocaleString("en-GB",gt.shortDate)),1)])]),s("li",gd,[o(p,{size:"20",class:"mr-2 mt-1",color:"warning"},{default:a(()=>[...e[87]||(e[87]=[r("mdi-clock-alert",-1)])]),_:1}),s("span",null,[r(d(u(i)("core.subscriptionManager.afterCancellationExpire"))+" ",1),s("b",null,d(new Date(Date.now()+100*(tt.value>=202e4?.5:2)*60*1e3).toLocaleString("en-GB",gt.shortDate)),1),r(" (100 "+d(u(i)("core.subscriptionManager.blocksFromNow"))+").",1)])]),s("li",bd,[o(p,{size:"20",class:"mr-2 mt-1",color:"error"},{default:a(()=>[...e[88]||(e[88]=[r("mdi-alert-circle",-1)])]),_:1}),s("span",null,d(u(i)("core.subscriptionManager.afterExpirationNotAccessible")),1)])]),o(L,{color:"error",variant:"flat",size:"large",density:"compact",block:"",class:"mt-4",onClick:is},{default:a(()=>[o(p,{size:"22",class:"mr-2"},{default:a(()=>[...e[89]||(e[89]=[r("mdi-cancel",-1)])]),_:1}),s("span",null,d(u(i)("core.subscriptionManager.cancelSubscription")),1)]),_:1})]),_:1})])):C("",!0),c.newApp||N.value==="update"||G.value===99||G.value===100?(b(),I(Lo,{key:4,modelValue:G.value,"onUpdate:modelValue":e[50]||(e[50]=n=>G.value=n),class:"mt-4"},{default:a(()=>[o(Bt,{value:0},{default:a(()=>[s("div",hd,[o(zl,null,{default:a(()=>[c.newApp?(b(),I(eo,{key:0,modelValue:O.value,"onUpdate:modelValue":e[9]||(e[9]=n=>O.value=n),class:"mb-4 tos-panel-bordered"},{default:a(()=>[o(La,{value:"0"},{default:a(()=>[o(Ia,{class:"text-h6 font-weight-semibold"},{default:a(()=>[s("div",yd,[o(ya,{size:"36",class:"mr-2",color:Te.value?"success":"warning"},{default:a(()=>[o(p,{icon:"mdi-shield-check-outline",size:"20",color:"white"})]),_:1},8,["color"]),s("span",null,d(u(i)("core.subscriptionManager.tos.title")),1)])]),_:1}),o(Fa,null,{default:a(()=>[o(Ie,{type:"info",variant:"tonal",density:"compact",class:"mt-4 mb-3"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.tos.description")),1)]),_:1}),o(Io,{modelValue:Te.value,"onUpdate:modelValue":e[8]||(e[8]=n=>Te.value=n),density:"comfortable",color:"primary","hide-details":""},{label:a(()=>[s("span",xd,[r(d(u(i)("core.subscriptionManager.tos.agreement"))+" ",1),s("a",{href:"#",class:"font-weight-bold text-high-emphasis",style:{"text-decoration":"underline"},onClick:e[7]||(e[7]=St(n=>$t.value=!0,["prevent"]))},d(u(i)("core.subscriptionManager.tos.link")),1)])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])):C("",!0),s("div",{class:Mt({"disabled-fieldset":c.newApp&&!Te.value})},[s("fieldset",{disabled:c.newApp&&!Te.value},[o(be,{modelValue:T.value.name,"onUpdate:modelValue":e[10]||(e[10]=n=>T.value.name=n),label:u(i)("core.subscriptionManager.name"),"prepend-inner-icon":"mdi-rename-box",variant:"outlined",density:"comfortable",disabled:Ae.value,class:"mb-3"},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:"grey"}),{default:a(()=>[...e[90]||(e[90]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.nameTooltip")),1)]),_:1})]),_:1},8,["modelValue","label","disabled"]),o(Go,{modelValue:T.value.description,"onUpdate:modelValue":e[11]||(e[11]=n=>T.value.description=n),label:u(i)("core.subscriptionManager.description"),"prepend-inner-icon":"mdi-text","auto-grow":"",rows:"1",variant:"outlined",density:"comfortable",class:"mb-3"},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:"grey"}),{default:a(()=>[...e[91]||(e[91]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.descriptionTooltip")),1)]),_:1})]),_:1},8,["modelValue","label"]),o(be,{modelValue:T.value.owner,"onUpdate:modelValue":e[12]||(e[12]=n=>T.value.owner=n),label:u(i)("core.subscriptionManager.owner"),"prepend-inner-icon":"mdi-account",variant:"outlined",density:"comfortable",class:"mb-3"},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:"grey"}),{default:a(()=>[...e[92]||(e[92]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.ownerTooltip")),1)]),_:1})]),_:1},8,["modelValue","label"]),c.newApp?C("",!0):(b(),I(be,{key:0,"model-value":h.value,label:u(i)("core.subscriptionManager.specVersion"),"prepend-inner-icon":"mdi-tag",variant:"outlined",density:"comfortable",readonly:"",class:"mb-3"},{"append-inner":a(()=>[o(re,{location:"top","max-width":"300"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:h.value>=u(Ve)?"success":"warning",class:"mr-2"}),{default:a(()=>[r(d(h.value>=u(Ve)?"mdi-check-circle":"mdi-alert-circle"),1)]),_:1},16,["color"])]),default:a(()=>[h.value>=u(Ve)?(b(),P("span",_d,d(u(i)("core.subscriptionManager.usingLatestSpec")),1)):(b(),P("span",kd,d(u(i)("core.subscriptionManager.olderSpecWarning")),1))]),_:1}),o(re,{location:"top"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:"grey"}),{default:a(()=>[...e[93]||(e[93]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.currentSpecVersion")),1)]),_:1})]),_:1},8,["model-value","label"])),R.value.supportsContacts?(b(),P("div",Pd,[o(Cl,{modelValue:T.value.contacts,"onUpdate:modelValue":e[13]||(e[13]=n=>T.value.contacts=n),label:u(i)("core.subscriptionManager.contact"),"prepend-inner-icon":"mdi-email",multiple:"",variant:"outlined",density:"comfortable",items:[],"hide-no-data":"","hide-details":"","menu-icon":"",class:"flex-grow-1",onChange:_s},{selection:a(({item:n,index:v})=>[n.value&&n.value.trim()?(b(),I(z,{key:0,class:"ma-1",closable:"","onClick:close":f=>T.value.contacts.splice(v,1)},{default:a(()=>[r(d(n.value),1)]),_:2},1032,["onClick:close"])):C("",!0)]),"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:"grey"}),{default:a(()=>[...e[94]||(e[94]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.contactTooltip")),1)]),_:1})]),_:1},8,["modelValue","label"]),o(re,{text:u(i)("core.subscriptionManager.uploadContactsTooltip"),location:"top"},{activator:a(({props:n})=>[o(L,ce(n,{icon:"",variant:"flat",color:"primary",class:"ml-2",disabled:T.value?.contacts?.length===0||Ue.value,onClick:qs}),{default:a(()=>[o(p,{size:"24"},{default:a(()=>[...e[95]||(e[95]=[r("mdi-cloud-upload",-1)])]),_:1})]),_:1},16,["disabled"])]),_:1},8,["text"])])):C("",!0)],8,wd)],2)]),_:1}),s("div",{class:Mt({"disabled-fieldset":c.newApp&&!Te.value})},[s("div",Md,[s("div",null,[s("div",Sd,[o(z,{color:"default",variant:"tonal",class:"mr-2",style:{width:"110px"},label:""},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[96]||(e[96]=[r("mdi-laptop",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.instances")),1)]),_:1}),o(z,{color:"success",variant:"tonal",size:"small"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.instancesCount",T.value.instances,{count:T.value.instances})),1)]),_:1})]),o(Xt,{modelValue:T.value.instances,"onUpdate:modelValue":e[14]||(e[14]=n=>T.value.instances=n),min:3,max:100,step:"1","hide-details":"","thumb-label":!1,"thumb-size":18,"track-size":"4"},null,8,["modelValue"])]),R.value.supportsExpire?(b(),P("div",$d,[s("div",zd,[s("div",Cd,[o(z,{color:"default",variant:"tonal",class:"mr-2",style:{width:"110px"},label:""},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[97]||(e[97]=[r("mdi-calendar-clock",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.period")),1)]),_:1})]),x.newApp?C("",!0):(b(),I(Na,{key:0,modelValue:j.value,"onUpdate:modelValue":e[15]||(e[15]=n=>j.value=n),inset:"","hide-details":"",class:"ma-0",label:u(i)("core.subscriptionManager.renewal")},null,8,["modelValue","label"]))]),o(Xt,{modelValue:T.value.renewalIndex,"onUpdate:modelValue":e[16]||(e[16]=n=>T.value.renewalIndex=n),min:0,max:(Ze.value.value?.length??6)-1,step:"1",class:"flex-grow-1","hide-details":"","thumb-label":!1,"thumb-size":18,"track-size":"4",disabled:!j.value&&!x.newApp},null,8,["modelValue","max","disabled"]),s("span",Vd,[s("div",Ad,[s("span",Td,[x.newApp?(b(),P(de,{key:0},[r(d(u(i)("core.subscriptionManager.yourApplicationWillBeSubscribedUntil"))+" ",1),s("b",null,d(new Date(ot.value.new).toLocaleString("en-GB",gt.shortDate)),1),e[98]||(e[98]=r(". ",-1))],64)):(b(),P(de,{key:1},[r(d(u(i)("core.subscriptionManager.currentlyYourApplicationIsSubscribedUntil"))+" ",1),s("b",null,d(new Date(ot.value.current).toLocaleString("en-GB",gt.shortDate)),1),e[99]||(e[99]=r(". ",-1))],64))]),s("span",Ed,d(po.value[T.value.renewalIndex]),1)]),j.value&&!x.newApp?(b(),P("span",Dd,[r(d(u(i)("core.subscriptionManager.yourNewAdjustedSubscriptionEndsOn"))+" ",1),s("b",null,d(new Date(ot.value.new).toLocaleString("en-GB",gt.shortDate)),1),e[100]||(e[100]=r(". ",-1))])):C("",!0),!j.value&&!x.newApp?(b(),P("div",Nd,[o(p,{size:"18",color:"warning",class:"mr-2"},{default:a(()=>[...e[101]||(e[101]=[r("mdi-information",-1)])]),_:1}),s("span",null,d(u(i)("core.subscriptionManager.subscriptionNotExtended")),1)])):C("",!0),ot.value.new<ot.value.current&&j.value?(b(),P("span",Ld,[o(Ie,{type:"warning",color:"error",variant:"tonal",density:"compact",size:"small",class:"mt-1 mx-3"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.subscriptionPeriodDecreaseWarning")),1)]),_:1})])):C("",!0)])])):C("",!0),R.value.supportsStaticIp?(b(),P("div",Id,[o(z,{color:"default",variant:"tonal",class:"mr-2",label:""},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[102]||(e[102]=[r("mdi-cog-box",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.additionalOptions")),1)]),_:1})])):C("",!0),R.value.supportsStaticIp?(b(),P("div",Fd,[s("div",Ud,[o(Na,{modelValue:T.value.staticip,"onUpdate:modelValue":e[17]||(e[17]=n=>T.value.staticip=n),inset:"","hide-details":"",class:"ma-0",density:"compact",label:u(i)("core.subscriptionManager.staticIp")},null,8,["modelValue","label"]),o(re,{location:"top","max-width":"300"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:"grey",class:"ml-2",style:{"vertical-align":"middle"}}),{default:a(()=>[...e[103]||(e[103]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.staticIpTooltip")),1)]),_:1})]),s("div",Bd,[o(Na,{modelValue:Pe.value,"onUpdate:modelValue":e[18]||(e[18]=n=>Pe.value=n),inset:"","hide-details":"",class:"ma-0",density:"compact",label:u(i)("core.subscriptionManager.enterprise")},null,8,["modelValue","label"]),o(re,{location:"top","max-width":"300"},{activator:a(({props:n})=>[o(p,ce(n,{size:"20",color:"grey",class:"ml-2",style:{"vertical-align":"middle"}}),{default:a(()=>[...e[104]||(e[104]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.enterpriseTooltip")),1)]),_:1})])])):C("",!0)])],2)])]),_:1}),o(Bt,{value:1},{default:a(()=>[s("div",Od,[o(mt,null,{default:a(()=>[o(Ce,{cols:"12",md:"6"},{default:a(()=>[s("div",Rd,[s("h4",jd,[o(p,{color:"success"},{default:a(()=>[...e[105]||(e[105]=[r("mdi-earth",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.allowedGeolocation")),1)])]),o(ft,{modelValue:A.value.continent,"onUpdate:modelValue":e[19]||(e[19]=n=>A.value.continent=n),items:ho(!1),label:u(i)("core.subscriptionManager.continent"),"item-title":"text","item-value":"value",outlined:"",dense:"",class:"mb-4 mt-4"},null,8,["modelValue","items","label"]),o(ft,{modelValue:A.value.country,"onUpdate:modelValue":e[20]||(e[20]=n=>A.value.country=n),items:yo(A.value.continent,!1),label:u(i)("core.subscriptionManager.country"),"item-title":"text","item-value":"value",outlined:"",dense:"",class:"mb-4",disabled:!A.value.continent||A.value.continent==="ALL"},null,8,["modelValue","items","label","disabled"]),o(ft,{modelValue:A.value.region,"onUpdate:modelValue":e[21]||(e[21]=n=>A.value.region=n),items:xo(A.value.continent,A.value.country,!1),label:u(i)("core.subscriptionManager.region"),"item-title":"text","item-value":"value",outlined:"",dense:"",class:"mb-4",disabled:!A.value.country||A.value.country==="ALL"},null,8,["modelValue","items","label","disabled"]),s("div",Wd,[o(re,{text:u(i)("core.subscriptionManager.addAllowed"),location:"top"},{activator:a(({props:n})=>[o(L,ce(n,{onClick:bs,icon:"",color:"success",density:"compact"}),{default:a(()=>[o(p,null,{default:a(()=>[...e[106]||(e[106]=[r("mdi-plus",-1)])]),_:1})]),_:1},16)]),_:1},8,["text"])]),s("div",Jd,[(b(!0),P(de,null,Qe(V.value,(n,v)=>(b(),I(z,{key:n,color:"success",class:"ma-1",closable:"","onClick:close":f=>ys(v),label:""},{default:a(()=>[r(d(wo(n)),1)]),_:2},1032,["onClick:close"]))),128))])]),_:1}),o(Ce,{cols:"12",md:"6"},{default:a(()=>[s("div",Hd,[s("h4",Gd,[o(p,{color:"error"},{default:a(()=>[...e[107]||(e[107]=[r("mdi-earth-off",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.forbiddenGeolocation")),1)])]),o(ft,{modelValue:D.value.continent,"onUpdate:modelValue":e[22]||(e[22]=n=>D.value.continent=n),items:ho(!0),label:u(i)("core.subscriptionManager.continent"),"item-title":"text","item-value":"value",outlined:"",dense:"",class:"mb-4 mt-4"},null,8,["modelValue","items","label"]),o(ft,{modelValue:D.value.country,"onUpdate:modelValue":e[23]||(e[23]=n=>D.value.country=n),items:yo(D.value.continent,!0),label:u(i)("core.subscriptionManager.country"),"item-title":"text","item-value":"value",outlined:"",dense:"",class:"mb-4",disabled:!D.value.continent||D.value.continent==="NONE"},null,8,["modelValue","items","label","disabled"]),o(ft,{modelValue:D.value.region,"onUpdate:modelValue":e[24]||(e[24]=n=>D.value.region=n),items:xo(D.value.continent,D.value.country,!0),label:u(i)("core.subscriptionManager.region"),"item-title":"text","item-value":"value",outlined:"",dense:"",class:"mb-4",disabled:!D.value.country||D.value.country==="ALL"},null,8,["modelValue","items","label","disabled"]),s("div",qd,[o(re,{text:u(i)("core.subscriptionManager.addForbidden"),location:"top"},{activator:a(({props:n})=>[o(L,ce(n,{onClick:hs,icon:"",color:"error",density:"compact"}),{default:a(()=>[o(p,null,{default:a(()=>[...e[108]||(e[108]=[r("mdi-plus",-1)])]),_:1})]),_:1},16)]),_:1},8,["text"])]),s("div",Kd,[(b(!0),P(de,null,Qe(te.value,(n,v)=>(b(),I(z,{key:n,color:"error",class:"ma-1",closable:"",label:"","onClick:close":f=>xs(v)},{default:a(()=>[r(d(wo(n)),1)]),_:2},1032,["onClick:close"]))),128))])]),_:1})]),_:1})])]),_:1}),o(Bt,{value:3},{default:a(()=>[s("div",Zd,[s("div",Yd,[o(Do,{modelValue:Ft.value,"onUpdate:modelValue":e[25]||(e[25]=n=>Ft.value=n),start:"",density:"comfortable",class:"v-tabs-pill"},{default:a(()=>[(b(!0),P(de,null,Qe(c.appSpec?.compose||[],(n,v)=>(b(),I(No,{key:`component-${v}`,value:`component-${v}`},{default:a(()=>[t.$vuetify.display.xs?(b(),I(re,{key:0,location:"top",activator:"parent"},{default:a(()=>[r(d(n.name||`${u(i)("core.subscriptionManager.component")} ${v+1}`),1)]),_:2},1024)):C("",!0),s("div",Xd,[o(p,{class:"mr-1",style:{"font-size":"22px !important",height:"22px !important",width:"22px !important"}},{default:a(()=>[...e[109]||(e[109]=[r(" mdi-cube-outline ",-1)])]),_:1}),s("span",Qd,d(n.name||`${u(i)("core.subscriptionManager.component")} ${v+1}`),1),c.newApp?(b(),I(L,{key:0,icon:"",variant:"flat",color:"error",class:"ml-3",style:{width:"16px !important",height:"16px !important","min-width":"16px !important",padding:"0 !important"},onClick:St(f=>Us(v),["stop"])},{default:a(()=>[o(p,{style:{"font-size":"12px !important",width:"12px !important",height:"12px !important"}},{default:a(()=>[...e[110]||(e[110]=[r("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])):C("",!0)])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),c.newApp?(b(),I(L,{key:0,icon:"",color:"primary",onClick:As},{default:a(()=>[o(p,null,{default:a(()=>[...e[111]||(e[111]=[r("mdi-plus",-1)])]),_:1})]),_:1})):C("",!0)]),o(Lo,{modelValue:Ft.value,"onUpdate:modelValue":e[35]||(e[35]=n=>Ft.value=n)},{default:a(()=>[(b(!0),P(de,null,Qe(c.appSpec?.compose||[],(n,v)=>(b(),I(Bt,{key:`component-${v}`,value:`component-${v}`},{default:a(()=>[s("div",ec,[o(z,{color:"default",variant:"tonal",style:{width:"100%"},label:""},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[112]||(e[112]=[r("mdi-information-box",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.general")),1)]),_:1})]),s("div",null,[o(be,{modelValue:n.name,"onUpdate:modelValue":f=>n.name=f,label:u(i)("core.subscriptionManager.componentName"),"prepend-inner-icon":"mdi-tag",density:"comfortable",variant:"outlined",class:"mb-3",disabled:!c.newApp},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"20",color:"grey"}),{default:a(()=>[...e[113]||(e[113]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.componentNameTooltip")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","label","disabled"]),o(be,{modelValue:n.description,"onUpdate:modelValue":f=>n.description=f,label:u(i)("core.subscriptionManager.componentDescription"),"prepend-inner-icon":"mdi-text",density:"comfortable",variant:"outlined",class:"mb-3"},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"20",color:"grey"}),{default:a(()=>[...e[114]||(e[114]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.componentDescriptionTooltip")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","label"]),o(be,{modelValue:n.repotag,"onUpdate:modelValue":f=>n.repotag=f,label:u(i)("core.subscriptionManager.repositoryTag"),"prepend-inner-icon":"mdi-docker",density:"comfortable",variant:"outlined",class:"mb-3"},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"20",color:"grey"}),{default:a(()=>[...e[115]||(e[115]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[c.newApp?(b(),P("span",tc,d(u(i)("core.subscriptionManager.repositoryTagTooltipNew")),1)):(b(),P("span",ac,d(u(i)("core.subscriptionManager.repositoryTagTooltipUpdate")),1))]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","label"]),R.value.supportsRepoAuth?(b(),I(be,{key:0,modelValue:n.repoauth,"onUpdate:modelValue":f=>n.repoauth=f,label:u(i)("core.subscriptionManager.repositoryAuthentication"),placeholder:u(i)("core.subscriptionManager.dockerAuthPlaceholder"),"prepend-inner-icon":"mdi-lock",density:"comfortable",variant:"outlined",class:"mb-3",hint:Pe.value?"":u(i)("core.subscriptionManager.enableEnterpriseHint"),"persistent-hint":"",disabled:!Pe.value},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"20",color:"grey"}),{default:a(()=>[...e[116]||(e[116]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[Pe.value?(b(),P("span",sc,d(u(i)("core.subscriptionManager.dockerRegistryCredentialsTooltip")),1)):(b(),P("span",oc,d(u(i)("core.subscriptionManager.enterpriseFeatureTooltip")),1))]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","label","placeholder","hint","disabled"])):C("",!0),c.appSpec?.version===7&&Pe.value?(b(),I(be,{key:1,modelValue:n.secrets,"onUpdate:modelValue":f=>n.secrets=f,label:u(i)("core.subscriptionManager.secrets"),placeholder:u(i)("core.subscriptionManager.secretsPlaceholder"),"prepend-inner-icon":"mdi-key",density:"comfortable",variant:"outlined",class:"mb-3","persistent-hint":""},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"20",color:"grey"}),{default:a(()=>[...e[117]||(e[117]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.secretsTooltip")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","label","placeholder"])):C("",!0),s("div",lc,[o(z,{color:"default",variant:"tonal",style:{width:"100%"},label:"",class:"d-flex align-center"},{default:a(()=>[o(p,{size:"20",class:"mr-2"},{default:a(()=>[...e[118]||(e[118]=[r("mdi-folder-plus",-1)])]),_:1}),s("span",nc,d(u(i)("core.subscriptionManager.dataPathBuilder")),1)]),_:1})]),o(m,{componentIndex:v,newApp:c.newApp,modelValue:x.appSpec.compose[v].containerData,"onUpdate:modelValue":f=>x.appSpec.compose[v].containerData=f},null,8,["componentIndex","newApp","modelValue","onUpdate:modelValue"]),o(be,{modelValue:n.containerData,"onUpdate:modelValue":f=>n.containerData=f,label:u(i)("core.subscriptionManager.containerDataPath"),"prepend-inner-icon":"mdi-folder",density:"comfortable",variant:"outlined",class:"mb-3 mt-4",readonly:""},null,8,["modelValue","onUpdate:modelValue","label"]),s("div",rc,[o(z,{color:"default",variant:"tonal",style:{width:"100%"},label:"",class:"d-flex align-center"},{default:a(()=>[o(p,{size:"20",class:"mr-2"},{default:a(()=>[...e[119]||(e[119]=[r("mdi-alpha-e-box",-1)])]),_:1}),s("span",ic,d(u(i)("core.subscriptionManager.environment")),1)]),_:1})]),s("div",uc,[o(Fo,{class:"env-button-wrapper","model-value":n.environmentParameters?.length>0,content:n.environmentParameters.length,color:"primary","offset-x":"10","offset-y":"6"},{default:a(()=>[o(L,{class:"env-button",variant:"outlined","prepend-icon":"mdi-format-list-bulleted",color:"grey",block:"",onClick:f=>Bs(v)},{default:a(()=>[s("span",dc,d(u(i)("core.subscriptionManager.environmentVariables")),1),o(Pt),o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"18",color:"grey",class:"env-info-icon ml-2"}),{default:a(()=>[...e[120]||(e[120]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.environmentVariablesTooltip")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["model-value","content"]),o(Fo,{class:"env-button-wrapper","model-value":n.commands?.length>0,content:n.commands.length,color:"primary","offset-x":"10","offset-y":"6"},{default:a(()=>[o(L,{class:"env-button",variant:"outlined","prepend-icon":"mdi-console",color:"grey",block:"",onClick:f=>Xo(v)},{default:a(()=>[s("span",cc,d(u(i)("core.subscriptionManager.commands")),1),o(Pt),o(re,{location:"top","max-width":"420"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"18",color:"grey",class:"env-info-icon ml-2"}),{default:a(()=>[...e[121]||(e[121]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("div",pc,[s("div",mc,d(u(i)("core.subscriptionManager.commandsTooltip1")),1),s("div",fc,d(u(i)("core.subscriptionManager.commandsTooltip2")),1),s("div",vc,[o(p,{size:"22",class:"mr-1",style:{"vertical-align":"middle",color:"#ff9800 !important"}},{default:a(()=>[...e[122]||(e[122]=[r("mdi-alert-circle",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.commandsTooltipWarning")),1)])])]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["model-value","content"])]),s("div",gc,[s("div",bc,[o(z,{color:"default",variant:"tonal",style:{width:"100%"},label:""},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[123]||(e[123]=[r("mdi-connection",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.portBindings")),1)]),_:1})]),s("div",hc,[Be.value[v]?(b(),P("div",{key:0,class:Mt(["d-flex align-center gap-2 px-2",n.ports&&n.ports.length>0?"py-2":""])},[o(be,{modelValue:Be.value[v].exposed,"onUpdate:modelValue":f=>Be.value[v].exposed=f,modelModifiers:{number:!0},type:"number",label:u(i)("core.subscriptionManager.exposedPort"),density:"comfortable",variant:"outlined","hide-details":"",style:{"max-width":"180px"},onInput:f=>Ls(v)},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"18",color:"grey"}),{default:a(()=>[...e[124]||(e[124]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.exposedPortTooltip")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","label","onInput"]),o(be,{modelValue:Be.value[v].container,"onUpdate:modelValue":f=>Be.value[v].container=f,modelModifiers:{number:!0},type:"number",label:u(i)("core.subscriptionManager.containerPort"),density:"comfortable",variant:"outlined","hide-details":"",style:{"max-width":"180px"}},{"append-inner":a(()=>[o(re,{location:"top"},{activator:a(({props:f})=>[o(p,ce({ref_for:!0},f,{size:"18",color:"grey"}),{default:a(()=>[...e[125]||(e[125]=[r("mdi-information-outline",-1)])]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.containerPortTooltip")),1)]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","label"]),o(L,{icon:"",color:"primary",density:"compact",onClick:f=>Ns(v)},{default:a(()=>[o(p,{size:"18"},{default:a(()=>[...e[126]||(e[126]=[r("mdi-plus",-1)])]),_:1})]),_:1},8,["onClick"])],2)):C("",!0),n.ports&&n.ports.length>0?(b(),P("div",yc,[(b(!0),P(de,null,Qe(n.ports,(f,_)=>(b(),P("div",{key:"port-pair-"+_,class:"d-flex align-center pa-1"},[Dt.value!==_||fa.value!==v?(b(),P("div",{key:0,onClick:S=>Ds(n,v,_)},[o(z,{class:"mr-1",color:"success",size:"small",label:"",rounded:"",style:{"font-size":"12px",cursor:"pointer"},"aria-label":`Edit port pair ${f} : ${n.containerPorts[_]||"-"}`},{default:a(()=>[r(d(f)+" : "+d(n.containerPorts[_]||"-"),1)]),_:2},1032,["aria-label"])],8,xc)):(b(),P("div",{key:1,class:"d-flex align-center",style:{gap:"4px"},ref_for:!0,ref:S=>Es(_,S)},[o(be,{ref_for:!0,ref:S=>Ts(_,S),modelValue:n.ports[_],"onUpdate:modelValue":S=>n.ports[_]=S,modelModifiers:{number:!0},"hide-details":"",density:"compact",type:"number",style:{"max-width":"120px","font-size":"12px"},variant:"outlined",onFocus:S=>So(_,"exposed"),onBlur:S=>$o(_,"exposed"),onKeydown:jo(S=>Vo(n,v,_),["enter"]),onInput:S=>Ao(n,v,_,"exposed")},null,8,["modelValue","onUpdate:modelValue","onFocus","onBlur","onKeydown","onInput"]),o(be,{modelValue:n.containerPorts[_],"onUpdate:modelValue":S=>n.containerPorts[_]=S,modelModifiers:{number:!0},"hide-details":"",density:"compact",type:"number",style:{"max-width":"120px","font-size":"12px"},variant:"outlined",onFocus:S=>So(_,"container"),onBlur:S=>$o(_,"container"),onKeydown:jo(S=>Vo(n,v,_),["enter"]),onInput:S=>Ao(n,v,_,"container")},null,8,["modelValue","onUpdate:modelValue","onFocus","onBlur","onKeydown","onInput"])],512)),o(L,{icon:"",size:"x-small",color:"error",variant:"text",onClick:S=>Is(n,_)},{default:a(()=>[o(p,{size:"14"},{default:a(()=>[...e[127]||(e[127]=[r("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])]))),128))])):C("",!0)])]),n.ports.length>0?(b(),P("div",wc,[s("div",_c,[o(z,{color:"default",variant:"tonal",style:{width:"100%"},label:""},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[128]||(e[128]=[r("mdi-domain",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.customDomains")),1)]),_:1})]),o(xa,{border:"",rounded:"",class:"mt-2 mb-3",style:{"max-height":"400px"}},{default:a(()=>[o(Xa,{dense:"",class:"rounded domain-table",style:{"--v-table-header-height":"40px"}},{default:a(()=>[s("thead",null,[s("tr",null,[s("th",null,d(u(i)("core.subscriptionManager.portDomainConfiguration")),1)])]),s("tbody",null,[(b(!0),P(de,null,Qe(n.ports,(f,_)=>(b(),P("tr",{key:`domain-port-${_}`},[s("td",null,[s("div",kc,[o(z,{size:"small",color:"success",variant:"tonal",label:"",style:{flex:"0 0 auto"}},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[129]||(e[129]=[r("mdi-connection",-1)])]),_:1}),r(" "+d(f),1)]),_:2},1024),o(be,{modelValue:n.domains[_],"onUpdate:modelValue":S=>n.domains[_]=S,density:"compact","hide-details":"",placeholder:u(i)("core.subscriptionManager.enterDomainForPort"),"persistent-placeholder":"",class:"small-text-field flex-grow-1"},null,8,["modelValue","onUpdate:modelValue","placeholder"])])])]))),128))])]),_:2},1024)]),_:2},1024)])):C("",!0),(b(),I(Rt,{modelValue:u(oe).show,"onUpdate:modelValue":e[30]||(e[30]=f=>u(oe).show=f),"max-width":"80%",key:u(oe).componentIndex,class:"pa-4"},{default:a(()=>[o(Me,null,{default:a(()=>[o(lt,{class:"bg-primary"},{default:a(()=>[s("div",Pc,[s("span",Mc,d(u(i)("core.subscriptionManager.environmentVariables")),1),o(re,{location:"top"},{activator:a(({props:f})=>[o(L,ce({ref_for:!0},f,{icon:"",color:"white",variant:"outlined",size:"small",class:"import-glow-btn",onClick:e[26]||(e[26]=_=>Ha.value=!0)}),{default:a(()=>[o(p,{size:"22"},{default:a(()=>[...e[130]||(e[130]=[r("mdi-file-import",-1)])]),_:1})]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.importFromJson")),1)]),_:1})])]),_:1}),o(De,null,{default:a(()=>[s("div",Sc,[o(be,{modelValue:u(oe).newKey,"onUpdate:modelValue":e[27]||(e[27]=f=>u(oe).newKey=f),label:u(i)("core.subscriptionManager.key"),density:"compact","hide-details":"",onPaste:Ws},null,8,["modelValue","label"]),o(be,{modelValue:u(oe).newValue,"onUpdate:modelValue":e[28]||(e[28]=f=>u(oe).newValue=f),label:u(i)("core.subscriptionManager.value"),density:"compact","hide-details":""},null,8,["modelValue","label"]),o(L,{icon:"",color:"primary",density:"compact",onClick:Os,disabled:!u(oe).newKey||!u(oe).newValue},{default:a(()=>[o(p,null,{default:a(()=>[...e[131]||(e[131]=[r("mdi-plus",-1)])]),_:1})]),_:1},8,["disabled"])]),u(oe).entries.length>0?(b(),I(xa,{key:0,border:"",rounded:"",class:"mt-2",style:{"max-height":"400px",overflow:"auto"}},{default:a(()=>[o(Xa,{dense:""},{default:a(()=>[s("thead",$c,[s("tr",null,[e[133]||(e[133]=s("th",{class:"text-white",style:{height:"40px","line-height":"40px","font-weight":"500","text-align":"left"}}," Key ",-1)),e[134]||(e[134]=s("th",{class:"text-white",style:{height:"40px","line-height":"40px","font-weight":"500","text-align":"left"}}," Value ",-1)),s("th",zc,[o(re,{text:"Upload environment variables to Flux Storage",location:"top"},{activator:a(({props:f})=>[o(L,ce({ref_for:!0},f,{icon:"",variant:"text",size:"small",color:"white",disabled:u(oe).entries.length===0||wt.value,onClick:_=>Hs(u(oe).componentIndex)}),{default:a(()=>[o(p,{size:"22",style:{"line-height":"1"}},{default:a(()=>[...e[132]||(e[132]=[r("mdi-cloud-upload",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1024)])])]),s("tbody",null,[(b(!0),P(de,null,Qe(u(oe).entries,(f,_)=>(b(),P("tr",{key:_},[s("td",null,[o(be,{modelValue:f.key,"onUpdate:modelValue":S=>f.key=S,density:"compact","hide-details":"",placeholder:u(i)("core.subscriptionManager.keyPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),s("td",null,[o(be,{modelValue:f.value,"onUpdate:modelValue":S=>f.value=S,density:"compact","hide-details":"",placeholder:u(i)("core.subscriptionManager.valuePlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),s("td",Cc,[o(L,{icon:"",variant:"text",color:"error",onClick:S=>Rs(_)},{default:a(()=>[o(p,null,{default:a(()=>[...e[135]||(e[135]=[r("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:2},1024)]),_:2},1024)):C("",!0)]),_:2},1024),o(Ot,null,{default:a(()=>[o(Pt),o(L,{color:"error",variant:"tonal",size:"small",onClick:e[29]||(e[29]=f=>u(oe).show=!1)},{default:a(()=>[...e[136]||(e[136]=[r(" Cancel ",-1)])]),_:1}),o(L,{color:"success",variant:"tonal",size:"small",disabled:u(oe).entries.length===0,onClick:Js},{default:a(()=>[...e[137]||(e[137]=[r(" Save ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:2},1024)]),_:2},1032,["modelValue"])),(b(),I(Rt,{modelValue:u(ge).show,"onUpdate:modelValue":e[34]||(e[34]=f=>u(ge).show=f),"max-width":"80%",key:u(ge).componentIndex,class:"pa-4"},{default:a(()=>[o(Me,null,{default:a(()=>[o(lt,{class:"bg-primary"},{default:a(()=>[s("div",Vc,[s("span",Ac,d(u(i)("core.subscriptionManager.containerCommands")),1),o(re,{location:"top"},{activator:a(({props:f})=>[o(L,ce({ref_for:!0},f,{icon:"",color:"white",variant:"outlined",size:"small",class:"import-glow-btn",onClick:e[31]||(e[31]=_=>Ga.value=!0)}),{default:a(()=>[o(p,{size:"22"},{default:a(()=>[...e[138]||(e[138]=[r("mdi-file-import",-1)])]),_:1})]),_:1},16)]),default:a(()=>[s("span",null,d(u(i)("core.subscriptionManager.importFromJson")),1)]),_:1})])]),_:1}),o(De,null,{default:a(()=>[s("div",Tc,[o(be,{modelValue:u(ge).newCommand,"onUpdate:modelValue":e[32]||(e[32]=f=>u(ge).newCommand=f),label:u(i)("core.subscriptionManager.newCommand"),density:"compact",dense:"","hide-details":"",class:"flex-grow-1"},null,8,["modelValue","label"]),o(L,{icon:"",color:"primary",density:"compact",onClick:Qo,disabled:!u(ge).newCommand},{default:a(()=>[o(p,null,{default:a(()=>[...e[139]||(e[139]=[r("mdi-plus",-1)])]),_:1})]),_:1},8,["disabled"])]),u(ge).entries.length>0?(b(),I(xa,{key:0,border:"",rounded:"",class:"mt-2"},{default:a(()=>[o(Xa,{dense:"",class:"rounded",style:{"--v-table-header-height":"40px"}},{default:a(()=>[s("thead",Ec,[s("tr",null,[s("th",Dc,d(u(i)("core.subscriptionManager.command")),1),s("th",Nc,[o(re,{text:u(i)("core.subscriptionManager.uploadCmdToFluxStorage"),location:"top"},{activator:a(({props:f})=>[o(L,ce({ref_for:!0},f,{icon:"",variant:"text",size:"small",color:"white",disabled:u(ge).entries.length===0||Oe.value,onClick:_=>Gs(u(ge).componentIndex)}),{default:a(()=>[o(p,{size:"22",style:{"line-height":"1"}},{default:a(()=>[...e[140]||(e[140]=[r("mdi-cloud-upload",-1)])]),_:1})]),_:1},16,["disabled","onClick"])]),_:2},1032,["text"])])])]),s("tbody",null,[(b(!0),P(de,null,Qe(u(ge).entries,(f,_)=>(b(),P("tr",{key:_},[s("td",null,[o(be,{modelValue:u(ge).entries[_],"onUpdate:modelValue":S=>u(ge).entries[_]=S,placeholder:u(i)("core.subscriptionManager.enterCommand"),density:"compact",dense:"","hide-details":"",class:"ma-0"},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),s("td",null,[o(L,{icon:"",variant:"text",color:"error",onClick:S=>es(_)},{default:a(()=>[o(p,null,{default:a(()=>[...e[141]||(e[141]=[r("mdi-delete",-1)])]),_:1})]),_:1},8,["onClick"])])]))),128))])]),_:2},1024)]),_:2},1024)):C("",!0)]),_:2},1024),o(Ot,null,{default:a(()=>[o(Pt),o(L,{color:"error",variant:"tonal",size:"small",onClick:e[33]||(e[33]=f=>u(ge).show=!1)},{default:a(()=>[...e[142]||(e[142]=[r(" Cancel ",-1)])]),_:1}),o(L,{color:"success",variant:"tonal",size:"small",disabled:u(ge).entries.length===0,onClick:os},{default:a(()=>[...e[143]||(e[143]=[r(" Save ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:2},1024)]),_:2},1032,["modelValue"])),s("div",Lc,[o(z,{color:"default",variant:"tonal",style:{width:"100%"},label:""},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[144]||(e[144]=[r("mdi-progress-wrench",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.hardwareResource")),1)]),_:1})]),s("div",Ic,[o(mt,{dense:""},{default:a(()=>[o(Ce,{cols:"12"},{default:a(()=>[s("div",Fc,[s("div",Uc,[o(p,{size:"26",class:"hardware-icon"},{default:a(()=>[...e[145]||(e[145]=[r("mdi-speedometer",-1)])]),_:1}),s("div",Bc,[s("span",Oc,d(u(i)("core.subscriptionManager.cpu")),1),s("span",Rc,d(u(i)("core.subscriptionManager.vCore")),1)])]),o(Xt,{modelValue:n.cpu,"onUpdate:modelValue":f=>n.cpu=f,min:.1,max:15,step:.1,"thumb-label":!1,"thumb-size":18,"hide-details":"",class:"flex-grow-1 hardware-slider"},null,8,["modelValue","onUpdate:modelValue"]),o(be,{modelValue:n.cpu,"onUpdate:modelValue":f=>n.cpu=f,modelModifiers:{number:!0},type:"number",min:"0.1",step:"0.1","hide-details":"",density:"compact",variant:"outlined",class:"text-field-fixed"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024),o(Ce,{cols:"12"},{default:a(()=>[s("div",jc,[s("div",Wc,[o(p,{size:"26",class:"hardware-icon"},{default:a(()=>[...e[146]||(e[146]=[r("mdi-memory",-1)])]),_:1}),s("div",Jc,[s("span",Hc,d(u(i)("core.subscriptionManager.ram")),1),s("span",Gc,d(u(i)("core.subscriptionManager.mb")),1)])]),o(Xt,{modelValue:n.ram,"onUpdate:modelValue":f=>n.ram=f,min:100,max:65536,step:100,"thumb-label":!1,"thumb-size":18,"hide-details":"",class:"flex-grow-1 hardware-slider"},null,8,["modelValue","onUpdate:modelValue"]),o(be,{modelValue:n.ram,"onUpdate:modelValue":f=>n.ram=f,modelModifiers:{number:!0},type:"number",min:"100",dense:"","hide-details":"",density:"compact",variant:"outlined",class:"text-field-fixed"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024),o(Ce,{cols:"12"},{default:a(()=>[s("div",qc,[s("div",Kc,[o(p,{size:"26",class:"hardware-icon"},{default:a(()=>[...e[147]||(e[147]=[r("mdi-harddisk",-1)])]),_:1}),s("div",Zc,[s("span",Yc,d(u(i)("core.subscriptionManager.ssd")),1),s("span",Xc,d(u(i)("core.subscriptionManager.gb")),1)])]),o(Xt,{modelValue:n.hdd,"onUpdate:modelValue":f=>n.hdd=f,min:1,max:820,step:1,"thumb-label":!1,"thumb-size":18,"hide-details":"",class:"flex-grow-1 hardware-slider"},null,8,["modelValue","onUpdate:modelValue"]),o(be,{modelValue:n.hdd,"onUpdate:modelValue":f=>n.hdd=f,modelModifiers:{number:!0},type:"number",min:"1",dense:"","hide-details":"",density:"compact",variant:"outlined",class:"text-field-fixed"},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024)]),_:2},1024),s("div",Qc,[s("div",ep,[s("div",tp,[o(p,{size:"20",class:"hardware-icon"},{default:a(()=>[...e[148]||(e[148]=[r("mdi-speedometer",-1)])]),_:1}),s("div",ap,[s("span",op,d(u(i)("core.subscriptionManager.cpu")),1),s("span",sp,d(u(i)("core.subscriptionManager.vCore")),1)])]),o(be,{modelValue:n.cpu,"onUpdate:modelValue":f=>n.cpu=f,modelModifiers:{number:!0},type:"number",min:"0.1",step:"0.1","hide-details":"",density:"compact",variant:"outlined",class:"hardware-input"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",lp,[s("div",np,[o(p,{size:"20",class:"hardware-icon"},{default:a(()=>[...e[149]||(e[149]=[r("mdi-memory",-1)])]),_:1}),s("div",rp,[s("span",ip,d(u(i)("core.subscriptionManager.ram")),1),s("span",up,d(u(i)("core.subscriptionManager.mb")),1)])]),o(be,{modelValue:n.ram,"onUpdate:modelValue":f=>n.ram=f,modelModifiers:{number:!0},type:"number",min:"100",dense:"","hide-details":"",density:"compact",variant:"outlined",class:"hardware-input"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",dp,[s("div",cp,[o(p,{size:"20",class:"hardware-icon"},{default:a(()=>[...e[150]||(e[150]=[r("mdi-harddisk",-1)])]),_:1}),s("div",pp,[s("span",mp,d(u(i)("core.subscriptionManager.ssd")),1),s("span",fp,d(u(i)("core.subscriptionManager.gb")),1)])]),o(be,{modelValue:n.hdd,"onUpdate:modelValue":f=>n.hdd=f,modelModifiers:{number:!0},type:"number",min:"1",dense:"","hide-details":"",density:"compact",variant:"outlined",class:"hardware-input"},null,8,["modelValue","onUpdate:modelValue"])])])])])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),o(Bt,{value:2},{default:a(()=>[s("div",vp,[c.appSpec?.version>=7?(b(),P("div",gp,[o(Ie,{type:"info",variant:"tonal",density:"compact",class:"mb-4"},{default:a(()=>[c.appSpec?.version===7?(b(),P(de,{key:0},[s("strong",null,d(u(i)("core.subscriptionManager.enterpriseNodesLabel")),1),r(" "+d(u(i)("core.subscriptionManager.enterpriseNodesTabDescription")),1)],64)):c.appSpec?.version>=8?(b(),P(de,{key:1},[s("strong",null,d(u(i)("core.subscriptionManager.priorityNodesLabel")),1),r(" "+d(u(i)("core.subscriptionManager.priorityNodesTabDescription")),1)],64)):C("",!0)]),_:1}),o(Me,{flat:"",bordered:""},{default:a(()=>[o(lt,{class:"d-flex justify-space-between align-center"},{default:a(()=>[s("span",null,d(c.appSpec?.version===7?u(i)("core.subscriptionManager.tabEnterpriseNodes"):u(i)("core.subscriptionManager.tabPriorityNodes")),1),s("div",bp,[c.appSpec?.version===7?(b(),I(L,{key:0,color:"success",variant:"outlined",size:"small",onClick:$s,disabled:Ma.value},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[151]||(e[151]=[r("mdi-auto-fix",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.autoSelect")),1)]),_:1},8,["disabled"])):C("",!0),o(L,{color:"primary",variant:"flat",size:"small",onClick:Ms},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[152]||(e[152]=[r("mdi-plus",-1)])]),_:1}),r(" "+d(c.appSpec?.version===7?u(i)("core.subscriptionManager.chooseEnterpriseNodes"):u(i)("core.subscriptionManager.choosePriorityNodes")),1)]),_:1})])]),_:1}),s("div",hp,[s("div",yp,[o(be,{modelValue:sa.value,"onUpdate:modelValue":e[36]||(e[36]=n=>sa.value=n),label:u(i)("core.subscriptionManager.searchNodes"),placeholder:u(i)("core.subscriptionManager.searchNodesPlaceholder"),clearable:"","hide-details":"",density:"compact",variant:"outlined",style:{flex:"3"}},{"prepend-inner":a(()=>[o(p,{size:"20"},{default:a(()=>[...e[153]||(e[153]=[r("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue","label","placeholder"]),o(ft,{modelValue:Gt.value,"onUpdate:modelValue":e[37]||(e[37]=n=>Gt.value=n),items:[5,10,25,50],label:u(i)("core.subscriptionManager.perPage"),density:"compact",variant:"outlined","hide-details":"",style:{flex:"1","min-width":"100px"}},null,8,["modelValue","label"])])]),o(xa,{border:"",rounded:"",class:"mx-4 mb-2"},{default:a(()=>[o(Uo,{headers:Zo.value,items:zs.value,"items-per-page":-1,"hide-default-footer":"",class:"elevation-1","item-value":"ip",expanded:no.value,"onUpdate:expanded":e[38]||(e[38]=n=>no.value=n),"show-expand":""},{"item.tier":a(({item:n})=>[o(z,{color:n.tier==="CUMULUS"?"success":n.tier==="NIMBUS"?"warning":"error",size:"small",variant:"tonal"},{default:a(()=>[r(d(n.tier),1)]),_:2},1032,["color"])]),"item.score":a(({item:n})=>[s("div",xp,[s("span",wp,d(n.score),1)])]),"item.actions":a(({item:n})=>[s("div",_p,[o(L,{icon:"",size:"small",variant:"text",color:"error",onClick:v=>ks(n)},{default:a(()=>[o(p,null,{default:a(()=>[...e[154]||(e[154]=[r("mdi-delete",-1)])]),_:1}),o(re,{activator:"parent",location:"top"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.removeNode")),1)]),_:1})]),_:1},8,["onClick"]),o(L,{icon:"",size:"small",variant:"text",color:"primary",onClick:v=>_o(n.ip)},{default:a(()=>[o(p,null,{default:a(()=>[...e[155]||(e[155]=[r("mdi-open-in-new",-1)])]),_:1}),o(re,{activator:"parent",location:"top"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.visitFluxNode")),1)]),_:1})]),_:1},8,["onClick"])])]),"expanded-row":a(({item:n,columns:v})=>[s("td",{colspan:v.length},[o(Me,{flat:"",class:"ma-2"},{default:a(()=>[o(De,null,{default:a(()=>[s("div",Pp,[s("strong",Mp,d(u(i)("core.subscriptionManager.ipAddressLabel")),1),s("span",null,d(n.ip),1)]),s("div",Sp,[s("strong",$p,d(u(i)("core.subscriptionManager.publicKeyLabel")),1),s("span",zp,d(n.pubkey||"N/A"),1)]),s("div",Cp,[s("strong",Vp,d(u(i)("core.subscriptionManager.nodeAddressLabel")),1),s("span",Ap,d(n.payment_address),1)]),n.txhash&&n.outidx?(b(),P("div",Tp,[s("strong",Ep,d(u(i)("core.subscriptionManager.collateralLabel")),1),s("span",Dp,d(n.txhash)+":"+d(n.outidx),1)])):C("",!0),s("div",Np,[s("strong",Lp,d(u(i)("core.subscriptionManager.tierLabel")),1),r(" "+d(n.tier),1)]),s("div",Ip,[s("strong",Fp,d(u(i)("core.subscriptionManager.overallScore")),1),s("span",null,d(n.score),1)]),s("div",Up,[s("strong",Bp,d(u(i)("core.subscriptionManager.collateralScoreLabel")),1),s("span",null,d(n.collateralPoints),1)]),s("div",Op,[s("strong",Rp,d(u(i)("core.subscriptionManager.maturityScore")),1),s("span",null,d(n.maturityPoints),1)]),s("div",jp,[s("strong",Wp,d(u(i)("core.subscriptionManager.publicKeyScoreLabel")),1),s("span",null,d(n.pubKeyPoints),1)]),s("div",Jp,[s("strong",Hp,d(u(i)("core.subscriptionManager.appsAssigned")),1),s("span",null,d(n.enterpriseApps),1)]),n.status?(b(),P("div",Gp,[s("strong",qp,d(u(i)("core.subscriptionManager.statusLabel")),1),r(" "+d(n.status||"confirmed"),1)])):C("",!0)]),_:2},1024)]),_:2},1024)],8,kp)]),"no-data":a(()=>[s("div",Kp,[o(p,{size:"48",color:"grey"},{default:a(()=>[...e[156]||(e[156]=[r("mdi-server-network-off",-1)])]),_:1}),s("p",Zp,d(u(i)("core.subscriptionManager.noNodesSelected")),1)])]),_:1},8,["headers","items","expanded"])]),_:1}),ja.value.length>0?(b(),P("div",Yp,[o(L,{icon:"mdi-chevron-left",size:"small",variant:"text",disabled:Vt.value===1,onClick:e[39]||(e[39]=n=>Vt.value--)},null,8,["disabled"]),s("span",Xp,d(u(i)("core.subscriptionManager.pageOf",{current:Vt.value,total:ko.value})),1),o(L,{icon:"mdi-chevron-right",size:"small",variant:"text",disabled:Vt.value===ko.value,onClick:e[40]||(e[40]=n=>Vt.value++)},null,8,["disabled"])])):C("",!0)]),_:1})])):(b(),P("div",Qp,[o(Ie,{type:"warning",variant:"tonal"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.priorityNodesVersionWarning")),1)]),_:1})]))])]),_:1}),o(Bt,{value:99},{default:a(()=>[s("div",em,[s("div",tm,[s("div",am,[o(p,{class:"ml-1 mr-2",color:"success",size:"24"},{default:a(()=>[...e[157]||(e[157]=[r("mdi-check-decagram",-1)])]),_:1}),s("h2",om,d(u(i)("core.subscriptionManager.reviewAndValidate")),1)]),!c.newApp&&(N.value==="renewal"||N.value==="update"||N.value==="cancel")?(b(),I(L,{key:0,icon:"",variant:"text",color:"default",onClick:e[41]||(e[41]=n=>G.value=0)},{default:a(()=>[o(p,null,{default:a(()=>[...e[158]||(e[158]=[r("mdi-arrow-left-circle",-1)])]),_:1})]),_:1})):C("",!0)]),s("div",sm,[s("div",lm,d(u(i)("core.subscriptionManager.validateAppSpec")),1),s("div",nm,[la.value?(b(),P("div",rm,[o(Bo,{indeterminate:"",color:"primary",size:"24"})])):Tt.value&&It.value===!0?(b(),P("div",im,[o(p,{color:"success",size:"22"},{default:a(()=>[...e[159]||(e[159]=[r("mdi-check-circle",-1)])]),_:1})])):Tt.value&&It.value===!1?(b(),P("div",um,[o(p,{color:"error",size:"22"},{default:a(()=>[...e[160]||(e[160]=[r("mdi-close-circle",-1)])]),_:1})])):C("",!0)])]),Tt.value&&It.value===!1&&na.value?(b(),P("div",dm,[o(Ie,{type:"error",variant:"tonal",density:"compact",class:"mx-3"},{default:a(()=>[s("strong",null,d(u(i)("core.subscriptionManager.validationError")),1),r(" "+d(na.value),1)]),_:1})])):C("",!0),!Tt.value||It.value===!0?(b(),P(de,{key:1},[s("div",cm,[s("div",pm,d(u(i)("core.subscriptionManager.totalCost")),1),s("div",mm,[ut.value&&Q.value?.flux===0?(b(),P(de,{key:0},[s("span",fm,d(u(i)("core.subscriptionManager.freeUpdate")),1),o(p,{size:"22",color:"success"},{default:a(()=>[...e[161]||(e[161]=[r("mdi-check-circle",-1)])]),_:1})],64)):ut.value&&Q.value?.flux?(b(),P(de,{key:1},[s("div",vm,[s("span",gm,[s("span",bm,"$"+d(Q.value.usd)+" USD",1),s("span",hm,"$"+d(Q.value.usd)+" USD",1)]),e[162]||(e[162]=s("span",{style:{opacity:"0.5"}},"|",-1)),s("div",ym,[s("span",xm,[s("span",wm,d(Q.value.flux)+" FLUX",1),s("span",_m,d(Q.value.flux)+" FLUX",1)]),Q.value?.fluxDiscount>0?(b(),I(z,{key:0,color:"success",size:"x-small",class:"discount-chip",label:""},{default:a(()=>[r(" -"+d(Q.value.fluxDiscount)+"% ",1)]),_:1})):C("",!0)])]),o(p,{size:"22",color:"success"},{default:a(()=>[...e[163]||(e[163]=[r("mdi-check-circle",-1)])]),_:1})],64)):ut.value&&!Q.value?.flux?(b(),P(de,{key:2},[s("span",km,d(u(i)("core.subscriptionManager.failedToCalculatePrice")),1),o(p,{size:"22",color:"error"},{default:a(()=>[...e[164]||(e[164]=[r("mdi-alert-circle",-1)])]),_:1})],64)):C("",!0)])]),s("div",Pm,[s("div",Mm,d(u(i)("core.subscriptionManager.expiry")),1),s("div",Sm,[s("span",$m,[qt.value?(b(),P(de,{key:0},[c.newApp?(b(),P(de,{key:0},[Le.value?(b(),P(de,{key:0},[r(d(Ka.value),1)],64)):(b(),P(de,{key:1},[r(d(Ka.value),1)],64))],64)):Le.value&&c.appSpec?.height?(b(),P(de,{key:1},[qe.value?(b(),P(de,{key:0},[r(d(Ka.value),1)],64)):(b(),P(de,{key:1},[r(d(u(i)("core.subscriptionManager.expiresInUnderWeek")),1)],64))],64)):(b(),P(de,{key:2},[r(d(u(i)("core.subscriptionManager.notAvailable")),1)],64))],64)):C("",!0)]),qt.value&&(c.newApp||Le.value&&c.appSpec?.height)?(b(),I(p,{key:0,size:"22",color:qe.value?"success":"error"},{default:a(()=>[r(d(qe.value?"mdi-check-circle":"mdi-alert-circle"),1)]),_:1},8,["color"])):C("",!0)])]),s("div",zm,[s("div",Cm,d(u(i)("core.subscriptionManager.signature")),1),s("div",Vm,[J.value?(b(),I(p,{key:0,size:"22",color:"success"},{default:a(()=>[...e[165]||(e[165]=[r(" mdi-check-circle ",-1)])]),_:1})):C("",!0)])]),s("div",Am,[s("div",Tm,d(u(i)("core.subscriptionManager.registered")),1),s("div",Em,[ra.value?(b(),P("div",Dm,[o(Bo,{indeterminate:"",color:"primary",size:"24"})])):ae.value?(b(),P("div",Nm,[o(p,{color:"success",size:"22"},{default:a(()=>[...e[166]||(e[166]=[r("mdi-check-circle",-1)])]),_:1})])):C("",!0)])]),s("div",Lm,[ut.value&&!J.value&&!pe.value&&!B.value&&$e.value!=="sso"&&!(Tt.value&&It.value===!1)&&!(ut.value&&!Q.value?.flux&&Q.value?.flux!==0)&&!(qt.value&&!qe.value&&!x.newApp)?(b(),I(L,{key:0,variant:"flat",style:{width:"100%"},onClick:e[42]||(e[42]=n=>Za())},{default:a(()=>[o(p,{start:"",size:"24"},{default:a(()=>[...e[167]||(e[167]=[r("mdi-file-sign",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.signMessage")),1)]),_:1})):B.value&&!J.value?(b(),I(L,{key:1,variant:"flat",color:"warning",style:{width:"100%"},onClick:e[43]||(e[43]=n=>Za())},{default:a(()=>[o(p,{start:"",size:"20"},{default:a(()=>[...e[168]||(e[168]=[r("mdi-refresh",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.retrySigning")),1)]),_:1})):pe.value&&!J.value&&$e.value!=="sso"?(b(),I(L,{key:2,variant:"outlined",color:"error",style:{width:"100%"},onClick:e[44]||(e[44]=n=>Qs())},{default:a(()=>[o(p,{start:"",size:"20"},{default:a(()=>[...e[169]||(e[169]=[r("mdi-close-circle",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.cancelSigning")),1)]),_:1})):C("",!0)])],64)):C("",!0)])]),_:1}),o(Bt,{value:100},{default:a(()=>[s("div",{class:"pa-4",style:Qt({backgroundColor:u(Ee).global.name.value==="dark"?"rgba(76, 175, 80, 0.05)":"rgba(76, 175, 80, 0.03)",borderRadius:"8px",border:u(Ee).global.name.value==="dark"?"1px solid rgba(76, 175, 80, 0.1)":"1px solid rgba(76, 175, 80, 0.08)"})},[Sa.value?(b(),I(Me,{key:0,class:"mb-4"},{default:a(()=>[o(lt,{class:"bg-primary text-white"},{default:a(()=>[o(p,{class:"mr-2"},{default:a(()=>[...e[170]||(e[170]=[r("mdi-test-tube",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.testApplicationInstallation")),1)]),_:1}),o(De,{class:"mt-4"},{default:a(()=>[s("p",Im,d(u(i)("core.subscriptionManager.testInstallationDescription")),1),xe.value?(b(),I(Ie,{key:0,type:"error",variant:"tonal",class:"mb-4"},{default:a(()=>[s("div",Fm,[s("div",null,[s("strong",null,d(u(i)("core.subscriptionManager.warningLabel")),1),r(" "+d(u(i)("core.subscriptionManager.testFailedWarning")),1)]),s("div",Um,[o(L,{icon:"",size:"small",color:"primary",variant:"outlined",onClick:Ca,loading:ht.value},{default:a(()=>[o(p,{size:"20"},{default:a(()=>[...e[171]||(e[171]=[r("mdi-restart",-1)])]),_:1})]),_:1},8,["loading"]),o(L,{size:"small",color:"warning",variant:"outlined",onClick:al},{default:a(()=>[r(d(u(i)("core.subscriptionManager.enablePaymentAnyway")),1)]),_:1})])])]),_:1})):C("",!0),o(L,{color:"success",variant:"flat",loading:ht.value,onClick:Ca,disabled:we.value&&!xe.value},{default:a(()=>[o(p,{class:"mr-2"},{default:a(()=>[...e[172]||(e[172]=[r("mdi-play",-1)])]),_:1}),r(" "+d(we.value&&!xe.value?u(i)("core.subscriptionManager.testCompleted"):u(i)("core.subscriptionManager.testInstallation")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})):C("",!0),_t.value.length>0&&!l.value&&!$.value?(b(),I(Me,{key:1,class:"mb-4"},{default:a(()=>[o(lt,{class:"bg-secondary text-white d-flex align-center justify-space-between",style:{cursor:"pointer"},onClick:e[46]||(e[46]=n=>Re.value=!Re.value)},{default:a(()=>[s("div",Bm,[o(p,{class:"mr-2"},{default:a(()=>[...e[173]||(e[173]=[r("mdi-console",-1)])]),_:1}),we.value&&!xe.value?(b(),P("span",Om,d(u(i)("core.subscriptionManager.testCompletedSuccessfully")),1)):we.value&&xe.value?(b(),P("span",Rm,d(u(i)("core.subscriptionManager.testFailedCheckLogs")),1)):ht.value?(b(),P("span",jm,d(u(i)("core.subscriptionManager.installationProgress")),1)):(b(),P("span",Wm,d(u(i)("core.subscriptionManager.installationProgress")),1))]),o(L,{icon:"",variant:"text",size:"small",class:"text-white",onClick:e[45]||(e[45]=St(n=>Re.value=!Re.value,["stop"]))},{default:a(()=>[o(p,null,{default:a(()=>[r(d(Re.value?"mdi-chevron-up":"mdi-chevron-down"),1)]),_:1})]),_:1})]),_:1}),o(Vl,null,{default:a(()=>[oo(o(De,{class:"mt-3"},{default:a(()=>[o(to,{class:"pa-0"},{default:a(()=>[(b(!0),P(de,null,Qe(_t.value,(n,v)=>(b(),I(Nt,{key:v,class:Mt(["installation-step",{"text-success":n.status==="success","text-error":n.status==="error","text-warning":n.status==="warning","text-info":n.status==="info"}])},{prepend:a(()=>[o(p,{color:sl(n.status),icon:ll(n.status),class:"mr-2"},null,8,["color","icon"])]),default:a(()=>[o(oa,null,{default:a(()=>[s("pre",Jm,d(ol(n)),1)]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1},512),[[so,Re.value]])]),_:1})]),_:1})):C("",!0),xe.value&&we.value?(b(),I(Ie,{key:2,color:"error",density:"compact",class:"mt-4 mb-0 pa-3"},{default:a(()=>[s("div",Hm,[o(p,{icon:"mdi-alert-decagram",class:"mr-3",size:"28"}),s("div",Gm,d(u(i)("core.subscriptionManager.testFailedCheckLogsRetry")),1),o(L,{icon:"mdi-refresh",color:"white",variant:"text",size:"default",loading:ht.value,onClick:Ca,class:"ml-2"},{default:a(()=>[o(p,{size:"24"},{default:a(()=>[...e[174]||(e[174]=[r("mdi-refresh",-1)])]),_:1})]),_:1},8,["loading"])])]),_:1})):C("",!0),we.value&&!xe.value||!c.newApp&&ae.value&&!kt.value||!c.newApp&&ae.value&&Q.value?.flux===0||l.value||$.value?(b(),P("div",qm,[rs.value?(b(),I(Ie,{key:0,type:"warning",variant:"tonal",class:"mb-4",icon:"mdi-alert-triangle"},{default:a(()=>[s("strong",null,d(u(i)("core.subscriptionManager.testWarningsTitle")),1),r(" "+d(u(i)("core.subscriptionManager.testWarningsMessage")),1)]),_:1})):C("",!0),!l.value&&!$.value?(b(),I(mt,{key:1,class:"mb-4"},{default:a(()=>[o(Ce,{cols:"12",class:"pb-0"},{default:a(()=>[o(Me,{class:"payment-info-card",elevation:"2"},{default:a(()=>[o(lt,{class:"d-flex align-center",style:Qt({backgroundColor:u(Ee).global.name.value==="dark"?"rgba(76, 175, 80, 0.15)":"rgba(76, 175, 80, 0.1)",color:u(Ee).global.name.value==="dark"?"rgba(165, 214, 167, 1)":"rgba(27, 94, 32, 1)",borderBottom:u(Ee).global.name.value==="dark"?"2px solid rgba(76, 175, 80, 0.3)":"2px solid rgba(76, 175, 80, 0.4)"})},{default:a(()=>[o(p,{class:"mr-3",size:"24",style:Qt({color:u(Ee).global.name.value==="dark"?"rgba(165, 214, 167, 1)":"rgba(27, 94, 32, 1)"})},{default:a(()=>[...e[175]||(e[175]=[r("mdi-check-circle",-1)])]),_:1},8,["style"]),s("div",null,[s("div",{class:"text-h6",style:Qt({color:u(Ee).global.name.value==="dark"?"rgba(165, 214, 167, 1)":"rgba(27, 94, 32, 1)"})},d(u(i)("core.subscriptionManager.registrationSuccessful")),5),s("div",{class:"text-subtitle-2",style:Qt({color:u(Ee).global.name.value==="dark"?"rgba(129, 199, 132, 0.9)":"rgba(46, 125, 50, 0.9)",opacity:.9})},d(u(i)("core.subscriptionManager.appReadyForDeployment")),5)]),o(Pt),!c.newApp&&(N.value==="renewal"||N.value==="update"||N.value==="cancel")?(b(),I(L,{key:0,icon:"",variant:"text",color:"default",onClick:e[47]||(e[47]=n=>G.value=0)},{default:a(()=>[o(p,null,{default:a(()=>[...e[176]||(e[176]=[r("mdi-arrow-left-circle",-1)])]),_:1})]),_:1})):C("",!0)]),_:1},8,["style"]),o(De,{class:"px-4 pt-4 pb-2"},{default:a(()=>[o(to,{class:"bg-transparent payment-info-list"},{default:a(()=>[o(Nt,{class:"px-0 py-1"},{prepend:a(()=>[o(p,{color:"success",class:"mr-3"},{default:a(()=>[...e[177]||(e[177]=[r("mdi-clock-check",-1)])]),_:1})]),default:a(()=>[o(oa,{class:"text-body-1"},{default:a(()=>[s("strong",null,d(u(i)("core.subscriptionManager.paymentWindow")),1),r(" "+d(u(i)("core.subscriptionManager.paymentWindowTime")),1)]),_:1})]),_:1}),o(Nt,{class:"px-0 py-1"},{prepend:a(()=>[o(p,{color:"primary",class:"mr-3"},{default:a(()=>[...e[178]||(e[178]=[r("mdi-calendar-end",-1)])]),_:1})]),default:a(()=>[o(oa,{class:"text-body-1"},{default:a(()=>[s("strong",null,d(u(i)("core.subscriptionManager.subscriptionUntil")),1),r(" "+d(ns.value),1)]),_:1})]),_:1}),o(Nt,{class:"px-0 py-1"},{prepend:a(()=>[o(p,{color:"warning",class:"mr-3"},{default:a(()=>[...e[179]||(e[179]=[r("mdi-rocket-launch",-1)])]),_:1})]),default:a(()=>[o(oa,{class:"text-body-1"},{default:a(()=>[s("strong",null,d(u(i)("core.subscriptionManager.deploymentTime")),1),r(" "+d(u(i)("core.subscriptionManager.deploymentTimeEstimate")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):C("",!0),$.value&&!l.value?(b(),P("div",Km,[o(mt,{"no-gutters":"",class:"justify-center"},{default:a(()=>[o(Ce,{cols:"12",class:"pa-3"},{default:a(()=>[o(Me,{elevation:"2",class:"deployment-success-card"},{default:a(()=>[o(De,{class:"pa-8 text-center"},{default:a(()=>[o(p,{icon:"mdi-check-circle",size:"80",color:"success",class:"mb-4"}),s("h2",Zm,d(c.newApp?u(i)("core.subscriptionManager.deploymentSuccessful"):u(i)("core.subscriptionManager.updateSuccessful")),1),s("p",Ym,d(c.newApp?u(i)("core.subscriptionManager.deploymentSuccessMessage"):u(i)("core.subscriptionManager.updateSuccessMessage")),1),c.newApp?(b(),I(L,{key:0,color:"primary",size:"large",to:`/apps/manage/${T.value.name}`},{default:a(()=>[o(p,{start:""},{default:a(()=>[...e[180]||(e[180]=[r("mdi-cog",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.manageApplication")),1)]),_:1},8,["to"])):C("",!0)]),_:1})]),_:1})]),_:1})]),_:1})])):C("",!0),r(" "+d(console.log("🎬 MONITORING SECTION RENDER:",{paymentProcessing:l.value,paymentConfirmed:$.value,shouldShow:l.value&&!$.value}))+" ",1),l.value&&!$.value?(b(),P("div",Xm,[o(mt,{"no-gutters":"",class:"justify-center"},{default:a(()=>[o(Ce,{cols:"12",class:"pa-3"},{default:a(()=>[o(Me,{elevation:"2",class:"payment-monitoring-card"},{default:a(()=>[o(De,{class:"pa-6"},{default:a(()=>[o(Ua,{icon:"mdi-rocket-launch","icon-size":48,title:u(i)("core.subscriptionManager.waitingForDeployment"),message:""},null,8,["title"]),s("div",Qm,[s("div",ef,[s("div",tf,[s("div",af,[o(p,{color:"success",size:"20",class:"mr-2"},{default:a(()=>[...e[181]||(e[181]=[r("mdi-check-circle",-1)])]),_:1}),c.newApp||c.isRedeploy?(b(),P("span",of,d(u(i)("core.subscriptionManager.autoDetectDeployment")),1)):Q.value?.flux===0?(b(),P("span",sf,d(u(i)("core.subscriptionManager.autoDetectUpdate")),1)):(b(),P("span",lf,d(u(i)("core.subscriptionManager.autoDetectPaymentUpdate")),1))]),s("div",nf,[o(p,{color:"warning",size:"20",class:"mr-2"},{default:a(()=>[...e[182]||(e[182]=[r("mdi-clock-alert",-1)])]),_:1}),s("span",null,d(u(i)("core.subscriptionManager.detectionTimeEstimate")),1)])]),o(L,{variant:"outlined",color:"error",class:"mt-4",block:"",onClick:To},{default:a(()=>[o(p,{start:"",size:"20"},{default:a(()=>[...e[183]||(e[183]=[r("mdi-close-circle",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.cancelMonitoring")),1)]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1})])):C("",!0),!l.value&&!$.value?(b(),P("div",rf,[o(mt,{"no-gutters":"",class:"justify-center"},{default:a(()=>[o(Ce,{cols:"12",sm:"12",md:"12",lg:"10",xl:"8",class:"px-3 pb-3 pt-1"},{default:a(()=>[s("div",uf,[o(ya,{size:"48",color:"primary",variant:"flat",class:"mr-3"},{default:a(()=>[o(p,{size:"28",color:"white"},{default:a(()=>[...e[184]||(e[184]=[r("mdi-credit-card-outline",-1)])]),_:1})]),_:1}),s("span",null,d(u(i)("core.subscriptionManager.selectPaymentMethod")),1)])]),_:1})]),_:1})])):C("",!0),!l.value&&!$.value?(b(),P("div",df,[o(mt,{"no-gutters":"",class:"justify-center"},{default:a(()=>[o(Ce,{cols:"12",sm:"6",md:"6",lg:"5",xl:"4",class:"pa-3"},{default:a(()=>[o(Me,{class:Mt(["payment-method-card h-100",{"card-disabled":!ia.value&&!ua.value}]),elevation:"0",variant:"outlined"},{default:a(()=>[o(lt,{class:"payment-header bg-gradient-primary"},{default:a(()=>[s("div",cf,[o(ya,{size:"40",color:"white",variant:"tonal",class:"me-3"},{default:a(()=>[o(p,{color:"primary",size:"24"},{default:a(()=>[...e[185]||(e[185]=[r("mdi-credit-card",-1)])]),_:1})]),_:1}),s("div",pf,[s("div",mf,d(u(i)("core.subscriptionManager.payWithCard")),1),s("div",ff,d(u(i)("core.subscriptionManager.secureInstantPayment")),1)])])]),_:1}),o(De,{class:"pa-6"},{default:a(()=>[s("div",vf,[s("div",gf,[ia.value?(b(),I(Me,{key:0,variant:"outlined",class:"payment-icon-card",onClick:e[48]||(e[48]=()=>nl(ae.value,T.value.name,Q.value?.usd,T.value.description)),hover:""},{default:a(()=>[o(De,{class:"d-flex align-center justify-center pa-6"},{default:a(()=>[s("img",{class:"payment-brand-icon-small",src:u(Wl),alt:"Stripe"},null,8,bf)]),_:1})]),_:1})):C("",!0),ua.value?(b(),I(Me,{key:1,variant:"outlined",class:"payment-icon-card",onClick:e[49]||(e[49]=()=>rl(ae.value,T.value.name,Q.value?.usd,T.value.description)),hover:""},{default:a(()=>[o(De,{class:"d-flex align-center justify-center pa-6"},{default:a(()=>[s("img",{class:"payment-brand-icon-small",src:nt.value,alt:"PayPal"},null,8,hf)]),_:1})]),_:1})):C("",!0)]),ia.value||ua.value?(b(),P("div",yf,[o(z,{color:"success",variant:"flat",size:"large"},{default:a(()=>[r(" $"+d(Q.value?.usd||0)+" USD + VAT ",1)]),_:1})])):C("",!0),ia.value||ua.value?(b(),P("div",xf,[s("div",wf,[s("div",_f,[o(p,{color:"success"},{default:a(()=>[...e[186]||(e[186]=[r("mdi-shield-check",-1)])]),_:1})]),s("div",kf,d(u(i)("core.subscriptionManager.securePaymentProcessing")),1)]),s("div",Pf,[s("div",Mf,[o(p,{color:"success"},{default:a(()=>[...e[187]||(e[187]=[r("mdi-clock-fast",-1)])]),_:1})]),s("div",Sf,d(u(i)("core.subscriptionManager.instantPaymentConfirmation")),1)]),s("div",$f,[s("div",zf,[o(p,{color:"success"},{default:a(()=>[...e[188]||(e[188]=[r("mdi-currency-usd",-1)])]),_:1})]),s("div",Cf,d(u(i)("core.subscriptionManager.multipleCurrencySupport")),1)])])):C("",!0),!ia.value&&!ua.value?(b(),I(Ie,{key:2,type:"warning",variant:"tonal",class:"mb-0",icon:"mdi-alert-circle"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.fiatGatewaysUnavailable")),1)]),_:1})):C("",!0)])]),_:1})]),_:1},8,["class"])]),_:1}),o(Ce,{cols:"12",sm:"6",md:"6",lg:"5",xl:"4",class:"pa-3"},{default:a(()=>[o(Me,{class:"payment-method-card h-100",elevation:"0",variant:"outlined"},{default:a(()=>[o(lt,{class:"payment-header bg-gradient-warning"},{default:a(()=>[s("div",Vf,[o(ya,{size:"40",color:"white",variant:"tonal",class:"me-3"},{default:a(()=>[o(p,{color:"warning",size:"24"},{default:a(()=>[...e[189]||(e[189]=[r("mdi-lightning-bolt",-1)])]),_:1})]),_:1}),s("div",Af,[s("div",Tf,d(u(i)("core.subscriptionManager.payWithFlux")),1),s("div",Ef,d(u(i)("core.subscriptionManager.cryptocurrencyPayment")),1)])])]),_:1}),o(De,{class:"pa-6"},{default:a(()=>[s("div",Df,[s("div",Nf,[o(Me,{variant:"outlined",class:"wallet-icon-card",onClick:ul,hover:""},{default:a(()=>[o(De,{class:"d-flex align-center justify-center pa-6"},{default:a(()=>[s("img",{class:"wallet-brand-icon mr-3",src:u(on),alt:"Zelcore"},null,8,Lf),e[190]||(e[190]=s("span",{class:"text-h6 font-weight-medium"},"Zelcore",-1))]),_:1})]),_:1}),o(Me,{variant:"outlined",class:"wallet-icon-card",onClick:dl,hover:""},{default:a(()=>[o(De,{class:"d-flex align-center justify-center pa-6"},{default:a(()=>[s("img",{class:"wallet-brand-icon mr-3",src:E.value,alt:"SSP"},null,8,If),e[191]||(e[191]=s("span",{class:"text-h6 font-weight-medium"},"SSP",-1))]),_:1})]),_:1})]),s("div",Ff,[o(z,{color:"primary",variant:"flat",size:"large"},{default:a(()=>[o(p,{start:"",size:"16"},{default:a(()=>[...e[192]||(e[192]=[r("mdi-lightning-bolt",-1)])]),_:1}),r(" "+d(Q.value?.flux||0)+" FLUX ",1),Q.value?.fluxDiscount>0?(b(),I(z,{key:0,color:"success",variant:"flat",size:"x-small",class:"ml-2"},{default:a(()=>[r(" -"+d(Q.value.fluxDiscount)+"% ",1)]),_:1})):C("",!0)]),_:1})]),o(Me,{variant:"flat"},{default:a(()=>[o(De,{class:"pa-4"},{default:a(()=>[s("div",Uf,[s("div",Bf,[s("div",Of,[o(p,{size:"16",class:"mr-1"},{default:a(()=>[...e[193]||(e[193]=[r("mdi-wallet",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.sendTo")),1)]),s("div",Rf,d(rt.value||u(i)("common.status.loading")),1),o(L,{icon:"",variant:"plain",size:"small",class:"copy-btn payment-field-copy","data-clipboard-text":rt.value,disabled:!rt.value},{default:a(()=>[o(p,{size:"20",color:"grey"},{default:a(()=>[...e[194]||(e[194]=[r("mdi-content-copy",-1)])]),_:1}),o(re,{activator:"parent",location:"top"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.copyAddress")),1)]),_:1})]),_:1},8,["data-clipboard-text","disabled"])])]),s("div",null,[s("div",jf,[s("div",Wf,[o(p,{size:"16",class:"mr-1"},{default:a(()=>[...e[195]||(e[195]=[r("mdi-message-text",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.message")),1)]),s("div",Jf,d(ae.value||u(i)("common.status.loading")),1),o(L,{icon:"",variant:"plain",size:"small",class:"copy-btn payment-field-copy","data-clipboard-text":ae.value,disabled:!ae.value},{default:a(()=>[o(p,{size:"20",color:"grey"},{default:a(()=>[...e[196]||(e[196]=[r("mdi-content-copy",-1)])]),_:1}),o(re,{activator:"parent",location:"top"},{default:a(()=>[r(d(u(i)("core.subscriptionManager.copyMessage")),1)]),_:1})]),_:1},8,["data-clipboard-text","disabled"])])])]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})])):C("",!0)])):C("",!0)],4)]),_:1})]),_:1},8,["modelValue"])):C("",!0)]),_:1}),o(ao,{modelValue:et.value.model,"onUpdate:modelValue":e[51]||(e[51]=n=>et.value.model=n),timeout:et.value.timeout,color:et.value.color,location:"top",elevation:4,variant:"flat",class:"mb-2"},{default:a(()=>[s("div",Hf,[et.value.icon?(b(),I(p,{key:0,icon:et.value.icon,class:"me-2"},null,8,["icon"])):C("",!0),s("span",null,d(et.value.text),1)])]),_:1},8,["modelValue","timeout","color"]),o(Rt,{modelValue:Wt.value,"onUpdate:modelValue":e[59]||(e[59]=n=>Wt.value=n),"max-width":"90%",persistent:""},{default:a(()=>[o(Me,{rounded:"xl"},{default:a(()=>[o(lt,{class:"d-flex justify-space-between align-center bg-primary"},{default:a(()=>[s("div",Gf,[o(p,{class:"ml-3 mr-2",color:"white"},{default:a(()=>[...e[197]||(e[197]=[r("mdi-server-network",-1)])]),_:1}),s("span",qf,d(c.appSpec?.version===7?u(i)("core.subscriptionManager.selectEnterpriseNodes"):u(i)("core.subscriptionManager.selectPriorityNodes")),1)]),o(L,{icon:"mdi-close",variant:"text",color:"white",size:"small",class:"mr-3 close-btn-hover",onClick:e[52]||(e[52]=n=>Wt.value=!1)})]),_:1}),o(De,null,{default:a(()=>[c.appSpec?.version===7?(b(),I(Ie,{key:0,type:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[s("strong",null,d(u(i)("core.subscriptionManager.enterpriseNodesLabel")),1),r(" "+d(u(i)("core.subscriptionManager.enterpriseNodesDescription")),1)]),_:1})):(b(),I(Ie,{key:1,type:"info",variant:"tonal",class:"mb-4"},{default:a(()=>[s("strong",null,d(u(i)("core.subscriptionManager.priorityNodesLabel")),1),r(" "+d(u(i)("core.subscriptionManager.priorityNodesDescription")),1)]),_:1})),o(mt,{class:"mb-4"},{default:a(()=>[o(Ce,{cols:"12",md:"6"},{default:a(()=>[o(be,{modelValue:Jt.value,"onUpdate:modelValue":e[53]||(e[53]=n=>Jt.value=n),label:u(i)("core.subscriptionManager.searchNodes"),clearable:"","hide-details":"",density:"compact"},{"prepend-inner":a(()=>[o(p,{size:"20"},{default:a(()=>[...e[198]||(e[198]=[r("mdi-magnify",-1)])]),_:1})]),_:1},8,["modelValue","label"])]),_:1}),o(Ce,{cols:"12",md:"3"},{default:a(()=>[o(ft,{modelValue:Ht.value,"onUpdate:modelValue":e[54]||(e[54]=n=>Ht.value=n),items:[5,10,25,50],label:u(i)("core.subscriptionManager.perPage"),"hide-details":"",density:"compact"},null,8,["modelValue","label"])]),_:1}),o(Ce,{cols:"12",md:"3",class:"d-flex align-center"},{default:a(()=>[o(z,{color:"primary",variant:"tonal"},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[199]||(e[199]=[r("mdi-check-circle",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.nodesSelected",{count:ve.value.length})),1)]),_:1})]),_:1})]),_:1}),o(xa,{border:"",rounded:"",class:"mt-2 mb-3"},{default:a(()=>[o(Uo,{headers:Yo.value,items:Cs.value,"items-per-page":-1,"hide-default-footer":"",loading:Ma.value,class:"elevation-1","item-value":"ip",expanded:ro.value,"onUpdate:expanded":e[55]||(e[55]=n=>ro.value=n),"show-expand":""},{"item.select":a(({item:n})=>[o(Io,{"model-value":n.isSelected,"onUpdate:modelValue":v=>Ps(n),"hide-details":""},null,8,["model-value","onUpdate:modelValue"])]),"expanded-row":a(({item:n,columns:v})=>[s("td",{colspan:v.length},[o(Me,{flat:"",class:"ma-2"},{default:a(()=>[o(De,null,{default:a(()=>[s("div",Zf,[s("strong",Yf,d(u(i)("core.subscriptionManager.ipAddressLabel")),1),s("span",null,d(n.ip),1)]),s("div",Xf,[s("strong",Qf,d(u(i)("core.subscriptionManager.publicKeyLabel")),1),s("span",ev,d(n.pubkey||"N/A"),1)]),s("div",tv,[s("strong",av,d(u(i)("core.subscriptionManager.nodeAddressLabel")),1),s("span",ov,d(n.payment_address),1)]),n.txhash&&n.outidx?(b(),P("div",sv,[s("strong",lv,d(u(i)("core.subscriptionManager.collateralLabel")),1),s("span",nv,d(n.txhash)+":"+d(n.outidx),1)])):C("",!0),s("div",rv,[s("strong",iv,d(u(i)("core.subscriptionManager.tierLabel")),1),r(" "+d(n.tier),1)]),s("div",uv,[s("strong",dv,d(u(i)("core.subscriptionManager.overallScore")),1),s("span",null,d(n.score),1)]),s("div",cv,[s("strong",pv,d(u(i)("core.subscriptionManager.collateralScoreLabel")),1),s("span",null,d(n.collateralPoints),1)]),s("div",mv,[s("strong",fv,d(u(i)("core.subscriptionManager.maturityScore")),1),s("span",null,d(n.maturityPoints),1)]),s("div",vv,[s("strong",gv,d(u(i)("core.subscriptionManager.publicKeyScoreLabel")),1),s("span",null,d(n.pubKeyPoints),1)]),s("div",bv,[s("strong",hv,d(u(i)("core.subscriptionManager.appsAssigned")),1),s("span",null,d(n.enterpriseApps),1)]),n.status?(b(),P("div",yv,[s("strong",xv,d(u(i)("core.subscriptionManager.statusLabel")),1),r(" "+d(n.status||"confirmed"),1)])):C("",!0),s("div",wv,[o(L,{size:"small",color:"primary",onClick:f=>_o(n.ip)},{default:a(()=>[r(d(u(i)("core.subscriptionManager.visitFluxNode")),1)]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024)],8,Kf)]),"item.tier":a(({item:n})=>[o(z,{color:n.tier==="CUMULUS"?"success":n.tier==="NIMBUS"?"warning":"error",size:"small",variant:"tonal"},{default:a(()=>[r(d(n.tier),1)]),_:2},1032,["color"])]),"item.score":a(({item:n})=>[s("span",_v,d(n.score),1)]),"item.status":a(({item:n})=>[o(z,{color:n.status==="confirmed"?"success":"warning",size:"small",variant:"tonal"},{default:a(()=>[r(d(n.status||"confirmed"),1)]),_:2},1032,["color"])]),loading:a(()=>[o(Al,{type:"table-row@10"})]),"no-data":a(()=>[s("div",kv,[o(p,{size:"48",color:"grey"},{default:a(()=>[...e[200]||(e[200]=[r("mdi-server-network-off",-1)])]),_:1}),s("p",Pv,d(Jt.value?u(i)("core.subscriptionManager.noNodesMatch"):u(i)("core.subscriptionManager.noNodesAvailable")),1)])]),_:1},8,["headers","items","loading","expanded"])]),_:1}),Ra.value.length>0?(b(),P("div",Mv,[o(L,{icon:"mdi-chevron-left",size:"small",variant:"text",disabled:At.value===1,onClick:e[56]||(e[56]=n=>At.value--)},null,8,["disabled"]),s("span",Sv,d(u(i)("core.subscriptionManager.pageOf",{current:At.value,total:Po.value})),1),o(L,{icon:"mdi-chevron-right",size:"small",variant:"text",disabled:At.value===Po.value,onClick:e[57]||(e[57]=n=>At.value++)},null,8,["disabled"])])):C("",!0)]),_:1}),o(Ot,{class:"px-6 pb-4 pt-0"},{default:a(()=>[o(L,{variant:"flat",color:"error",size:"small",class:"ml-3",onClick:e[58]||(e[58]=n=>Wt.value=!1)},{default:a(()=>[r(d(u(i)("common.buttons.cancel")),1)]),_:1}),o(Pt),o(L,{variant:"flat",color:"primary",size:"small",class:"mr-3",onClick:Ss,disabled:ve.value.length===0},{default:a(()=>[o(p,{class:"mr-1"},{default:a(()=>[...e[201]||(e[201]=[r("mdi-check",-1)])]),_:1}),r(" "+d(u(i)("core.subscriptionManager.saveSelection",{count:ve.value.length})),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Jo,{modelValue:Ha.value,"onUpdate:modelValue":e[60]||(e[60]=n=>Ha.value=n),type:"env",onImport:js},null,8,["modelValue"]),o(Jo,{modelValue:Ga.value,"onUpdate:modelValue":e[61]||(e[61]=n=>Ga.value=n),type:"commands",onImport:ts},null,8,["modelValue"]),o(Mu,{modelValue:qa.value,"onUpdate:modelValue":e[62]||(e[62]=n=>qa.value=n),onImport:as},null,8,["modelValue"]),o(Eu,{modelValue:ue.value,"onUpdate:modelValue":e[63]||(e[63]=n=>ue.value=n),"current-version":h.value,"target-version":u(Ve),onConfirm:ls},null,8,["modelValue","current-version","target-version"]),o(Rt,{modelValue:y.value,"onUpdate:modelValue":e[65]||(e[65]=n=>y.value=n),"max-width":"500"},{default:a(()=>[o(Me,{rounded:"xl",class:"overflow-hidden"},{default:a(()=>[o(lt,{class:"d-flex align-center gap-3 bg-primary text-white",style:{height:"52px","padding-inline":"16px"}},{default:a(()=>[o(p,{icon:"mdi-alert-circle",color:"orange",size:"28"}),s("span",$v,d(u(i)("core.subscriptionManager.popupBlocked")),1)]),_:1}),o(De,{class:"py-8 px-6 text-center"},{default:a(()=>[o(p,{icon:"mdi-block-helper",color:"orange",size:"64",class:"mb-4"}),s("p",zv,d(u(i)("core.subscriptionManager.popupBlockedMessage",{type:U.value})),1),s("p",Cv,d(u(i)("core.subscriptionManager.popupBlockedInstruction")),1)]),_:1}),o(Ot,{class:"pa-0 d-flex ga-0"},{default:a(()=>[o(L,{color:"error",variant:"flat",size:"large",class:"rounded-0 rounded-bl-xl popup-dialog-btn",style:{flex:"1","max-width":"50%"},onClick:e[64]||(e[64]=()=>{y.value=!1,To()})},{default:a(()=>[o(p,{start:"",icon:"mdi-close-circle"}),r(" "+d(u(i)("common.buttons.cancel")),1)]),_:1}),o(L,{color:"primary",variant:"flat",size:"large",class:"rounded-0 rounded-br-xl popup-dialog-btn",style:{flex:"1","max-width":"50%"},onClick:il},{default:a(()=>[o(p,{start:"",icon:"mdi-open-in-new"}),r(" "+d(u(i)("core.subscriptionManager.openPayment")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(Jl,{modelValue:ba.value,"onUpdate:modelValue":e[66]||(e[66]=n=>ba.value=n),message:Va.value,onSubmit:wl,onCancel:_l,onCopy:e[67]||(e[67]=n=>M("success",u(i)("core.subscriptionManager.copiedToClipboard")))},null,8,["modelValue","message"]),o(g,{modelValue:$t.value,"onUpdate:modelValue":e[68]||(e[68]=n=>$t.value=n),title:u(i)("core.subscriptionManager.tos.dialogTitle"),"agree-text":u(i)("core.subscriptionManager.tos.agree"),"disagree-text":u(i)("core.subscriptionManager.tos.disagree"),onAgree:Ne},null,8,["modelValue","title","agree-text","disagree-text"]),o(ao,{modelValue:zt.value,"onUpdate:modelValue":e[69]||(e[69]=n=>zt.value=n),color:"error",timeout:4e3,location:"top"},{default:a(()=>[s("div",Vv,[o(p,{icon:"mdi-alert-circle",class:"mr-2"}),s("span",null,d(u(i)("core.subscriptionManager.tos.errorMessage")),1)])]),_:1},8,["modelValue"])],64)}}},t1=wa(Tv,[["__scopeId","data-v-99e24fe1"]]);export{t1 as _};
