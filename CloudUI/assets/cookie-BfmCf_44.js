function m(i,n){if(typeof i!="string")throw new TypeError("argument str must be a string");const a={},e=n||{},s=e.decode||f;let r=0;for(;r<i.length;){const t=i.indexOf("=",r);if(t===-1)break;let o=i.indexOf(";",r);if(o===-1)o=i.length;else if(o<t){r=i.lastIndexOf(";",t-1)+1;continue}const d=i.slice(r,t).trim();if(e?.filter&&!e?.filter(d)){r=o+1;continue}if(a[d]===void 0){let c=i.slice(t+1,o).trim();c.codePointAt(0)===34&&(c=c.slice(1,-1)),a[d]=l(c,s)}r=o+1}return a}function f(i){return i.includes("%")?decodeURIComponent(i):i}function l(i,n){try{return n(i)}catch{return i}}const p=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function y(i,n,a){const e=a||{},s=e.encode||encodeURIComponent;if(typeof s!="function")throw new TypeError("option encode is invalid");if(!p.test(i))throw new TypeError("argument name is invalid");const r=s(n);if(r&&!p.test(r))throw new TypeError("argument val is invalid");let t=i+"="+r;if(e.maxAge!==void 0&&e.maxAge!==null){const o=e.maxAge-0;if(Number.isNaN(o)||!Number.isFinite(o))throw new TypeError("option maxAge is invalid");t+="; Max-Age="+Math.floor(o)}if(e.domain){if(!p.test(e.domain))throw new TypeError("option domain is invalid");t+="; Domain="+e.domain}if(e.path){if(!p.test(e.path))throw new TypeError("option path is invalid");t+="; Path="+e.path}if(e.expires){if(!u(e.expires)||Number.isNaN(e.expires.valueOf()))throw new TypeError("option expires is invalid");t+="; Expires="+e.expires.toUTCString()}if(e.httpOnly&&(t+="; HttpOnly"),e.secure&&(t+="; Secure"),e.priority)switch(typeof e.priority=="string"?e.priority.toLowerCase():e.priority){case"low":{t+="; Priority=Low";break}case"medium":{t+="; Priority=Medium";break}case"high":{t+="; Priority=High";break}default:throw new TypeError("option priority is invalid")}if(e.sameSite)switch(typeof e.sameSite=="string"?e.sameSite.toLowerCase():e.sameSite){case!0:{t+="; SameSite=Strict";break}case"lax":{t+="; SameSite=Lax";break}case"strict":{t+="; SameSite=Strict";break}case"none":{t+="; SameSite=None";break}default:throw new TypeError("option sameSite is invalid")}return e.partitioned&&(t+="; Partitioned"),t}function u(i){return Object.prototype.toString.call(i)==="[object Date]"||i instanceof Date}export{m as p,y as s};
